  <HTML>
  
<!-- Mirrored from www.php5.idv.tw/documents/mysql4tw/manual2.html by HTTrack Website Copier/3.x [XR&CO'2004], Mon, 25 Jul 2005 02:53:43 GMT -->
<HEAD>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.texi on 3 April 2003 -->

  <TITLE>MySQL Reference Manual for version 4.1.0-alpha.</TITLE>
   <style> code {color:purple} tt {color:green} samp {color:navy} pre {color:maroon} </style>
  </HEAD>
  <BODY BGCOLOR=silver TEXT=#000000 LINK=#101090 VLINK=#7030B0>
<H1>MySQL Reference Manual for version 4.1.0-alpha.</H1>
<P>
<P><HR><P>


<H1><A NAME="Table_types" HREF="manual_toc.html#Table_types">7  MySQL Table Types</A></H1>

<P>
<A NAME="IDX1521"></A>
<A NAME="IDX1522"></A>
<A NAME="IDX1523"></A>
<A NAME="IDX1524"></A>
<A NAME="IDX1525"></A>
<A NAME="IDX1526"></A>
<A NAME="IDX1527"></A>
<A NAME="IDX1528"></A>
<A NAME="IDX1529"></A>
<A NAME="IDX1530"></A>

</P>

<P>
As of MySQL Version 3.23.6, you can choose between three basic
table formats (<CODE>ISAM</CODE>, <CODE>HEAP</CODE> and <CODE>MyISAM</CODE>).  Newer
versions of MySQL support additional table types (<CODE>InnoDB</CODE>,
or <CODE>BDB</CODE>), depending on how you compile it.

</P>
<P>
When you create a new table, you can tell MySQL what type of table to create.
The default table type is usually <CODE>MyISAM</CODE>.

</P>

<P>
MySQL will always create a <TT>`.frm'</TT> file to hold the table and column
definitions. The table's index and data will be stored in one or more other
files, depending on the table type.

</P>
<P>
If you try to use a table type that is not compiled-in or activated,
MySQL will instead create a table of type <CODE>MyISAM</CODE>.  This behaviour
is convenient when you want to copy tables between MySQL servers that
support different table types. (Perhaps your master server supports
transactional storage engines for increased safety, while the slave servers use
only non-transactional storage engines for greater speed.)

</P>
<P>
This automatic change of table types can be confusing for new MySQL users.  We
plan to fix this by introducing warnings in the new client-server protocol in
version 4.1 and generating a warning when a table type is automatically changed.

</P>
<P>
You can convert tables between different types with the <CODE>ALTER
TABLE</CODE> statement. See section <A HREF="manual.html#ALTER_TABLE">6.5.4  <CODE>ALTER TABLE</CODE> Syntax</A>.

</P>
<P>
Note that MySQL supports two different kinds of
tables: transaction-safe tables (<CODE>InnoDB</CODE> and <CODE>BDB</CODE>)
and not transaction-safe tables (<CODE>HEAP</CODE>, <CODE>ISAM</CODE>,
<CODE>MERGE</CODE>, and <CODE>MyISAM</CODE>).

</P>
<P>
Advantages of transaction-safe tables (TST):

</P>

<UL>
<LI>

Safer. Even if MySQL crashes or you get hardware problems, you
can get your data back, either by automatic recovery or from a backup
+ the transaction log.
<LI>

You can combine many statements and accept these all in one go with
the <CODE>COMMIT</CODE> command.
<LI>

You can execute <CODE>ROLLBACK</CODE> to ignore your changes (if you are not
running in auto-commit mode).
<LI>

If an update fails, all your changes will be restored. (With NTST tables all
changes that have taken place are permanent)
<LI>

Can provide better concurrency if the table gets many updates concurrently
with reads.
</UL>

<P>
Note that to use <CODE>InnoDB</CODE> tables you have to use at least the
<CODE>innodb_data_file_path</CODE> startup option. See section <A HREF="manual.html#InnoDB_start">7.5.2  InnoDB Startup Options</A>.

</P>
<P>
Advantages of not transaction-safe tables (NTST):

</P>

<UL>
<LI>

Much faster as there is no transaction overhead.
<LI>

Will use less disk space as there is no overhead of transactions.
<LI>

Will use less memory to do updates.
</UL>

<P>
You can combine TST and NTST tables in the same statements to get the best
of both worlds.

</P>



<H2><A NAME="MyISAM" HREF="manual_toc.html#MyISAM">7.1  <CODE>MyISAM</CODE> Tables</A></H2>

<P>
<CODE>MyISAM</CODE> is the default table type in MySQL Version 3.23. It's
based on the <CODE>ISAM</CODE> code and has a lot of useful extensions.

</P>
<P>
The index is stored in a file with the <TT>`.MYI'</TT> (MYIndex) extension,
and the data is stored in a file with the <TT>`.MYD'</TT> (MYData) extension.
You can check/repair <CODE>MyISAM</CODE> tables with the <CODE>myisamchk</CODE>
utility. See section <A HREF="manual.html#Crash_recovery">4.4.6.7  Using <CODE>myisamchk</CODE> for Crash Recovery</A>. You can compress <CODE>MyISAM</CODE> tables with
<CODE>myisampack</CODE> to take up much less space.
See section <A HREF="manual.html#myisampack">4.7.4  <CODE>myisampack</CODE>, The MySQL Compressed Read-only Table Generator</A>.

</P>
<P>
The following is new in <CODE>MyISAM</CODE>:

</P>

<UL>
<LI>

There is a flag in the <CODE>MyISAM</CODE> file that indicates whether
the table was closed correctly.  If <CODE>mysqld</CODE> is started with
<CODE>--myisam-recover</CODE>, <CODE>MyISAM</CODE> tables will automatically be
checked and/or repaired on open if the table wasn't closed properly.
<LI>

You can <CODE>INSERT</CODE> new rows in a table that doesn't have free blocks
in the middle of the datafile, at the same time other threads are
reading from the table (concurrent insert).  An free block can come from
an update of a dynamic length row with much data to a row with less data
or when deleting rows. When all free blocks are used up, all future
inserts will be concurrent again.
<LI>

Support for big files (63-bit) on filesystems/operating systems that
support big files.
<LI>

All data is stored with the low byte first. This makes the data machine
and OS independent. The only requirement is that the machine uses
two's-complement signed integers (as every machine for the last 20 years
has) and IEEE floating-point format (also totally dominant among
mainstream machines). The only area of machines that may not support
binary compatibility are embedded systems (because they sometimes have
peculiar processors).

There is no big speed penalty in storing data low byte first; the bytes
in a table row is normally unaligned and it doesn't take that much more
power to read an unaligned byte in order than in reverse order.  The
actual fetch-column-value code is also not time critical compared to
other code.
<LI>

All number keys are stored with high byte first to give better index
compression.
<LI>

Internal handling of one <CODE>AUTO_INCREMENT</CODE> column. <CODE>MyISAM</CODE>
will automatically update this on <CODE>INSERT/UPDATE</CODE>. The
<CODE>AUTO_INCREMENT</CODE> value can be reset with <CODE>myisamchk</CODE>. This
will make <CODE>AUTO_INCREMENT</CODE> columns faster (at least 10%) and old
numbers will not be reused as with the old <CODE>ISAM</CODE>. Note that when an
<CODE>AUTO_INCREMENT</CODE> is defined on the end of a multi-part-key the old
behaviour is still present.
<LI>

When inserted in sorted order (as when you are using an <CODE>AUTO_INCREMENT</CODE>
column) the key tree will be split so that the high node only contains one
key. This will improve the space utilisation in the key tree.
<LI>

<CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns can be indexed.
<LI>

<CODE>NULL</CODE> values are allowed in indexed columns.  This takes 0-1
bytes/key.
<LI>

Maximum key length is 500 bytes by default (can be changed by
recompiling).  In cases of keys longer than 250 bytes, a bigger key
block size than the default of 1024 bytes is used for this key.
<LI>

Maximum number of keys/table is 32 as default. This can be enlarged to 64
without having to recompile <CODE>myisamchk</CODE>.
<LI>

<CODE>myisamchk</CODE> will mark tables as checked if one runs it with
<CODE>--update-state</CODE>. <CODE>myisamchk --fast</CODE> will only check those
tables that don't have this mark.
<LI>

<CODE>myisamchk -a</CODE> stores statistics for key parts (and not only for
whole keys as in <CODE>ISAM</CODE>).
<LI>

Dynamic size rows will now be much less fragmented when mixing deletes
with updates and inserts.  This is done by automatically combining adjacent
deleted blocks and by extending blocks if the next block is deleted.
<LI>

<CODE>myisampack</CODE> can pack <CODE>BLOB</CODE> and <CODE>VARCHAR</CODE> columns.
<LI>

You can use put the datafile and index file on different directories
to get more speed (with the <CODE>DATA/INDEX DIRECTORY="path"</CODE> option to
<CODE>CREATE TABLE</CODE>). See section <A HREF="manual.html#CREATE_TABLE">6.5.3  <CODE>CREATE TABLE</CODE> Syntax</A>.
</UL>

<P>
<CODE>MyISAM</CODE> also supports the following things, which MySQL
will be able to use in the near future:

</P>

<UL>
<LI>

Support for a true <CODE>VARCHAR</CODE> type; a <CODE>VARCHAR</CODE> column starts
with a length stored in 2 bytes.
<LI>

Tables with <CODE>VARCHAR</CODE> may have fixed or dynamic record length.
<LI>

<CODE>VARCHAR</CODE> and <CODE>CHAR</CODE> may be up to 64K.
All key segments have their own language definition. This will enable
MySQL to have different language definitions per column.
<LI>

A hashed computed index can be used for <CODE>UNIQUE</CODE>. This will allow
you to have <CODE>UNIQUE</CODE> on any combination of columns in a table. (You
can't search on a <CODE>UNIQUE</CODE> computed index, however.)
</UL>

<P>
Note that index files are usually much smaller with <CODE>MyISAM</CODE> than with
<CODE>ISAM</CODE>. This means that <CODE>MyISAM</CODE> will normally use less
system resources than <CODE>ISAM</CODE>, but will need more CPU time when inserting
data into a compressed index.

</P>
<P>
The following options to <CODE>mysqld</CODE> can be used to change the behaviour of
<CODE>MyISAM</CODE> tables. See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Option</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>--myisam-recover=#</CODE> </TD><TD> Automatic recovery of crashed tables.
</TD></TR>
<TR><TD><CODE>-O myisam_sort_buffer_size=#</CODE> </TD><TD> Buffer used when recovering tables.
</TD></TR>
<TR><TD><CODE>--delay-key-write=ALL</CODE> </TD><TD> Don't flush key buffers between writes for any MyISAM table
</TD></TR>
<TR><TD><CODE>-O myisam_max_extra_sort_file_size=#</CODE> </TD><TD> Used to help MySQL to decide when to use the slow but safe key cache index create method. <STRONG>Note</STRONG> that this parameter is given in megabytes before 4.0.3 and in bytes starting from this version.
</TD></TR>
<TR><TD><CODE>-O myisam_max_sort_file_size=#</CODE> </TD><TD> Don't use the fast sort index method to created index if the temporary file would get bigger than this.  <STRONG>Note</STRONG> that this parameter is given in megabytes before 4.0.3 and in bytes starting from this version.
</TD></TR>
<TR><TD><CODE>-O bulk_insert_buffer_size=#</CODE> </TD><TD> Size of tree cache used in bulk insert optimisation. <STRONG>Note</STRONG> that this is a limit <STRONG>per thread</STRONG>!
</TD></TR>
</TABLE>

<P>
The automatic recovery is activated if you start <CODE>mysqld</CODE> with
<CODE>--myisam-recover=#</CODE>. See section <A HREF="manual.html#Command-line_options">4.1.1  <CODE>mysqld</CODE> Command-line Options</A>.
On open, the table is checked if it's marked as crashed or if the open
count variable for the table is not 0 and you are running with
<CODE>--skip-external-locking</CODE>.  If either of the above is true the following
happens.

</P>

<UL>
<LI>

The table is checked for errors.
<LI>

If we found an error, try to do a fast repair (with sorting and without
re-creating the datafile) of the table.
<LI>

If the repair fails because of an error in the datafile (for example a
duplicate key error), we try again, but this time we re-create the datafile.
<LI>

If the repair fails, retry once more with the old repair option method
(write row by row without sorting) which should be able to repair any
type of error with little disk requirements..
</UL>

<P>
If the recover wouldn't be able to recover all rows from a previous
completed statement and you didn't specify <CODE>FORCE</CODE> as an option to
<CODE>myisam-recover</CODE>, then the automatic repair will abort with an error
message in the error file:

</P>

<PRE>
Error: Couldn't repair table: test.g00pages
</PRE>

<P>
If you in this case had used the <CODE>FORCE</CODE> option you would instead have got
a warning in the error file:

</P>

<PRE>
Warning: Found 344 of 354 rows when repairing ./test/g00pages
</PRE>

<P>
Note that if you run automatic recover with the <CODE>BACKUP</CODE> option,
you should have a <CODE>cron</CODE> script that automatically moves file with names
like <TT>`tablename-datetime.BAK'</TT> from the database directories to a
backup media.

</P>
<P>
See section <A HREF="manual.html#Command-line_options">4.1.1  <CODE>mysqld</CODE> Command-line Options</A>.

</P>



<H3><A NAME="Key_space" HREF="manual_toc.html#Key_space">7.1.1  Space Needed for Keys</A></H3>

<P>
<A NAME="IDX1531"></A>

</P>
<P>
MySQL can support different index types, but the normal type is
ISAM or MyISAM.  These use a B-tree index, and you can roughly calculate
the size for the index file as <CODE>(key_length+4)/0.67</CODE>, summed over
all keys.  (This is for the worst case when all keys are inserted in
sorted order and we don't have any compressed keys.)

</P>
<P>
String indexes are space compressed. If the first index part is a
string, it will also be prefix compressed.  Space compression makes the
index file smaller than the above figures if the string column has a lot
of trailing space or is a <CODE>VARCHAR</CODE> column that is not always used
to the full length. Prefix compression is used on keys that start
with a string.  Prefix compression helps if there are many strings
with an identical prefix.

</P>
<P>
In <CODE>MyISAM</CODE> tables, you can also prefix compress numbers by specifying
<CODE>PACK_KEYS=1</CODE> when you create the table.  This helps when you have
many integer keys that have an identical prefix when the numbers are stored
high-byte first.

</P>



<H3><A NAME="MyISAM_table_formats" HREF="manual_toc.html#MyISAM_table_formats">7.1.2  <CODE>MyISAM</CODE> Table Formats</A></H3>

<P>
<CODE>MyISAM</CODE> supports 3 different table types. Two of them are chosen
automatically depending on the type of columns you are using. The third,
compressed tables, can only be created with the <CODE>myisampack</CODE> tool.

</P>
<P>
When you <CODE>CREATE</CODE> or <CODE>ALTER</CODE> a table you can for tables that
doesn't have <CODE>BLOB</CODE>s force the table format to <CODE>DYNAMIC</CODE> or
<CODE>FIXED</CODE> with the <CODE>ROW_FORMAT=#</CODE> table option.  In the future
you will be able to compress/decompress tables by specifying
<CODE>ROW_FORMAT=compressed | default</CODE> to <CODE>ALTER TABLE</CODE>.
See section <A HREF="manual.html#CREATE_TABLE">6.5.3  <CODE>CREATE TABLE</CODE> Syntax</A>.

</P>



<H4><A NAME="Static_format" HREF="manual_toc.html#Static_format">7.1.2.1  Static (Fixed-length) Table Characteristics</A></H4>

<P>
This is the default format. It's used when the table contains no
<CODE>VARCHAR</CODE>, <CODE>BLOB</CODE>, or <CODE>TEXT</CODE> columns.

</P>
<P>
This format is the simplest and most secure format. It is also the
fastest of the on-disk formats. The speed comes from the easy way data
can be found on disk. When looking up something with an index and static
format it is very simple. Just multiply the row number by the row length.

</P>
<P>
Also, when scanning a table it is very easy to read a constant number of
records with each disk read.

</P>
<P>
The security is evidenced if your computer crashes when writing to a
fixed-size MyISAM file, in which case <CODE>myisamchk</CODE> can easily figure out where each
row starts and ends. So it can usually reclaim all records except the
partially written one. Note that in MySQL all indexes can always be
reconstructed:

</P>

<UL>
<LI>

All <CODE>CHAR</CODE>, <CODE>NUMERIC</CODE>, and <CODE>DECIMAL</CODE> columns are space-padded
to the column width.
<LI>

Very quick.
<LI>

Easy to cache.
<LI>

Easy to reconstruct after a crash, because records are located in fixed
positions.
<LI>

Doesn't have to be reorganised (with <CODE>myisamchk</CODE>) unless a huge number of
records are deleted and you want to return free disk space to the operating
system.
<LI>

Usually requires more disk space than dynamic tables.
</UL>



<H4><A NAME="Dynamic_format" HREF="manual_toc.html#Dynamic_format">7.1.2.2  Dynamic Table Characteristics</A></H4>

<P>
<A NAME="IDX1532"></A>
<A NAME="IDX1533"></A>

</P>
<P>
This format is used if the table contains any <CODE>VARCHAR</CODE>, <CODE>BLOB</CODE>,
or <CODE>TEXT</CODE> columns or if the table was created with
<CODE>ROW_FORMAT=dynamic</CODE>.

</P>
<P>
This format is a little more complex because each row has to have a header
that says how long it is. One record can also end up at more than one
location when it is made longer at an update.

</P>
<P>
<A NAME="IDX1534"></A>
You can use <CODE>OPTIMIZE table</CODE> or <CODE>myisamchk</CODE> to defragment a
table. If you have static data that you access/change a lot in the same
table as some <CODE>VARCHAR</CODE> or <CODE>BLOB</CODE> columns, it might be a good
idea to move the dynamic columns to other tables just to avoid
fragmentation:

</P>

<UL>
<LI>

All string columns are dynamic (except those with a length less than 4).
<LI>

Each record is preceded by a bitmap indicating which columns are empty
(<CODE>''</CODE>) for string columns, or zero for numeric columns. (This isn't
the same as columns containing <CODE>NULL</CODE> values.) If a string column
has a length of zero after removal of trailing spaces, or a numeric
column has a value of zero, it is marked in the bit map and not saved to
disk.  Non-empty strings are saved as a length byte plus the string
contents.
<LI>

Usually takes much less disk space than fixed-length tables.
<LI>

Each record uses only as much space as is required. If a record becomes
larger, it is split into as many pieces as are required.  This results in record
fragmentation.
<LI>

If you update a row with information that extends the row length, the
row will be fragmented.  In this case, you may have to run <CODE>myisamchk
-r</CODE> from time to time to get better performance.  Use <CODE>myisamchk -ei
tbl_name</CODE> for some statistics.
<LI>

Not as easy to reconstruct after a crash, because a record may be fragmented
into many pieces and a link (fragment) may be missing.
<LI>

The expected row length for dynamic sized records is:


<PRE>
3
+ (number of columns + 7) / 8
+ (number of char columns)
+ packed size of numeric columns
+ length of strings
+ (number of NULL columns + 7) / 8
</PRE>

There is a penalty of 6 bytes for each link. A dynamic record is linked
whenever an update causes an enlargement of the record. Each new link will be
at least 20 bytes, so the next enlargement will probably go in the same link.
If not, there will be another link. You may check how many links there are
with <CODE>myisamchk -ed</CODE>. All links may be removed with <CODE>myisamchk -r</CODE>.
</UL>



<H4><A NAME="Compressed_format" HREF="manual_toc.html#Compressed_format">7.1.2.3  Compressed Table Characteristics</A></H4>

<P>
<A NAME="IDX1535"></A>
<A NAME="IDX1536"></A>
<A NAME="IDX1537"></A>
<A NAME="IDX1538"></A>

</P>
<P>
This is a read-only type that is generated with the optional
<CODE>myisampack</CODE> tool (<CODE>pack_isam</CODE> for <CODE>ISAM</CODE> tables):

</P>

<UL>
<LI>

All MySQL distributions, even those that existed before MySQL
went GPL, can read tables that were compressed with <CODE>myisampack</CODE>.
<LI>

Compressed tables take very little disk space. This minimises disk usage, which
is very nice when using slow disks (like CD-ROMs).
<LI>

Each record is compressed separately (very little access overhead).  The
header for a record is fixed (1-3 bytes) depending on the biggest record in the
table.  Each column is compressed differently. Some of the compression types
are:

<UL>
<LI>

There is usually a different Huffman table for each column.
<LI>

Suffix space compression.
<LI>

Prefix space compression.
<LI>

Numbers with value <CODE>0</CODE> are stored using 1 bit.
<LI>

If values in an integer column have a small range, the column is stored using
the smallest possible type. For example, a <CODE>BIGINT</CODE> column (8 bytes) may
be stored as a <CODE>TINYINT</CODE> column (1 byte) if all values are in the range
<CODE>0</CODE> to <CODE>255</CODE>.
<LI>

If a column has only a small set of possible values, the column type is
converted to <CODE>ENUM</CODE>.
<LI>

A column may use a combination of the above compressions.
</UL>

<LI>

Can handle fixed- or dynamic-length records.
<LI>

Can be uncompressed with <CODE>myisamchk</CODE>.
</UL>



<H3><A NAME="MyISAM_table_problems" HREF="manual_toc.html#MyISAM_table_problems">7.1.3  <CODE>MyISAM</CODE> Table Problems</A></H3>

<P>
The file format that MySQL uses to store data has been extensively
tested, but there are always circumstances that may cause database tables
to become corrupted.

</P>



<H4><A NAME="Corrupted_MyISAM_tables" HREF="manual_toc.html#Corrupted_MyISAM_tables">7.1.3.1  Corrupted <CODE>MyISAM</CODE> Tables</A></H4>

<P>
Even if the MyISAM table format is very reliable (all changes to a table
is written before the SQL statements returns) , you can still get
corrupted tables if some of the following things happens:

</P>

<UL>
<LI>

The <CODE>mysqld</CODE> process being killed in the middle of a write.
<LI>

Unexpected shutdown of the computer (for example, if the computer is turned
off).
<LI>

A hardware error.
<LI>

You are using an external program (like myisamchk) on a live table.
<LI>

A software bug in the MySQL or MyISAM code.
</UL>

<P>
Typial typical symptoms for a corrupt table is:

</P>

<UL>
<LI>

You get the error <CODE>Incorrect key file for table: '...'. Try to repair it</CODE>
while selecting data from the table.
<LI>

Queries doesn't find rows in the table or returns incomplete data.
</UL>

<P>
You can check if a table is ok with the command <CODE>CHECK
TABLE</CODE>. See section <A HREF="manual.html#CHECK_TABLE">4.4.4  <CODE>CHECK TABLE</CODE> Syntax</A>.

</P>
<P>
You can repair a corrupted table with <CODE>REPAIR TABLE</CODE>. See section <A HREF="manual.html#REPAIR_TABLE">4.4.5  <CODE>REPAIR TABLE</CODE> Syntax</A>.
You can also repair a table, when <CODE>mysqld</CODE> is not running with
the <CODE>myisamchk</CODE> command. <CODE>myisamchk syntax</CODE>.

</P>
<P>
If your tables get corrupted a lot you should try to find the reason for
this! See section <A HREF="manual.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</A>.

</P>
<P>
In this case the most important thing to know is if the table got
corrupted if the <CODE>mysqld</CODE> died (one can easily verify this by
checking if there is a recent row <CODE>restarted mysqld</CODE> in the mysqld
error file).  If this isn't the case, then you should try to make a test
case of this.  See section <A HREF="manual.html#Reproduceable_test_case">E.1.6  Making a Test Case If You Experience Table Corruption</A>.

</P>



<H4><A NAME="MyISAM_table_close" HREF="manual_toc.html#MyISAM_table_close">7.1.3.2  Clients is using or hasn't closed the table properly</A></H4>

<P>
Each <CODE>MyISAM</CODE> <TT>`.MYI'</TT> file has in the header a counter that can
be used to check if a table has been closed properly.

</P>
<P>
If you get the following warning from <CODE>CHECK TABLE</CODE> or <CODE>myisamchk</CODE>:

</P>

<PRE>
# clients is using or hasn't closed the table properly
</PRE>

<P>
this means that this counter has come out of sync.  This doesn't mean
that the table is corrupted, but means that you should at least do a
check on the table to verify that it's okay.

</P>
<P>
The counter works as follows:

</P>

<UL>
<LI>

The first time a table is updated in MySQL, a counter in the
header of the index files is incremented.
<LI>

The counter is not changed during further updates.
<LI>

When the last instance of a table is closed (because of a <CODE>FLUSH</CODE> or
because there isn't room in the table cache) the counter is
decremented if the table has been updated at any point.
<LI>

When you repair the table or check the table and it was okay,
the counter is reset to 0.
<LI>

To avoid problems with interaction with other processes that may do a
check on the table, the counter is not decremented on close if it was 0.
</UL>

<P>
In other words, the only ways this can go out of sync are:

</P>

<UL>
<LI>

The <CODE>MyISAM</CODE> tables are copied without a <CODE>LOCK</CODE> and
<CODE>FLUSH TABLES</CODE>.
<LI>

MySQL has crashed between an update and the final close.
(Note that the table may still be okay, as MySQL always issues writes
for everything between each statement.)
<LI>

Someone has done a <CODE>myisamchk --recover</CODE> or <CODE>myisamchk
--update-state</CODE>on a table that was in use by <CODE>mysqld</CODE>.
<LI>

Many <CODE>mysqld</CODE> servers are using the table and one has done a
<CODE>REPAIR</CODE> or <CODE>CHECK</CODE> of the table while it was in use by
another server.  In this setup the <CODE>CHECK</CODE> is safe to do (even if
you will get the warning from other servers), but <CODE>REPAIR</CODE> should
be avoided as it currently replaces the datafile with a new one, which
is not signaled to the other servers.
</UL>



<H2><A NAME="MERGE" HREF="manual_toc.html#MERGE">7.2  <CODE>MERGE</CODE> Tables</A></H2>

<P>
<A NAME="IDX1539"></A>
<A NAME="IDX1540"></A>

</P>
<P>
<CODE>MERGE</CODE> tables are new in MySQL Version 3.23.25. The code
is still in gamma, but should be reasonable stable.

</P>
<P>
A <CODE>MERGE</CODE> table (also known as a <CODE>MRG_MyISAM</CODE> table) is a
collection of identical <CODE>MyISAM</CODE> tables that can be used as one.
You can only <CODE>SELECT</CODE>, <CODE>DELETE</CODE>, and <CODE>UPDATE</CODE> from the
collection of tables.  If you <CODE>DROP</CODE> the <CODE>MERGE</CODE> table, you
are only dropping the <CODE>MERGE</CODE> specification.

</P>
<P>
Note that <CODE>DELETE FROM merge_table</CODE> used without a <CODE>WHERE</CODE>
will only clear the mapping for the table, not delete everything in the
mapped tables. (We plan to fix this in 4.1).

</P>
<P>
With identical tables we mean that all tables are created with identical
column and key information.  You can't merge tables in which the
columns are packed differently, doesn't have exactly the same columns,
or have the keys in different order.  However, some of the tables can be
compressed with <CODE>myisampack</CODE>.  See section <A HREF="manual.html#myisampack">4.7.4  <CODE>myisampack</CODE>, The MySQL Compressed Read-only Table Generator</A>.

</P>
<P>
When you create a <CODE>MERGE</CODE> table, you will get a <TT>`.frm'</TT> table
definition file and a <TT>`.MRG'</TT> table list file.  The <TT>`.MRG'</TT> just
contains a list of the index files (<TT>`.MYI'</TT> files) that should
be used as one.  All used tables must be in the same database as the
<CODE>MERGE</CODE> table itself.

</P>
<P>
For the moment, you need to have <CODE>SELECT</CODE>, <CODE>UPDATE</CODE>, and
<CODE>DELETE</CODE> privileges on the tables you map to a <CODE>MERGE</CODE> table.

</P>
<P>
<CODE>MERGE</CODE> tables can help you solve the following problems:

</P>

<UL>
<LI>

Easily manage a set of log tables. For example, you can put data from
different months into separate files, compress some of them with
<CODE>myisampack</CODE>, and then create a <CODE>MERGE</CODE> to use these as one.
<LI>

Give you more speed. You can split a big read-only table based on some
criteria and then put the different table part on different disks.
A <CODE>MERGE</CODE> table on this could be much faster than using
the big table. (You can, of course, also use a RAID to get the same
kind of benefits.)
<LI>

Do more efficient searches. If you know exactly what you are looking
after, you can search in just one of the split tables for some queries
and use a <CODE>MERGE</CODE> table for others.  You can even have many
different <CODE>MERGE</CODE> tables active, with possible overlapping files.
<LI>

More efficient repairs. It's easier to repair the individual files that
are mapped to a <CODE>MERGE</CODE> file than trying to repair a really big file.
<LI>

Instant mapping of many files as one. A <CODE>MERGE</CODE> table uses the
index of the individual tables. It doesn't need to maintain an index of
its one.  This makes <CODE>MERGE</CODE> table collections VERY fast to make or
remap.  Note that you must specify the key definitions when you create
a <CODE>MERGE</CODE> table!.
<LI>

If you have a set of tables that you join to a big table on demand or
batch, you should instead create a <CODE>MERGE</CODE> table on them on demand.
This is much faster and will save a lot of disk space.
<LI>

Go around the file-size limit for the operating system.
<LI>

You can create an alias/synonym for a table by just using <CODE>MERGE</CODE>
over one table. There shouldn't be any really notable performance
impacts of doing this (only a couple of indirect calls and <CODE>memcpy()</CODE>
calls for each read).
</UL>

<P>
The disadvantages with <CODE>MERGE</CODE> tables are:

</P>

<UL>
<LI>

You can only use identical <CODE>MyISAM</CODE> tables for a <CODE>MERGE</CODE> table.
<LI>

<CODE>REPLACE</CODE> doesn't work.
<LI>

<CODE>MERGE</CODE> tables uses more file descriptors. If you are using a
<CODE>MERGE</CODE> table that maps over 10 tables and 10 users are using this, you
are using 10*10 + 10 file descriptors.  (10 datafiles for 10 users
and 10 shared index files.)
<LI>

Key reads are slower. When you do a read on a key, the <CODE>MERGE</CODE>
storage engine will need to issue a read on all underlying tables to check
which one most closely matches the given key.  If you then do a "read-next"
then the <CODE>MERGE</CODE> storage engine will need to search the read buffers
to find the next key. Only when one key buffer is used up, the storage engine
will need to read the next key block. This makes <CODE>MERGE</CODE> keys much slower
on <CODE>eq_ref</CODE> searches, but not much slower on <CODE>ref</CODE> searches.
See section <A HREF="manual.html#EXPLAIN">5.2.1  <CODE>EXPLAIN</CODE> Syntax (Get Information About a <CODE>SELECT</CODE>)</A>.
<LI>

You can't do
<CODE>DROP TABLE</CODE>,
<CODE>ALTER TABLE</CODE>,
<CODE>DELETE FROM table_name</CODE> without a <CODE>WHERE</CODE> clause,
<CODE>REPAIR TABLE</CODE>,
<CODE>TRUNCATE TABLE</CODE>,
<CODE>OPTIMIZE TABLE</CODE>, or
<CODE>ANALYZE TABLE</CODE>
on any of the table that is
mapped by a <CODE>MERGE</CODE> table that is "open".  If you do this, the
<CODE>MERGE</CODE> table may still refer to the original table and you will
get unexpected results. The easiest way to get around this deficiency
is to issue the <CODE>FLUSH TABLES</CODE> command, ensuring no <CODE>MERGE</CODE>
tables remain "open".
</UL>

<P>
When you create a <CODE>MERGE</CODE> table you have to specify with
<CODE>UNION(list-of-tables)</CODE> which tables you want to use as
one. Optionally you can specify with <CODE>INSERT_METHOD</CODE> if you want
insert for the <CODE>MERGE</CODE> table to happen in the first or last table
in the <CODE>UNION</CODE> list. If you don't specify <CODE>INSERT_METHOD</CODE> or
specify <CODE>NO</CODE>, then all <CODE>INSERT</CODE> commands on the <CODE>MERGE</CODE>
table will return an error.

</P>
<P>
The following example shows you how to use <CODE>MERGE</CODE> tables:

</P>

<PRE>
CREATE TABLE t1 (a INT AUTO_INCREMENT PRIMARY KEY, message CHAR(20));
CREATE TABLE t2 (a INT AUTO_INCREMENT PRIMARY KEY, message CHAR(20));
INSERT INTO t1 (message) VALUES ("Testing"),("table"),("t1");
INSERT INTO t2 (message) VALUES ("Testing"),("table"),("t2");
CREATE TABLE total (a INT AUTO_INCREMENT PRIMARY KEY, message CHAR(20))
             TYPE=MERGE UNION=(t1,t2) INSERT_METHOD=LAST;
</PRE>

<P>
Note that you can also manipulate the <TT>`.MRG'</TT> file directly from
the outside of the MySQL server:

</P>

<PRE>
shell&#62; cd /mysql-data-directory/current-database
shell&#62; ls -1 t1.MYI t2.MYI &#62; total.MRG
shell&#62; mysqladmin flush-tables
</PRE>

<P>
Now you can do things like:

</P>

<PRE>
mysql&#62; SELECT * FROM total;
+---+---------+
| a | message |
+---+---------+
| 1 | Testing |
| 2 | table   |
| 3 | t1      |
| 1 | Testing |
| 2 | table   |
| 3 | t2      |
+---+---------+
</PRE>

<P>
Note that the <CODE>a</CODE> column, though declared as <CODE>PRIMARY KEY</CODE>,
is not really unique, as <CODE>MERGE</CODE> table cannot enforce uniqueness
over a set of underlying <CODE>MyISAM</CODE> tables.

</P>
<P>
To remap a <CODE>MERGE</CODE> table you can do one of the following:

</P>

<UL>
<LI>

<CODE>DROP</CODE> the table and re-create it
<LI>

Use <CODE>ALTER TABLE table_name UNION(...)</CODE>
<LI>

Change the <TT>`.MRG'</TT> file and issue a <CODE>FLUSH TABLE</CODE> on the
<CODE>MERGE</CODE> table and all underlying tables to force the storage engine to
read the new definition file.
</UL>



<H3><A NAME="MERGE_table_problems" HREF="manual_toc.html#MERGE_table_problems">7.2.1  <CODE>MERGE</CODE> Table Problems</A></H3>

<P>
The following are the known problems with <CODE>MERGE</CODE> tables:

</P>

<UL>
<LI>

A <CODE>MERGE</CODE> table cannot maintain <CODE>UNIQUE</CODE> constraints over the
whole table.  When you do <CODE>INSERT</CODE>, the data goes into the first or
last table (according to <CODE>INSERT_METHOD=xxx</CODE>) and this <CODE>MyISAM</CODE>
table ensures that the data are unique, but it knows nothing about
others <CODE>MyISAM</CODE> tables.
<LI>

<CODE>DELETE FROM merge_table</CODE> used without a <CODE>WHERE</CODE>
will only clear the mapping for the table, not delete everything in the
mapped tables.
<LI>

<CODE>RENAME TABLE</CODE> on a table used in an active <CODE>MERGE</CODE> table may
corrupt the table.  This will be fixed in MySQL 4.0.x.
<LI>

Creation of a table of type <CODE>MERGE</CODE> doesn't check if the underlying
tables are of compatible types.  If you use <CODE>MERGE</CODE> tables in this
fashion, you are very likely to run into strange problems.
<LI>

If you use <CODE>ALTER TABLE</CODE> to first add an <CODE>UNIQUE</CODE> index to a
table used in a <CODE>MERGE</CODE> table and then use <CODE>ALTER TABLE</CODE> to
add a normal index on the <CODE>MERGE</CODE> table, the key order will be
different for the tables if there was an old non-unique key in the
table. This is because <CODE>ALTER TABLE</CODE> puts <CODE>UNIQUE</CODE> keys before
normal keys to be able to detect duplicate keys as early as possible.
<LI>

The range optimiser can't yet use <CODE>MERGE</CODE> table efficiently and may
sometimes produce non-optimal joins.  This will be fixed in MySQL 4.0.x.
<LI>

<CODE>DROP TABLE</CODE> on a table that is in use by a <CODE>MERGE</CODE> table will
not work on Windows because the <CODE>MERGE</CODE> storage engine does the table mapping
hidden from the upper layer of MySQL.  Because Windows doesn't allow you
to drop files that are open, you first must flush all <CODE>MERGE</CODE>
tables (with <CODE>FLUSH TABLES</CODE>) or drop the <CODE>MERGE</CODE> table before
dropping the table.  We will fix this at the same time we introduce
<CODE>VIEW</CODE>s.
</UL>



<H2><A NAME="ISAM" HREF="manual_toc.html#ISAM">7.3  <CODE>ISAM</CODE> Tables</A></H2>

<P>
<A NAME="IDX1541"></A>

</P>
<P>
You can also use the deprecated <CODE>ISAM</CODE> table type. This will disappear
rather soon (probably in MySQL 5.0) because <CODE>MyISAM</CODE> is a better
implementation of the same thing. <CODE>ISAM</CODE> uses a <CODE>B-tree</CODE> index. The
index is stored in a file with the <TT>`.ISM'</TT> extension, and the data
is stored in a file with the <TT>`.ISD'</TT> extension.  You can
check/repair <CODE>ISAM</CODE> tables with the <CODE>isamchk</CODE> utility. See section <A HREF="manual.html#Crash_recovery">4.4.6.7  Using <CODE>myisamchk</CODE> for Crash Recovery</A>.

</P>
<P>
<CODE>ISAM</CODE> has the following features/properties:

</P>

<UL>
<LI>Compressed and fixed-length keys

<LI>Fixed and dynamic record length

<LI>16 keys with 16 key parts/key

<LI>Max key length 256 (default)

<LI>Data is stored in machine format; this is fast, but is machine/OS dependent.

</UL>

<P>
Most of the things true for <CODE>MyISAM</CODE> tables are also true for <CODE>ISAM</CODE>
tables. See section <A HREF="manual.html#MyISAM">7.1  <CODE>MyISAM</CODE> Tables</A>. The major differences compared
to <CODE>MyISAM</CODE> tables are:

</P>

<UL>
<LI><CODE>ISAM</CODE> tables are not binary portable across OS/Platforms.

<LI>Can't handle tables &#62; 4G.

<LI>Only support prefix compression on strings.

<LI>Smaller key limits.

<LI>Dynamic tables get more fragmented.

<LI>Tables are compressed with <CODE>pack_isam</CODE> rather than with <CODE>myisampack</CODE>.

</UL>

<P>
If you want to convert an <CODE>ISAM</CODE> table to a <CODE>MyISAM</CODE> table so
that you can use utilities such as <CODE>mysqlcheck</CODE>, use an <CODE>ALTER
TABLE</CODE> statement:

</P>

<PRE>
mysql&#62; ALTER TABLE tbl_name TYPE = MYISAM;
</PRE>

<P>
The embedded MySQL versions doesn't support <CODE>ISAM</CODE> tables.

</P>


<H2><A NAME="HEAP" HREF="manual_toc.html#HEAP">7.4  <CODE>HEAP</CODE> Tables</A></H2>

<P>
<A NAME="IDX1542"></A>

</P>
<P>
<CODE>HEAP</CODE> tables use hashed indexes and are stored in memory.  This
makes them very fast, but if MySQL crashes you will lose all
data stored in them.  <CODE>HEAP</CODE> is very useful for temporary tables!

</P>
<P>
The MySQL internal <CODE>HEAP</CODE> tables use 100% dynamic hashing
without overflow areas. There is no extra space needed for free lists.
<CODE>HEAP</CODE> tables also don't have problems with delete + inserts, which
normally is common with hashed tables:

</P>

<PRE>
mysql&#62; CREATE TABLE test TYPE=HEAP SELECT ip,SUM(downloads) AS down
    -&#62;                   FROM log_table GROUP BY ip;
mysql&#62; SELECT COUNT(ip),AVG(down) FROM test;
mysql&#62; DROP TABLE test;
</PRE>

<P>
Here are some things you should consider when you use <CODE>HEAP</CODE> tables:

</P>

<UL>
<LI>

You should always use specify <CODE>MAX_ROWS</CODE> in the <CODE>CREATE</CODE> statement
to ensure that you accidentally do not use all memory.
<LI>

Indexes will only be used with <CODE>=</CODE> and <CODE>&#60;=&#62;</CODE> (but are VERY fast).
<LI>

<CODE>HEAP</CODE> tables can only use whole keys to search for a row; compare this
to <CODE>MyISAM</CODE> tables where any prefix of the key can be used to find rows.
<LI>

<CODE>HEAP</CODE> tables use a fixed record length format.
<LI>

<CODE>HEAP</CODE> doesn't support <CODE>BLOB</CODE>/<CODE>TEXT</CODE> columns.
<LI>

<CODE>HEAP</CODE> doesn't support <CODE>AUTO_INCREMENT</CODE> columns.
<LI>

Prior to MySQL 4.0.2, <CODE>HEAP</CODE> doesn't support an index on a <CODE>NULL</CODE>
column.
<LI>

You can have non-unique keys in a <CODE>HEAP</CODE> table (this isn't common for
hashed tables).
<LI>

<CODE>HEAP</CODE> tables are shared between all clients (just like any other
table).
<LI>

You can't search for the next entry in order (that is, to use the index
to do an <CODE>ORDER BY</CODE>).
<LI>

Data for <CODE>HEAP</CODE> tables are allocated in small blocks. The tables
are 100% dynamic (on inserting). No overflow areas and no extra key
space are needed.  Deleted rows are put in a linked list and are
reused when you insert new data into the table.
<LI>

You need enough extra memory for all <CODE>HEAP</CODE> tables that you want to use at
the same time.
<LI>

To free memory, you should execute <CODE>DELETE FROM heap_table</CODE>,
<CODE>TRUNCATE heap_table</CODE> or <CODE>DROP TABLE heap_table</CODE>.
<LI>

MySQL cannot find out approximately how many rows there
are between two values (this is used by the range optimiser to decide which
index to use).  This may affect some queries if you change a <CODE>MyISAM</CODE>
table to a <CODE>HEAP</CODE> table.
<LI>

To ensure that you accidentally don't do anything foolish, you can't create
<CODE>HEAP</CODE> tables bigger than <CODE>max_heap_table_size</CODE>.
</UL>

<P>
The memory needed for one row in a <CODE>HEAP</CODE> table is:

</P>

<PRE>
SUM_OVER_ALL_KEYS(max_length_of_key + sizeof(char*) * 2)
+ ALIGN(length_of_row+1, sizeof(char*))
</PRE>

<P>
<CODE>sizeof(char*)</CODE> is 4 on 32-bit machines and 8 on 64-bit machines.

</P>



<H2><A NAME="InnoDB" HREF="manual_toc.html#InnoDB">7.5  <CODE>InnoDB</CODE> Tables</A></H2>



<H3><A NAME="InnoDB_overview" HREF="manual_toc.html#InnoDB_overview">7.5.1  InnoDB Tables Overview</A></H3>

<P>
<A NAME="IDX1543"></A>
<A NAME="IDX1544"></A>
<A NAME="IDX1545"></A>

</P>
<P>
InnoDB provides MySQL with a transaction-safe (<CODE>ACID</CODE> compliant)
storage engine with commit, rollback, and crash recovery capabilities.
InnoDB does locking on row level and also provides an Oracle-style
consistent
non-locking read in <CODE>SELECT</CODE>s. These features increase
multiuser concurrency and performance. There is no need for
lock escalation in InnoDB,
because row level locks in InnoDB fit in very small space.
InnoDB tables support <CODE>FOREIGN KEY</CODE> constraints
as the first table type in MySQL.

</P>
<P>
InnoDB has been designed for maximum performance
when processing
large data volumes. Its CPU efficiency is probably not
matched by any other disk-based relational database engine.

</P>
<P>
Technically, InnoDB is a complete database backend placed under MySQL.
InnoDB has its own buffer pool for caching data and indexes in main
memory. InnoDB stores its tables and indexes in a tablespace, which
may consist of several files. This is different from, for example,
MyISAM tables where each table is stored as a separate file.
InnoDB tables can be of any size also on those operating
systems where file-size is limited to 2 GB.

</P>
<P>
You can find the latest information about InnoDB at
<a HREF="http://www.innodb.com/">http://www.innodb.com/</a>. The most up-to-date version of the
InnoDB manual is always placed there, and you can also order
commercial licenses and support for InnoDB.

</P>
<P>
InnoDB is currently (October 2001) used in production at
several large database sites requiring high performance.
The famous Internet news site Slashdot.org runs on
InnoDB. Mytrix, Inc. stores over 1 TB of data in
InnoDB, and another site handles an average
load of 800 inserts/updates per second in InnoDB.

</P>
<P>
InnoDB tables are included in the MySQL source distribution
starting from 3.23.34a and are activated in the MySQL -Max
binary. For Windows the -Max binaries are contained in the
standard distribution.

</P>
<P>
If you have downloaded a binary version of MySQL that includes
support for InnoDB, simply follow the instructions of the
MySQL manual
for installing a binary version of MySQL. If you already have
MySQL-3.23 installed, then the simplest way to install
MySQL -Max is to replace the server executable <TT>`mysqld'</TT>
with the corresponding executable in the -Max distribution.
MySQL and MySQL -Max differ only in the server executable.
See section <A HREF="manual.html#Installing_binary">2.2.11  Installing a MySQL Binary Distribution</A>.
See section <A HREF="manual.html#mysqld-max">4.7.5  <CODE>mysqld-max</CODE>, An Extended <CODE>mysqld</CODE> Server</A>.

</P>
<P>
To compile MySQL with InnoDB support,
download MySQL-3.23.34a or newer version from
<a HREF="http://www.mysql.com/">http://www.mysql.com/</a>
and configure MySQL with the
<CODE>--with-innodb</CODE> option. See the
MySQL manual
about installing a MySQL source distribution.
See section <A HREF="manual.html#Installing_source">2.3  Installing a MySQL Source Distribution</A>.

</P>

<PRE>
cd /path/to/source/of/mysql-3.23.37
./configure --with-innodb
</PRE>

<P>
To use InnoDB you have to specify InnoDB startup options in
your <TT>`my.cnf'</TT> or <TT>`my.ini'</TT> file. The minimal way
to modify it is to add to the <CODE>[mysqld]</CODE> section the line

</P>

<PRE>
innodb_data_file_path=ibdata:30M
</PRE>

<P>
but to get good performance it is best that you specify options
as recommended. See section <A HREF="manual.html#InnoDB_start">7.5.2  InnoDB Startup Options</A>.

</P>
<P>
InnoDB is distributed under the GNU GPL License Version 2 (of June 1991).
In the source distribution of MySQL, InnoDB appears as a subdirectory.

</P>



<H3><A NAME="InnoDB_start" HREF="manual_toc.html#InnoDB_start">7.5.2  InnoDB Startup Options</A></H3>

<P>
To use InnoDB tables in MySQL-Max-3.23 you MUST specify configuration
parameters
in the <CODE>[mysqld]</CODE> section of
the configuration file <TT>`my.cnf'</TT>, or on Windows optionally in
<TT>`my.ini'</TT>.

</P>
<P>
At the minimum, in 3.23 you must specify <CODE>innodb_data_file_path</CODE>
where you specify the names and the sizes of datafiles. If you do
not mention <CODE>innodb_data_home_dir</CODE> in <TT>`my.cnf'</TT> the default
is to create these files to the <CODE>datadir</CODE> of MySQL.
If you specify <CODE>innodb_data_home_dir</CODE> as an empty string,
then you can give absolute paths to your data files in
<CODE>innodb_data_file_path</CODE>.
In MySQL-4.0 you do not need to specify even
<CODE>innodb_data_file_path</CODE>: the default for it is to create
an auto-extending 10 MB file <TT>`ibdata1'</TT> to the <CODE>datadir</CODE>
of MySQL. (In MySQL-4.0.0 and 4.0.1 the datafile is 64 MB and not
auto-extending.)

</P>
<P>
If you don't want to use <CODE>InnoDB</CODE> tables, you can add the
<CODE>skip-innodb</CODE> option to your MySQL option file.

</P>
<P>
But to get good performance you MUST explicitly set the InnoDB parameters
listed in the following examples.

</P>
<P>
Starting from versions 3.23.50 and 4.0.2 InnoDB allows the last
datafile on the <CODE>innodb_data_file_path</CODE> line
to be specified as <STRONG>auto-extending</STRONG>. The syntax for
<CODE>innodb_data_file_path</CODE> is then the following:

<PRE>
pathtodatafile:sizespecification;pathtodatafile:sizespecification;...
...  ;pathtodatafile:sizespecification[:autoextend[:max:sizespecification]]
</PRE>

<P>
If you specify the last datafile with the autoextend option, InnoDB
will extend the last datafile if it runs out of free space in the
tablespace. The increment is 8 MB at a time. An example:

<PRE>
innodb_data_home_dir =
innodb_data_file_path = /ibdata/ibdata1:100M:autoextend
</PRE>

<P>
instructs InnoDB to create just a single datafile whose initial size is
100 MB and which is extended in 8 MB blocks when space runs out.
If the disk becomes full you may want to add another data
file to another disk, for example. Then you have to look the size
of <TT>`ibdata1'</TT>, round the size downward to
the closest multiple of 1024 * 1024 bytes (= 1 MB), and specify
the rounded size of <TT>`ibdata1'</TT> explicitly in
<CODE>innodb_data_file_path</CODE>.
After that you can add another datafile:

<PRE>
innodb_data_home_dir =
innodb_data_file_path = /ibdata/ibdata1:988M;/disk2/ibdata2:50M:autoextend
</PRE>

<P>
Be cautious on filesystems where the maximum file-size is 2 GB!
InnoDB is not aware of the OS maximum file-size. On those filesystems
you might want to specify the max size for the datafile:

<PRE>
innodb_data_home_dir =
innodb_data_file_path = /ibdata/ibdata1:100M:autoextend:max:2000M
</PRE>

<P>
<STRONG>A simple <TT>`my.cnf'</TT> example.</STRONG> Suppose you have a computer
with 128 MB RAM and one hard disk. Below is an example of
possible configuration parameters in <TT>`my.cnf'</TT> or
<TT>`my.ini'</TT> for InnoDB. We assume you are running
MySQL-Max-3.23.50 or later, or MySQL-4.0.2 or later.
This example suits most users, both on Unix and Windows,
who do not want to distribute InnoDB datafiles and
log files on several disks. This creates an
auto-extending data file <TT>`ibdata1'</TT> and two InnoDB log files
<TT>`ib_logfile0'</TT> and <TT>`ib_logfile1'</TT> to the
<CODE>datadir</CODE> of MySQL (typically <TT>`/mysql/data'</TT>).
Also the small archived InnoDB log file
<TT>`ib_arch_log_0000000000'</TT> ends up in the <CODE>datadir</CODE>. 

</P>

<PRE>
[mysqld]
# You can write your other MySQL server options here
# ...
#                                  Data file(s) must be able to
#                                  hold your data and indexes.
#                                  Make sure you have enough
#                                  free disk space.
innodb_data_file_path = ibdata1:10M:autoextend
#                                  Set buffer pool size to
#                                  50 - 80 % of your computer's
#                                  memory
set-variable = innodb_buffer_pool_size=70M
set-variable = innodb_additional_mem_pool_size=10M
#                                  Set the log file size to about
#                                  25 % of the buffer pool size
set-variable = innodb_log_file_size=20M
set-variable = innodb_log_buffer_size=8M
#                                  Set ..flush_log_at_trx_commit
#                                  to 0 if you can afford losing
#                                  some last transactions 
innodb_flush_log_at_trx_commit=1
</PRE>

<P>
<STRONG>Check that the MySQL server has the rights to create files</STRONG> in
<CODE>datadir</CODE>. 

</P>
<P>
Note that datafiles must be &#60; 2G in some file systems!
The combined size of the log files must be &#60; 4G. The combined
size of datafiles must be &#62;= 10 MB. 

</P>
<P>
When you for the first time create an InnoDB database, it is
best that you start the MySQL server from the command prompt.
Then InnoDB will print the information about the database
creation to the screen, and you see what is happening.
See below next section what the printout should look like.
For example, in Windows you can start <TT>`mysqld-max.exe'</TT> with: 

</P>

<PRE>
your-path-to-mysqld&#62;mysqld-max --console
</PRE>

<P>
<STRONG>Where to put <TT>`my.cnf'</TT> or <TT>`my.ini'</TT> in Windows?</STRONG>
The rules for Windows are the following:

<UL>
<LI>Only one of <TT>`my.cnf'</TT> or <TT>`my.ini'</TT> should be created.

<LI>The <TT>`my.cnf'</TT> file should be placed in the root

directory of the drive <TT>`C:'</TT>.
<LI>The <TT>`my.ini'</TT> file should be placed in the WINDIR directory, e.g,

<TT>`C:\WINDOWS'</TT> or <TT>`C:\WINNT'</TT>. You can use the <CODE>SET</CODE>
command of MS-DOS to print the value of WINDIR.
<LI>If your PC uses a boot loader where the <TT>`C:'</TT> drive

is not the boot drive, then your only option is to use the <TT>`my.ini'</TT> file.
</UL>

<P>
<STRONG>Where to specify options in Unix?</STRONG>
On Unix <TT>`mysqld'</TT> reads options from the following files, if they exist,
in the following order: 

<UL>
<LI><TT>`/etc/my.cnf'</TT>  Global options.

<LI><TT>`COMPILATION_DATADIR/my.cnf'</TT>  Server-specific options.

<LI><TT>`defaults-extra-file'</TT>  The file specified with

<CODE>--defaults-extra-file=...</CODE>.
<LI><TT>`~/.my.cnf'</TT> User-specific options.

</UL>

<P>
<TT>`COMPILATION_DATADIR'</TT> is the MySQL data directory which was
specified as a <CODE>./configure</CODE> option when <TT>`mysqld'</TT>
was compiled
(typically <TT>`/usr/local/mysql/data'</TT> for a binary installation or <TT>`/usr/local/var'</TT> for a source installation).

</P>
<P>
If you are not sure from where <TT>`mysqld'</TT> reads its <TT>`my.cnf'</TT>
or <TT>`my.ini'</TT>, you can give the path as the first command-line
option to the server:
<CODE>mysqld --defaults-file=your_path_to_my_cnf</CODE>.

</P>
<P>
InnoDB forms the directory path to a datafile by textually catenating
<CODE>innodb_data_home_dir</CODE> to a datafile name or path in
<CODE>innodb_data_file_path</CODE>, adding a possible slash or
backslash in between if needed. If the keyword
<CODE>innodb_data_home_dir</CODE> is not mentioned in
<TT>`my.cnf'</TT> at all, the default for it is the
'dot' directory <TT>`./'</TT> which means the <CODE>datadir</CODE> of MySQL. 

</P>
<P>
<STRONG>An advanced <TT>`my.cnf'</TT> example.</STRONG> Suppose you have a Linux computer
with 2 GB RAM and three 60 GB hard disks
(at directory paths <TT>`/'</TT>, <TT>`/dr2'</TT> and
<TT>`/dr3'</TT>). Below is an example of possible
configuration parameters in <TT>`my.cnf'</TT> for InnoDB. 

</P>
<P>
<STRONG>Note that InnoDB does not create directories: you
have to create them yourself.</STRONG> Use the Unix or MS-DOS
<CODE>mkdir</CODE> command to create the data and log group home directories. 

</P>

<PRE>
[mysqld]
# You can write your other MySQL server options here
# ...
innodb_data_home_dir =
#                                  Data files must be able to
#                                  hold your data and indexes
innodb_data_file_path = /ibdata/ibdata1:2000M;/dr2/ibdata/ibdata2:2000M:autoextend
#                                  Set buffer pool size to
#                                  50 - 80 % of your computer's
#                                  memory, but make sure on Linux
#                                  x86 total memory usage is
#                                  &#60; 2 GB
set-variable = innodb_buffer_pool_size=1G
set-variable = innodb_additional_mem_pool_size=20M
innodb_log_group_home_dir = /dr3/iblogs
#                                  .._log_arch_dir must be the same
#                                  as .._log_group_home_dir
innodb_log_arch_dir = /dr3/iblogs
set-variable = innodb_log_files_in_group=3
#                                  Set the log file size to about
#                                  15 % of the buffer pool size
set-variable = innodb_log_file_size=150M
set-variable = innodb_log_buffer_size=8M
#                                  Set ..flush_log_at_trx_commit to
#                                  0 if you can afford losing
#                                  some last transactions 
innodb_flush_log_at_trx_commit=1
set-variable = innodb_lock_wait_timeout=50
#innodb_flush_method=fdatasync
#set-variable = innodb_thread_concurrency=5
</PRE>

<P>
Note that we have placed the two datafiles on different disks.
InnoDB will fill the tablespace
formed by the datafiles from bottom up. In some cases it will
improve the performance of the database if all data is not placed
on the same physical disk. Putting log files on a different disk from
data is very often beneficial for performance.
You can also use <STRONG>raw disk partitions</STRONG> (raw devices)
as datafiles. In some Unixes
they speed up I/O. See the manual section on InnoDB file space management 
about how to specify them in <TT>`my.cnf'</TT>.

</P>
<P>
<STRONG>Warning</STRONG>: on Linux x86 you must be careful you <STRONG>do not set memory usage
too high</STRONG>. glibc will allow the process heap to grow over thread stacks,
which will crash your server. It is a risk if the value of

<PRE>
innodb_buffer_pool_size + key_buffer +
max_connections * (sort_buffer + read_buffer_size) + max_connections * 2 MB
</PRE>

<P>
is close to 2 GB or exceeds 2 GB. Each thread will use a stack
(often 2 MB, but in MySQL AB binaries only 256 kB) and in the worst case also
<CODE>sort_buffer + read_buffer_size</CODE>
additional memory.

</P>
<P>
<STRONG>How to tune other <TT>`mysqld'</TT> server parameters?</STRONG>
Typical values which suit most users are:

<PRE>
skip-locking
set-variable = max_connections=200
set-variable = read_buffer_size=1M
set-variable = sort_buffer=1M
#                                  Set key_buffer to 5 - 50%
#                                  of your RAM depending on how
#                                  much you use MyISAM tables, but
#                                  keep key_buffer + InnoDB
#                                  buffer pool size &#60; 80% of
#                                  your RAM
set-variable = key_buffer=...
</PRE>

<P>
Note that some parameters are given using the numeric <TT>`my.cnf'</TT>
parameter format: <CODE>set-variable = innodb... = 123</CODE>, others
(string and boolean parameters) with another format:
<CODE>innodb_... = ... </CODE>.

</P>

<P>
The meanings of the configuration parameters are the following:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Option</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>innodb_data_home_dir</CODE> </TD><TD>
The common part of the directory path for all InnoDB datafiles.
If you do not mentioned this option in <TT>`my.cnf'</TT>
the default is the <CODE>datadir</CODE> of MySQL.
You can specify this also as an empty string, in which case you
can use absolute file paths in <CODE>innodb_data_file_path</CODE>.
</TD></TR>
<TR><TD><CODE>innodb_data_file_path</CODE> </TD><TD>
Paths to individual datafiles and their sizes. The full directory path
to each datafile is acquired by concatenating innodb_data_home_dir to
the paths specified here. The file-sizes are specified in megabytes,
hence the 'M' after the size specification above.
InnoDB also understands the abbreviation 'G', 1G meaning 1024M.
Starting from
3.23.44 you can set the file-size bigger than 4 GB on those
operating systems which support big files.
On some operating systems files must be &#60; 2 GB.
The sum of the sizes of the files must be at least 10 MB.
</TD></TR>
<TR><TD><CODE>innodb_mirrored_log_groups</CODE> </TD><TD>
Number of identical copies of log groups we
keep for the database. Currently this should be set to 1.
</TD></TR>
<TR><TD><CODE>innodb_log_group_home_dir</CODE> </TD><TD>
Directory path to InnoDB log files.
</TD></TR>
<TR><TD><CODE>innodb_log_files_in_group</CODE> </TD><TD>
Number of log files in the log group. InnoDB writes to the files in a
circular fashion. Value 3 is recommended here.
</TD></TR>
<TR><TD><CODE>innodb_log_file_size</CODE> </TD><TD>
Size of each log file in a log group in megabytes. Sensible values range
from 1M to 1/nth of the size of the buffer pool specified below,
where n is the number of log files in the group. The
bigger the value,
the less checkpoint flush activity is needed in the buffer pool,
saving disk I/O. But bigger log files also mean that recovery will be
slower in case of a crash. The combined size of log files must
be &#60; 4 GB on 32-bit computers.
</TD></TR>
<TR><TD><CODE>innodb_log_buffer_size</CODE> </TD><TD>
The size of the buffer which InnoDB uses to write log to the log files
on disk.  Sensible values range from 1M to 8M.
A big log buffer allows large transactions to run without a need
to write the log to disk until the transaction commit. Thus, if you have
big transactions, making the log buffer big will save disk I/O.
</TD></TR>
<TR><TD><CODE>innodb_flush_log_at_trx_commit</CODE> </TD><TD>
Normally you set this to 1, meaning that at a transaction commit the log
is flushed to disk, and the modifications made by the transaction become
permanent, and survive a database crash. If you are willing to
compromise this safety, and you are running small transactions, you may
set this to 0 or 2 to reduce disk I/O to the logs. Value 0 means
that the log is only written to the log file and the log file flushed to
disk approximately once per second. Value 2 means the log is written
to the log file at each commit, but the log file is only flushed to
disk approximately once per second. The default value is 1 starting from
MySQL-4.0.13, previously it was 0.
</TD></TR>
<TR><TD><CODE>innodb_log_arch_dir</CODE> </TD><TD>
The directory where fully written log files would be archived if we used
log archiving.  The value of this parameter should currently be set the
same as <CODE>innodb_log_group_home_dir</CODE>.
</TD></TR>
<TR><TD><CODE>innodb_log_archive</CODE> </TD><TD>
This value should currently be set to 0.  As recovery from a backup is
done by MySQL using its own log files, there is currently no need to
archive InnoDB log files.
</TD></TR>
<TR><TD><CODE>innodb_buffer_pool_size</CODE> </TD><TD>
The size of the memory buffer InnoDB uses to cache data and indexes of
its tables.  The bigger you set this the less disk I/O is needed to
access data in tables. On a dedicated database server you may set this
parameter up to 80% of the machine physical memory size. Do not set it
too large, though, because competition of the physical memory may cause
paging in the operating system.
</TD></TR>
<TR><TD><CODE>innodb_additional_mem_pool_size</CODE> </TD><TD>
Size of a memory pool InnoDB uses to store data dictionary information
and other internal data structures. A sensible value for this might be
2M, but the more tables you have in your application the more you will
need to allocate here. If InnoDB runs out of memory in this pool, it
will start to allocate memory from the operating system, and write
warning messages to the MySQL error log.
</TD></TR>
<TR><TD><CODE>innodb_file_io_threads</CODE> </TD><TD>
Number of file I/O threads in InnoDB. Normally, this should be 4, but
on Windows disk I/O may benefit from a larger number.
</TD></TR>
<TR><TD><CODE>innodb_lock_wait_timeout</CODE> </TD><TD>
Timeout in seconds an InnoDB transaction may wait for a lock before
being rolled back.  InnoDB automatically detects transaction deadlocks
in its own lock table and rolls back the transaction. If you use
<CODE>LOCK TABLES</CODE> command, or other transaction-safe storage engines
than InnoDB in the same transaction, then a deadlock may arise which
InnoDB cannot notice. In cases like this the timeout is useful to
resolve the situation.
</TD></TR>
<TR><TD><CODE>innodb_flush_method</CODE> </TD><TD>
(Available from 3.23.40 up.)
The default value for this is <CODE>fdatasync</CODE>.
Another option is <CODE>O_DSYNC</CODE>.
</TD></TR>
</TABLE>



<H3><A NAME="InnoDB_init" HREF="manual_toc.html#InnoDB_init">7.5.3  Creating InnoDB Tablespace</A></H3>

<P>
Suppose you have installed MySQL and have edited <TT>`my.cnf'</TT> so that
it contains the necessary InnoDB configuration parameters.
Before starting MySQL you should check that the directories you have
specified for InnoDB datafiles and log files exist and that you have
access rights to those directories. InnoDB
cannot create directories, only files. Check also you have enough disk space
for the data and log files.

</P>
<P>
When you now start MySQL, InnoDB will start creating your datafiles
and log files. InnoDB will print something like the following:

</P>

<PRE>
~/mysqlm/sql &#62; mysqld
InnoDB: The first specified datafile /home/heikki/data/ibdata1
did not exist:
InnoDB: a new database to be created!
InnoDB: Setting file /home/heikki/data/ibdata1 size to 134217728
InnoDB: Database physically writes the file full: wait...
InnoDB: datafile /home/heikki/data/ibdata2 did not exist:
new to be created
InnoDB: Setting file /home/heikki/data/ibdata2 size to 262144000
InnoDB: Database physically writes the file full: wait...
InnoDB: Log file /home/heikki/data/logs/ib_logfile0 did not exist:
new to be created
InnoDB: Setting log file /home/heikki/data/logs/ib_logfile0 size to 5242880
InnoDB: Log file /home/heikki/data/logs/ib_logfile1 did not exist:
new to be created
InnoDB: Setting log file /home/heikki/data/logs/ib_logfile1 size to 5242880
InnoDB: Log file /home/heikki/data/logs/ib_logfile2 did not exist:
new to be created
InnoDB: Setting log file /home/heikki/data/logs/ib_logfile2 size to 5242880
InnoDB: Started
mysqld: ready for connections
</PRE>

<P>
A new InnoDB database has now been created. You can connect to the MySQL
server with the usual MySQL client programs like <CODE>mysql</CODE>.
When you shut down the MySQL server with <TT>`mysqladmin shutdown'</TT>,
InnoDB output will be like the following:

</P>

<PRE>
010321 18:33:34  mysqld: Normal shutdown
010321 18:33:34  mysqld: Shutdown Complete
InnoDB: Starting shutdown...
InnoDB: Shutdown completed
</PRE>

<P>
You can now look at the datafiles and logs directories and you
will see the files created. The log directory will also contain
a small file named <TT>`ib_arch_log_0000000000'</TT>. That file
resulted from the database creation, after which InnoDB switched off
log archiving.
When MySQL is again started, the output will be like the following:

</P>

<PRE>
~/mysqlm/sql &#62; mysqld
InnoDB: Started
mysqld: ready for connections
</PRE>



<H4><A NAME="Error_creating_InnoDB" HREF="manual_toc.html#Error_creating_InnoDB">7.5.3.1  If Something Goes Wrong in Database Creation</A></H4>

<P>
If InnoDB prints an operating system error in a file operation,
usually the problem is one of the following:

</P>

<UL>
<LI>You did not create InnoDB data or log directories.

<LI><TT>`mysqld'</TT> does not have the rights to create files in those

directories.
<LI><TT>`mysqld'</TT> does not read the right <TT>`my.cnf'</TT> or <TT>`my.ini'</TT>

file, and consequently does not see the options you specified.
<LI>The disk is full or a disk quota is exceeded.

<LI>You have created a subdirectory whose name is equal to a datafile

you specified.
<LI>There is a syntax error in <CODE>innodb_data_home_dir</CODE>

or <CODE>innodb_data_file_path</CODE>.
</UL>

<P>
If something goes wrong in an InnoDB database creation, you should
delete all files created by InnoDB. This means all datafiles, all log
files, the small archived log file, and in the case you already did
create some InnoDB tables, delete also the corresponding <TT>`.frm'</TT>
files for these tables from the MySQL database
directories. Then you can try the InnoDB database creation again.

</P>



<H3><A NAME="Using_InnoDB_tables" HREF="manual_toc.html#Using_InnoDB_tables">7.5.4  Creating InnoDB Tables</A></H3>

<P>
Suppose you have started the MySQL client with the command
<CODE>mysql test</CODE>.
To create a table in the InnoDB format you must specify
<CODE>TYPE = InnoDB</CODE> in the table creation SQL command:

</P>

<PRE>
CREATE TABLE CUSTOMER (A INT, B CHAR (20), INDEX (A)) TYPE = InnoDB;
</PRE>

<P>
This SQL command will create a table and an index on column <CODE>A</CODE>
into the InnoDB tablespace consisting of the datafiles you specified
in <TT>`my.cnf'</TT>. In addition MySQL will create a file
<TT>`CUSTOMER.frm'</TT> to the MySQL database directory <TT>`test'</TT>.
Internally, InnoDB will add to its own data dictionary an entry
for table <CODE>'test/CUSTOMER'</CODE>. Thus you can create a table
of the same name <CODE>CUSTOMER</CODE> in another database of MySQL, and
the table names will not collide inside InnoDB.

</P>
<P>
You can query the amount of free space in the InnoDB tablespace
by issuing the table status command of MySQL for any table you have
created with <CODE>TYPE = InnoDB</CODE>. Then the amount of free
space in the tablespace appears in the table comment section in the
output of <CODE>SHOW</CODE>. An example:

</P>

<PRE>
SHOW TABLE STATUS FROM test LIKE 'CUSTOMER'
</PRE>

<P>
Note that the statistics <CODE>SHOW</CODE> gives about InnoDB tables
are only approximate: they are used in SQL optimisation. Table and
index reserved sizes in bytes are accurate, though.

</P>


<H4><A NAME="SEC462" HREF="manual_toc.html#SEC462">7.5.4.1  Converting MyISAM Tables to InnoDB</A></H4>

<P>
InnoDB does not have a special optimisation for separate index creation.
Therefore it does not pay to export and import the table and create indexes
afterwards.
The fastest way to alter a table to InnoDB is to do the inserts
directly to an InnoDB table, that is, use <CODE>ALTER TABLE ... TYPE=INNODB</CODE>,
or create an empty InnoDB table with identical definitions and insert
the rows with <CODE>INSERT INTO ... SELECT * FROM ...</CODE>.

</P>
<P>
To get better control over the insertion process, it may be good to insert
big tables in pieces:

</P>

<PRE>
INSERT INTO newtable SELECT * FROM oldtable
   WHERE yourkey &#62; something AND yourkey &#60;= somethingelse;
</PRE>

<P>
After all data has been inserted you can rename the tables.

</P>
<P>
During the conversion of big tables you should set the InnoDB
buffer pool size big
to reduce disk I/O. Not bigger than 80% of the physical memory, though.
You should set InnoDB log files big, and also the log buffer large.

</P>
<P>
Make sure you do not run out of tablespace: InnoDB tables take a lot
more space than MyISAM tables. If an <CODE>ALTER TABLE</CODE> runs out
of space, it will start a rollback, and that can take hours if it is
disk-bound.
In inserts InnoDB uses the insert buffer to merge secondary index records
to indexes in batches. That saves a lot of disk I/O. In rollback no such
mechanism is used, and the rollback can take 30 times longer than the
insertion.

</P>
<P>
In the case of a runaway rollback, if you do not have valuable data in your
database,
it is better that you kill the database process and delete all InnoDB data
and log files and all InnoDB table <TT>`.frm'</TT> files, and start
your job again, rather than wait for millions of disk I/Os to complete.

</P>


<H4><A NAME="SEC463" HREF="manual_toc.html#SEC463">7.5.4.2  Foreign Key Constraints</A></H4>

<P>
Starting from version 3.23.43b InnoDB features foreign key constraints.
InnoDB is the first MySQL table type which allows you to define foreign key
constraints to guard the integrity of your data.

</P>
<P>
The syntax of a foreign key constraint definition in InnoDB:

<PRE>
[CONSTRAINT symbol] FOREIGN KEY (index_col_name, ...)
                  REFERENCES table_name (index_col_name, ...)
                  [ON DELETE {CASCADE | SET NULL | NO ACTION
                              | RESTRICT}]
                  [ON UPDATE {CASCADE | SET NULL | NO ACTION
                              | RESTRICT}]
</PRE>

<P>
Both tables have to be InnoDB type and <STRONG>there must be an index
where the foreign key and the referenced key are listed as the FIRST
columns</STRONG>. InnoDB does not auto-create indexes on foreign keys or
referenced keys: you have to create them explicitly.

</P>
<P>
Corresponding columns in the foreign key
and the referenced key must have similar internal data types
inside InnoDB so that they can be compared without a type
conversion.
The <STRONG>size and the signedness of integer types has to be the same</STRONG>.
The length of string types need not be the same.
If you specify a <CODE>SET NULL</CODE> action, make sure you
have <STRONG>not declared the columns in the child table</STRONG>
<CODE>NOT NULL</CODE>.

</P>
<P>
If MySQL gives the error number 1005 from a <CODE>CREATE TABLE</CODE>
statement, and the error message string refers to errno 150, then
the table creation failed because a foreign key constraint was not
correctly formed.
Similarly, if an <CODE>ALTER TABLE</CODE> fails and it refers to errno
150, that means a foreign key definition would be incorrectly
formed for the altered table.

</P>
<P>
Starting from version 3.23.50 you can also associate the
<CODE>ON DELETE CASCADE</CODE> or <CODE>ON DELETE SET NULL</CODE>
clause with the foreign key constraint. Starting from version 4.0.8
you can use also similar <CODE>ON UPDATE</CODE> actions.

</P>
<P>
If <CODE>ON DELETE CASCADE</CODE> is specified, and a row in the parent
table is deleted, then InnoDB automatically deletes also all those rows
in the child table whose foreign key values are equal to
the referenced key value in the parent row. If <CODE>ON DELETE SET NULL</CODE>
is specified, the child rows are automatically updated so that the
columns in the foreign key are set to the SQL NULL value.

</P>
<P>
Starting from version 3.23.50, InnoDB does not check foreign key
constraints on those foreign key or referenced key values
which contain a NULL column.

</P>
<P>
Starting from version 3.23.50 the InnoDB parser allows you to
use backquotes (`) around table and column names in the
<CODE>FOREIGN KEY ... REFERENCES ...</CODE> clause
but the InnoDB parser is not yet aware of the option
<CODE>lower_case_table_names</CODE> you can specify in <TT>`my.cnf'</TT>.

</P>

<P>
An example:

<PRE>
CREATE TABLE parent(id INT NOT NULL, PRIMARY KEY (id)) TYPE=INNODB;
CREATE TABLE child(id INT, parent_id INT, INDEX par_ind (parent_id),
             FOREIGN KEY (parent_id) REFERENCES parent(id)
             ON DELETE SET NULL
) TYPE=INNODB;
</PRE>

<P>
Starting from version 3.23.50 InnoDB allows you to add a new
foreign key constraint to a table through

<PRE>
ALTER TABLE yourtablename
ADD [CONSTRAINT symbol] FOREIGN KEY (...) REFERENCES anothertablename(...)
[on_delete_and_on_update_actions]
</PRE>

<P>
Remember to create the required indexes first, though.
                           
In InnoDB versions &#60; 3.23.50 <CODE>ALTER TABLE</CODE>
or <CODE>CREATE INDEX</CODE>
should not be used in connection with tables which have foreign
key constraints or which are referenced in foreign key constraints:
Any <CODE>ALTER TABLE</CODE> removes all foreign key
constrainst defined for the table. You should not use
<CODE>ALTER TABLE</CODE> to the referenced table either, but
use <CODE>DROP TABLE</CODE> and <CODE>CREATE TABLE</CODE> to modify the
schema. When MySQL does an <CODE>ALTER TABLE</CODE> it may internally
use <CODE>RENAME TABLE</CODE>, and that will confuse the
foreign key costraints which refer to the table.
A <CODE>CREATE INDEX</CODE> statement is in MySQL
processed as an <CODE>ALTER TABLE</CODE>, and these
restrictions apply also to it.

</P>
<P>
When doing foreign key checks InnoDB sets shared row
level locks on child or parent records it has to look at.
InnoDB checks foreign key constraints immediately: the check
is not deferred to transaction commit.

</P>
<P>
InnoDB allows you to drop any table even though that
would break the foreign key constraints which reference
the table. When you drop a table the constraints which
were defined in its create statement are also dropped.

</P>
<P>
If you re-create a table which was dropped, it has to have
a definition which conforms to the foreign key constraints
referencing it. It must have the right column names and types,
and it must have indexes on the referenced keys, as stated above.
If these are not satisfied, MySQL returns error number 1005
and refers to errno 150 in the error message string.

</P>
<P>
Starting from version 3.23.50 InnoDB returns the foreign key
definitions of a table when you call

<PRE>
SHOW CREATE TABLE yourtablename
</PRE>

<P>
Then also <TT>`mysqldump'</TT> produces correct definitions
of tables to the dump file, and does not forget about the
foreign keys.

</P>
<P>
You can also list the foreign key constraints for a table
<CODE>T</CODE> with

<PRE>
SHOW TABLE STATUS FROM yourdatabasename LIKE 'T'
</PRE>

<P>
The foreign key constraints are listed in the table comment of
the output.

</P>


<H3><A NAME="Adding_and_removing" HREF="manual_toc.html#Adding_and_removing">7.5.5  Adding and Removing InnoDB Data and Log Files</A></H3>

<P>
From version 3.23.50 and 4.0.2 you can specify the last InnoDB datafile
to <CODE>autoextend</CODE>. Alternatively, you can increase to your tablespace
by specifying an additional datafile. To do this you have to shut down
the MySQL server, edit the <TT>`my.cnf'</TT> file adding a new datafile
to <CODE>innodb_data_file_path</CODE>, and then start the MySQL server again.

</P>
<P>
Currently you cannot remove a datafile from InnoDB. To decrease the
size of your database you have to use <TT>`mysqldump'</TT> to dump
all your tables, create a new database, and import your tables to the
new database.

</P>
<P>
If you want to change the number or the size of your InnoDB log files,
you have to shut down MySQL and make sure that it shuts down without errors.
Then copy the old log files into a safe place just in case something
went wrong in the shutdown and you will need them to recover the
database. Delete then the old log files from the log file directory,
edit <TT>`my.cnf'</TT>, and start MySQL again. InnoDB will tell
you at the startup that it is creating new log files.

</P>



<H3><A NAME="Backing_up" HREF="manual_toc.html#Backing_up">7.5.6  Backing up and Recovering an InnoDB Database</A></H3>

<P>
The key to safe database management is taking regular backups.

</P>
<P>
InnoDB Hot Backup is an online backup tool you can use to
backup your InnoDB database while it is running. InnoDB
Hot Backup does not require you to shut down your database
and it does not set any locks or disturb your normal
database processing. InnoDB Hot Backup is a non-free
additional tool which is not included in the standard
MySQL distribution. See the InnoDB Hot Backup homepage
<a HREF="http://www.innodb.com/hotbackup.html">http://www.innodb.com/hotbackup.html</a>
for detailed information and screenshots. 

</P>
<P>
If you are able to shut down your MySQL server, then to take
a 'binary' backup of your database you have to do the following: 

</P>

<UL>
<LI>

Shut down your MySQL database and make sure it shuts down without errors.
<LI>

Copy all your datafiles into a safe place.
<LI>

Copy all your InnoDB log files to a safe place.
<LI>

Copy your <TT>`my.cnf'</TT> configuration file(s) to a safe place.
<LI>

Copy all the <TT>`.frm'</TT> files for your InnoDB tables into a
safe place.
</UL>

<P>
In addition to taking the binary backups described above,
you should also regularly take dumps of your tables with
<TT>`mysqldump'</TT>. The reason to this is that a binary file
may be corrupted without you noticing it. Dumped tables are stored
into text files which are human-readable and much simpler than
database binary files. Seeing table corruption from dumped files
is easier, and since their format is simpler, the chance for
serious data corruption in them is smaller.

</P>
<P>
A good idea is to take the dumps at the same time you take a binary
backup of your database. You have to shut out all clients from your
database to get a consistent snapshot of all your tables into your
dumps. Then you can take the binary backup, and you will then have
a consistent snapshot of your database in two formats.

</P>
<P>
To be able to recover your InnoDB database to the present from the
binary backup described above, you have to run your MySQL database
with the general logging and log archiving of MySQL switched on. Here
by the general logging we mean the logging mechanism of the MySQL server
which is independent of InnoDB logs.

</P>
<P>
To recover from a crash of your MySQL server process, the only thing
you have to do is to restart it. InnoDB will automatically check the
logs and perform a roll-forward of the database to the present.
InnoDB will automatically roll back uncommitted transactions which were
present at the time of the crash. During recovery, InnoDB will print
out something like the following:

</P>

<PRE>
~/mysqlm/sql &#62; mysqld
InnoDB: Database was not shut down normally.
InnoDB: Starting recovery from log files...
InnoDB: Starting log scan based on checkpoint at
InnoDB: log sequence number 0 13674004
InnoDB: Doing recovery: scanned up to log sequence number 0 13739520
InnoDB: Doing recovery: scanned up to log sequence number 0 13805056
InnoDB: Doing recovery: scanned up to log sequence number 0 13870592
InnoDB: Doing recovery: scanned up to log sequence number 0 13936128
...
InnoDB: Doing recovery: scanned up to log sequence number 0 20555264
InnoDB: Doing recovery: scanned up to log sequence number 0 20620800
InnoDB: Doing recovery: scanned up to log sequence number 0 20664692
InnoDB: 1 uncommitted transaction(s) which must be rolled back
InnoDB: Starting rollback of uncommitted transactions
InnoDB: Rolling back trx no 16745
InnoDB: Rolling back of trx no 16745 completed
InnoDB: Rollback of uncommitted transactions completed
InnoDB: Starting an apply batch of log records to the database...
InnoDB: Apply batch completed
InnoDB: Started
mysqld: ready for connections
</PRE>

<P>
If your database gets corrupted or your disk fails, you have
to do the recovery from a backup. In the case of corruption, you should
first find a backup which is not corrupted. From a backup do the recovery
from the general log files of MySQL according to instructions in the
MySQL manual.

</P>



<H4><A NAME="InnoDB_checkpoints" HREF="manual_toc.html#InnoDB_checkpoints">7.5.6.1  Checkpoints</A></H4>

<P>
InnoDB implements a checkpoint mechanism called a fuzzy
checkpoint. InnoDB will flush modified database pages from the buffer
pool in small batches, there is no need to flush the buffer pool
in one single batch, which would in practice stop processing
of user SQL statements for a while.

</P>
<P>
In crash recovery InnoDB looks for a checkpoint label written
to the log files. It knows that all modifications to the database
before the label are already present on the disk image of the database.
Then InnoDB scans the log files forward from the place of the checkpoint
applying the logged modifications to the database.

</P>
<P>
InnoDB writes to the log files in a circular fashion.
All committed modifications which make the database pages in the buffer
pool different from the images on disk must be available in the log files
in case InnoDB has to do a recovery. This means that when InnoDB starts
to reuse a log file in the circular fashion, it has to make sure that the
database page images on disk already contain the modifications
logged in the log file InnoDB is going to reuse. In other words, InnoDB
has to make a checkpoint and often this involves flushing of
modified database pages to disk.

</P>
<P>
The above explains why making your log files very big may save
disk I/O in checkpointing. It can make sense to set
the total size of the log files as big as the buffer pool or even bigger.
The drawback in big log files is that crash recovery can last longer
because there will be more log to apply to the database.

</P>



<H3><A NAME="Moving" HREF="manual_toc.html#Moving">7.5.7  Moving an InnoDB Database to Another Machine</A></H3>

<P>
InnoDB data and log files are binary-compatible on all platforms
if the floating-point number format on the machines is the same.
You can move an InnoDB database simply by copying all the relevant
files, which we already listed in the previous section on backing up
a database. If the floating-point formats on the machines are
different but you have not used <CODE>FLOAT</CODE> or <CODE>DOUBLE</CODE>
data types in your tables then the procedure is the same: just copy
the relevant files. If the formats are different and your tables
contain floating-point data, you have to use <TT>`mysqldump'</TT>
and <TT>`mysqlimport'</TT> to move those tables.

</P>
<P>
A performance tip is to switch off auto-commit mode when you import
data into your database, assuming your tablespace has enough space for
the big rollback segment the big import transaction will generate.
Do the commit only after importing a whole table or a segment of
a table.

</P>



<H3><A NAME="InnoDB_transaction_model" HREF="manual_toc.html#InnoDB_transaction_model">7.5.8  InnoDB Transaction Model</A></H3>

<P>
In the InnoDB transaction model the goal has been to combine the best
properties of a multi-versioning database to traditional two-phase locking.
InnoDB does locking on row level and runs queries by default
as non-locking consistent reads, in the style of Oracle.
The lock table in InnoDB is stored so space-efficiently that lock
escalation is not needed: typically several users are allowed
to lock every row in the database, or any random subset of the rows,
without InnoDB running out of memory.

</P>
<P>
In InnoDB all user activity happens inside transactions. If the
autocommit mode is used in MySQL, then each SQL statement
will form a single transaction.
MySQL always starts a new connection with the autocommit
mode switched on.

</P>
<P>
If the autocommit mode is
switched off with <CODE>SET AUTOCOMMIT = 0</CODE>,
then we can think that a user always has a transaction
open. If he issues
the SQL <CODE>COMMIT</CODE> or <CODE>ROLLBACK</CODE> statement,
it ends the current transaction, and a new starts. Both statements
will release all InnoDB locks that were set during the
current transaction. A <CODE>COMMIT</CODE> means that the
changes made in the current transaction are made permanent
and become visible to other users. A <CODE>ROLLBACK</CODE>,
on the other hand, cancels all modifications made by the current
transaction.

</P>
<P>
If the connection has <CODE>AUTOCOMMIT = 1</CODE>, then the user
can still perform a multi-statement transaction by starting it with
<CODE>BEGIN</CODE> and ending it with <CODE>COMMIT</CODE>
or <CODE>ROLLBACK</CODE>.

</P>
<P>
In terms of the SQL-1992 transaction isolation levels,
the InnoDB default is <CODE>REPEATABLE READ</CODE>.
Starting from version 4.0.5, InnoDB offers all 4 different
transaction isolation levels described by the SQL-1992 standard.
You can set the default isolation level for all connections
in the <CODE>[mysqld]</CODE> section of <TT>`my.cnf'</TT>:

</P>

<PRE>
transaction-isolation = {READ-UNCOMMITTED | READ-COMMITTED
                         | REPEATABLE-READ | SERIALIZABLE}

</PRE>

<P>
A user can change the isolation level of a single session or
all new incoming connections with the 

<PRE>
SET [SESSION | GLOBAL] TRANSACTION ISOLATION LEVEL
                       {READ UNCOMMITTED | READ COMMITTED
                        | REPEATABLE READ | SERIALIZABLE}
</PRE>

<P>
SQL statement. Note that there are no hyphens in level names
in the SQL syntax.
If you specify the keyword <CODE>GLOBAL</CODE>
in the above statement, it will determine the initial
isolation level of new incoming connections, but will not change
the isolation level of old connections.
Any user is free to change the isolation level of his session, even
in the middle of a transaction.
In versions &#60; 3.23.50 <CODE>SET TRANSACTION</CODE> had no effect
on InnoDB tables. In versions &#60; 4.0.5 only <CODE>REPEATABLE READ</CODE>
and <CODE>SERIALIZABLE</CODE> were available.

</P>
<P>
You can query the global and session transaction isolation levels with:

<PRE>
SELECT @@global.tx_isolation;
SELECT @@tx_isolation;
</PRE>

<P>
In row level locking InnoDB uses so-called next-key locking.
That means that besides index records, InnoDB can also lock
the 'gap' before an index record to block insertions by other users
immediately before the index record. A next-key lock means
a lock which locks an index record and the gap before it.
A gap lock means a lock which only locks a gap before some
index record.

</P>
<P>
A detailed description of each isolation level in InnoDB:

</P>

<UL>
<LI>

<CODE>READ UNCOMMITTED</CODE> This is also called
'dirty read': non-locking <CODE>SELECT</CODE>s are performed
so that we do not look at a possible earlier version of a record; 
thus they are not 'consistent' reads under this isolation level;
otherwise this level works like <CODE>READ COMMITTED</CODE>.
<LI>

<CODE>READ COMMITTED</CODE>
Somewhat Oracle-like isolation level.
All <CODE>SELECT ... FOR UPDATE</CODE> and
<CODE>SELECT ... LOCK IN SHARE MODE</CODE>
statements
only lock the index records, NOT the gaps before them, and
thus allow free inserting of new records next to locked
records.
<CODE>UPDATE</CODE> and <CODE>DELETE</CODE> which use
a unique index with a unique search condition,
only lock the index record found, not the gap before it.
But still in range type
<CODE>UPDATE</CODE> and <CODE>DELETE</CODE> InnoDB
must set next-key or gap locks and block insertions
by other users to the
gaps covered by the range. This is necessary
since 'phantom rows' have to be blocked for MySQL
replication and recovery to work.
<STRONG>Consistent reads</STRONG> behave like in
Oracle: each consistent read, even within the same
transaction, sets and reads its own fresh snapshot.
<LI>

<CODE>REPEATABLE READ</CODE> This is the default isolation level of
InnoDB.
<CODE>SELECT ... FOR UPDATE</CODE>, <CODE>SELECT ... LOCK IN SHARE MODE</CODE>,
<CODE>UPDATE</CODE>, and <CODE>DELETE</CODE>
which use
a unique index with a unique search condition,
only lock the index record found, not the gap before it.
Otherwise these operations employ next-key locking, locking
the index range scanned with next-key or gap locks, and
block new insertions by other users.
In <STRONG>consistent reads</STRONG> there is an important difference
from the previous isolation level: in this level
all consistent reads within the same transaction read the
same snapshot established by the first read. This convention
means that if you issue several plain <CODE>SELECT</CODE>s
within the same transaction, these <CODE>SELECT</CODE>s are
consistent also with respect to each other.
<LI>

<CODE>SERIALIZABLE</CODE> This level is like
the previous one, but
all plain <CODE>SELECT</CODE>s are implicitly converted to
<CODE>SELECT ... LOCK IN SHARE MODE</CODE>.
</UL>



<H4><A NAME="InnoDB_consistent_read" HREF="manual_toc.html#InnoDB_consistent_read">7.5.8.1  Consistent Read</A></H4>

<P>
A consistent read means that InnoDB uses its multi-versioning to
present to a query a snapshot of the database at a point in time.
The query will see the changes made by exactly those transactions
that committed before that point of time, and no changes made by
later or uncommitted transactions. The exception to this rule
is that the query will see the changes made by the transaction
itself which issues the query. 

</P>
<P>
If you are running with the default <CODE>REPEATABLE READ</CODE> isolation level,
then all consistent reads within the same transaction read the snapshot
established by the first such read in that transaction. You can get a
fresher snapshot for your queries by committing the current transaction
and after that issuing new queries. 

</P>
<P>
Consistent read is the default mode in which InnoDB processes
<CODE>SELECT</CODE> statements in <CODE>READ COMMITTED</CODE> and
<CODE>REPEATABLE READ</CODE> isolation levels. A consistent read
does not set any locks on the tables it accesses, and
therefore other users are free to modify those tables at
the same time a consistent read is being performed on the table. 

</P>



<H4><A NAME="InnoDB_locking_reads" HREF="manual_toc.html#InnoDB_locking_reads">7.5.8.2  Locking Reads</A></H4>

<P>
A consistent read is not convenient in some circumstances.
Suppose you want to add a new row into your table <CODE>CHILD</CODE>,
and make sure that the child already has a parent in table
<CODE>PARENT</CODE>.

</P>
<P>
Suppose you use a consistent read to read the table <CODE>PARENT</CODE>
and indeed see the parent of the child in the table. Can you now safely
add the child row to table <CODE>CHILD</CODE>? No, because it may
happen that meanwhile some other user has deleted the parent row
from the table <CODE>PARENT</CODE>, and you are not aware of that.

</P>
<P>
The solution is to perform the <CODE>SELECT</CODE> in a locking
mode, <CODE>LOCK IN SHARE MODE</CODE>.
  

<PRE>
SELECT * FROM PARENT WHERE NAME = 'Jones' LOCK IN SHARE MODE;
</PRE>

<P>
Performing a read in share mode means that we read the latest
available data, and set a shared mode lock on the rows we read.
If the latest data belongs to a yet uncommitted transaction of another
user, we will wait until that transaction commits.
A shared mode lock prevents others from updating or deleting
the row we have read. After we see that the above query returns
the parent <CODE>'Jones'</CODE>, we can safely add his child
to table <CODE>CHILD</CODE>, and commit our transaction.
This example shows how to implement referential
integrity in your application code.

</P>
<P>
Let us look at another example: we have an integer counter field in
a table <CODE>CHILD_CODES</CODE> which we use to assign
a unique identifier to each child we add to table <CODE>CHILD</CODE>.
Obviously, using a consistent read or a shared mode read
to read the present value of the counter is not a good idea, since
then two users of the database may see the same value for the
counter, and we will get a duplicate key error when we add
the two children with the same identifier to the table.

</P>
<P>
In this case there are two good ways to implement the
reading and incrementing of the counter: (1) update the counter
first by incrementing it by 1 and only after that read it,
or (2) read the counter first with
a lock mode <CODE>FOR UPDATE</CODE>, and increment after that:

</P>

<PRE>
SELECT COUNTER_FIELD FROM CHILD_CODES FOR UPDATE;
UPDATE CHILD_CODES SET COUNTER_FIELD = COUNTER_FIELD + 1;
</PRE>

<P>
A <CODE>SELECT ... FOR UPDATE</CODE> will read the latest
available data setting exclusive locks on each row it reads.
Thus it sets the same locks a searched SQL <CODE>UPDATE</CODE> would set
on the rows.

</P>



<H4><A NAME="InnoDB_Next-key_locking" HREF="manual_toc.html#InnoDB_Next-key_locking">7.5.8.3  Next-key Locking: Avoiding the Phantom Problem</A></H4>

<P>
In row level locking InnoDB uses an algorithm called next-key locking.
InnoDB does the row level locking so that when it searches or
scans an index of a table, it sets shared or exclusive locks
on the index records in encounters. Thus the row level locks are
more precisely called index record locks.

</P>
<P>
The locks InnoDB sets on index records also affect the 'gap'
before that index record. If a user has a shared or exclusive
lock on record R in an index, then another user cannot insert
a new index record immediately before R in the index order.
This locking of gaps is done to prevent the so-called phantom
problem. Suppose I want to read and lock all children with identifier
bigger than 100 from table <CODE>CHILD</CODE>,
and update some field in the selected rows.

</P>

<PRE>
SELECT * FROM CHILD WHERE ID &#62; 100 FOR UPDATE;
</PRE>

<P>
Suppose there is an index on table <CODE>CHILD</CODE> on column
<CODE>ID</CODE>. Our query will scan that index starting from
the first record where <CODE>ID</CODE> is bigger than 100.
Now, if the locks set on the index records would not lock out
inserts made in the gaps, a new child might meanwhile be
inserted to the table. If now I in my transaction execute

</P>

<PRE>
SELECT * FROM CHILD WHERE ID &#62; 100 FOR UPDATE;
</PRE>

<P>
again, I will see a new child in the result set the query returns.
This is against the isolation principle of transactions:
a transaction should be able to run so that the data
it has read does not change during the transaction. If we regard
a set of rows as a data item, then the new 'phantom' child would break
this isolation principle.

</P>
<P>
When InnoDB scans an index it can also lock the gap
after the last record in the index. Just that happens in the previous
example: the locks set by InnoDB will prevent any insert to
the table where <CODE>ID</CODE> would be bigger than 100.

</P>
<P>
You can use next-key locking to implement a uniqueness
check in your application: if you read your data in share mode
and do not see a duplicate for a row you are going to insert,
then you can safely insert your row and know that the next-key
lock set on the successor of your row during the read will prevent
anyone meanwhile inserting a duplicate for your row. Thus the next-key
locking allows you to 'lock' the non-existence of something in your
table.

</P>


<H4><A NAME="InnoDB_Locks_set" HREF="manual_toc.html#InnoDB_Locks_set">7.5.8.4  Locks Set by Different SQL Statements in InnoDB</A></H4>


<UL>
<LI>

<CODE>SELECT ... FROM ...</CODE> : this is a consistent read, reading a
snapshot of the database and setting no locks.
<LI>

<CODE>SELECT ... FROM ... LOCK IN SHARE MODE</CODE> : sets shared next-key locks
on all index records the read encounters.
<LI>

<CODE>SELECT ... FROM ... FOR UPDATE</CODE> : sets exclusive next-key locks
on all index records the read encounters.
<LI>

<CODE>INSERT INTO ... VALUES (...)</CODE> : sets an exclusive lock
on the inserted row; note that this lock is not a next-key lock
and does not prevent other users from inserting to the gap before the
inserted row. If a duplicate key error occurs, sets a shared lock
on the duplicate index record.
<LI>

<CODE>INSERT INTO T SELECT ... FROM S WHERE ...</CODE> sets an exclusive
(non-next-key) lock on each row inserted into <CODE>T</CODE>. Does
the search on <CODE>S</CODE> as a consistent read, but sets shared next-key
locks on <CODE>S</CODE> if the MySQL logging is on. InnoDB has to set
locks in the latter case because in roll-forward recovery from a
backup every SQL statement has to be executed in exactly the same
way as it was done originally.
<LI>

<CODE>CREATE TABLE ... SELECT ...</CODE> performs the <CODE>SELECT</CODE>
as a consistent read or with shared locks, like in the previous
item.
<LI>

<CODE>REPLACE</CODE> is done like an insert if there is no collision
on a unique key. Otherwise, an exclusive next-key lock is placed
on the row which has to be updated.
<LI>

<CODE>UPDATE ... SET ... WHERE ...</CODE> : sets an exclusive next-key
lock on every record the search encounters.
<LI>

<CODE>DELETE FROM ... WHERE ...</CODE> : sets an exclusive next-key
lock on every record the search encounters.
<LI>

If a <CODE>FOREIGN KEY</CODE> constraint is defined on a table,
any insert, update, or delete which requires checking of the constraint
condition sets shared record level locks on the records it
looks at to check the constraint. Also in the case where the
constraint fails, InnoDB sets these locks.
<LI>

<CODE>LOCK TABLES ... </CODE> : sets table locks. In the implementation
the MySQL layer of code sets these locks. The automatic deadlock detection
of InnoDB cannot detect deadlocks where such table locks are involved:
see the following section.
Also, since MySQL does know about row level locks,
it is possible that you
get a table lock on a table where another user currently has row level
locks. But that does not put transaction integerity into danger.
See section <A HREF="manual.html#InnoDB_restrictions">7.5.13  Restrictions on InnoDB Tables</A>.
</UL>



<H4><A NAME="InnoDB_Deadlock_detection" HREF="manual_toc.html#InnoDB_Deadlock_detection">7.5.8.5  Deadlock Detection and Rollback</A></H4>

<P>
InnoDB automatically detects a deadlock of transactions and rolls back a
transaction or transactions to prevent the deadlock. Starting from
version 4.0.5, InnoDB will try to pick small transactions to roll
back. The size of a transaction is determined by the number of rows
it has inserted, updated, or deleted. Previous to 4.0.5, InnoDB
always rolled back the transaction whose lock request was the last
one to build a deadlock, that is, a cycle in the waits-for graph
of transactions. 

</P>
<P>
InnoDB cannot detect deadlocks where a lock set by a MySQL
<CODE>LOCK TABLES</CODE> statement is involved, or if a lock set
in another storage engine than InnoDB is involved. You have to resolve
these situations using <CODE>innodb_lock_wait_timeout</CODE> set in
<TT>`my.cnf'</TT>.

</P>
<P>
When InnoDB performs a complete rollback of a transaction, all the
locks of the transaction are released. However, if just a single SQL
statement is rolled back as a result of an error, some of the locks
set by the SQL statement may be preserved. This is because InnoDB
stores row locks in a format where it cannot afterwards know which was
set by which SQL statement.

</P>


<H4><A NAME="InnoDB_Consistent_read_example" HREF="manual_toc.html#InnoDB_Consistent_read_example">7.5.8.6  An Example of How the Consistent Read Works in InnoDB</A></H4>

<P>
Suppose you are running on the default <CODE>REPEATABLE READ</CODE> isolation level.
When you issue a consistent read, that is, an ordinary <CODE>SELECT</CODE>
statement, InnoDB will give your transaction a timepoint according
to which your query sees the database. Thus, if transaction B deletes
a row and commits after your timepoint was assigned, then you will
not see the row deleted. Similarly with inserts and updates.

</P>
<P>
You can advance your timepoint by committing your transaction
and then doing another <CODE>SELECT</CODE>.

</P>
<P>
This is called multi-versioned concurrency control.

</P>

<PRE>
                  User A                 User B

              SET AUTOCOMMIT=0;      SET AUTOCOMMIT=0;
time
|             SELECT * FROM t;
|             empty set
|                                    INSERT INTO t VALUES (1, 2);
|
v             SELECT * FROM t;
              empty set
                                     COMMIT;

              SELECT * FROM t;
              empty set;

              COMMIT;

              SELECT * FROM t;
              ---------------------
              |    1    |    2    |
              ---------------------
</PRE>

<P>
Thus user A sees the row inserted by B only when B has committed the
insert, and A has committed his own transaction so that the timepoint
is advanced past the commit of B.

</P>
<P>
If you want to see the ``freshest'' state of the database, you should
use a locking read:

</P>

<PRE>
SELECT * FROM t LOCK IN SHARE MODE;
</PRE>



<H4><A NAME="Innodb_deadlocks" HREF="manual_toc.html#Innodb_deadlocks">7.5.8.7  How to cope with deadlocks?</A></H4>

<P>
Deadlocks are a classic problem in transactional databases, but they
are not dangerous, unless they are so frequent that you cannot run
certain transactions at all. Normally you have to write your
applications so that they are always prepared to re-issue a
transaction if it gets rolled back because of a deadlock. 

</P>
<P>
InnoDB uses automatic row level locking. You can get deadlocks
even in the case of transactions which just insert or delete a
single row. That is because these operations are not really 'atomic':
they automatically set locks on the (possibly several) index
records of the row inserted/deleted. 

</P>
<P>
You can cope with deadlocks and reduce the
number of them with the following tricks: 

</P>

<UL>
<LI>

Use <CODE>SHOW INNODB STATUS</CODE> in MySQL versions &#62;= 3.23.52 and &#62;= 4.0.3
to determine the cause of the latest deadlock. That can help you to tune
your application to avoid deadlocks. 
<LI>

Always be prepared to re-issue a transaction if it fails in a
deadlock. Deadlocks are not dangerous. Just try again. 
<LI>

Commit your transactions often. Small transactions are less prone to collide. 
<LI>

If you are using locking reads <CODE>SELECT ... FOR UPDATE</CODE>
or <CODE>... LOCK IN SHARE MODE</CODE>, try using a lower isolation
level <CODE>READ COMMITTED</CODE>. 
<LI>

Access your tables and rows in a fixed order. Then transactions will
form nice queues, and do not deadlock. 
<LI>

Add good indexes to your tables. Then your queries need to
scan less index records and consequently set less locks.
Use <CODE>EXPLAIN SELECT</CODE> to determine that MySQL picks
appropriate indexes for your queries. 
<LI>

Use less locking: if you can afford a <CODE>SELECT</CODE> to return data
from an old snapshot, do not add the clause <CODE>FOR UPDATE</CODE>
or <CODE>LOCK IN SHARE MODE</CODE> to it. Using <CODE>READ COMMITTED</CODE>
isolation level is good here, because each consistent read
within the same transaction reads from its own fresh snapshot. 
<LI>

If nothing helps, serialize your transactions with table
level locks: <CODE>LOCK TABLES t1 WRITE, t2 READ, ... ;
[do something with tables t1 and t2 here]; UNLOCK TABLES</CODE>.
Table level locks make you transactions to queue nicely,
and deadlocks are avoided. Note that <CODE>LOCK TABLES</CODE>
implicitly starts a transaction, just like the command <CODE>BEGIN</CODE>,
and <CODE>UNLOCK TABLES</CODE> implicitly ends the transaction in a <CODE>COMMIT</CODE>. 
<LI>

Another solution to serialize transactions is to create
an auxiliary 'semaphore' table where there is just a
single row. Each transaction updates that row before
accessing other tables. In that way all transactions
happen in a serial fashion. Note that then also the
InnoDB instant deadlock detection algorithm works,
because the serializing lock is a row level lock.
In MySQL table level locks we have to resort to the timeout method to
resolve a deadlock.
</UL>



<H4><A NAME="Innodb_tuning" HREF="manual_toc.html#Innodb_tuning">7.5.8.8  Performance Tuning Tips</A></H4>

<P>
<STRONG>1.</STRONG>
If the Unix <TT>`top'</TT> or the Windows <TT>`Task Manager'</TT> shows that
the CPU usage percentage with your workload is less than 70%,
your workload is probably
disk-bound. Maybe you are making too many transaction commits, or the
buffer pool is too small.
Making the buffer pool bigger can help, but do not set
it bigger than 80% of physical memory.

</P>
<P>
<STRONG>2.</STRONG>
Wrap several modifications into one transaction. InnoDB must
flush the log to disk at each transaction commit, if that transaction
made modifications to the database. Since the rotation speed of a disk
is typically
at most 167 revolutions/second, that constrains the number of commits
to the same 167/second if the disk does not fool the operating system.

</P>
<P>
<STRONG>3.</STRONG>
If you can afford the loss of some latest committed transactions, you can
set the <TT>`my.cnf'</TT> parameter <CODE>innodb_flush_log_at_trx_commit</CODE>
to 0. InnoDB tries to flush the log once per second anyway,
though the flush is not guaranteed.

</P>
<P>
<STRONG>4.</STRONG>
Make your log files big, even as big as the buffer pool. When InnoDB
has written the log files full, it has to write the modified contents
of the buffer pool to disk in a checkpoint. Small log files will cause many
unnecessary disk writes. The drawback in big log files is that recovery
time will be longer.

</P>
<P>
<STRONG>5.</STRONG>
Also the log buffer should be quite big, say 8 MB.

</P>
<P>
<STRONG>6.</STRONG> (Relevant from 3.23.39 up.)
In some versions of Linux and Unix, flushing files to disk with the Unix
<CODE>fdatasync</CODE> and other similar methods is surprisingly slow.
The default method InnoDB uses is the <CODE>fdatasync</CODE> function.
If you are not satisfied with the database write performance, you may
try setting <CODE>innodb_flush_method</CODE> in <TT>`my.cnf'</TT>
to <CODE>O_DSYNC</CODE>, though O_DSYNC seems to be slower on most systems.

</P>
<P>
<STRONG>7.</STRONG> In importing data to InnoDB, make sure that MySQL does not have
<CODE>autocommit=1</CODE> on. Then every insert requires a log flush to disk.
Put before your plain SQL import file line

</P>

<PRE>
SET AUTOCOMMIT=0;
</PRE>

<P>
and after it

</P>

<PRE>
COMMIT;
</PRE>

<P>
If you use the <TT>`mysqldump'</TT> option <CODE>--opt</CODE>, you will get dump
files which are fast to import also to an InnoDB table, even without wrapping
them to the above <CODE>SET AUTOCOMMIT=0; ... COMMIT;</CODE> wrappers.

</P>
<P>
<STRONG>8.</STRONG>
Beware of big rollbacks of mass inserts: InnoDB uses the insert buffer
to save disk I/O in inserts, but in a corresponding rollback no such
mechanism is used. A disk-bound rollback can take 30 times the time
of the corresponding insert. Killing the database process will not
help because the rollback will start again at the database startup. The
only way to get rid of a runaway rollback is to increase the buffer pool
so that the rollback becomes CPU-bound and runs fast, or delete the whole
InnoDB database.

</P>
<P>
<STRONG>9.</STRONG>
Beware also of other big disk-bound operations.
Use <CODE>DROP TABLE</CODE> or <CODE>TRUNCATE</CODE> (from MySQL-4.0 up) to empty a
table, not <CODE>DELETE FROM yourtable</CODE>.

</P>
<P>
<STRONG>10.</STRONG>
Use the multi-line <CODE>INSERT</CODE> to reduce
communication overhead between the client and the server if you need
to insert many rows:

</P>

<PRE>
INSERT INTO yourtable VALUES (1, 2), (5, 5);
</PRE>

<P>
This tip is of course valid for inserts into any table type, not just InnoDB.

</P>


<H4><A NAME="Innodb_Monitor" HREF="manual_toc.html#Innodb_Monitor">7.5.8.9  The InnoDB Monitor</A></H4>

<P>
Starting from version 3.23.41 InnoDB includes the InnoDB
Monitor which prints information on the InnoDB internal state.
When switched on, InnoDB Monitor
will make the MySQL server <TT>`mysqld'</TT> to print data
(note: the MySQL client will not print anything)
to the standard
output about once every 15 seconds. This data is useful in
performance tuning.
On Windows you must start <CODE>mysqld-max</CODE>
from a MS-DOS prompt
with the <CODE>--standalone --console</CODE>
options to direct the output to the MS-DOS prompt
window.

</P>
<P>
There is a separate <CODE>innodb_lock_monitor</CODE> which
prints the same information as <CODE>innodb_monitor</CODE>
plus information on locks set by each transaction.

</P>
<P>
The printed information includes data on:

<UL>
<LI>

lock waits of a transactions,
<LI>

semaphore waits of threads,
<LI>

pending file I/O requests,
<LI>

buffer pool statistics, and
<LI>

purge and insert buffer merge activity of the main thread
of InnoDB.
</UL>

<P>
You can start InnoDB Monitor through the following
SQL command:

</P>

<PRE>
CREATE TABLE innodb_monitor(a int) type = innodb;
</PRE>

<P>
and stop it by

</P>

<PRE>
DROP TABLE innodb_monitor;
</PRE>

<P>
The <CODE>CREATE TABLE</CODE> syntax is just a way to pass a command
to the InnoDB engine through the MySQL SQL parser: the created
table is not relevant at all for InnoDB Monitor. If you shut down
the database when the monitor is running, and you want to start
the monitor again, you have to drop the
table before you can issue a new <CODE>CREATE TABLE</CODE>
to start the monitor.
This syntax may change in a future release.

</P>

<P>
A sample output of the InnoDB Monitor:

</P>

<PRE>
================================
010809 18:45:06 INNODB MONITOR OUTPUT
================================
--------------------------
LOCKS HELD BY TRANSACTIONS
--------------------------
LOCK INFO:
Number of locks in the record hash table 1294
LOCKS FOR TRANSACTION ID 0 579342744
TABLE LOCK table test/mytable trx id 0 582333343 lock_mode IX

RECORD LOCKS space id 0 page no 12758 n bits 104 table test/mytable index
PRIMARY trx id 0 582333343 lock_mode X
Record lock, heap no 2 PHYSICAL RECORD: n_fields 74; 1-byte offs FALSE;
info bits 0
 0: len 4; hex 0001a801; asc ;; 1: len 6; hex 000022b5b39f; asc ";;
 2: len 7; hex 000002001e03ec; asc ;; 3: len 4; hex 00000001;
...
-----------------------------------------------
CURRENT SEMAPHORES RESERVED AND SEMAPHORE WAITS
-----------------------------------------------
SYNC INFO:
Sorry, cannot give mutex list info in non-debug version!
Sorry, cannot give rw-lock list info in non-debug version!
-----------------------------------------------------
SYNC ARRAY INFO: reservation count 6041054, signal count 2913432
4a239430 waited for by thread 49627477 op. S-LOCK file NOT KNOWN line 0
Mut ex 0 sp 5530989 r 62038708 sys 2155035;
rws 0 8257574 8025336; rwx 0 1121090 1848344
-----------------------------------------------------
CURRENT PENDING FILE I/O'S
--------------------------
Pending normal aio reads:
Reserved slot, messages 40157658 4a4a40b8
Reserved slot, messages 40157658 4a477e28
...
Reserved slot, messages 40157658 4a4424a8
Reserved slot, messages 40157658 4a39ea38
Total of 36 reserved aio slots
Pending aio writes:
Total of 0 reserved aio slots
Pending insert buffer aio reads:
Total of 0 reserved aio slots
Pending log writes or reads:
Reserved slot, messages 40158c98 40157f98
Total of 1 reserved aio slots
Pending synchronous reads or writes:
Total of 0 reserved aio slots
-----------
BUFFER POOL
-----------
LRU list length 8034
Free list length 0
Flush list length 999
Buffer pool size in pages 8192
Pending reads 39
Pending writes: LRU 0, flush list 0, single page 0
Pages read 31383918, created 51310, written 2985115
----------------------------
END OF INNODB MONITOR OUTPUT
============================
010809 18:45:22 InnoDB starts purge
010809 18:45:22 InnoDB purged 0 pages
</PRE>

<P>
Some notes on the output:

</P>

<UL>
<LI>

If the section LOCKS HELD
BY TRANSACTIONS reports lock waits, then your application
may have lock contention. The output can also help to
trace reasons for transaction deadlocks.
<LI>

Section SYNC INFO will report reserved semaphores
if you compile InnoDB with <CODE>UNIV_SYNC_DEBUG</CODE>
defined in <TT>`univ.i'</TT>.
<LI>

Section SYNC ARRAY INFO reports threads waiting
for a semaphore and statistics on how many times
threads have needed a spin or a wait on a mutex or
a rw-lock semaphore. A big number of threads waiting
for semaphores may be a result of disk I/O, or
contention problems inside InnoDB. Contention can be
due to heavy parallelism of queries, or problems in
operating system thread scheduling.
<LI>

Section CURRENT PENDING FILE I/O'S lists pending
file I/O requests. A large number of these indicates
that the workload is disk I/O-bound.
<LI>

Section BUFFER POOL gives you statistics
on pages read and written. You can calculate from these
numbers how many datafile I/Os your queries are
currently doing.
</UL>



<H3><A NAME="Implementation" HREF="manual_toc.html#Implementation">7.5.9  Implementation of Multi-versioning</A></H3>

<P>
Since InnoDB is a multi-versioned database, it must keep information
of old versions of rows in the tablespace. This information is stored
in a data structure we call a rollback segment after an analogous
data structure in Oracle.

</P>
<P>
InnoDB internally adds two fields to each row stored in the database.
A 6-byte field tells the transaction identifier for the last
transaction which inserted or updated the row. Also a deletion
is internally treated as an update where a special bit in the row
is set to mark it as deleted. Each row also contains a 7-byte
field called the roll pointer. The roll pointer points to an
undo log record written to the rollback segment. If the row was
updated, then the undo log record contains the information necessary
to rebuild the content of the row before it was updated.

</P>
<P>
InnoDB uses the information in the rollback segment to perform the
undo operations needed in a transaction rollback. It also uses the
information to build earlier versions of a row for a consistent
read.

</P>
<P>
Undo logs in the rollback segment are divided into insert and update
undo logs. Insert undo logs are only needed in transaction rollback
and can be discarded as soon as the transaction commits. Update undo logs
are used also in consistent reads, and they can be discarded only after
there is no transaction present for which InnoDB has assigned
a snapshot that in a consistent read could need the information
in the update undo log to build an earlier version of a database
row.

</P>
<P>
You must remember to commit your transactions regularly,
also those transactions which only issue consistent reads.
Otherwise
InnoDB cannot discard data from the update undo logs, and the
rollback segment may grow too big, filling up your tablespace.

</P>
<P>
The physical size of an undo log record in the rollback segment
is typically smaller than the corresponding inserted or updated
row. You can use this information to calculate the space need
for your rollback segment.

</P>
<P>
In our multi-versioning scheme a row is not physically removed from
the database immediately when you delete it with an SQL statement.
Only  when InnoDB can discard the update undo log record written for
the deletion, it can also physically remove the corresponding row and
its index records from the database. This removal operation is
called a purge, and it is quite fast, usually taking the same order of
time as the SQL statement which did the deletion.

</P>



<H3><A NAME="Table_and_index" HREF="manual_toc.html#Table_and_index">7.5.10  Table and Index Structures</A></H3>

<P>
MySQL stores its data dictionary information of tables
in <TT>`.frm'</TT>
files in database directories. But every InnoDB type table
also has its own entry in InnoDB internal data dictionaries
inside the tablespace. When MySQL drops a table or a database,
it has to delete both a <TT>`.frm'</TT> file or files, and
the corresponding entries inside the InnoDB data dictionary.
This is the reason why you cannot move InnoDB tables between
databases simply by moving the <TT>`.frm'</TT> files, and why
<CODE>DROP DATABASE</CODE> did not work for InnoDB type tables
in MySQL versions &#60;= 3.23.43.

</P>
<P>
Every InnoDB table has a special index called the clustered index
where the data of the rows is stored. If you define a
<CODE>PRIMARY KEY</CODE> on your table, then the index of the primary key
will be the clustered index.

</P>
<P>
If you do not define a primary key for
your table, InnoDB will internally generate a clustered index
where the rows are ordered by the row id InnoDB assigns
to the rows in such a table. The row id is a 6-byte field which
monotonically increases as new rows are inserted. Thus the rows
ordered by the row id will be physically in the insertion order.

</P>
<P>
Accessing a row through the clustered index is fast, because
the row data will be on the same page where the index search
leads us. In many databases the data is traditionally stored on a different
page from the index record. If a table is large, the clustered
index architecture often saves a disk I/O when compared to the
traditional solution.

</P>
<P>
The records in non-clustered indexes (we also call them secondary indexes),
in InnoDB contain the primary key value for the row. InnoDB
uses this primary key value to search for the row from the clustered
index. Note that if the primary key is long, the secondary indexes
will use more space.

</P>



<H4><A NAME="InnoDB_physical_structure" HREF="manual_toc.html#InnoDB_physical_structure">7.5.10.1  Physical Structure of an Index</A></H4>

<P>
All indexes in InnoDB are B-trees where the index records are
stored in the leaf pages of the tree. The default size of an index
page is 16 kB. When new records are inserted, InnoDB tries to
leave 1 / 16 of the page free for future insertions and updates
of the index records.

</P>
<P>
If index records are inserted in a sequential (ascending or descending)
order, the resulting index pages will be about 15/16 full.
If records are inserted in a random order, then the pages will be
1/2 - 15/16 full. If the fillfactor of an index page drops below 1/2,
InnoDB will try to contract the index tree to free the page.

</P>



<H4><A NAME="InnoDB_Insert_buffering" HREF="manual_toc.html#InnoDB_Insert_buffering">7.5.10.2  Insert Buffering</A></H4>

<P>
It is a common situation in a database application that the
primary key is a unique identifier and new rows are inserted in the
ascending order of the primary key. Thus the insertions to the
clustered index do not require random reads from a disk.

</P>
<P>
On the other hand, secondary indexes are usually non-unique and
insertions happen in a relatively random order into secondary indexes.
This would cause a lot of random disk I/Os without a special mechanism
used in InnoDB.

</P>
<P>
If an index record should be inserted to a non-unique secondary index,
InnoDB checks if the secondary index page is already in the buffer
pool. If that is the case, InnoDB will do the insertion directly to
the index page. But, if the index page is not found from the buffer
pool, InnoDB inserts the record to a special insert buffer structure.
The insert buffer is kept so small that it entirely fits in the buffer
pool, and insertions can be made to it very fast.

</P>
<P>
The insert buffer is periodically merged to the secondary index
trees in the database. Often we can merge several insertions on the
same page in of the index tree, and hence save disk I/Os.
It has been measured that the insert buffer can speed up insertions
to a table up to 15 times.

</P>



<H4><A NAME="InnoDB_Adaptive_hash" HREF="manual_toc.html#InnoDB_Adaptive_hash">7.5.10.3  Adaptive Hash Indexes</A></H4>

<P>
If a database fits almost entirely in main memory, then the fastest way
to perform queries on it is to use hash indexes. InnoDB has an
automatic mechanism which monitors index searches made to the indexes
defined for a table, and if InnoDB notices that queries could
benefit from building of a hash index, such an index is automatically
built.

</P>
<P>
But note that the hash index is always built based on an existing
B-tree index on the table. InnoDB can build a hash index on a prefix
of any length of the key defined for the B-tree, depending on
what search pattern InnoDB observes on the B-tree index.
A hash index can be partial: it is not required that the whole
B-tree index is cached in the buffer pool. InnoDB will build
hash indexes on demand to those pages of the index which are
often accessed.

</P>
<P>
In a sense, through the adaptive hash index mechanism InnoDB adapts itself
to ample main memory, coming closer to the architecture of main memory
databases.

</P>



<H4><A NAME="InnoDB_Physical_record" HREF="manual_toc.html#InnoDB_Physical_record">7.5.10.4  Physical Record Structure</A></H4>


<UL>
<LI>

Each index record in InnoDB contains a header of 6 bytes. The header
is used to link consecutive records together, and also in the row level
locking.
<LI>

Records in the clustered index contain fields for all user-defined
columns. In addition, there is a 6-byte field for the transaction id
and a 7-byte field for the roll pointer.
<LI>

If the user has not defined a primary key for a table, then each clustered
index record contains also a 6-byte row id field.
<LI>

Each secondary index record contains also all the fields defined
for the clustered index key.
<LI>

A record contains also a pointer to each field of the record.
If the total length of the fields in a record is &#60; 128 bytes, then
the pointer is 1 byte, else 2 bytes.
</UL>



<H4><A NAME="SEC484" HREF="manual_toc.html#SEC484">7.5.10.5  How an Auto-increment Column Works in InnoDB</A></H4>

<P>
After a database startup, when a user first does an insert to a
table <CODE>T</CODE>
where an auto-increment column has been defined, and the user does not provide
an explicit value for the column, then InnoDB executes <CODE>SELECT
MAX(auto-inc-column) FROM T</CODE>, and assigns that value incremented
by one to the column and the auto-increment counter of the table.
We say that
the auto-increment counter for table <CODE>T</CODE> has been initialised.

</P>
<P>
InnoDB follows the same procedure in initializing the auto-increment counter
for a freshly created table.

</P>
<P>
Note that if the user specifies in an insert the value 0 to the auto-increment
column, then InnoDB treats the row like the value would not have been
specified.

</P>
<P>
After the auto-increment counter has been initialised, if a user inserts
a row where he explicitly specifies the column value, and the value is bigger
than the current counter value, then the counter is set to the specified
column value. If the user does not explicitly specify a value, then InnoDB
increments the counter by one and assigns its new value to the column.

</P>
<P>
The auto-increment mechanism, when assigning values from the counter,
bypasses locking and transaction handling. Therefore you may also get
gaps in the number sequence if you roll back transactions which have
got numbers from the counter.

</P>
<P>
The behaviour of auto-increment is not defined if a user gives a negative
value to the column or if the value becomes bigger than the maximum
integer that can be stored in the specified integer type.

</P>



<H3><A NAME="File_space_management" HREF="manual_toc.html#File_space_management">7.5.11  File Space Management and Disk I/O</A></H3>



<H4><A NAME="InnoDB_Disk_I_O" HREF="manual_toc.html#InnoDB_Disk_I_O">7.5.11.1  Disk I/O</A></H4>

<P>
In disk I/O InnoDB uses asynchronous I/O. On Windows NT
it uses the native asynchronous I/O provided by the operating system.
On Unix, InnoDB uses simulated asynchronous I/O built
into InnoDB: InnoDB creates a number of I/O threads to take care
of I/O operations, such as read-ahead. In a future version we will
add support for simulated aio on Windows NT and native aio on those
versions of Unix which have one.

</P>
<P>
On Windows NT InnoDB uses non-buffered I/O. That means that the disk
pages InnoDB reads or writes are not buffered in the operating system
file cache. This saves some memory bandwidth.

</P>
<P>
Starting from 3.23.41 InnoDB uses a novel file flush technique
called doublewrite.
It adds safety to crash recovery after an operating system crash
or a power outage, and improves performance on most Unix flavors
by reducing the need for fsync operations.

</P>
<P>
Doublewrite means that InnoDB before writing pages to a datafile
first writes them to a contiguous tablespace area called the
doublewrite buffer. Only after the write and the flush to the doublewrite
buffer has completed, InnoDB writes the pages to their proper
positions in the datafile. If the operating system crashes in the
middle of a page write, InnoDB will in recovery find a good
copy of the page from the doublewrite buffer.

</P>
<P>
Starting from 3.23.41
you can also use a raw disk partition as a datafile, though this has
not been tested yet. When you create a new datafile you have
to put the keyword <CODE>newraw</CODE> immediately after the data
file-size in <CODE>innodb_data_file_path</CODE>. The partition must be
&#62;= than you specify as the size. Note that 1M in InnoDB is
1024 x 1024 bytes, while in disk specifications 1 MB usually means
1000 000 bytes.

</P>

<PRE>
innodb_data_file_path=hdd1:5Gnewraw;hdd2:2Gnewraw
</PRE>

<P>
When you start the database again you <STRONG>must</STRONG> change the keyword
to <CODE>raw</CODE>. Otherwise, InnoDB will write over your
partition!

</P>

<PRE>
innodb_data_file_path=hdd1:5Graw;hdd2:2Graw
</PRE>

<P>
By using a raw disk you can on some Unixes perform unbuffered I/O.

</P>
<P>
There are two read-ahead heuristics in InnoDB: sequential read-ahead
and random read-ahead. In sequential read-ahead InnoDB notices that
the access pattern to a segment in the tablespace is sequential.
Then InnoDB will post in advance a batch of reads of database pages to the
I/O system. In random read-ahead InnoDB notices that some area
in a tablespace seems to be in the process of being
fully read into the buffer pool. Then InnoDB posts the remaining
reads to the I/O system.

</P>



<H4><A NAME="InnoDB_File_space" HREF="manual_toc.html#InnoDB_File_space">7.5.11.2  File Space Management</A></H4>

<P>
The datafiles you define in the configuration file form the tablespace
of InnoDB. The files are simply catenated to form the tablespace,
there is no striping in use.
Currently you cannot directly instruct where the space is allocated
for your tables, except by using the following fact: from a newly created
tablespace InnoDB will allocate space starting from the low end.

</P>
<P>
The tablespace consists of database pages whose default size is 16 kB.
The pages are grouped into extents of 64 consecutive pages. The 'files' inside
a tablespace are called segments in InnoDB. The name of the rollback
segment is somewhat misleading because it actually contains many
segments in the tablespace.

</P>
<P>
For each index in InnoDB we allocate two segments: one is for non-leaf
nodes of the B-tree, the other is for the leaf nodes. The idea here is
to achieve better sequentiality for the leaf nodes, which contain the
data.

</P>
<P>
When a segment grows inside the tablespace, InnoDB allocates the
first 32 pages to it individually. After that InnoDB starts
to allocate whole extents to the segment.
InnoDB can add to a large segment up to 4 extents at a time to ensure
good sequentiality of data.

</P>
<P>
Some pages in the tablespace contain bitmaps of other pages, and
therefore a few extents in an InnoDB tablespace cannot be
allocated to segments as a whole, but only as individual pages.

</P>
<P>
When you issue a query <CODE>SHOW TABLE STATUS FROM ... LIKE ...</CODE>
to ask for available free space in the tablespace, InnoDB will
report the extents which are definitely free in the tablespace.
InnoDB always reserves some extents for clean-up and other internal
purposes; these reserved extents are not included in the free space.

</P>
<P>
When you delete data from a table, InnoDB will contract the corresponding
B-tree indexes. It depends on the pattern of deletes if that frees
individual pages or extents to the tablespace, so that the freed
space is available for other users. Dropping a table or deleting
all rows from it is guaranteed to release the space to other users,
but remember that deleted rows can be physically removed only in a
purge operation after they are no longer needed in transaction rollback or
consistent read.

</P>



<H4><A NAME="InnoDB_File_Defragmenting" HREF="manual_toc.html#InnoDB_File_Defragmenting">7.5.11.3  Defragmenting a Table</A></H4>

<P>
If there are random insertions or deletions
in the indexes of a table, the indexes
may become fragmented. By fragmentation we mean that the physical ordering
of the index pages on the disk is not close to the alphabetical ordering
of the records on the pages, or that there are many unused pages in the
64-page blocks which were allocated to the index.

</P>
<P>
It can speed up index scans if you
periodically use <CODE>mysqldump</CODE> to dump the table to
a text file, drop the table, and reload it from the dump.
Another way to do the defragmenting is to <CODE>ALTER</CODE> the table type to
<CODE>MyISAM</CODE> and back to <CODE>InnoDB</CODE> again.
Note that a <CODE>MyISAM</CODE> table must fit in a single file
on your operating system.

</P>
<P>
If the insertions to and index are always ascending and
records are deleted only from the end, then the file space management
algorithm of InnoDB guarantees that fragmentation in the index will
not occur.

</P>


<H3><A NAME="Error_handling" HREF="manual_toc.html#Error_handling">7.5.12  Error Handling</A></H3>

<P>
The error handling in InnoDB is not always the same as
specified in the ANSI SQL standards. According to the ANSI
standard, any error during an SQL statement should cause the
rollback of that statement. InnoDB sometimes rolls back only
part of the statement, or the whole transaction.
The following list specifies the error handling of InnoDB.

</P>

<UL>
<LI>

If you run out of file space in the tablespace,
you will get the MySQL <CODE>'Table is full'</CODE> error
and InnoDB rolls back the SQL statement.
<LI>

A transaction deadlock or a timeout in a lock wait make InnoDB
to roll back
the whole transaction.
<LI>

A duplicate key error only rolls back the insert of that particular row,
even in a statement like <CODE>INSERT INTO ... SELECT ...</CODE>.
This will probably change so that the SQL statement will be rolled
back if you have not specified the <CODE>IGNORE</CODE> option in your
statement.
<LI>

A 'row too long' error rolls back the SQL statement.
<LI>

Other errors are mostly detected by the MySQL layer of code, and
they roll back the corresponding SQL statement.
</UL>



<H3><A NAME="InnoDB_restrictions" HREF="manual_toc.html#InnoDB_restrictions">7.5.13  Restrictions on InnoDB Tables</A></H3>


<UL>

<LI>

<STRONG>Warning</STRONG>: do <STRONG>NOT</STRONG> convert MySQL system tables from
MyISAM TO InnoDB tables!  This is not supported; if you do this MySQL
will not restart until you restore the old system tables from a backup
or re-generate them with the <CODE>mysql_install_db</CODE> script.

<LI>

<CODE>SHOW TABLE STATUS</CODE> does not give accurate statistics
on InnoDB tables, except for the physical size reserved by the table.
The row count is only a rough estimate used in SQL optimisation.

<LI>

If you try to create a unique index on a prefix of a column you will get an
error:


<PRE>
CREATE TABLE T (A CHAR(20), B INT, UNIQUE (A(5))) TYPE = InnoDB;
</PRE>

If you create a non-unique index on a prefix of a column, InnoDB will
create an index over the whole column.
<LI>

<CODE>INSERT DELAYED</CODE> is not supported for InnoDB tables.
<LI>

The MySQL <CODE>LOCK TABLES</CODE> operation does not know of InnoDB
row level locks set in already completed SQL statements: this means that
you can get a table lock on a table even if there still exist transactions
of other users which have row level locks on the same table. Thus
your operations on the table may have to wait if they collide with
these locks of other users. Also a deadlock is possible. However,
this does not endanger transaction integrity, because the row level
locks set by InnoDB will always take care of the integrity.
Also, a table lock prevents other transactions from acquiring more
row level locks (in a conflicting lock mode) on the table.
<LI>

You cannot have a key on a <CODE>BLOB</CODE> or <CODE>TEXT</CODE> column.
<LI>

A table cannot contain more than 1000 columns.
<LI>

<CODE>DELETE FROM TABLE</CODE> does not regenerate the table but instead
deletes all rows, one by one, which is not that fast. In future versions
of MySQL you can use <CODE>TRUNCATE</CODE> which is fast.
<LI>

The default database page size in InnoDB is 16 kB. By recompiling the
code one can set it from 8 kB to 64 kB.
The maximun row length is slightly less than half of a database page
in versions &#60;= 3.23.40 of InnoDB. Starting from source
release 3.23.41 BLOB and
TEXT columns are allowed to be &#60; 4 GB, the total row length must also be
&#60; 4 GB. InnoDB does not store fields whose size is &#60;= 128 bytes on separate
pages. After InnoDB has modified the row by storing long fields on
separate pages, the remaining length of the row must be less
than half a database page. The maximun key length is 7000 bytes.
<LI>

On some operating systems datafiles must be &#60; 2 GB. The combined
size of log files must be &#60; 4 GB.
<LI>

The maximum tablespace size is 4 billion database pages. This is also
the maximum size for a table. The minimum tablespace size is 10 MB.
</UL>



<H3><A NAME="InnoDB_change_history" HREF="manual_toc.html#InnoDB_change_history">7.5.14  InnoDB Change History</A></H3>



<H4><A NAME="SEC492" HREF="manual_toc.html#SEC492">7.5.14.1  MySQL/InnoDB-4.1.0, April x, 2003</A></H4>

<UL>
<LI>

<LI>

InnoDB now supports up to 64 GB of buffer pool memory in a
Windows 32-bit Intel computer. This is possible because InnoDB
can use the AWE extension of Windows to address memory over
the 4 GB limit of a 32-bit process. A new startup variable
innodb_buffer_pool_awe_mem_mb enables AWE and sets the size
of the buffer pool in megabytes. 
<LI>

Reduced the size of buffer headers and the lock table. InnoDB uses
2 % less memory. 
</UL>



<H4><A NAME="SEC493" HREF="manual_toc.html#SEC493">7.5.14.2  MySQL/InnoDB-3.23.56, March xx, 2003</A></H4>

<UL>
<LI>

Fixed a major bug in InnoDB query optimization: queries of type
SELECT ... WHERE indexcolumn &#60; x and SELECT ... WHERE
indexcolumn &#62; x could cause a table scan even if the selectivity
would have been very good. 
</UL>



<H4><A NAME="SEC494" HREF="manual_toc.html#SEC494">7.5.14.3  MySQL/InnoDB-4.0.12, March xx, 2003</A></H4>

<UL>
<LI>

In crash recovery InnoDB now prints the progress in percents of a
transaction rollback.
</UL>



<H4><A NAME="SEC495" HREF="manual_toc.html#SEC495">7.5.14.4  MySQL/InnoDB-4.0.11, February 25, 2003</A></H4>

<UL>
<LI>

Fixed a bug introduced in 4.0.10: SELECT ... FROM ... ORDER BY ... DESC
could hang in an infinite loop. 
<LI>

An outstanding bug: SET FOREIGN_KEY_CHECKS=0 is not replicated properly
in the MySQL replication.
</UL>



<H4><A NAME="SEC496" HREF="manual_toc.html#SEC496">7.5.14.5  MySQL/InnoDB-4.0.10, February 4, 2003</A></H4>

<UL>
<LI>

In INSERT INTO t1 SELECT ... FROM t2 WHERE ... MySQL previously
set a table level read lock on t2. This lock is now removed. 
<LI>

Increased SHOW INNODB STATUS max printed length to 200 kB. 
<LI>

Fixed a major bug in InnoDB query optimization: queries of type
SELECT ... WHERE indexcolumn &#60; x and SELECT ... WHERE
indexcolumn &#62; x could cause a table scan even if the
selectivity would have been very good. 
<LI>

Fixed a bug: purge could cause a hang in a BLOB table where the
primary key index tree was of height 1. Symptom: semaphore waits
caused by an X-latch set in btr_free_externally_stored_field(). 
<LI>

Fixed a bug: using InnoDB HANDLER commands on a fresh handle
crashed mysqld in ha_innobase::change_active_index(). 
<LI>

Fixed a bug: if MySQL estimated a query in the middle of a SELECT
statement, InnoDB could hang on the adaptive hash index latch in btr0sea.c. 
<LI>

Fixed a bug: InnoDB could report table corruption and assert
in page_dir_find_owner_slot() if an adaptive hash index search
coincided with purge or an insert. 
<LI>

Fixed a bug: some file system snapshot tool in Windows 2000 could
cause an InnoDB file write to fail with error 33 ERROR_LOCK_VIOLATION.
In synchronous writes InnoDB now retries the write 100 times at 1
second intervals. 
<LI>

Fixed a bug: REPLACE INTO t1 SELECT ... did not work if t1 has an
auto-inc column. 
<LI>

An outstanding bug: SET FOREIGN_KEY_CHECKS=0 is not replicated properly
in the MySQL replication.
</UL>



<H4><A NAME="SEC497" HREF="manual_toc.html#SEC497">7.5.14.6  MySQL/InnoDB-3.23.55, January 24, 2003</A></H4>

<UL>
<LI>

In INSERT INTO t1 SELECT ... FROM t2 WHERE ... MySQL previously set
a table level read lock on t2. This lock is now removed.
<LI>

Fixed a bug: if the combined size of InnoDB log files was &#62;= 2
GB in a 32-bit computer, InnoDB would write log in a wrong
position. That could make crash recovery and InnoDB Hot Backup
to fail in log scan. 
<LI>

Fixed a bug: index cursor restoration could theoretically fail. 
<LI>

Fixed a bug: an assertion in btr0sea.c, in function
btr_search_info_update_slow could theoretically fail in a race of 3 threads. 
<LI>

Fixed a bug: purge could cause a hang in a BLOB table where the
primary key index tree was of height 1. Symptom: semaphore waits
caused by an X-latch set in btr_free_externally_stored_field(). 
<LI>

Fixed a bug: if MySQL estimated a query in the middle of a SELECT statement,
InnoDB could hang on the adaptive hash index latch in btr0sea.c. 
<LI>

Fixed a bug: InnoDB could report table corruption and assert in
page_dir_find_owner_slot() if an adaptive hash index search
coincided with purge or an insert. 
<LI>

Fixed a bug: some file system snapshot tool in Windows 2000 could
cause an InnoDB file write to fail with error 33 ERROR_LOCK_VIOLATION.
In synchronous writes InnoDB now retries the write 100 times
at 1 second intervals. 
<LI>

An outstanding bug: SET FOREIGN_KEY_CHECKS=0 is not replicated properly
in the MySQL replication. The fix will appear in 4.0.11 and will probably
not be backported to 3.23.
<LI>

Fixed bug in InnoDB page0cur.c in function page_cur_search_with_match
which caused InnoDB to remain on the same page forever.
This bug is evident only in tables with more than one page.
</UL>



<H4><A NAME="SEC498" HREF="manual_toc.html#SEC498">7.5.14.7  MySQL/InnoDB-4.0.9, January 14, 2003</A></H4>

<UL>
<LI>

Removed the warning message: 'InnoDB: Out of memory in additional memory pool.'
<LI>

Fixed a bug: if the combined size of InnoDB log files was &#62;= 2 GB in a
32-bit computer, InnoDB would write log in a wrong position. That could
make crash recovery and InnoDB Hot Backup to fail. 
<LI>

Fixed a bug: index cursor restoration could theoretically fail. 
</UL>



<H4><A NAME="SEC499" HREF="manual_toc.html#SEC499">7.5.14.8  MySQL/InnoDB-4.0.8, January 7, 2003</A></H4>

<UL>
<LI>

InnoDB now supports also FOREIGN KEY (...) REFERENCES ...(...)
[ON UPDATE CASCADE | ON UPDATE SET NULL | ON UPDATE RESTRICT
| ON UPDATE NO ACTION]. 
<LI>

Tables and indexes now reserve 4 % less space in the tablespace.
Also existing tables reserve less space. By upgrading to 4.0.8
you will see more free space in "InnoDB free" in SHOW TABLE STATUS. 
<LI>

Fixed bugs: updating the PRIMARY KEY of a row would generate a
foreign key error on all FOREIGN KEYs which referenced secondary
keys of the row to be updated. Also, if a referencing
FOREIGN KEY constraint only referenced the first columns in an
index, and there were more columns in that index, updating the
additional columns generated a foreign key error. 
<LI>

Fixed a bug: if an index contains some column twice, and that
column is updated, the table will become corrupt. From now on
InnoDB prevents creation of such indexes. 
<LI>

Fixed a bug: removed superfluous error 149 and 150 printouts
from the .err log when a locking SELECT caused a deadlock or a
lock wait timeout.
<LI>

Fixed a bug: an assertion in btr0sea.c, in function
btr_search_info_update_slow could theoretically fail in a race of 3 threads. 
<LI>

Fixed a bug: one could not switch a session transaction isolation
level back to REPEATABLE READ after setting it to something else.
</UL>



<H4><A NAME="SEC500" HREF="manual_toc.html#SEC500">7.5.14.9  MySQL/InnoDB-4.0.7, December 26, 2002</A></H4>

<UL>
<LI>

InnoDB in 4.0.7 is essentially the same as in 4.0.6.
</UL>



<H4><A NAME="SEC501" HREF="manual_toc.html#SEC501">7.5.14.10  MySQL/InnoDB-4.0.6, December 19, 2002</A></H4>

<UL>
<LI>

Since innodb_log_arch_dir has no relevance under MySQL,
there is no need to specify it any more in my.cnf. 
<LI>

LOAD DATA INFILE in AUTOCOMMIT=1 mode no longer does
implicit commits for each 1 MB of written binlog. 
<LI>

Fixed a bug introduced in 4.0.4: LOCK TABLES ... READ LOCAL
should not set row locks on the rows read. This caused
deadlocks and lock wait timeouts in mysqldump. 
<LI>

Fixed two bugs introduced in 4.0.4: in AUTO_INCREMENT,
REPLACE could cause the counter to be left 1 too low.
A deadlock or a lock wait timeout could cause the same problem. 
<LI>

Fixed a bug: TRUNCATE on a TEMPORARY table crashed InnoDB. 
<LI>

Fixed a bug introduced in 4.0.5: if binlogging was not switched on,
INSERT INTO ... SELECT ... or CREATE TABLE ... SELECT ... could
cause InnoDB to hang on a semaphore created in btr0sea.c, line 128.
Workaround: switch binlogging on. 
<LI>

Fixed a bug: in replication issuing SLAVE STOP in the middle of
a multi-statement transaction could cause that SLAVE START would
only perform a part of the transaction. A similar error could occur
if the slave crashed and was restarted.
</UL>



<H4><A NAME="SEC502" HREF="manual_toc.html#SEC502">7.5.14.11  MySQL/InnoDB-3.23.54, December 12, 2002</A></H4>

<UL>
<LI>

Fixed a bug: the InnoDB range estimator greatly exaggerated
the size of a short index range if the paths to the endpoints of
the range in the index tree happened to branch already in the root.
This could cause unnecessary table scans in SQL queries. 
<LI>

Fixed a bug: ORDER BY could fail if you had not created a
primary key to a table, but had defined several indexes
of which at least one was a UNIQUE index with all its
columns declared as NOT NULL. 
<LI>

Fixed a bug: a lock wait timeout in connection with
ON DELETE CASCADE could cause corruption in indexes. 
<LI>

Fixed a bug: if a SELECT was done with a unique key
from a primary index, and the search matched to a
delete-marked record, InnoDB could erroneously return the NEXT record. 
<LI>

Fixed a bug introduced in 3.23.53: LOCK TABLES ... READ LOCAL
should not set row locks on the rows read. This caused deadlocks
and lock wait timeouts in mysqldump. 
<LI>

Fixed a bug: if an index contains some column twice, and that
column is updated, the table will become corrupt. From now on
InnoDB prevents creation of such indexes. 
</UL>



<H4><A NAME="SEC503" HREF="manual_toc.html#SEC503">7.5.14.12  MySQL/InnoDB-4.0.5, November 18, 2002</A></H4>

<UL>
<LI>

InnoDB now supports also transaction isolation levels READ COMMITTED
and READ UNCOMMITTED. READ COMMITTED more closely emulates Oracle
and makes porting of applications from Oracle to MySQL easier. 
<LI>

Deadlock resolution is now selective: we try to pick as victims
transactions with less modified or inserted rows. 
<LI>

FOREIGN KEY definitions are now aware of the
lower_case_table_names setting in my.cnf. 
<LI>

SHOW CREATE TABLE does not output the database name
to a FOREIGN KEY definition if the referred table is
in the same database as the table. 
<LI>

InnoDB does a consistency check to most index pages
before writing them to a data file. 
<LI>

If you set innodb_force_recovery &#62; 0, InnoDB tries to
jump over corrupt index records and pages when doing
SELECT * FROM table. This helps in dumping. 
<LI>

InnoDB now again uses asynchronous unbuffered i/o in
Windows 2000 and XP; only unbuffered simulated async
i/o in NT, 95/98/ME. 
<LI>

Fixed a bug: the InnoDB range estimator greatly exaggerated
the size of a short index range if the paths to the
endpoints of the range in the index tree happened
to branch already in the root. This could cause
unnecessary table scans in SQL queries.
The fix will also be backported to 3.23.54. 
<LI>

Fixed a bug present in 3.23.52, 4.0.3, 4.0.4:
InnoDB startup could take very long or even
crash on some Win 95/98/ME computers. 
<LI>

Fixed a bug: the AUTO-INC lock was held to the end
of the transaction if it was granted after a
lock wait. This could cause unnecessary deadlocks. 
<LI>

Fixed a bug: if SHOW INNODB STATUS, innodb_monitor,
or innodb_lock_monitor had to print several hundred
transactions in one report, and the output became
truncated, InnoDB would hang, printing to the error
log many waits for a mutex created at srv0srv.c, line 1621. 
<LI>

Fixed a bug: SHOW INNODB STATUS on Unix always
reported average file read size as 0 bytes. 
<LI>

Fixed a potential bug in 4.0.4: InnoDB now
does ORDER BY ... DESC like MyISAM. 
<LI>

Fixed a bug: DROP TABLE could cause crash or a
hang if there was a rollback concurrently running
on the table. The fix will only be backported to 3.23
if this appears a real problem for users. 
<LI>

Fixed a bug: ORDER BY could fail if you had not
created a primary key to a table, but had defined
several indexes of which at least one was a UNIQUE
index with all its columns declared as NOT NULL. 
<LI>

Fixed a bug: a lock wait timeout in connection
with ON DELETE CASCADE could cause corruption in indexes. 
<LI>

Fixed a bug: if a SELECT was done with a unique
key from a primary index, and the search matched
to a delete-marked record, InnoDB could return the NEXT record. 
<LI>

Outstanding bugs: in 4.0.4 two bugs were introduced
to AUTO_INCREMENT. REPLACE can cause the counter to
be left 1 too low. A deadlock or a lock wait timeout
can cause the same problem. These will be fixed in 4.0.6.
</UL>



<H4><A NAME="SEC504" HREF="manual_toc.html#SEC504">7.5.14.13  MySQL/InnoDB-3.23.53, October 9, 2002</A></H4>

<UL>
<LI>

We again use unbuffered disk i/o to data files in Windows.
Win XP and Win 2000 read performance seems to be
very poor with normal i/o. 
<LI>

Tuned range estimator so that index range scans are
preferred over full index scans. 
<LI>

Allow dropping and creating a table even if
innodb_force_recovery is set. One can use this to
drop a table which would cause a crash in rollback
or purge, or if a failed table import causes a runaway rollback in recovery. 
<LI>

Fixed a bug present in 3.23.52, 4.0.3, 4.0.4: InnoDB startup
could take very long or even crash on some Win 95/98/ME computers. 
<LI>

Fixed a bug: fast shutdown (which is the default)
sometimes was slowed down by purge and insert buffer merge. 
<LI>

Fixed a bug: doing a big SELECT from a table where no
rows were visible in a consistent read could cause a
very long (&#62; 600 seconds) semaphore wait in btr0cur.c line 310. 
<LI>

Fixed a bug: the AUTO-INC lock was held to the end of
the transaction if it was granted after a lock wait.
This could cause unnecessary deadlocks. 
<LI>

Fixed a bug: if you created a temporary table
inside LOCK TABLES, and used that temporary table,
that caused an assertion failure in ha_innobase.cc. 
<LI>

Fixed a bug: if SHOW INNODB STATUS, innodb_monitor,
or innodb_lock_monitor had to print several hundred
transactions in one report, and the output became
truncated, InnoDB would hang, printing to the error
log many waits for a mutex created at srv0srv.c, line 1621. 
<LI>

Fixed a bug: SHOW INNODB STATUS on Unix always
reported average file read size as 0 bytes.
</UL>



<H4><A NAME="SEC505" HREF="manual_toc.html#SEC505">7.5.14.14  MySQL/InnoDB-4.0.4, October 2, 2002</A></H4>

<UL>
<LI>

We again use unbuffered disk i/o in Windows. Win XP and Win 2000
read performance seems to be very poor with normal i/o.
<LI>

Increased the max key length of InnoDB tables from 500 to 1024 bytes.
<LI>

Increased the table comment field in SHOW TABLE STATUS so that
up to 16000 characters of foreign key definitions can be printed there.
<LI>

The auto-increment counter is no longer incremented if
an insert of a row immediately fails in an error.
<LI>

Allow dropping and creating a table even if
innodb_force_recovery is set. One can use this to drop
a table which would cause a crash in rollback or purge,
or if a failed table import causes a runaway rollback in recovery.
<LI>

Fixed a bug: Using ORDER BY primarykey DESC in 4.0.3 causes
an assertion failure in btr0pcur.c, line 203.
<LI>

Fixed a bug: fast shutdown (which is the default) sometimes
was slowed down by purge and insert buffer merge.
<LI>

Fixed a bug: doing a big SELECT from a table where
no rows were visible in a consistent read could cause
a very long (&#62; 600 seconds) semaphore wait in btr0cur.c line 310.
<LI>

Fixed a bug: if the MySQL query cache was used, it did not get
invalidated by a modification done by ON DELETE CASCADE or ...SET NULL.
<LI>

Fixed a bug: if you created a temporary table inside LOCK TABLES,
and used that temporary table, that caused an assertion failure
in ha_innodb.cc.
<LI>

Fixed a bug: if you set innodb_flush_log_at_trx_commit to 1, SHOW
VARIABLES would show its value as 16 million.
</UL>



<H4><A NAME="SEC506" HREF="manual_toc.html#SEC506">7.5.14.15  MySQL/InnoDB-4.0.3, August 28, 2002</A></H4>

<UL>
<LI>

Removed unnecessary deadlocks when inserts have to wait for
a locking read, update, or delete to release its next-key lock.
<LI>

The MySQL <CODE>HANDLER</CODE> SQL commands now work also for <CODE>InnoDB</CODE>
type tables. <CODE>InnoDB</CODE> does the <CODE>HANDLER</CODE> reads always as
consistent reads. <CODE>HANDLER</CODE> is a direct access path to read
individual indexes of tables. In some cases <CODE>HANDLER</CODE> can be
used as a substitute of server-side cursors.
<LI>

Fixed a bug in 4.0.2: even a simple insert could crash the
AIX version.
<LI>

Fixed a bug: if you used in a table name characters whose code is &#62; 127,
in DROP TABLE InnoDB could assert on line 155 of pars0sym.c.
<LI>

Compilation from source now provides a working version both on
HP-UX-11 and HP-UX-10.20. The source of 4.0.2 worked only on 11,
and the source of 3.23.52 only on 10.20.
<LI>

Fixed a bug: if compiled on 64-bit Solaris, InnoDB produced a bus error
at startup.
</UL>



<H4><A NAME="SEC507" HREF="manual_toc.html#SEC507">7.5.14.16  MySQL/InnoDB-3.23.52, August 16, 2002</A></H4>

<UL>
<LI>

The feature set of 3.23 will be frozen from this version on. New features
will go the 4.0 branch, and only bug fixes will be made to the 3.23
branch.
<LI>

Many CPU-bound join queries now run faster. On Windows also many
other CPU-bound queries run faster.
<LI>

A new SQL command SHOW INNODB STATUS returns the output of the
InnoDB Monitor to the client. The InnoDB Monitor now prints detailed info on
the latest detected deadlock.
<LI>

InnoDB made the SQL query optimizer to avoid too much index-only
range scans and choose full table scans instead. This is now fixed.
<LI>

"BEGIN" and "COMMIT" are now added in the binlog around transactions.
The MySQL replication now respects transaction borders:
a user will no longer see half transactions in replication slaves.
<LI>

A replication slave now prints in crash recovery the last
master binlog position it was able to recover to.
<LI>

A new setting innodb_flush_log_at_trx_commit=2 makes InnoDB to write
the log to the operating system file cache at each commit. This is
almost as fast as the setting innodb_flush_log_at_trx_commit=0, and
the setting 2 also has the nice feature that in a crash where the
operating system does not crash, no committed transaction is lost.
If the operating system crashes or there is a power outage, then
the setting 2 is no safer than the setting 0.
<LI>

Added checksum fields to log blocks.
<LI>

SET FOREIGN_KEY_CHECKS=0 helps in importing tables
in an arbitrary order which does not respect the foreign key rules.
<LI>

SET UNIQUE_CHECKS=0 speeds up table imports into InnoDB
if you have UNIQUE constraints on secondary indexes.
<LI>

SHOW TABLE STATUS now lists also possible ON DELETE CASCADE or
ON DELETE SET NULL in the comment field of the table.
<LI>

When CHECK TABLE is run on any InnoDB type table, it now
checks also the adaptive hash index for all tables.
<LI>

If you defined ON DELETE CASCADE or SET NULL and updated the
referenced key in the parent row, InnoDB deleted or updated
the child row. This is now changed to conform to SQL-92: you get
the error 'Cannot delete parent row'.
<LI>

Improved the auto-increment algorithm: now the first insert or
SHOW TABLE STATUS initializes the auto-inc counter for the table.
This removes almost all surprising deadlocks caused by
SHOW TABLE STATUS.
<LI>

Aligned some buffers used in reading and writing to data files.
This allows using unbuffered raw devices as data files in Linux.
<LI>

Fixed a bug: If you updated the primary key of a table so that only the
case of characters changed, that could cause assertion
failures, mostly in page0page.ic line 515.
<LI>

Fixed a bug: If you delete or update a row referenced in a foreign key
constraint and the foreign key check has to wait for a lock,
then the check may report an erroneous result. This
affects also the ON DELETE... operation.
<LI>

Fixed a bug: A deadlock or a lock wait timeout error in InnoDB
causes InnoDB to roll back the whole transaction, but MySQL could still
write the earlier SQL statements to the binlog, even though
InnoDB rolled them back. This could, for example, cause replicated
databases to get out-of-sync.
<LI>

Fixed a bug: If the database happened to crash in the middle of a
commit, then the recovery might leak tablespace pages.
<LI>

Fixed a bug: If you specified a non-latin1 character set in my.cnf,
then, in contrary to what is stated in the manual, in a foreign key
constraint a string type column had to have the same length specification
in the referencing table and the referenced table.
<LI>

Fixed a bug: DROP TABLE or DROP DATABASE could fail if there
simultaneously was a CREATE TABLE running.
<LI>

Fixed a bug: If you configured the buffer pool bigger than 2 GB in
a 32-bit computer, InnoDB would assert in buf0buf.ic line 214.
<LI>

Fixed a bug: on 64-bit computers updating rows which contained the
SQL NULL in some column could cause the undo log and the ordinary
log to become corrupt.
<LI>

Fixed a bug: innodb_log_monitor caused a hang if it suppressed
lock prints for a page.
<LI>

Fixed a bug: in the HP-UX-10.20 version mutexes would leak and cause
race conditions and crashes in any part of InnoDB code.
<LI>

Fixed a bug: if you ran in the AUTOCOMMIT mode, executed a SELECT,
and immediately after that a RENAME TABLE, then RENAME would fail and
MySQL would complain about error 1192.
<LI>

Fixed a bug: if compiled on 64-bit Solaris, InnoDB produced a bus error
at startup.
</UL>



<H4><A NAME="SEC508" HREF="manual_toc.html#SEC508">7.5.14.17  MySQL/InnoDB-4.0.2, July 10, 2002</A></H4>

<UL>
<LI>

InnoDB is essentially the same as InnoDB-3.23.51.
<LI>

If no innodb_data_file_path is specified, InnoDB at the database creation
now creates a 10 MB auto-extending data file ibdata1 to the datadir
of MySQL. In 4.0.1 the file was 64 MB and not auto-extending.
</UL>



<H4><A NAME="SEC509" HREF="manual_toc.html#SEC509">7.5.14.18  MySQL/InnoDB-3.23.51, June 12, 2002</A></H4>

<UL>
<LI>

Fixed a bug: a join could result in a seg fault in copying of a BLOB or
TEXT column if some of the BLOB or TEXT columns in the table contained
SQL NULL values.
<LI>

Fixed a bug: if you added self-referential foreign key constraints with
ON DELETE CASCADE to tables and a row deletion caused InnoDB
to attempt the deletion of the same row twice because of
a cascading delete, then you got an assertion failure.
<LI>

Fixed a bug: if you use MySQL 'user level locks' and close
a connection, then InnoDB may assert in ha_innobase.cc, line 302.
</UL>



<H4><A NAME="SEC510" HREF="manual_toc.html#SEC510">7.5.14.19  MySQL/InnoDB-3.23.50, April 23, 2002</A></H4>

<UL>
<LI>

InnoDB now supports an auto-extending last data file. You do not need
to preallocate the whole data file at the database startup.
<LI>

Made several changes to facilitate the use of the InnoDB Hot Backup
tool. It is a separate non-free tool you can use to take online backups
of your database without shutting down the server or setting
any locks.
<LI>

If you want to run the InnoDB Hot Backup tool on an auto-extending
data file you have to upgrade it to version ibbackup-0.35.
<LI>

The log scan phase in crash recovery will now run much faster.
<LI>

Starting from this server version, the hot backup tool
truncates unused ends in the backup InnoDB data files.
<LI>

To allow the hot backup tool to work, on Windows we no longer use
unbuffered i/o or native async i/o; instead we use the same simulated
async i/o as on Unix.
<LI>

You can now define the ON DELETE CASCADE or ON DELETE SET NULL
clause on foreign keys.
<LI>

FOREIGN KEY constraints now survive ALTER TABLE and CREATE
INDEX.
<LI>

We suppress the FOREIGN KEY check if any of the column values in the
foreign key or referenced key to be checked is the SQL NULL. This
is compatible with Oracle, for example.
<LI>

SHOW CREATE TABLE now lists also foreign key constraints. Also
mysqldump no longer forgets about foreign keys in table definitions.
<LI>

You can now add a new foreign key constraint with
ALTER TABLE ... ADD CONSTRAINT FOREIGN KEY (...) REFERENCES ... (...).
<LI>

FOREIGN KEY definitions now allow backquotes around table and
column names.
<LI>

MySQL command
SET TRANSACTION ISOLATION LEVEL ...
has now the following effect on
InnoDB tables: if a transaction is defined as SERIALIZABLE
then InnoDB conceptually adds LOCK IN SHARE MODE
to all consistent reads. If a transaction is defined to have any other
isolation level, then InnoDB obeys its default locking strategy
which is REPEATABLE READ.
<LI>

SHOW TABLE STATUS no longer sets an x-lock at the end of an
auto-increment index if the auto-increment counter has already
been initialized. This removes in almost all cases the surprising deadlocks
caused by SHOW TABLE STATUS.
<LI>

Fixed a bug: in a CREATE TABLE statement the string 'foreign'
followed by a non-space character confused the FOREIGN KEY parser
and caused table creation to fail with errno 150.
</UL>



<H4><A NAME="SEC511" HREF="manual_toc.html#SEC511">7.5.14.20  MySQL/InnoDB-3.23.49, February 17, 2002</A></H4>

<UL>
<LI>

Fixed a bug: if you called DROP DATABASE for a database on which
there simultaneously were running queries, the MySQL server could crash
or hang. Crashes fixed, but a full fix has to wait some changes
in the MySQL layer of code.
<LI>

Fixed a bug: on Windows one had to put the database name
in lower case for DROP
DATABASE to work. Fixed in 3.23.49: case no longer matters
on Windows. On Unix the database name remains case-sensitive.
<LI>

Fixed a bug: if one defined a non-latin1 character set as
the default character set,
then definition of foreign key constraints could fail
in an assertion failure
in dict0crea.c, reporting an internal error 17.
</UL>



<H4><A NAME="SEC512" HREF="manual_toc.html#SEC512">7.5.14.21  MySQL/InnoDB-3.23.48, February 9, 2002</A></H4>

<UL>
<LI>

Tuned the SQL optimizer to favor more often index searches
over table scans.
<LI>

Fixed a performance problem when several large SELECT
queries are run concurrently on a multiprocessor Linux computer.
Large CPU-bound SELECT queries will now also generally run faster on
all platforms.
<LI>

If MySQL binlogging is used,
InnoDB now prints after crash recovery the latest MySQL binlog
file name and the position in that file (= byte offset)
InnoDB was able to recover to. This is useful, for example,
when resynchronizing a master and a slave database in replication.
<LI>

Added better error messages to help in installation problems.
<LI>

One can now recover also MySQL temporary tables which have become
orphaned inside the InnoDB tablespace.
<LI>

InnoDB now prevents a FOREIGN KEY declaration where the signedness
is not the same in the referencing and referenced integer columns.
<LI>

Fixed a bug: calling SHOW CREATE TABLE or SHOW TABLE STATUS
could cause memory corruption and make mysqld to crash.
Especially at risk was mysqldump, because it calls frequently
SHOW CREATE TABLE.
<LI>

Fixed a bug: if on Unix you did an ALTER TABLE to an InnoDB table and
simultaneously did queries to it, mysqld could crash with an assertion
failure in row0row.c, line 474.
<LI>

Fixed a bug: if inserts to several tables containing an auto-inc column
were wrapped inside one LOCK TABLES, InnoDB asserted in lock0lock.c.
<LI>

In 3.23.47 we allowed several NULLS in a UNIQUE secondary index.
But CHECK TABLE was not relaxed: it reports the table as corrupt.
CHECK TABLE no longer complains in this situation.
<LI>

Fixed a bug: on Sparc and other high-endian processors SHOW VARIABLES
showed innodb_flush_log_at_trx_commit and other boolean-valued
startup parameters always OFF even if they were switched on. 
<LI>

Fixed a bug: if you ran mysqld-max-nt as a service on Windows NT/2000,
the service shutdown did not always wait long enough for the InnoDB shutdown
to finish.
</UL>



<H4><A NAME="SEC513" HREF="manual_toc.html#SEC513">7.5.14.22  MySQL/InnoDB-3.23.47, December 28, 2001</A></H4>

<UL>
<LI>

Recovery happens now faster, especially in a lightly loaded system,
because background checkpointing has been made more frequent.
<LI>

InnoDB allows now several similar key values in a UNIQUE secondary index
if those values contain SQL NULLs. Thus the convention is now the same as in
MyISAM tables.
<LI>

InnoDB gives a better row count estimate for a table which contains BLOBs.
<LI>

In a FOREIGN KEY constraint InnoDB is now case-insensitive to column
names, and in Windows also to table names.
<LI>

InnoDB allows a FOREIGN KEY column of CHAR type to refer to a column of
VARCHAR type, and vice versa. MySQL silently changes the type of some
columns between CHAR and VARCHAR, and these silent changes do not hinder
FOREIGN KEY declaration any more.
<LI>

Recovery has been made more resilient to corruption of log files.
<LI>

Unnecessary statistics calculation has been removed from queries which
generate a temporary table. Some ORDER BY and DISTINCT queries will now run
much faster.
<LI>

MySQL now knows that the table scan of an InnoDB table is done through the
primary key. This will save a sort in some ORDER BY queries.
<LI>

The maximum key length of InnoDB tables is again restricted to 500 bytes.
The MySQL interpreter is not able to handle longer keys.
<LI>

The default value of innodb_lock_wait_timeout was changed from infinite to
50 seconds, the default value of innodb_file_io_threads from 9
to 4.
</UL>



<H4><A NAME="SEC514" HREF="manual_toc.html#SEC514">7.5.14.23  MySQL/InnoDB-4.0.1, December 23, 2001</A></H4>

<UL>
<LI>

InnoDB is the same as in 3.23.47.
<LI>

In 4.0.0 the MySQL interpreter did not know the syntax LOCK IN
SHARE MODE. This has been fixed.
<LI>

In 4.0.0 multi-table delete did not work for transactional tables.
This has been fixed.
</UL>



<H4><A NAME="SEC515" HREF="manual_toc.html#SEC515">7.5.14.24  MySQL/InnoDB-3.23.46, November 30, 2001</A></H4>

<UL>
<LI>

This is the same as 3.23.45.
</UL>



<H4><A NAME="SEC516" HREF="manual_toc.html#SEC516">7.5.14.25  MySQL/InnoDB-3.23.45, November 23, 2001</A></H4>

<UL>
<LI>

This is a bugfix release.
<LI>

In versions 3.23.42-.44 when creating a table on Windows you
have to use lower case letters in the database name to be able to
access the table. Fixed in 3.23.45.
<LI>

InnoDB now flushes stdout and stderr every 10 seconds: if these
are redirected to files, the file contents can be better viewed with
an editor.
<LI>

Fixed an assertion failure in .44, in trx0trx.c, line 178
when you drop a table which has
the .frm file but does not exist inside InnoDB.
<LI>

Fixed a bug in the insert buffer.
The insert buffer tree could get into an inconsistent state, causing a crash,
and also crashing the recovery. This bug could appear especially in
large table imports or alterations.
<LI>

Fixed a bug in recovery: InnoDB could go into an infinite loop
constantly printing
a warning message that it cannot find free blocks from the buffer pool.
<LI>

Fixed a bug: when you created a temporary table of the InnoDB type, and then
used ALTER TABLE to it, the MySQL server could crash.
<LI>

Prevented creation of MySQL system tables 'mysql.user',
'mysql.host', or 'mysql.db', in the
InnoDB type.
<LI>

Fixed a bug which can cause an assertion failure in 3.23.44 in
srv0srv.c, line 1728.
</UL>



<H4><A NAME="SEC517" HREF="manual_toc.html#SEC517">7.5.14.26  MySQL/InnoDB-3.23.44, November 2, 2001</A></H4>

<UL>
<LI>

You can define foreign key constraints on InnoDB
tables. An example: FOREIGN KEY (col1) REFERENCES table2(col2).
<LI>

You can create &#62; 4 GB data files in those
file systems that allow it.
<LI>

Improved InnoDB monitors, including a new innodb_table_monitor
which allows you to print the contents of the InnoDB internal data
dictionary.
<LI>

DROP DATABASE will now work also for InnoDB tables.
<LI>

Accent characters in the default character set
latin1 will be ordered according to the MySQL ordering.&#60;br&#62;
NOTE: if you are using latin1 and have inserted characters
whose code is &#62; 127 to an indexed CHAR column, you should run
CHECK TABLE on your table when you upgrade to
3.23.43, and drop and reimport the table if CHECK TABLE
reports an error!
<LI>

InnoDB will calculate better table cardinality
estimates.
<LI>

Change in deadlock resolution:
in .43 a deadlock rolls back only the
SQL statement, in .44 it will roll back the whole transaction.
<LI>

Deadlock, lock wait timeout, and foreign key
constraint violations (no parent row, child rows exist)
now return native MySQL
error codes 1213, 1205, 1216, 1217, respectively.
<LI>

A new my.cnf parameter innodb_thread_concurrency
helps in performance tuning in high concurrency environments.
<LI>

A new my.cnf option innodb_force_recovery will
help you in dumping tables from a corrupted database.
<LI>

A new my.cnf option innodb_fast_shutdown will
speed up shutdown. Normally InnoDB does a full purge
and an insert buffer merge at shutdown.
<LI>

Raised maximum key length to 7000 bytes from a
previous limit of 500 bytes.
<LI>

Fixed a bug in replication of auto-inc columns with multiline inserts.
<LI>

Fixed a bug when the case of letters changes in an update of an indexed
secondary column.
<LI>

Fixed a hang when there are &#62; 24 data files.
<LI>

Fixed a crash when MAX(col) is selected from an empty table, and col is a
not the first column in a multi-column index.
<LI>

Fixed a bug in purge which could cause crashes.
</UL>



<H4><A NAME="SEC518" HREF="manual_toc.html#SEC518">7.5.14.27  MySQL/InnoDB-3.23.43, October 4, 2001</A></H4>

<UL>
<LI>

This is essentially the same as InnoDB-3.23.42.
</UL>



<H4><A NAME="SEC519" HREF="manual_toc.html#SEC519">7.5.14.28  MySQL/InnoDB-3.23.42, September 9, 2001</A></H4>

<UL>
<LI>

Fixed a bug which corrupted the table if the primary key
of a &#62; 8000-byte row was updated.
<LI>

There are now 3 types of InnoDB Monitors: innodb_monitor,
innodb_lock_monitor, and innodb_tablespace_monitor.
innodb_monitor now prints also buffer pool hit rate and the total
number of rows inserted, updated, deleted, read.
<LI>

Fixed a bug in RENAME TABLE.
<LI>

Fixed a bug in replication with an auto-increment column.
</UL>



<H4><A NAME="SEC520" HREF="manual_toc.html#SEC520">7.5.14.29  MySQL/InnoDB-3.23.41, August 13, 2001</A></H4>

<UL>
<LI>

Support for &#60; 4 GB rows. The previous limit was
8000 bytes.
<LI>

Use the doublewrite file flush method.
<LI>

Raw disk partitions supported as data files.
<LI>

InnoDB Monitor.
<LI>

Several hang bugs fixed and an ORDER BY
bug ('Sort aborted') fixed.
</UL>



<H4><A NAME="SEC521" HREF="manual_toc.html#SEC521">7.5.14.30  MySQL/InnoDB-3.23.40, July 16, 2001</A></H4>

<UL>
<LI>

Only a few rare bugs fixed.
</UL>



<H4><A NAME="SEC522" HREF="manual_toc.html#SEC522">7.5.14.31  MySQL/InnoDB-3.23.39, June 13, 2001</A></H4>

<UL>
<LI>

CHECK TABLE now works for InnoDB tables.
<LI>

A new my.cnf parameter innodb_unix_file_flush_method
introduced. It can be used to tune disk write performance.
<LI>

An auto-increment column now gets new values past the
transaction mechanism. This saves CPU time and eliminates
transaction deadlocks in new value assignment.
<LI>

Several bug fixes, most notably the rollback bug in 3.23.38.
</UL>



<H4><A NAME="SEC523" HREF="manual_toc.html#SEC523">7.5.14.32  MySQL/InnoDB-3.23.38, May 12, 2001</A></H4>

<UL>
<LI>

The new syntax SELECT ... LOCK IN SHARE MODE is introduced.
<LI>

InnoDB now calls fsync after every disk write and calculates
a checksum
for every database page it writes or reads, which will reveal disk defects.
<LI>

Several bug fixes.
</UL>



<H3><A NAME="InnoDB_contact_information" HREF="manual_toc.html#InnoDB_contact_information">7.5.15  InnoDB Contact Information</A></H3>

<P>
Contact information of Innobase Oy, producer of the InnoDB engine.
Web site: <a HREF="http://www.innodb.com/">http://www.innodb.com/</a>.
E-mail: <a HREF="mailto:Heikki.Tuuri@innodb.com">Heikki.Tuuri@innodb.com</a>

</P>

<PRE>
phone: 358-9-6969 3250 (office) 358-40-5617367 (mobile)
Innobase Oy Inc.
World Trade Center Helsinki
Aleksanterinkatu 17
P.O.Box 800
00101 Helsinki
Finland
</PRE>



<H2><A NAME="BDB" HREF="manual_toc.html#BDB">7.6  <CODE>BDB</CODE> or <CODE>BerkeleyDB</CODE> Tables</A></H2>

<P>
<A NAME="IDX1546"></A>
<A NAME="IDX1547"></A>

</P>



<H3><A NAME="BDB_overview" HREF="manual_toc.html#BDB_overview">7.6.1  Overview of <CODE>BDB</CODE> Tables</A></H3>

<P>
BerkeleyDB, available at <a HREF="http://www.sleepycat.com/">http://www.sleepycat.com/</a> has provided
MySQL with a transactional storage engine. Support for this storage engine is
included in the MySQL source distribution starting from version 3.23.34 and is
activated in the MySQL-Max binary. This storage engine is typically called
<CODE>BDB</CODE> for short.

</P>
<P>
<CODE>BDB</CODE> tables may have a greater chance of surviving crashes and are also
capable of <CODE>COMMIT</CODE> and <CODE>ROLLBACK</CODE> operations on transactions.
The MySQL source distribution comes with a <CODE>BDB</CODE> distribution that has a
couple of small patches to make it work more smoothly with MySQL.
You can't use a non-patched <CODE>BDB</CODE> version with MySQL.

</P>
<P>
We at MySQL AB are working in close cooperation with Sleepycat to
keep the quality of the MySQL/BDB interface high.

</P>
<P>
When it comes to supporting <CODE>BDB</CODE> tables, we are committed to help our
users to locate the problem and help creating a reproducible test case
for any problems involving <CODE>BDB</CODE> tables.  Any such test case will be
forwarded to Sleepycat who in turn will help us find and fix the
problem.  As this is a two-stage operation, any problems with <CODE>BDB</CODE> tables
may take a little longer for us to fix than for other storage engines.
However, as the BerkeleyDB code itself has been used by many other
applications than MySQL, we don't envision any big problems with
this.  See section <A HREF="manual.html#Support">1.4.1  Support Offered by MySQL AB</A>.

</P>



<H3><A NAME="BDB_install" HREF="manual_toc.html#BDB_install">7.6.2  Installing <CODE>BDB</CODE></A></H3>

<P>
If you have downloaded a binary version of MySQL that includes
support for BerkeleyDB, simply follow the instructions for installing a
binary version of MySQL.
See section <A HREF="manual.html#Installing_binary">2.2.11  Installing a MySQL Binary Distribution</A>.  See section <A HREF="manual.html#mysqld-max">4.7.5  <CODE>mysqld-max</CODE>, An Extended <CODE>mysqld</CODE> Server</A>.

</P>
<P>
To compile MySQL with Berkeley DB support, download MySQL
Version 3.23.34 or newer and configure <CODE>MySQL</CODE> with the
<CODE>--with-berkeley-db</CODE> option.  See section <A HREF="manual.html#Installing_source">2.3  Installing a MySQL Source Distribution</A>.

</P>

<PRE>
cd /path/to/source/of/mysql-3.23.34
./configure --with-berkeley-db
</PRE>

<P>
Please refer to the manual provided with the <CODE>BDB</CODE> distribution for
more updated information.

</P>
<P>
Even though Berkeley DB is in itself very tested and reliable,
the MySQL interface is still considered gamma quality.
We are actively improving and optimising it to get it stable very
soon.

</P>



<H3><A NAME="BDB_start" HREF="manual_toc.html#BDB_start">7.6.3  <CODE>BDB</CODE> startup options</A></H3>

<P>
If you are running with <CODE>AUTOCOMMIT=0</CODE> then your changes in <CODE>BDB</CODE>
tables will not be updated until you execute <CODE>COMMIT</CODE>.  Instead of commit
you can execute <CODE>ROLLBACK</CODE> to forget your changes. See section <A HREF="manual.html#COMMIT">6.7.1  <CODE>BEGIN/COMMIT/ROLLBACK</CODE> Syntax</A>.

</P>
<P>
If you are running with <CODE>AUTOCOMMIT=1</CODE> (the default), your changes
will be committed immediately.  You can start an extended transaction with
the <CODE>BEGIN WORK</CODE> SQL command, after which your changes will not be
committed until you execute <CODE>COMMIT</CODE> (or decide to <CODE>ROLLBACK</CODE>
the changes).

</P>
<P>
The following options to <CODE>mysqld</CODE> can be used to change the behaviour of
<CODE>BDB</CODE> tables:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Option</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>--bdb-home=directory</CODE> </TD><TD> Base directory for <CODE>BDB</CODE> tables.  This should be the same directory you use for <CODE>--datadir</CODE>.
</TD></TR>
<TR><TD><CODE>--bdb-lock-detect=#</CODE> </TD><TD> Berkeley lock detect. One of (<CODE>DEFAULT</CODE>, <CODE>OLDEST</CODE>, <CODE>RANDOM</CODE>, or <CODE>YOUNGEST</CODE>).
</TD></TR>
<TR><TD><CODE>--bdb-logdir=directory</CODE> </TD><TD> Berkeley DB log file directory.
</TD></TR>
<TR><TD><CODE>--bdb-no-sync</CODE> </TD><TD> Don't synchronously flush logs.
</TD></TR>
<TR><TD><CODE>--bdb-no-recover</CODE> </TD><TD> Don't start Berkeley DB in recover mode.
</TD></TR>
<TR><TD><CODE>--bdb-shared-data</CODE> </TD><TD> Start Berkeley DB in multi-process mode (Don't use <CODE>DB_PRIVATE</CODE> when initialising Berkeley DB)
</TD></TR>
<TR><TD><CODE>--bdb-tmpdir=directory</CODE> </TD><TD> Berkeley DB temporary file directory.
</TD></TR>
<TR><TD><CODE>--skip-bdb</CODE> </TD><TD> Disable usage of <CODE>BDB</CODE> tables.
</TD></TR>
<TR><TD><CODE>-O bdb_max_lock=1000</CODE> </TD><TD> Set the maximum number of locks possible. See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.
</TD></TR>
</TABLE>

<P>
If you use <CODE>--skip-bdb</CODE>, MySQL will not initialise the
Berkeley DB library and this will save a lot of memory. Of course,
you cannot use <CODE>BDB</CODE> tables if you are using this option.  If you try
to create a <CODE>BDB</CODE> table, MySQL will instead create a <CODE>MyISAM</CODE> table.

</P>
<P>
Normally you should start <CODE>mysqld</CODE> without <CODE>--bdb-no-recover</CODE> if you
intend to use <CODE>BDB</CODE> tables.  This may, however, give you problems when you
try to start <CODE>mysqld</CODE> if the <CODE>BDB</CODE> log files are corrupted. See section <A HREF="manual.html#Starting_server">2.4.2  Problems Starting the MySQL Server</A>.

</P>
<P>
With <CODE>bdb_max_lock</CODE> you can specify the maximum number of locks
(10000 by default) you can have active on a <CODE>BDB</CODE> table. You should
increase this if you get errors of type <CODE>bdb: Lock table is out of
available locks</CODE> or <CODE>Got error 12 from ...</CODE>  when you have do long
transactions or when <CODE>mysqld</CODE> has to examine a lot of rows to
calculate the query.

</P>
<P>
You may also want to change <CODE>binlog_cache_size</CODE> and
<CODE>max_binlog_cache_size</CODE> if you are using big multi-line transactions.
See section <A HREF="manual.html#COMMIT">6.7.1  <CODE>BEGIN/COMMIT/ROLLBACK</CODE> Syntax</A>.

</P>



<H3><A NAME="BDB_characteristics" HREF="manual_toc.html#BDB_characteristics">7.6.4  Characteristics of <CODE>BDB</CODE> tables:</A></H3>


<UL>
<LI>

To be able to rollback transactions, the <CODE>BDB</CODE> storage engine maintains
log files.  For maximum performance you should place these on another disk
than your databases by using the <CODE>--bdb-logdir</CODE> option.
<LI>

MySQL performs a checkpoint each time a new <CODE>BDB</CODE> log
file is started, and removes any log files that are not needed for
current transactions.  One can also run <CODE>FLUSH LOGS</CODE> at any time
to checkpoint the Berkeley DB tables.

For disaster recovery, one should use table backups plus
MySQL's binary log. See section <A HREF="manual.html#Backup">4.4.1  Database Backups</A>.

<STRONG>Warning</STRONG>: If you delete old log files that are in use, <CODE>BDB</CODE> will
not be able to do recovery at all and you may lose data if something
goes wrong.
<LI>

MySQL requires a <CODE>PRIMARY KEY</CODE> in each <CODE>BDB</CODE> table to be
able to refer to previously read rows. If you don't create one,
MySQL will create an maintain a hidden <CODE>PRIMARY KEY</CODE> for
you.  The hidden key has a length of 5 bytes and is incremented for each
insert attempt.
<LI>

If all columns you access in a <CODE>BDB</CODE> table are part of the same index or
part of the primary key, then MySQL can execute the query
without having to access the actual row.  In a <CODE>MyISAM</CODE> table the
above holds only if the columns are part of the same index.
<LI>

The <CODE>PRIMARY KEY</CODE> will be faster than any other key, as the
<CODE>PRIMARY KEY</CODE> is stored together with the row data.  As the other keys are
stored as the key data + the <CODE>PRIMARY KEY</CODE>, it's important to keep the
<CODE>PRIMARY KEY</CODE> as short as possible to save disk and get better speed.
<LI>

<CODE>LOCK TABLES</CODE> works on <CODE>BDB</CODE> tables as with other tables.  If
you don't use <CODE>LOCK TABLE</CODE>, MySQL will issue an internal
multiple-write lock on the table to ensure that the table will be
properly locked if another thread issues a table lock.
<LI>

Internal locking in <CODE>BDB</CODE> tables is done on page level.
<LI>

<CODE>SELECT COUNT(*) FROM table_name</CODE> is slow as <CODE>BDB</CODE> tables doesn't
maintain a count of the number of rows in the table.
<LI>

Sequential scanning is slower than with <CODE>MyISAM</CODE> tables as the data in
<CODE>BDB</CODE> tables stored in B-trees and not in a separate datafile.
<LI>

The application must always be prepared to handle cases where
any change of a <CODE>BDB</CODE> table may make an automatic rollback and any
read may fail with a deadlock error.
<LI>

Keys are not prefix or suffix-compressed like keys in <CODE>MyISAM</CODE>
tables. In other words, the key information will take a little more
space in <CODE>BDB</CODE> tables compared to <CODE>MyISAM</CODE> tables.
<LI>

There are often holes in the <CODE>BDB</CODE> table to allow you to insert new rows in
the middle of the key tree.  This makes <CODE>BDB</CODE> tables somewhat larger than
<CODE>MyISAM</CODE> tables.
<LI>

The optimiser needs to know an approximation of the number of rows in
the table.  MySQL solves this by counting inserts and
maintaining this in a separate segment in each <CODE>BDB</CODE> table.  If you don't
issue a lot of <CODE>DELETE</CODE> or <CODE>ROLLBACK</CODE> statements, this number
should be accurate enough for the MySQL optimiser, but as MySQL
only stores the number on close, it may be incorrect if MySQL dies
unexpectedly. It should not be fatal even if this number is not 100%
correct.  One can update the number of rows by executing <CODE>ANALYZE
TABLE</CODE> or <CODE>OPTIMIZE TABLE</CODE>. See section <A HREF="manual.html#ANALYZE_TABLE">4.5.2  <CODE>ANALYZE TABLE</CODE> Syntax</A> . See section <A HREF="manual.html#OPTIMIZE_TABLE">4.5.1  <CODE>OPTIMIZE TABLE</CODE> Syntax</A>.
<LI>

If you get full disk with a <CODE>BDB</CODE> table, you will get an error
(probably error 28) and the transaction should roll back.  This is in
contrast with <CODE>MyISAM</CODE> and <CODE>ISAM</CODE> tables where <CODE>mysqld</CODE> will
wait for enough free disk before continuing.
</UL>



<H3><A NAME="BDB_TODO" HREF="manual_toc.html#BDB_TODO">7.6.5  Things we need to fix for <CODE>BDB</CODE> in the near future:</A></H3>


<UL>
<LI>

It's very slow to open many <CODE>BDB</CODE> tables at the same time. If you are
going to use <CODE>BDB</CODE> tables, you should not have a very big table cache
(like &#62;256) and you should use <CODE>--no-auto-rehash</CODE> with the <CODE>mysql</CODE>
client.  We plan to partly fix this in 4.0.
<LI>

<CODE>SHOW TABLE STATUS</CODE> doesn't yet provide that much information for
<CODE>BDB</CODE>
tables.
<LI>

Optimise performance.
<LI>

Change to not use page locks at all when we are scanning tables.
</UL>



<H3><A NAME="BDB_portability" HREF="manual_toc.html#BDB_portability">7.6.6  Operating systems supported by <CODE>BDB</CODE></A></H3>

<P>
Currently we know that the <CODE>BDB</CODE> storage engine works with the following
operating systems:

</P>

<UL>
<LI>

Linux 2.x Intel
<LI>

Solaris SPARC
<LI>

Caldera (SCO) OpenServer
<LI>

Caldera (SCO) UnixWare 7.0.1
</UL>

<P>
It doesn't work with the following operating systems:

</P>

<UL>
<LI>

Linux 2.x Alpha
<LI>

Max OS X
</UL>

<P>
Note: The above list is not complete; we will update it as we receive more
information.

</P>
<P>
If you build MySQL with support for <CODE>BDB</CODE> tables and get
the following error in the log file when you start <CODE>mysqld</CODE>:

</P>

<PRE>
bdb: architecture lacks fast mutexes: applications cannot be threaded
Can't init dtabases
</PRE>

<P>
This means that <CODE>BDB</CODE> tables are not supported for your architecture.
In this case you must rebuild MySQL without <CODE>BDB</CODE> table support.

</P>


<H3><A NAME="BDB_restrictions" HREF="manual_toc.html#BDB_restrictions">7.6.7  Restrictions on <CODE>BDB</CODE> Tables</A></H3>

<P>
Here follows the restrictions you have when using <CODE>BDB</CODE> tables:

</P>

<UL>
<LI>

<CODE>BDB</CODE> tables store in the <TT>`.db'</TT> file the path to the file as it was
created.
(This was done to be able to detect locks in a multi-user environment that
supports symlinks).

The effect of this is that <CODE>BDB</CODE> tables are not movable between directories!
<LI>

When taking backups of <CODE>BDB</CODE> tables, you have to either use
<CODE>mysqldump</CODE> or take a backup of all <CODE>table_name.db</CODE> files and
the <CODE>BDB</CODE> log files.  The <CODE>BDB</CODE> log files are the files in the base
data directory named <CODE>log.XXXXXXXXXX</CODE> (ten digits);
The <CODE>BDB</CODE> storage engine stores unfinished transactions in the log files
and requires these logs to be present when <CODE>mysqld</CODE> starts.
</UL>



<H3><A NAME="BDB_errors" HREF="manual_toc.html#BDB_errors">7.6.8  Errors That May Occur When Using <CODE>BDB</CODE> Tables</A></H3>


<UL>
<LI>

If you get the following error in the <CODE>hostname.err log</CODE> when
starting <CODE>mysqld</CODE>:


<PRE>
bdb:  Ignoring log file: .../log.XXXXXXXXXX: unsupported log version #
</PRE>

it means that the new <CODE>BDB</CODE> version doesn't support the old log
file format.  In this case you have to delete all <CODE>BDB</CODE> logs
from your database directory (the files with names that have the format
<CODE>log.XXXXXXXXXX</CODE>) and restart <CODE>mysqld</CODE>.  We would also
recommend you to do a <CODE>mysqldump --opt</CODE> of your old <CODE>BDB</CODE>
tables, delete the old tables, and restore the dump.
<LI>

If you are not running in auto-commit mode and delete a table that is referenced
in another transaction, you may get the following error messages in your MySQL
error log:


<PRE>
001119 23:43:56  bdb:  Missing log fileid entry
001119 23:43:56  bdb:  txn_abort: Log undo failed for LSN:
                       1 3644744: Invalid
</PRE>

This is not fatal but we don't recommend that you delete tables if you are
not in auto-commit mode, until this problem is fixed (the fix is
not trivial).
</UL>



<H1><A NAME="Clients" HREF="manual_toc.html#Clients">8  MySQL APIs</A></H1>

<P>
<A NAME="IDX1548"></A>
<A NAME="IDX1549"></A>
<A NAME="IDX1550"></A>
<A NAME="IDX1551"></A>
<A NAME="IDX1552"></A>

</P>

<P>
This chapter describes the APIs available for MySQL, where to get
them, and how to use them.  The C API is the most extensively covered, as it
was developed by the MySQL team, and is the basis for most of the
other APIs.

</P>



<H2><A NAME="C" HREF="manual_toc.html#C">8.1  MySQL C API</A></H2>

<P>
<A NAME="IDX1553"></A>
<A NAME="IDX1554"></A>

</P>

<P>
The C API code is distributed with MySQL. It is included in the
<CODE>mysqlclient</CODE> library and allows C programs to access a database.

</P>
<P>
Many of the clients in the MySQL source distribution are
written in C.  If you are looking for examples that demonstrate how to
use the C API, take a look at these clients. You can find these in the
<CODE>clients</CODE> directory in the MySQL source distribution.

</P>
<P>
Most of the other client APIs (all except Connector/J) use the <CODE>mysqlclient</CODE>
library to communicate with the MySQL server. This means that, for
example, you can take advantage of many of the same environment variables
that are used by other client programs, because they are referenced from the
library.  See section <A HREF="manual.html#Client-Side_Scripts">4.8  MySQL Client-Side Scripts and Utilities</A>, for a list of these variables.

</P>
<P>
The client has a maximum communication buffer size. The size of the buffer
that is allocated initially (16K bytes) is automatically increased up to the
maximum size (the maximum is 16M). Because buffer sizes are increased
only as demand warrants, simply increasing the default maximum limit does not
in itself cause more resources to be used. This size check is mostly a check
for erroneous queries and communication packets.

</P>
<P>
The communication buffer must be large enough to contain a single SQL
statement (for client-to-server traffic) and one row of returned data (for
server-to-client traffic).  Each thread's communication buffer is dynamically
enlarged to handle any query or row up to the maximum limit.  For example, if
you have <CODE>BLOB</CODE> values that contain up to 16M of data, you must have a
communication buffer limit of at least 16M (in both server and client).  The
client's default maximum is 16M, but the default maximum in the server is
1M.  You can increase this by changing the value of the
<CODE>max_allowed_packet</CODE> parameter when the server is started.  See section <A HREF="manual.html#Server_parameters">5.5.2  Tuning Server Parameters</A>.

</P>
<P>
The MySQL server shrinks each communication buffer to
<CODE>net_buffer_length</CODE> bytes after each query.  For clients, the size of
the buffer associated with a connection is not decreased until the connection
is closed, at which time client memory is reclaimed.

</P>
<P>
For programming with threads, see section <A HREF="manual.html#Threaded_clients">8.1.14  How to Make a Threaded Client</A>.
For creating a stand-alone application which includes the
"server" and "client" in the same program (and does not
communicate with an external MySQL server), see section <A HREF="manual.html#libmysqld">8.1.15  libmysqld, the Embedded MySQL Server Library</A>.

</P>



<H3><A NAME="C_API_datatypes" HREF="manual_toc.html#C_API_datatypes">8.1.1  C API Datatypes</A></H3>

<DL COMPACT>

<DT><CODE>MYSQL</CODE>
<DD>
<A NAME="IDX1555"></A>
 
This structure represents a handle to one database connection. It is
used for almost all MySQL functions.

<A NAME="IDX1556"></A>
<DT><CODE>MYSQL_RES</CODE>
<DD>
This structure represents the result of a query that returns rows
(<CODE>SELECT</CODE>, <CODE>SHOW</CODE>, <CODE>DESCRIBE</CODE>, <CODE>EXPLAIN</CODE>).  The
information returned from a query is called the <EM>result set</EM> in the
remainder of this section.

<A NAME="IDX1557"></A>
<DT><CODE>MYSQL_ROW</CODE>
<DD>
This is a type-safe representation of one row of data. It is currently
implemented as an array of counted byte strings.  (You cannot treat these as
null-terminated strings if field values may contain binary data, because such
values may contain null bytes internally.)  Rows are obtained by calling
<CODE>mysql_fetch_row()</CODE>.

<A NAME="IDX1558"></A>
<DT><CODE>MYSQL_FIELD</CODE>
<DD>
This structure contains information about a field, such as the field's
name, type, and size. Its members are described in more detail here.
You may obtain the <CODE>MYSQL_FIELD</CODE> structures for each field by
calling <CODE>mysql_fetch_field()</CODE> repeatedly.  Field values are not part of
this structure; they are contained in a <CODE>MYSQL_ROW</CODE> structure.

<A NAME="IDX1559"></A>
<DT><CODE>MYSQL_FIELD_OFFSET</CODE>
<DD>
This is a type-safe representation of an offset into a MySQL field
list.  (Used by <CODE>mysql_field_seek()</CODE>.)  Offsets are field numbers
within a row, beginning at zero.

<A NAME="IDX1560"></A>
<A NAME="IDX1561"></A>
<DT><CODE>my_ulonglong</CODE>
<DD>
The type used for the number of rows and for <CODE>mysql_affected_rows()</CODE>,
<CODE>mysql_num_rows()</CODE>, and <CODE>mysql_insert_id()</CODE>. This type provides a
range of <CODE>0</CODE> to <CODE>1.84e19</CODE>.

On some systems, attempting to print a value of type <CODE>my_ulonglong</CODE>
will not work.  To print such a value, convert it to <CODE>unsigned long</CODE>
and use a <CODE>%lu</CODE> print format.  Example:

<PRE>
printf (Number of rows: %lu\n", (unsigned long) mysql_num_rows(result));
</PRE>

</DL>

<P>
The <CODE>MYSQL_FIELD</CODE> structure contains the members listed here:

</P>
<DL COMPACT>

<DT><CODE>char * name</CODE>
<DD>
The name of the field, as a null-terminated string.

<DT><CODE>char * table</CODE>
<DD>
The name of the table containing this field, if it isn't a calculated field.
For calculated fields, the <CODE>table</CODE> value is an empty string.

<DT><CODE>char * def</CODE>
<DD>
The default value of this field, as a null-terminated string.  This is set
only if you use <CODE>mysql_list_fields()</CODE>.

<DT><CODE>enum enum_field_types type</CODE>
<DD>
The type of the field.
The <CODE>type</CODE> value may be one of the following:

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Type value</STRONG> </TD><TD> <STRONG>Type description</STRONG>
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_TINY</CODE> </TD><TD> <CODE>TINYINT</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_SHORT</CODE> </TD><TD> <CODE>SMALLINT</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_LONG</CODE> </TD><TD> <CODE>INTEGER</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_INT24</CODE> </TD><TD> <CODE>MEDIUMINT</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_LONGLONG</CODE> </TD><TD> <CODE>BIGINT</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_DECIMAL</CODE> </TD><TD> <CODE>DECIMAL</CODE> or <CODE>NUMERIC</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_FLOAT</CODE> </TD><TD> <CODE>FLOAT</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_DOUBLE</CODE> </TD><TD> <CODE>DOUBLE</CODE> or <CODE>REAL</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_TIMESTAMP</CODE> </TD><TD> <CODE>TIMESTAMP</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_DATE</CODE> </TD><TD> <CODE>DATE</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_TIME</CODE> </TD><TD> <CODE>TIME</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_DATETIME</CODE> </TD><TD> <CODE>DATETIME</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_YEAR</CODE> </TD><TD> <CODE>YEAR</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_STRING</CODE> </TD><TD> String (<CODE>CHAR</CODE> or <CODE>VARCHAR</CODE>) field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_BLOB</CODE> </TD><TD> <CODE>BLOB</CODE> or <CODE>TEXT</CODE> field (use <CODE>max_length</CODE> to determine the maximum length)
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_SET</CODE> </TD><TD> <CODE>SET</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_ENUM</CODE> </TD><TD> <CODE>ENUM</CODE> field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_NULL</CODE> </TD><TD> <CODE>NULL</CODE>-type field
</TD></TR>
<TR><TD><CODE>FIELD_TYPE_CHAR</CODE> </TD><TD> Deprecated; use <CODE>FIELD_TYPE_TINY</CODE> instead
</TD></TR>
</TABLE>

You can use the <CODE>IS_NUM()</CODE> macro to test whether a field has a
numeric type.  Pass the <CODE>type</CODE> value to <CODE>IS_NUM()</CODE> and it
will evaluate to TRUE if the field is numeric:


<PRE>
if (IS_NUM(field-&#62;type))
    printf("Field is numeric\n");
</PRE>

<DT><CODE>unsigned int length</CODE>
<DD>
The width of the field, as specified in the table definition.

<DT><CODE>unsigned int max_length</CODE>
<DD>
The maximum width of the field for the result set (the length of the longest
field value for the rows actually in the result set). If you use
<CODE>mysql_store_result()</CODE> or <CODE>mysql_list_fields()</CODE>, this contains the
maximum length for the field.  If you use <CODE>mysql_use_result()</CODE>, the
value of this variable is zero.

<DT><CODE>unsigned int flags</CODE>
<DD>
Different bit-flags for the field.  The <CODE>flags</CODE> value may have zero
or more of the following bits set:

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Flag value</STRONG> </TD><TD> <STRONG>Flag description</STRONG>
</TD></TR>
<TR><TD><CODE>NOT_NULL_FLAG</CODE> </TD><TD> Field can't be <CODE>NULL</CODE>
</TD></TR>
<TR><TD><CODE>PRI_KEY_FLAG</CODE> </TD><TD> Field is part of a primary key
</TD></TR>
<TR><TD><CODE>UNIQUE_KEY_FLAG</CODE> </TD><TD> Field is part of a unique key
</TD></TR>
<TR><TD><CODE>MULTIPLE_KEY_FLAG</CODE> </TD><TD> Field is part of a non-unique key
</TD></TR>
<TR><TD><CODE>UNSIGNED_FLAG</CODE> </TD><TD> Field has the <CODE>UNSIGNED</CODE> attribute
</TD></TR>
<TR><TD><CODE>ZEROFILL_FLAG</CODE> </TD><TD> Field has the <CODE>ZEROFILL</CODE> attribute
</TD></TR>
<TR><TD><CODE>BINARY_FLAG</CODE> </TD><TD> Field has the <CODE>BINARY</CODE> attribute
</TD></TR>
<TR><TD><CODE>AUTO_INCREMENT_FLAG</CODE> </TD><TD> Field has the <CODE>AUTO_INCREMENT</CODE>
attribute
</TD></TR>
<TR><TD><CODE>ENUM_FLAG</CODE> </TD><TD> Field is an <CODE>ENUM</CODE> (deprecated)
</TD></TR>
<TR><TD><CODE>SET_FLAG</CODE> </TD><TD> Field is a <CODE>SET</CODE> (deprecated)
</TD></TR>
<TR><TD><CODE>BLOB_FLAG</CODE> </TD><TD> Field is a <CODE>BLOB</CODE> or <CODE>TEXT</CODE> (deprecated)
</TD></TR>
<TR><TD><CODE>TIMESTAMP_FLAG</CODE> </TD><TD> Field is a <CODE>TIMESTAMP</CODE> (deprecated)
</TD></TR>
</TABLE>

Use of the <CODE>BLOB_FLAG</CODE>, <CODE>ENUM_FLAG</CODE>, <CODE>SET_FLAG</CODE>, and
<CODE>TIMESTAMP_FLAG</CODE> flags is deprecated because they indicate the type of
a field rather than an attribute of its type.  It is preferable to test
<CODE>field-&#62;type</CODE> against <CODE>FIELD_TYPE_BLOB</CODE>, <CODE>FIELD_TYPE_ENUM</CODE>,
<CODE>FIELD_TYPE_SET</CODE>, or <CODE>FIELD_TYPE_TIMESTAMP</CODE> instead.

The following example illustrates a typical use of the <CODE>flags</CODE> value:


<PRE>
if (field-&#62;flags &#38; NOT_NULL_FLAG)
    printf("Field can't be null\n");
</PRE>

You may use the following convenience macros to determine the boolean
status of the <CODE>flags</CODE> value:

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Flag status</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>IS_NOT_NULL(flags)</CODE> </TD><TD> True if this field is defined as <CODE>NOT NULL</CODE>
</TD></TR>
<TR><TD><CODE>IS_PRI_KEY(flags)</CODE> </TD><TD> True if this field is a primary key
</TD></TR>
<TR><TD><CODE>IS_BLOB(flags)</CODE> </TD><TD> True if this field is a <CODE>BLOB</CODE> or <CODE>TEXT</CODE> (deprecated; test <CODE>field-&#62;type</CODE> instead)
</TD></TR>
</TABLE>

<DT><CODE>unsigned int decimals</CODE>
<DD>
The number of decimals for numeric fields.
</DL>



<H3><A NAME="C_API_function_overview" HREF="manual_toc.html#C_API_function_overview">8.1.2  C API Function Overview</A></H3>

<P>
<A NAME="IDX1562"></A>
<A NAME="IDX1563"></A>

</P>
<P>
The functions available in the C API are listed here and are described in
greater detail in a later section.
See section <A HREF="manual.html#C_API_functions">8.1.3  C API Function Descriptions</A>.

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Function</STRONG> </TD><TD> <STRONG>Description</STRONG>

</TD></TR>
<TR><TD><STRONG>mysql_affected_rows()</STRONG> </TD><TD>
Returns the number of rows changed/deleted/inserted by the last <CODE>UPDATE</CODE>,
<CODE>DELETE</CODE>, or <CODE>INSERT</CODE> query.

</TD></TR>
<TR><TD><STRONG>mysql_change_user()</STRONG> </TD><TD>
Changes user and database on an open connection.

</TD></TR>
<TR><TD><STRONG>mysql_character_set_name()</STRONG> </TD><TD>
Returns the name of the default character set for the connection.

</TD></TR>
<TR><TD><STRONG>mysql_close()</STRONG> </TD><TD>
Closes a server connection.

</TD></TR>
<TR><TD><STRONG>mysql_connect()</STRONG> </TD><TD>
Connects to a MySQL server. This function is deprecated; use
<CODE>mysql_real_connect()</CODE> instead.

</TD></TR>
<TR><TD><STRONG>mysql_create_db()</STRONG> </TD><TD>
Creates a database. This function is deprecated; use the SQL command
<CODE>CREATE DATABASE</CODE> instead.

</TD></TR>
<TR><TD><STRONG>mysql_data_seek()</STRONG> </TD><TD>
Seeks to an arbitrary row in a query result set.

</TD></TR>
<TR><TD><STRONG>mysql_debug()</STRONG> </TD><TD>
Does a <CODE>DBUG_PUSH</CODE> with the given string.

</TD></TR>
<TR><TD><STRONG>mysql_drop_db()</STRONG> </TD><TD>
Drops a database. This function is deprecated; use the SQL command
<CODE>DROP DATABASE</CODE> instead.

</TD></TR>
<TR><TD><STRONG>mysql_dump_debug_info()</STRONG> </TD><TD>
Makes the server write debug information to the log.

</TD></TR>
<TR><TD><STRONG>mysql_eof()</STRONG> </TD><TD>
Determines whether the last row of a result set has been read.
This function is deprecated; <CODE>mysql_errno()</CODE> or <CODE>mysql_error()</CODE>
may be used instead.

</TD></TR>
<TR><TD><STRONG>mysql_errno()</STRONG> </TD><TD>
Returns the error number for the most recently invoked MySQL function.

</TD></TR>
<TR><TD><STRONG>mysql_error()</STRONG> </TD><TD>
Returns the error message for the most recently invoked MySQL function.

</TD></TR>
<TR><TD><STRONG>mysql_escape_string()</STRONG> </TD><TD>
Escapes special characters in a string for use in a SQL statement.

</TD></TR>
<TR><TD><STRONG>mysql_fetch_field()</STRONG> </TD><TD>
Returns the type of the next table field.

</TD></TR>
<TR><TD><STRONG>mysql_fetch_field_direct()</STRONG> </TD><TD>
Returns the type of a table field, given a field number.

</TD></TR>
<TR><TD><STRONG>mysql_fetch_fields()</STRONG> </TD><TD>
Returns an array of all field structures.

</TD></TR>
<TR><TD><STRONG>mysql_fetch_lengths()</STRONG> </TD><TD>
Returns the lengths of all columns in the current row.

</TD></TR>
<TR><TD><STRONG>mysql_fetch_row()</STRONG> </TD><TD>
Fetches the next row from the result set.

</TD></TR>
<TR><TD><STRONG>mysql_field_seek()</STRONG> </TD><TD>
Puts the column cursor on a specified column.

</TD></TR>
<TR><TD><STRONG>mysql_field_count()</STRONG> </TD><TD>
Returns the number of result columns for the most recent query.

</TD></TR>
<TR><TD><STRONG>mysql_field_tell()</STRONG> </TD><TD>
Returns the position of the field cursor used for the last
<CODE>mysql_fetch_field()</CODE>.

</TD></TR>
<TR><TD><STRONG>mysql_free_result()</STRONG> </TD><TD>
Frees memory used by a result set.

</TD></TR>
<TR><TD><STRONG>mysql_get_client_info()</STRONG> </TD><TD>
Returns client version information.

</TD></TR>
<TR><TD><STRONG>mysql_get_host_info()</STRONG> </TD><TD>
Returns a string describing the connection.

</TD></TR>
<TR><TD><STRONG>mysql_get_server_version()</STRONG> </TD><TD>
Returns version number of server as an integer (new in 4.1).

</TD></TR>
<TR><TD><STRONG>mysql_get_proto_info()</STRONG> </TD><TD>
Returns the protocol version used by the connection.

</TD></TR>
<TR><TD><STRONG>mysql_get_server_info()</STRONG> </TD><TD>
Returns the server version number.

</TD></TR>
<TR><TD><STRONG>mysql_info()</STRONG> </TD><TD>
Returns information about the most recently executed query.

</TD></TR>
<TR><TD><STRONG>mysql_init()</STRONG> </TD><TD>
Gets or initialises a <CODE>MYSQL</CODE> structure.

</TD></TR>
<TR><TD><STRONG>mysql_insert_id()</STRONG> </TD><TD>
Returns the ID generated for an <CODE>AUTO_INCREMENT</CODE> column by the previous
query.

</TD></TR>
<TR><TD><STRONG>mysql_kill()</STRONG> </TD><TD>
Kills a given thread.

</TD></TR>
<TR><TD><STRONG>mysql_list_dbs()</STRONG> </TD><TD>
Returns database names matching a simple regular expression.

</TD></TR>
<TR><TD><STRONG>mysql_list_fields()</STRONG> </TD><TD>
Returns field names matching a simple regular expression.

</TD></TR>
<TR><TD><STRONG>mysql_list_processes()</STRONG> </TD><TD>
Returns a list of the current server threads.

</TD></TR>
<TR><TD><STRONG>mysql_list_tables()</STRONG> </TD><TD>
Returns table names matching a simple regular expression.

</TD></TR>
<TR><TD><STRONG>mysql_num_fields()</STRONG> </TD><TD>
Returns the number of columns in a result set.

</TD></TR>
<TR><TD><STRONG>mysql_num_rows()</STRONG> </TD><TD>
Returns the number of rows in a result set.

</TD></TR>
<TR><TD><STRONG>mysql_options()</STRONG> </TD><TD>
Sets connect options for <CODE>mysql_connect()</CODE>.

</TD></TR>
<TR><TD><STRONG>mysql_ping()</STRONG> </TD><TD>
Checks whether the connection to the server is working, reconnecting
as necessary.

</TD></TR>
<TR><TD><STRONG>mysql_query()</STRONG> </TD><TD>
Executes a SQL query specified as a null-terminated string.

</TD></TR>
<TR><TD><STRONG>mysql_real_connect()</STRONG> </TD><TD>
Connects to a MySQL server.

</TD></TR>
<TR><TD><STRONG>mysql_real_escape_string()</STRONG> </TD><TD>
Escapes special characters in a string for use in a SQL statement, taking
into account the current charset of the connection.

</TD></TR>
<TR><TD><STRONG>mysql_real_query()</STRONG> </TD><TD>
Executes a SQL query specified as a counted string.

</TD></TR>
<TR><TD><STRONG>mysql_reload()</STRONG> </TD><TD>
Tells the server to reload the grant tables.

</TD></TR>
<TR><TD><STRONG>mysql_row_seek()</STRONG> </TD><TD>
Seeks to a row in a result set, using value returned from
<CODE>mysql_row_tell()</CODE>.

</TD></TR>
<TR><TD><STRONG>mysql_row_tell()</STRONG> </TD><TD>
Returns the row cursor position.

</TD></TR>
<TR><TD><STRONG>mysql_select_db()</STRONG> </TD><TD>
Selects a database.

</TD></TR>
<TR><TD><STRONG>mysql_shutdown()</STRONG> </TD><TD>
Shuts down the database server.

</TD></TR>
<TR><TD><STRONG>mysql_stat()</STRONG> </TD><TD>
Returns the server status as a string.

</TD></TR>
<TR><TD><STRONG>mysql_store_result()</STRONG> </TD><TD>
Retrieves a complete result set to the client.

</TD></TR>
<TR><TD><STRONG>mysql_thread_id()</STRONG> </TD><TD>
Returns the current thread ID.

</TD></TR>
<TR><TD><STRONG>mysql_thread_safe()</STRONG> </TD><TD>
Returns 1 if the clients are compiled as thread-safe.

</TD></TR>
<TR><TD><STRONG>mysql_use_result()</STRONG> </TD><TD>
Initiates a row-by-row result set retrieval.

</TD></TR>
<TR><TD><STRONG>mysql_commit()</STRONG> </TD><TD>
Commits the transaction (new in 4.1).

</TD></TR>
<TR><TD><STRONG>mysql_rollback()</STRONG> </TD><TD>
Rolls back the transaction (new in 4.1).

</TD></TR>
<TR><TD><STRONG>mysql_autocommit()</STRONG> </TD><TD>
Toggles autocommit mode on/off (new in 4.1).

</TD></TR>
<TR><TD><STRONG>mysql_more_results()</STRONG> </TD><TD>
Checks whether any more results exists (new in 4.1).

</TD></TR>
<TR><TD><STRONG>mysql_next_result()</STRONG> </TD><TD>
Returns/Initiates the next result in multi-query executions (new in 4.1).
</TD></TR>
</TABLE>

<P>
To connect to the server, call <CODE>mysql_init()</CODE> to initialise a
connection handler, then call <CODE>mysql_real_connect()</CODE> with that
handler (along with other information such as the hostname, user name,
and password).  Upon connection, <CODE>mysql_real_connect()</CODE> sets the
<CODE>reconnect</CODE> flag (part of the MYSQL structure) to a value of
<CODE>1</CODE>. This flag indicates, in the event that a query cannot be
performed because of a lost connection, to try reconnecting to the
server before giving up.  When you are done with the connection, call
<CODE>mysql_close()</CODE> to terminate it.

</P>
<P>
While a connection is active, the client may send SQL queries to the server
using <CODE>mysql_query()</CODE> or <CODE>mysql_real_query()</CODE>.  The difference
between the two is that <CODE>mysql_query()</CODE> expects the query to be
specified as a null-terminated string whereas <CODE>mysql_real_query()</CODE>
expects a counted string.  If the string contains binary data (which may
include null bytes), you must use <CODE>mysql_real_query()</CODE>.

</P>
<P>
For each non-<CODE>SELECT</CODE> query (for example, <CODE>INSERT</CODE>, <CODE>UPDATE</CODE>,
<CODE>DELETE</CODE>), you can find out how many rows were changed (affected)
by calling <CODE>mysql_affected_rows()</CODE>.

</P>
<P>
For <CODE>SELECT</CODE> queries, you retrieve the selected rows as a result set.
(Note that some statements are <CODE>SELECT</CODE>-like in that they return rows.
These include <CODE>SHOW</CODE>, <CODE>DESCRIBE</CODE>, and <CODE>EXPLAIN</CODE>.  They should
be treated the same way as <CODE>SELECT</CODE> statements.)

</P>
<P>
There are two ways for a client to process result sets.  One way is to
retrieve the entire result set all at once by calling
<CODE>mysql_store_result()</CODE>.  This function acquires from the server all the
rows returned by the query and stores them in the client.  The second way is
for the client to initiate a row-by-row result set retrieval by calling
<CODE>mysql_use_result()</CODE>.  This function initialises the retrieval, but does
not actually get any rows from the server.

</P>
<P>
In both cases, you access rows by calling <CODE>mysql_fetch_row()</CODE>.  With
<CODE>mysql_store_result()</CODE>, <CODE>mysql_fetch_row()</CODE> accesses rows that have
already been fetched from the server.  With <CODE>mysql_use_result()</CODE>,
<CODE>mysql_fetch_row()</CODE> actually retrieves the row from the server.
Information about the size of the data in each row is available by
calling <CODE>mysql_fetch_lengths()</CODE>.

</P>
<P>
After you are done with a result set, call <CODE>mysql_free_result()</CODE>
to free the memory used for it.

</P>
<P>
The two retrieval mechanisms are complementary.  Client programs should
choose the approach that is most appropriate for their requirements.
In practice, clients tend to use <CODE>mysql_store_result()</CODE> more
commonly.

</P>
<P>
An advantage of <CODE>mysql_store_result()</CODE> is that because the rows have all
been fetched to the client, you not only can access rows sequentially, you
can move back and forth in the result set using <CODE>mysql_data_seek()</CODE> or
<CODE>mysql_row_seek()</CODE> to change the current row position within the result
set.  You can also find out how many rows there are by calling
<CODE>mysql_num_rows()</CODE>.  On the other hand, the memory requirements for
<CODE>mysql_store_result()</CODE> may be very high for large result sets and you
are more likely to encounter out-of-memory conditions.

</P>
<P>
An advantage of <CODE>mysql_use_result()</CODE> is that the client requires less
memory for the result set because it maintains only one row at a time (and
because there is less allocation overhead, <CODE>mysql_use_result()</CODE> can be
faster).  Disadvantages are that you must process each row quickly to avoid
tying up the server, you don't have random access to rows within the result
set (you can only access rows sequentially), and you don't know how many rows
are in the result set until you have retrieved them all.  Furthermore, you
<STRONG>must</STRONG> retrieve all the rows even if you determine in mid-retrieval that
you've found the information you were looking for.

</P>
<P>
The API makes it possible for clients to respond appropriately to
queries (retrieving rows only as necessary) without knowing whether or
not the query is a <CODE>SELECT</CODE>.  You can do this by calling
<CODE>mysql_store_result()</CODE> after each <CODE>mysql_query()</CODE> (or
<CODE>mysql_real_query()</CODE>).  If the result set call succeeds, the query
was a <CODE>SELECT</CODE> and you can read the rows.  If the result set call
fails, call <CODE>mysql_field_count()</CODE> to determine whether a
result was actually to be expected.  If <CODE>mysql_field_count()</CODE>
returns zero, the query returned no data (indicating that it was an
<CODE>INSERT</CODE>, <CODE>UPDATE</CODE>, <CODE>DELETE</CODE>, etc.), and was not
expected to return rows.  If <CODE>mysql_field_count()</CODE> is non-zero, the
query should have returned rows, but didn't.  This indicates that the
query was a <CODE>SELECT</CODE> that failed.  See the description for
<CODE>mysql_field_count()</CODE> for an example of how this can be done.

</P>
<P>
Both <CODE>mysql_store_result()</CODE> and <CODE>mysql_use_result()</CODE> allow you to
obtain information about the fields that make up the result set (the number
of fields, their names and types, etc.).  You can access field information
sequentially within the row by calling <CODE>mysql_fetch_field()</CODE> repeatedly,
or by field number within the row by calling
<CODE>mysql_fetch_field_direct()</CODE>.  The current field cursor position may be
changed by calling <CODE>mysql_field_seek()</CODE>.  Setting the field cursor
affects subsequent calls to <CODE>mysql_fetch_field()</CODE>.  You can also get
information for fields all at once by calling <CODE>mysql_fetch_fields()</CODE>.

</P>
<P>
For detecting and reporting errors, MySQL provides access to error
information by means of the <CODE>mysql_errno()</CODE> and <CODE>mysql_error()</CODE>
functions.  These return the error code or error message for the most
recently invoked function that can succeed or fail, allowing you to determine
when an error occurred and what it was.

</P>



<H3><A NAME="C_API_functions" HREF="manual_toc.html#C_API_functions">8.1.3  C API Function Descriptions</A></H3>

<P>
In the descriptions here, a parameter or return value of <CODE>NULL</CODE> means
<CODE>NULL</CODE> in the sense of the C programming language, not a
MySQL <CODE>NULL</CODE> value.

</P>
<P>
Functions that return a value generally return a pointer or an integer.
Unless specified otherwise, functions returning a pointer return a
non-<CODE>NULL</CODE> value to indicate success or a <CODE>NULL</CODE> value to indicate
an error, and functions returning an integer return zero to indicate success
or non-zero to indicate an error.  Note that ``non-zero'' means just that.
Unless the function description says otherwise, do not test against a value
other than zero:

</P>

<PRE>
if (result)                   /* correct */
    ... error ...

if (result &#60; 0)               /* incorrect */
    ... error ...

if (result == -1)             /* incorrect */
    ... error ...
</PRE>

<P>
When a function returns an error, the <STRONG>Errors</STRONG> subsection of the
function description lists the possible types of errors.  You can
find out which of these occurred by calling <CODE>mysql_errno()</CODE>.
A string representation of the error may be obtained by calling
<CODE>mysql_error()</CODE>.

</P>



<H4><A NAME="mysql_affected_rows" HREF="manual_toc.html#mysql_affected_rows">8.1.3.1  <CODE>mysql_affected_rows()</CODE></A></H4>

<P>
<A NAME="IDX1564"></A>

</P>
<P>
<CODE>my_ulonglong mysql_affected_rows(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.2  Description</H4>

<P>
Returns the number of rows changed by the last <CODE>UPDATE</CODE>, deleted by
the last <CODE>DELETE</CODE> or inserted by the last <CODE>INSERT</CODE>
statement. May be called immediately after <CODE>mysql_query()</CODE> for
<CODE>UPDATE</CODE>, <CODE>DELETE</CODE>, or <CODE>INSERT</CODE> statements.  For
<CODE>SELECT</CODE> statements, <CODE>mysql_affected_rows()</CODE> works like
<CODE>mysql_num_rows()</CODE>.

</P>

<H4>8.1.3.3  Return Values</H4>

<P>
An integer greater than zero indicates the number of rows affected or
retrieved.  Zero indicates that no records where updated for an
<CODE>UPDATE</CODE> statement, no rows matched the <CODE>WHERE</CODE> clause in the
query or that no query has yet been executed.  -1 indicates that the
query returned an error or that, for a <CODE>SELECT</CODE> query,
<CODE>mysql_affected_rows()</CODE> was called prior to calling
<CODE>mysql_store_result()</CODE>.

</P>

<H4>8.1.3.4  Errors</H4>

<P>
None.

</P>

<H4>8.1.3.5  Example</H4>


<PRE>
mysql_query(&#38;mysql,"UPDATE products SET cost=cost*1.25 WHERE group=10");
printf("%ld products updated",(long) mysql_affected_rows(&#38;mysql));
</PRE>

<P>
If one specifies the flag <CODE>CLIENT_FOUND_ROWS</CODE> when connecting to
<CODE>mysqld</CODE>, <CODE>mysql_affected_rows()</CODE> will return the number of
rows matched by the <CODE>WHERE</CODE> statement for <CODE>UPDATE</CODE> statements.

</P>
<P>
Note that when one uses a <CODE>REPLACE</CODE> command,
<CODE>mysql_affected_rows()</CODE> will return 2 if the new row replaced and
old row.  This is because in this case one row was inserted after the
duplicate was deleted.

</P>



<H4><A NAME="mysql_change_user" HREF="manual_toc.html#mysql_change_user">8.1.3.6  <CODE>mysql_change_user()</CODE></A></H4>

<P>
<A NAME="IDX1565"></A>

</P>
<P>
<CODE>my_bool mysql_change_user(MYSQL *mysql, const char *user, const
char *password, const char *db)</CODE>

</P>

<H4>8.1.3.7  Description</H4>

<P>
Changes the user and causes the database specified by <CODE>db</CODE> to
become the default (current) database on the connection specified by
<CODE>mysql</CODE>.  In subsequent queries, this database is the default for
table references that do not include an explicit database specifier.

</P>
<P>
This function was introduced in MySQL Version 3.23.3.

</P>
<P>
<CODE>mysql_change_user()</CODE> fails unless the connected user can be
authenticated or if he doesn't have permission to use the database.  In
this case the user and database are not changed

</P>
<P>
The <CODE>db</CODE> parameter may be set to <CODE>NULL</CODE> if you don't want to have a
default database.

</P>
<P>
Starting from MySQL 4.0.6 this command will always <CODE>ROLLBACK</CODE> any
active transactions, close all temporary tables, unlock all locked
tables and reset the state as if one had done a new connect.
This will happen even if the user didn't change.

</P>

<H4>8.1.3.8  Return Values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>8.1.3.9  Errors</H4>

<P>
The same that you can get from <CODE>mysql_real_connect()</CODE>.

</P>
<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
<DT><CODE>ER_UNKNOWN_COM_ERROR</CODE>
<DD>
The MySQL server doesn't implement this command (probably an old server)
<DT><CODE>ER_ACCESS_DENIED_ERROR</CODE>
<DD>
The user or password was wrong.
<DT><CODE>ER_BAD_DB_ERROR</CODE>
<DD>
The database didn't exist.
<DT><CODE>ER_DBACCESS_DENIED_ERROR</CODE>
<DD>
The user did not have access rights to the database.
<DT><CODE>ER_WRONG_DB_NAME</CODE>
<DD>
The database name was too long.
</DL>


<H4>8.1.3.10  Example</H4>


<PRE>
if (mysql_change_user(&#38;mysql, "user", "password", "new_database"))
{
   fprintf(stderr, "Failed to change user.  Error: %s\n",
           mysql_error(&#38;mysql));
}
</PRE>



<H4><A NAME="mysql_character_set_name" HREF="manual_toc.html#mysql_character_set_name">8.1.3.11  <CODE>mysql_character_set_name()</CODE></A></H4>

<P>
<A NAME="IDX1566"></A>

</P>
<P>
<CODE>const char *mysql_character_set_name(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.12  Description</H4>

<P>
Returns the default character set for the current connection.

</P>

<H4>8.1.3.13  Return Values</H4>

<P>
The default character set

</P>

<H4>8.1.3.14  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_close" HREF="manual_toc.html#mysql_close">8.1.3.15  <CODE>mysql_close()</CODE></A></H4>

<P>
<A NAME="IDX1567"></A>

</P>
<P>
<CODE>void mysql_close(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.16  Description</H4>
<P>
Closes a previously opened connection.  <CODE>mysql_close()</CODE> also deallocates
the connection handle pointed to by <CODE>mysql</CODE> if the handle was allocated
automatically by <CODE>mysql_init()</CODE> or <CODE>mysql_connect()</CODE>.

</P>

<H4>8.1.3.17  Return Values</H4>

<P>
None.

</P>

<H4>8.1.3.18  Errors</H4>

<P>
None.

</P>



<H4><A NAME="mysql_connect" HREF="manual_toc.html#mysql_connect">8.1.3.19  <CODE>mysql_connect()</CODE></A></H4>

<P>
<A NAME="IDX1568"></A>

</P>
<P>
<CODE>MYSQL *mysql_connect(MYSQL *mysql, const char *host, const char *user, const char *passwd)</CODE>

</P>

<H4>8.1.3.20  Description</H4>

<P>
This function is deprecated.  It is preferable to use
<CODE>mysql_real_connect()</CODE> instead.

</P>
<P>
<CODE>mysql_connect()</CODE> attempts to establish a connection to a MySQL
database engine running on <CODE>host</CODE>.  <CODE>mysql_connect()</CODE> must complete
successfully before you can execute any of the other API functions, with the
exception of <CODE>mysql_get_client_info()</CODE>.

</P>
<P>
The meanings of the parameters are the same as for the corresponding
parameters for <CODE>mysql_real_connect()</CODE> with the difference that the
connection parameter may be <CODE>NULL</CODE>. In this case the C API
allocates memory for the connection structure automatically and frees it
when you call <CODE>mysql_close()</CODE>. The disadvantage of this approach is
that you can't retrieve an error message if the connection fails.  (To
get error information from <CODE>mysql_errno()</CODE> or <CODE>mysql_error()</CODE>,
you must provide a valid <CODE>MYSQL</CODE> pointer.)

</P>

<H4>8.1.3.21  Return Values</H4>

<P>
Same as for <CODE>mysql_real_connect()</CODE>.

</P>

<H4>8.1.3.22  Errors</H4>

<P>
Same as for <CODE>mysql_real_connect()</CODE>.

</P>



<H4><A NAME="mysql_create_db" HREF="manual_toc.html#mysql_create_db">8.1.3.23  <CODE>mysql_create_db()</CODE></A></H4>

<P>
<A NAME="IDX1569"></A>

</P>
<P>
<CODE>int mysql_create_db(MYSQL *mysql, const char *db)</CODE>

</P>

<H4>8.1.3.24  Description</H4>
<P>
Creates the database named by the <CODE>db</CODE> parameter.

</P>
<P>
This function is deprecated.  It is preferable to use <CODE>mysql_query()</CODE>
to issue a SQL <CODE>CREATE DATABASE</CODE> statement instead.

</P>

<H4>8.1.3.25  Return Values</H4>

<P>
Zero if the database was created successfully. Non-zero if an error
occurred.

</P>

<H4>8.1.3.26  Errors</H4>
<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.

<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.

<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.

<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>


<H4>8.1.3.27  Example</H4>


<PRE>
if(mysql_create_db(&#38;mysql, "my_database"))
{
   fprintf(stderr, "Failed to create new database.  Error: %s\n",
           mysql_error(&#38;mysql));
}
</PRE>



<H4><A NAME="mysql_data_seek" HREF="manual_toc.html#mysql_data_seek">8.1.3.28  <CODE>mysql_data_seek()</CODE></A></H4>

<P>
<A NAME="IDX1570"></A>

</P>
<P>
<CODE>void mysql_data_seek(MYSQL_RES *result, my_ulonglong offset)</CODE>

</P>

<H4>8.1.3.29  Description</H4>
<P>
Seeks to an arbitrary row in a query result set.  This requires that the
result set structure contains the entire result of the query, so
<CODE>mysql_data_seek()</CODE> may be used in conjunction only with
<CODE>mysql_store_result()</CODE>, not with <CODE>mysql_use_result()</CODE>.

</P>
<P>
The offset should be a value in the range from 0 to
<CODE>mysql_num_rows(result)-1</CODE>.

</P>

<H4>8.1.3.30  Return Values</H4>

<P>
None.

</P>

<H4>8.1.3.31  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_debug" HREF="manual_toc.html#mysql_debug">8.1.3.32  <CODE>mysql_debug()</CODE></A></H4>

<P>
<A NAME="IDX1571"></A>

</P>
<P>
<CODE>void mysql_debug(const char *debug)</CODE>

</P>

<H4>8.1.3.33  Description</H4>
<P>
Does a <CODE>DBUG_PUSH</CODE> with the given string. <CODE>mysql_debug()</CODE> uses the
Fred Fish debug library. To use this function, you must compile the client
library to support debugging.
See section <A HREF="manual.html#Debugging_server">E.1  Debugging a MySQL server</A>. See section <A HREF="manual.html#Debugging_client">E.2  Debugging a MySQL client</A>.

</P>

<H4>8.1.3.34  Return Values</H4>

<P>
None.

</P>

<H4>8.1.3.35  Errors</H4>
<P>
None.

</P>

<H4>8.1.3.36  Example</H4>

<P>
The call shown here causes the client library to generate a trace file in
<TT>`/tmp/client.trace'</TT> on the client machine:

</P>

<PRE>
mysql_debug("d:t:O,/tmp/client.trace");
</PRE>



<H4><A NAME="mysql_drop_db" HREF="manual_toc.html#mysql_drop_db">8.1.3.37  <CODE>mysql_drop_db()</CODE></A></H4>

<P>
<A NAME="IDX1572"></A>

</P>
<P>
<CODE>int mysql_drop_db(MYSQL *mysql, const char *db)</CODE>

</P>

<H4>8.1.3.38  Description</H4>
<P>
Drops the database named by the <CODE>db</CODE> parameter.

</P>
<P>
This function is deprecated.  It is preferable to use <CODE>mysql_query()</CODE>
to issue a SQL <CODE>DROP DATABASE</CODE> statement instead.

</P>

<H4>8.1.3.39  Return Values</H4>

<P>
Zero if the database was dropped successfully. Non-zero if an error
occurred.

</P>

<H4>8.1.3.40  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>


<H4>8.1.3.41  Example</H4>


<PRE>
if(mysql_drop_db(&#38;mysql, "my_database"))
  fprintf(stderr, "Failed to drop the database: Error: %s\n",
          mysql_error(&#38;mysql));
</PRE>



<H4><A NAME="mysql_dump_debug_info" HREF="manual_toc.html#mysql_dump_debug_info">8.1.3.42  <CODE>mysql_dump_debug_info()</CODE></A></H4>

<P>
<A NAME="IDX1573"></A>

</P>
<P>
<CODE>int mysql_dump_debug_info(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.43  Description</H4>

<P>
Instructs the server to write some debug information to the log. For
this to work, the connected user must have the <CODE>SUPER</CODE> privilege.

</P>

<H4>8.1.3.44  Return Values</H4>

<P>
Zero if the command was successful. Non-zero if an error occurred.

</P>

<H4>8.1.3.45  Errors</H4>
<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_eof" HREF="manual_toc.html#mysql_eof">8.1.3.46  <CODE>mysql_eof()</CODE></A></H4>

<P>
<A NAME="IDX1574"></A>

</P>
<P>
<CODE>my_bool mysql_eof(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.47  Description</H4>

<P>
This function is deprecated.  <CODE>mysql_errno()</CODE> or <CODE>mysql_error()</CODE>
may be used instead.

</P>
<P>
<CODE>mysql_eof()</CODE> determines whether the last row of a result
set has been read.

</P>
<P>
If you acquire a result set from a successful call to
<CODE>mysql_store_result()</CODE>, the client receives the entire set in one
operation.  In this case, a <CODE>NULL</CODE> return from
<CODE>mysql_fetch_row()</CODE> always means the end of the result set has been
reached and it is unnecessary to call <CODE>mysql_eof()</CODE>.  When used
with <CODE>mysql_store_result()</CODE>, <CODE>mysql_eof()</CODE> will always return
true.

</P>
<P>
On the other hand, if you use <CODE>mysql_use_result()</CODE> to initiate a result
set retrieval, the rows of the set are obtained from the server one by one as
you call <CODE>mysql_fetch_row()</CODE> repeatedly.  Because an error may occur on
the connection during this process, a <CODE>NULL</CODE> return value from
<CODE>mysql_fetch_row()</CODE> does not necessarily mean the end of the result set
was reached normally.  In this case, you can use <CODE>mysql_eof()</CODE> to
determine what happened.  <CODE>mysql_eof()</CODE> returns a non-zero value if the
end of the result set was reached and zero if an error occurred.

</P>
<P>
Historically, <CODE>mysql_eof()</CODE> predates the standard MySQL error
functions <CODE>mysql_errno()</CODE> and <CODE>mysql_error()</CODE>.  Because those error
functions provide the same information, their use is preferred over
<CODE>mysql_eof()</CODE>, which is now deprecated.  (In fact, they provide more
information, because <CODE>mysql_eof()</CODE> returns only a boolean value whereas
the error functions indicate a reason for the error when one occurs.)

</P>

<H4>8.1.3.48  Return Values</H4>

<P>
Zero if no error occurred. Non-zero if the end of the result set has been
reached.

</P>

<H4>8.1.3.49  Errors</H4>
<P>
None.

</P>

<H4>8.1.3.50  Example</H4>

<P>
The following example shows how you might use <CODE>mysql_eof()</CODE>:

</P>

<PRE>
mysql_query(&#38;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&#38;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(!mysql_eof(result))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
}
</PRE>

<P>
However, you can achieve the same effect with the standard MySQL
error functions:

</P>

<PRE>
mysql_query(&#38;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&#38;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(mysql_errno(&#38;mysql))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
}
</PRE>



<H4><A NAME="mysql_errno" HREF="manual_toc.html#mysql_errno">8.1.3.51  <CODE>mysql_errno()</CODE></A></H4>

<P>
<A NAME="IDX1575"></A>

</P>
<P>
<CODE>unsigned int mysql_errno(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.52  Description</H4>

<P>
For the connection specified by <CODE>mysql</CODE>, <CODE>mysql_errno()</CODE> returns
the error code for the most recently invoked API function that can succeed
or fail.  A return value of zero means that no error occurred. Client error
message numbers are listed in the MySQL <TT>`errmsg.h'</TT> header file.
Server error message numbers are listed in <TT>`mysqld_error.h'</TT>. In the
MySQL source distribution you can find a complete list of
error messages and error numbers in the file <TT>`Docs/mysqld_error.txt'</TT>.

</P>

<H4>8.1.3.53  Return Values</H4>

<P>
An error code value. Zero if no error occurred.

</P>

<H4>8.1.3.54  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_error" HREF="manual_toc.html#mysql_error">8.1.3.55  <CODE>mysql_error()</CODE></A></H4>

<P>
<A NAME="IDX1576"></A>

</P>
<P>
<CODE>char *mysql_error(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.56  Description</H4>

<P>
For the connection specified by <CODE>mysql</CODE>, <CODE>mysql_error()</CODE> returns
the error message for the most recently invoked API function that can succeed
or fail.  An empty string (<CODE>""</CODE>) is returned if no error occurred.
This means the following two tests are equivalent:

</P>

<PRE>
if(mysql_errno(&#38;mysql))
{
    // an error occurred
}

if(mysql_error(&#38;mysql)[0] != '\0')
{
    // an error occurred
}
</PRE>

<P>
The language of the client error messages may be changed by
recompiling the MySQL client library. Currently you can choose
error messages in several different languages.
See section <A HREF="manual.html#Languages">4.6.2  Non-English Error Messages</A>.

</P>

<H4>8.1.3.57  Return Values</H4>

<P>
A character string that describes the error.  An empty string if no error
occurred.

</P>

<H4>8.1.3.58  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_escape_string" HREF="manual_toc.html#mysql_escape_string">8.1.3.59  <CODE>mysql_escape_string()</CODE></A></H4>

<P>
<A NAME="IDX1577"></A>

</P>
<P>
You should use <CODE>mysql_real_escape_string()</CODE> instead!

</P>
<P>
This function is identical to <CODE>mysql_real_escape_string()</CODE> except
that <CODE>mysql_real_escape_string()</CODE> takes a connection handler as
its first argument and escapes the string according to the current
character set.  <CODE>mysql_escape_string()</CODE> does not take a connection
argument and does not respect the current charset setting.

</P>



<H4><A NAME="mysql_fetch_field" HREF="manual_toc.html#mysql_fetch_field">8.1.3.60  <CODE>mysql_fetch_field()</CODE></A></H4>

<P>
<A NAME="IDX1578"></A>

</P>
<P>
<CODE>MYSQL_FIELD *mysql_fetch_field(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.61  Description</H4>

<P>
Returns the definition of one column of a result set as a <CODE>MYSQL_FIELD</CODE>
structure. Call this function repeatedly to retrieve information about all
columns in the result set.  <CODE>mysql_fetch_field()</CODE> returns <CODE>NULL</CODE>
when no more fields are left.

</P>
<P>
<CODE>mysql_fetch_field()</CODE> is reset to return information about the first
field each time you execute a new <CODE>SELECT</CODE> query.  The field returned by
<CODE>mysql_fetch_field()</CODE> is also affected by calls to
<CODE>mysql_field_seek()</CODE>.

</P>
<P>
If you've called <CODE>mysql_query()</CODE> to perform a <CODE>SELECT</CODE> on a table
but have not called <CODE>mysql_store_result()</CODE>, MySQL returns the
default blob length (8K bytes) if you call <CODE>mysql_fetch_field()</CODE> to ask
for the length of a <CODE>BLOB</CODE> field.  (The 8K size is chosen because
MySQL doesn't know the maximum length for the <CODE>BLOB</CODE>. This
should be made configurable sometime.) Once you've retrieved the result set,
<CODE>field-&#62;max_length</CODE> contains the length of the largest value for this
column in the specific query.

</P>

<H4>8.1.3.62  Return Values</H4>

<P>
The <CODE>MYSQL_FIELD</CODE> structure for the current column. <CODE>NULL</CODE>
if no columns are left.

</P>

<H4>8.1.3.63  Errors</H4>
<P>
None.

</P>

<H4>8.1.3.64  Example</H4>


<PRE>
MYSQL_FIELD *field;

while((field = mysql_fetch_field(result)))
{
    printf("field name %s\n", field-&#62;name);
}
</PRE>



<H4><A NAME="mysql_fetch_fields" HREF="manual_toc.html#mysql_fetch_fields">8.1.3.65  <CODE>mysql_fetch_fields()</CODE></A></H4>

<P>
<A NAME="IDX1579"></A>

</P>
<P>
<CODE>MYSQL_FIELD *mysql_fetch_fields(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.66  Description</H4>

<P>
Returns an array of all <CODE>MYSQL_FIELD</CODE> structures for a result set.
Each structure provides the field definition for one column of the result
set.

</P>

<H4>8.1.3.67  Return Values</H4>

<P>
An array of <CODE>MYSQL_FIELD</CODE> structures for all columns of a result set.

</P>

<H4>8.1.3.68  Errors</H4>
<P>
None.

</P>

<H4>8.1.3.69  Example</H4>


<PRE>
unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *fields;

num_fields = mysql_num_fields(result);
fields = mysql_fetch_fields(result);
for(i = 0; i &#60; num_fields; i++)
{
   printf("Field %u is %s\n", i, fields[i].name);
}
</PRE>



<H4><A NAME="mysql_fetch_field_direct" HREF="manual_toc.html#mysql_fetch_field_direct">8.1.3.70  <CODE>mysql_fetch_field_direct()</CODE></A></H4>

<P>
<A NAME="IDX1580"></A>

</P>
<P>
<CODE>MYSQL_FIELD *mysql_fetch_field_direct(MYSQL_RES *result, unsigned int fieldnr)</CODE>

</P>

<H4>8.1.3.71  Description</H4>

<P>
Given a field number <CODE>fieldnr</CODE> for a column within a result set, returns
that column's field definition as a <CODE>MYSQL_FIELD</CODE> structure. You may use
this function to retrieve the definition for an arbitrary column.  The value
of <CODE>fieldnr</CODE> should be in the range from 0 to
<CODE>mysql_num_fields(result)-1</CODE>.

</P>

<H4>8.1.3.72  Return Values</H4>

<P>
The <CODE>MYSQL_FIELD</CODE> structure for the specified column.

</P>

<H4>8.1.3.73  Errors</H4>
<P>
None.

</P>

<H4>8.1.3.74  Example</H4>


<PRE>
unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *field;

num_fields = mysql_num_fields(result);
for(i = 0; i &#60; num_fields; i++)
{
    field = mysql_fetch_field_direct(result, i);
    printf("Field %u is %s\n", i, field-&#62;name);
}
</PRE>



<H4><A NAME="mysql_fetch_lengths" HREF="manual_toc.html#mysql_fetch_lengths">8.1.3.75  <CODE>mysql_fetch_lengths()</CODE></A></H4>

<P>
<A NAME="IDX1581"></A>

</P>
<P>
<CODE>unsigned long *mysql_fetch_lengths(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.76  Description</H4>

<P>
Returns the lengths of the columns of the current row within a result set.
If you plan to copy field values, this length information is also useful for
optimisation, because you can avoid calling <CODE>strlen()</CODE>.  In addition, if
the result set contains binary data, you <STRONG>must</STRONG> use this function to
determine the size of the data, because <CODE>strlen()</CODE> returns incorrect
results for any field containing null characters.

</P>
<P>
The length for empty columns and for columns containing <CODE>NULL</CODE> values is
zero.  To see how to distinguish these two cases, see the description for
<CODE>mysql_fetch_row()</CODE>.

</P>

<H4>8.1.3.77  Return Values</H4>

<P>
An array of unsigned long integers representing the size of each column (not
including any terminating null characters).
<CODE>NULL</CODE> if an error occurred.

</P>

<H4>8.1.3.78  Errors</H4>
<P>
<CODE>mysql_fetch_lengths()</CODE> is valid only for the current row of the result
set.  It returns <CODE>NULL</CODE> if you call it before calling
<CODE>mysql_fetch_row()</CODE> or after retrieving all rows in the result.

</P>

<H4>8.1.3.79  Example</H4>


<PRE>
MYSQL_ROW row;
unsigned long *lengths;
unsigned int num_fields;
unsigned int i;

row = mysql_fetch_row(result);
if (row)
{
    num_fields = mysql_num_fields(result);
    lengths = mysql_fetch_lengths(result);
    for(i = 0; i &#60; num_fields; i++)
    {
         printf("Column %u is %lu bytes in length.\n", i, lengths[i]);
    }
}
</PRE>



<H4><A NAME="mysql_fetch_row" HREF="manual_toc.html#mysql_fetch_row">8.1.3.80  <CODE>mysql_fetch_row()</CODE></A></H4>

<P>
<A NAME="IDX1582"></A>

</P>
<P>
<CODE>MYSQL_ROW mysql_fetch_row(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.81  Description</H4>

<P>
Retrieves the next row of a result set. When used after
<CODE>mysql_store_result()</CODE>, <CODE>mysql_fetch_row()</CODE> returns <CODE>NULL</CODE>
when there are no more rows to retrieve.  When used after
<CODE>mysql_use_result()</CODE>, <CODE>mysql_fetch_row()</CODE> returns <CODE>NULL</CODE> when
there are no more rows to retrieve or if an error occurred.

</P>
<P>
The number of values in the row is given by <CODE>mysql_num_fields(result)</CODE>.
If <CODE>row</CODE> holds the return value from a call to <CODE>mysql_fetch_row()</CODE>,
pointers to the values are accessed as <CODE>row[0]</CODE> to
<CODE>row[mysql_num_fields(result)-1]</CODE>.  <CODE>NULL</CODE> values in the row are
indicated by <CODE>NULL</CODE> pointers.

</P>
<P>
The lengths of the field values in the row may be obtained by calling
<CODE>mysql_fetch_lengths()</CODE>.  Empty fields and fields containing
<CODE>NULL</CODE> both have length 0; you can distinguish these by checking
the pointer for the field value.  If the pointer is <CODE>NULL</CODE>, the field
is <CODE>NULL</CODE>; otherwise, the field is empty.

</P>

<H4>8.1.3.82  Return Values</H4>

<P>
A <CODE>MYSQL_ROW</CODE> structure for the next row.  <CODE>NULL</CODE> if
there are no more rows to retrieve or if an error occurred.

</P>

<H4>8.1.3.83  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>


<H4>8.1.3.84  Example</H4>


<PRE>
MYSQL_ROW row;
unsigned int num_fields;
unsigned int i;

num_fields = mysql_num_fields(result);
while ((row = mysql_fetch_row(result)))
{
   unsigned long *lengths;
   lengths = mysql_fetch_lengths(result);
   for(i = 0; i &#60; num_fields; i++)
   {
       printf("[%.*s] ", (int) lengths[i], row[i] ? row[i] : "NULL");
   }
   printf("\n");
}
</PRE>



<H4><A NAME="mysql_field_count" HREF="manual_toc.html#mysql_field_count">8.1.3.85  <CODE>mysql_field_count()</CODE></A></H4>

<P>
<A NAME="IDX1583"></A>

</P>
<P>
<CODE>unsigned int mysql_field_count(MYSQL *mysql)</CODE>

</P>
<P>
If you are using a version of MySQL earlier than Version 3.22.24, you
should use <CODE>unsigned int mysql_num_fields(MYSQL *mysql)</CODE> instead.

</P>

<H4>8.1.3.86  Description</H4>

<P>
Returns the number of columns for the most recent query on the connection.

</P>
<P>
The normal use of this function is when <CODE>mysql_store_result()</CODE>
returned <CODE>NULL</CODE> (and thus you have no result set pointer).
In this case, you can call <CODE>mysql_field_count()</CODE> to
determine whether <CODE>mysql_store_result()</CODE> should have produced a
non-empty result.  This allows the client program to take proper action
without knowing whether the query was a <CODE>SELECT</CODE> (or
<CODE>SELECT</CODE>-like) statement.  The example shown here illustrates how this
may be done.

</P>
<P>
See section <A HREF="manual.html#NULL_mysql_store_result">8.1.12.1  Why Is It that After <CODE>mysql_query()</CODE> Returns Success, <CODE>mysql_store_result()</CODE> Sometimes Returns <CODE>NULL</CODE>?</A>.

</P>

<H4>8.1.3.87  Return Values</H4>

<P>
An unsigned integer representing the number of fields in a result set.

</P>

<H4>8.1.3.88  Errors</H4>
<P>
None.

</P>

<H4>8.1.3.89  Example</H4>


<PRE>
MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&#38;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&#38;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if(mysql_field_count(&#38;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&#38;mysql);
        }
        else // mysql_store_result() should have returned data
        {
            fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
        }
    }
}
</PRE>

<P>
An alternative is to replace the <CODE>mysql_field_count(&#38;mysql)</CODE> call with
<CODE>mysql_errno(&#38;mysql)</CODE>.  In this case, you are checking directly for an
error from <CODE>mysql_store_result()</CODE> rather than inferring from the value
of <CODE>mysql_field_count()</CODE> whether the statement was a
<CODE>SELECT</CODE>.

</P>



<H4><A NAME="mysql_field_seek" HREF="manual_toc.html#mysql_field_seek">8.1.3.90  <CODE>mysql_field_seek()</CODE></A></H4>

<P>
<A NAME="IDX1584"></A>

</P>
<P>
<CODE>MYSQL_FIELD_OFFSET mysql_field_seek(MYSQL_RES *result, MYSQL_FIELD_OFFSET offset)</CODE>

</P>

<H4>8.1.3.91  Description</H4>

<P>
Sets the field cursor to the given offset.   The next call to
<CODE>mysql_fetch_field()</CODE> will retrieve the field definition of the column
associated with that offset.

</P>
<P>
To seek to the beginning of a row, pass an <CODE>offset</CODE> value of zero.

</P>

<H4>8.1.3.92  Return Values</H4>

<P>
The previous value of the field cursor.

</P>

<H4>8.1.3.93  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_field_tell" HREF="manual_toc.html#mysql_field_tell">8.1.3.94  <CODE>mysql_field_tell()</CODE></A></H4>

<P>
<A NAME="IDX1585"></A>

</P>
<P>
<CODE>MYSQL_FIELD_OFFSET mysql_field_tell(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.95  Description</H4>

<P>
Returns the position of the field cursor used for the last
<CODE>mysql_fetch_field()</CODE>. This value can be used as an argument to
<CODE>mysql_field_seek()</CODE>.

</P>

<H4>8.1.3.96  Return Values</H4>

<P>
The current offset of the field cursor.

</P>

<H4>8.1.3.97  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_free_result" HREF="manual_toc.html#mysql_free_result">8.1.3.98  <CODE>mysql_free_result()</CODE></A></H4>

<P>
<A NAME="IDX1586"></A>

</P>
<P>
<CODE>void mysql_free_result(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.99  Description</H4>

<P>
Frees the memory allocated for a result set by <CODE>mysql_store_result()</CODE>,
<CODE>mysql_use_result()</CODE>, <CODE>mysql_list_dbs()</CODE>, etc.  When you are done
with a result set, you must free the memory it uses by calling
<CODE>mysql_free_result()</CODE>.

</P>

<H4>8.1.3.100  Return Values</H4>

<P>
None.

</P>

<H4>8.1.3.101  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_get_client_info" HREF="manual_toc.html#mysql_get_client_info">8.1.3.102  <CODE>mysql_get_client_info()</CODE></A></H4>

<P>
<A NAME="IDX1587"></A>

</P>
<P>
<CODE>char *mysql_get_client_info(void)</CODE>

</P>

<H4>8.1.3.103  Description</H4>

<P>
Returns a string that represents the client library version.

</P>

<H4>8.1.3.104  Return Values</H4>

<P>
A character string that represents the MySQL client library version.

</P>

<H4>8.1.3.105  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_get_server_version" HREF="manual_toc.html#mysql_get_server_version">8.1.3.106  <CODE>mysql_get_server_version()</CODE></A></H4>

<P>
<A NAME="IDX1588"></A>

</P>
<P>
<CODE>unsigned long mysql_get_server_version(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.107  Description</H4>

<P>
Returns version number of server as an integer (new in 4.1).

</P>

<H4>8.1.3.108  Return Values</H4>

<P>
A number that represents the MySQL server version in format:

</P>
<P>
main_version*10000 + minor_version *100 + sub_version

</P>
<P>
For example, 4.1.0 is returned as 40100.

</P>
<P>
This is useful to quickly determine the version of the server in a
client program to know if some capability exits.

</P>

<H4>8.1.3.109  Errors</H4>
<P>
None.

</P>


<H4><A NAME="mysql_get_host_info" HREF="manual_toc.html#mysql_get_host_info">8.1.3.110  <CODE>mysql_get_host_info()</CODE></A></H4>

<P>
<A NAME="IDX1589"></A>

</P>
<P>
<CODE>char *mysql_get_host_info(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.111  Description</H4>

<P>
Returns a string describing the type of connection in use, including the
server host name.

</P>

<H4>8.1.3.112  Return Values</H4>

<P>
A character string representing the server host name and the connection type.

</P>

<H4>8.1.3.113  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_get_proto_info" HREF="manual_toc.html#mysql_get_proto_info">8.1.3.114  <CODE>mysql_get_proto_info()</CODE></A></H4>

<P>
<A NAME="IDX1590"></A>

</P>
<P>
<CODE>unsigned int mysql_get_proto_info(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.115  Description</H4>

<P>
Returns the protocol version used by current connection.

</P>

<H4>8.1.3.116  Return Values</H4>

<P>
An unsigned integer representing the protocol version used by the current
connection.

</P>

<H4>8.1.3.117  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_get_server_info" HREF="manual_toc.html#mysql_get_server_info">8.1.3.118  <CODE>mysql_get_server_info()</CODE></A></H4>

<P>
<A NAME="IDX1591"></A>

</P>
<P>
<CODE>char *mysql_get_server_info(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.119  Description</H4>

<P>
Returns a string that represents the server version number.

</P>

<H4>8.1.3.120  Return Values</H4>

<P>
A character string that represents the server version number.

</P>

<H4>8.1.3.121  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_info" HREF="manual_toc.html#mysql_info">8.1.3.122  <CODE>mysql_info()</CODE></A></H4>

<P>
<A NAME="IDX1592"></A>

</P>
<P>
<CODE>char *mysql_info(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.123  Description</H4>

<P>
Retrieves a string providing information about the most recently executed
query, but only for the statements listed here.  For other statements,
<CODE>mysql_info()</CODE> returns <CODE>NULL</CODE>.  The format of the string varies
depending on the type of query, as described here.  The numbers are
illustrative only; the string will contain values appropriate for the query.

</P>
<DL COMPACT>

<DT><CODE>INSERT INTO ... SELECT ...</CODE>
<DD>
String format: <CODE>Records: 100 Duplicates: 0 Warnings: 0</CODE>
<DT><CODE>INSERT INTO ... VALUES (...),(...),(...)...</CODE>
<DD>
String format: <CODE>Records: 3  Duplicates: 0  Warnings: 0</CODE>
<DT><CODE>LOAD DATA INFILE ...</CODE>
<DD>
String format: <CODE>Records: 1 Deleted: 0 Skipped: 0 Warnings: 0</CODE>
<DT><CODE>ALTER TABLE</CODE>
<DD>
String format: <CODE>Records: 3 Duplicates: 0 Warnings: 0</CODE>
<DT><CODE>UPDATE</CODE>
<DD>
String format: <CODE>Rows matched: 40 Changed: 40 Warnings: 0</CODE>
</DL>

<P>
Note that <CODE>mysql_info()</CODE> returns a non-<CODE>NULL</CODE> value for the
<CODE>INSERT ... VALUES</CODE> statement only if multiple value lists are
specified in the statement.

</P>

<H4>8.1.3.124  Return Values</H4>

<P>
A character string representing additional information about the most
recently executed query.  <CODE>NULL</CODE> if no information is available for the
query.

</P>

<H4>8.1.3.125  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_init" HREF="manual_toc.html#mysql_init">8.1.3.126  <CODE>mysql_init()</CODE></A></H4>

<P>
<A NAME="IDX1593"></A>

</P>
<P>
<CODE>MYSQL *mysql_init(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.127  Description</H4>

<P>
Allocates or initialises a <CODE>MYSQL</CODE> object suitable for
<CODE>mysql_real_connect()</CODE>.  If <CODE>mysql</CODE> is a <CODE>NULL</CODE> pointer, the
function allocates, initialises, and returns a new object.  Otherwise, the
object is initialised and the address of the object is returned.  If
<CODE>mysql_init()</CODE> allocates a new object, it will be freed when
<CODE>mysql_close()</CODE> is called to close the connection.

</P>

<H4>8.1.3.128  Return Values</H4>

<P>
An initialised <CODE>MYSQL*</CODE> handle.  <CODE>NULL</CODE> if there was
insufficient memory to allocate a new object.

</P>

<H4>8.1.3.129  Errors</H4>
<P>
In case of insufficient memory, <CODE>NULL</CODE> is returned.

</P>



<H4><A NAME="mysql_insert_id" HREF="manual_toc.html#mysql_insert_id">8.1.3.130  <CODE>mysql_insert_id()</CODE></A></H4>

<P>
<A NAME="IDX1594"></A>

</P>
<P>
<CODE>my_ulonglong mysql_insert_id(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.131  Description</H4>

<P>
Returns the ID generated for an <CODE>AUTO_INCREMENT</CODE> column by the previous
query.  Use this function after you have performed an <CODE>INSERT</CODE> query
into a table that contains an <CODE>AUTO_INCREMENT</CODE> field.

</P>
<P>
Note that <CODE>mysql_insert_id()</CODE> returns <CODE>0</CODE> if the previous query
does not generate an <CODE>AUTO_INCREMENT</CODE> value.  If you need to save
the value for later, be sure to call <CODE>mysql_insert_id()</CODE> immediately
after the query that generates the value.

</P>
<P>
<CODE>mysql_insert_id()</CODE> is updated after <CODE>INSERT</CODE> and
<CODE>UPDATE</CODE> statements that generate an <CODE>AUTO_INCREMENT</CODE> value or
that set a column value to <CODE>LAST_INSERT_ID(expr)</CODE>.
See section <A HREF="manual.html#Miscellaneous_functions">6.3.6.2  Miscellaneous Functions</A>.

</P>
<P>
Also note that the value of the SQL <CODE>LAST_INSERT_ID()</CODE> function always
contains the most recently generated <CODE>AUTO_INCREMENT</CODE> value, and is
not reset between queries because the value of that function is maintained
in the server.

</P>

<H4>8.1.3.132  Return Values</H4>

<P>
The value of the <CODE>AUTO_INCREMENT</CODE> field that was updated by the previous
query.  Returns zero if there was no previous query on the connection or if
the query did not update an <CODE>AUTO_INCREMENT</CODE> value.

</P>

<H4>8.1.3.133  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_kill" HREF="manual_toc.html#mysql_kill">8.1.3.134  <CODE>mysql_kill()</CODE></A></H4>

<P>
<A NAME="IDX1595"></A>

</P>
<P>
<CODE>int mysql_kill(MYSQL *mysql, unsigned long pid)</CODE>

</P>

<H4>8.1.3.135  Description</H4>

<P>
Asks the server to kill the thread specified by <CODE>pid</CODE>.

</P>

<H4>8.1.3.136  Return Values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>8.1.3.137  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_list_dbs" HREF="manual_toc.html#mysql_list_dbs">8.1.3.138  <CODE>mysql_list_dbs()</CODE></A></H4>

<P>
<A NAME="IDX1596"></A>

</P>
<P>
<CODE>MYSQL_RES *mysql_list_dbs(MYSQL *mysql, const char *wild)</CODE>

</P>

<H4>8.1.3.139  Description</H4>

<P>
Returns a result set consisting of database names on the server that match
the simple regular expression specified by the <CODE>wild</CODE> parameter.
<CODE>wild</CODE> may contain the wildcard characters <SAMP>`%'</SAMP> or <SAMP>`_'</SAMP>, or may
be a <CODE>NULL</CODE> pointer to match all databases.  Calling
<CODE>mysql_list_dbs()</CODE> is similar to executing the query <CODE>SHOW
databases [LIKE wild]</CODE>.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>8.1.3.140  Return Values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>8.1.3.141  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_list_fields" HREF="manual_toc.html#mysql_list_fields">8.1.3.142  <CODE>mysql_list_fields()</CODE></A></H4>

<P>
<A NAME="IDX1597"></A>

</P>
<P>
<CODE>MYSQL_RES *mysql_list_fields(MYSQL *mysql, const char *table, const char *wild)</CODE>

</P>

<H4>8.1.3.143  Description</H4>

<P>
Returns a result set consisting of field names in the given table that match
the simple regular expression specified by the <CODE>wild</CODE> parameter.
<CODE>wild</CODE> may contain the wildcard characters <SAMP>`%'</SAMP> or <SAMP>`_'</SAMP>, or may
be a <CODE>NULL</CODE> pointer to match all fields.  Calling
<CODE>mysql_list_fields()</CODE> is similar to executing the query <CODE>SHOW
COLUMNS FROM tbl_name [LIKE wild]</CODE>.

</P>
<P>
Note that it's recommended that you use <CODE>SHOW COLUMNS FROM tbl_name</CODE>
instead of <CODE>mysql_list_fields()</CODE>.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>8.1.3.144  Return Values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>8.1.3.145  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_list_processes" HREF="manual_toc.html#mysql_list_processes">8.1.3.146  <CODE>mysql_list_processes()</CODE></A></H4>

<P>
<A NAME="IDX1598"></A>

</P>
<P>
<CODE>MYSQL_RES *mysql_list_processes(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.147  Description</H4>

<P>
Returns a result set describing the current server threads.  This is the same
kind of information as that reported by <CODE>mysqladmin processlist</CODE> or
a <CODE>SHOW PROCESSLIST</CODE> query.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>8.1.3.148  Return Values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>8.1.3.149  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_list_tables" HREF="manual_toc.html#mysql_list_tables">8.1.3.150  <CODE>mysql_list_tables()</CODE></A></H4>

<P>
<A NAME="IDX1599"></A>

</P>
<P>
<CODE>MYSQL_RES *mysql_list_tables(MYSQL *mysql, const char *wild)</CODE>

</P>

<H4>8.1.3.151  Description</H4>

<P>
Returns a result set consisting of table names in the current database that
match the simple regular expression specified by the <CODE>wild</CODE> parameter.
<CODE>wild</CODE> may contain the wildcard characters <SAMP>`%'</SAMP> or <SAMP>`_'</SAMP>, or may
be a <CODE>NULL</CODE> pointer to match all tables.  Calling
<CODE>mysql_list_tables()</CODE> is similar to executing the query <CODE>SHOW
tables [LIKE wild]</CODE>.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>8.1.3.152  Return Values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>8.1.3.153  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_num_fields" HREF="manual_toc.html#mysql_num_fields">8.1.3.154  <CODE>mysql_num_fields()</CODE></A></H4>

<P>
<A NAME="IDX1600"></A>
<A NAME="IDX1601"></A>

</P>
<P>
<CODE>unsigned int mysql_num_fields(MYSQL_RES *result)</CODE>

</P>
<P>
or

</P>
<P>
<CODE>unsigned int mysql_num_fields(MYSQL *mysql)</CODE>

</P>
<P>
The second form doesn't work on MySQL Version 3.22.24 or newer.  To pass a
<CODE>MYSQL*</CODE> argument, you must use
<CODE>unsigned int mysql_field_count(MYSQL *mysql)</CODE> instead.

</P>

<H4>8.1.3.155  Description</H4>

<P>
Returns the number of columns in a result set.

</P>
<P>
Note that you can get the number of columns either from a pointer to a result
set or to a connection handle.  You would use the connection handle if
<CODE>mysql_store_result()</CODE> or <CODE>mysql_use_result()</CODE> returned
<CODE>NULL</CODE> (and thus you have no result set pointer).  In this case, you can
call <CODE>mysql_field_count()</CODE> to determine whether
<CODE>mysql_store_result()</CODE> should have produced a non-empty result.  This
allows the client program to take proper action without knowing whether or
not the query was a <CODE>SELECT</CODE> (or <CODE>SELECT</CODE>-like) statement.  The
example shown here illustrates how this may be done.

</P>
<P>
See section <A HREF="manual.html#NULL_mysql_store_result">8.1.12.1  Why Is It that After <CODE>mysql_query()</CODE> Returns Success, <CODE>mysql_store_result()</CODE> Sometimes Returns <CODE>NULL</CODE>?</A>.

</P>

<H4>8.1.3.156  Return Values</H4>

<P>
An unsigned integer representing the number of fields in a result set.

</P>

<H4>8.1.3.157  Errors</H4>
<P>
None.

</P>

<H4>8.1.3.158  Example</H4>


<PRE>
MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&#38;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&#38;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if (mysql_errno(&#38;mysql))
	{
           fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
	}
        else if (mysql_field_count(&#38;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&#38;mysql);
        }
    }
}
</PRE>

<P>
An alternative (if you know that your query should have returned a result set)
is to replace the <CODE>mysql_errno(&#38;mysql)</CODE> call with a check if
<CODE>mysql_field_count(&#38;mysql)</CODE> is = 0.  This will only happen if something
went wrong.

</P>



<H4><A NAME="mysql_num_rows" HREF="manual_toc.html#mysql_num_rows">8.1.3.159  <CODE>mysql_num_rows()</CODE></A></H4>

<P>
<A NAME="IDX1602"></A>

</P>
<P>
<CODE>my_ulonglong mysql_num_rows(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.160  Description</H4>

<P>
Returns the number of rows in the result set.

</P>
<P>
The use of <CODE>mysql_num_rows()</CODE> depends on whether you use
<CODE>mysql_store_result()</CODE> or <CODE>mysql_use_result()</CODE> to return the result
set.  If you use <CODE>mysql_store_result()</CODE>, <CODE>mysql_num_rows()</CODE> may be
called immediately.  If you use <CODE>mysql_use_result()</CODE>,
<CODE>mysql_num_rows()</CODE> will not return the correct value until all the rows
in the result set have been retrieved.

</P>

<H4>8.1.3.161  Return Values</H4>

<P>
The number of rows in the result set.

</P>

<H4>8.1.3.162  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_options" HREF="manual_toc.html#mysql_options">8.1.3.163  <CODE>mysql_options()</CODE></A></H4>

<P>
<A NAME="IDX1603"></A>

</P>
<P>
<CODE>int mysql_options(MYSQL *mysql, enum mysql_option option, const char *arg)</CODE>

</P>

<H4>8.1.3.164  Description</H4>

<P>
Can be used to set extra connect options and affect behaviour for a connection.
This function may be called multiple times to set several options.

</P>
<P>
<CODE>mysql_options()</CODE> should be called after <CODE>mysql_init()</CODE> and before
<CODE>mysql_connect()</CODE> or <CODE>mysql_real_connect()</CODE>.

</P>
<P>
The <CODE>option</CODE> argument is the option that you want to set; the <CODE>arg</CODE>
argument is the value for the option. If the option is an integer, then
<CODE>arg</CODE> should point to the value of the integer.

</P>
<P>
Possible options values:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Option</STRONG> </TD><TD> <STRONG>Argument type</STRONG> </TD><TD> <STRONG>Function</STRONG>
</TD></TR>
<TR><TD><CODE>MYSQL_OPT_CONNECT_TIMEOUT</CODE> </TD><TD> <CODE>unsigned int *</CODE> </TD><TD> Connect timeout in seconds.
</TD></TR>
<TR><TD><CODE>MYSQL_OPT_COMPRESS</CODE> </TD><TD> Not used </TD><TD> Use the compressed client/server protocol.
</TD></TR>
<TR><TD><CODE>MYSQL_OPT_LOCAL_INFILE</CODE> </TD><TD> optional pointer to uint </TD><TD> If no pointer is given or if pointer points to an <CODE>unsigned int != 0</CODE> the command <CODE>LOAD LOCAL INFILE</CODE> is enabled.
</TD></TR>
<TR><TD><CODE>MYSQL_OPT_NAMED_PIPE</CODE> </TD><TD> Not used </TD><TD> Use named pipes to connect to a MySQL server on NT.
</TD></TR>
<TR><TD><CODE>MYSQL_INIT_COMMAND</CODE> </TD><TD> <CODE>char *</CODE> </TD><TD> Command to execute when connecting to the MySQL server. Will automatically be re-executed when reconnecting.
</TD></TR>
<TR><TD><CODE>MYSQL_READ_DEFAULT_FILE</CODE> </TD><TD> <CODE>char *</CODE> </TD><TD> Read options from the named option file instead of from <TT>`my.cnf'</TT>.
</TD></TR>
<TR><TD><CODE>MYSQL_READ_DEFAULT_GROUP</CODE> </TD><TD> <CODE>char *</CODE> </TD><TD> Read options from the named group from <TT>`my.cnf'</TT> or the file specified with <CODE>MYSQL_READ_DEFAULT_FILE</CODE>.
</TD></TR>
</TABLE>

<P>
Note that the group <CODE>client</CODE> is always read if you use
<CODE>MYSQL_READ_DEFAULT_FILE</CODE> or <CODE>MYSQL_READ_DEFAULT_GROUP</CODE>.

</P>
<P>
The specified group in the option file may contain the following options:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Option</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>connect-timeout</CODE> </TD><TD> Connect timeout in seconds. On Linux this timeout is also used for waiting for the first answer from the server.
</TD></TR>
<TR><TD><CODE>compress</CODE> </TD><TD> Use the compressed client/server protocol.
</TD></TR>
<TR><TD><CODE>database</CODE> </TD><TD> Connect to this database if no database was specified in the connect command.
</TD></TR>
<TR><TD><CODE>debug</CODE> </TD><TD> Debug options.
</TD></TR>
<TR><TD><CODE>disable-local-infile</CODE> </TD><TD> Disable use of <CODE>LOAD DATA LOCAL</CODE>.
</TD></TR>
<TR><TD><CODE>host</CODE> </TD><TD> Default host name.
</TD></TR>
<TR><TD><CODE>init-command</CODE> </TD><TD> Command to execute when connecting to MySQL server. Will automatically be re-executed when reconnecting.
</TD></TR>
<TR><TD><CODE>interactive-timeout</CODE> </TD><TD> Same as specifying <CODE>CLIENT_INTERACTIVE</CODE> to <CODE>mysql_real_connect()</CODE>. See section <A HREF="manual.html#mysql_real_connect">8.1.3.175  <CODE>mysql_real_connect()</CODE></A>.
</TD></TR>
<TR><TD><CODE>local-infile[=(0|1)]</CODE> </TD><TD> If no argument or argument != 0 then enable use of <CODE>LOAD DATA LOCAL</CODE>.
</TD></TR>
<TR><TD><CODE>max_allowed_packet</CODE> </TD><TD> Max size of packet client can read from server.
</TD></TR>
<TR><TD><CODE>password</CODE> </TD><TD> Default password.
</TD></TR>
<TR><TD><CODE>pipe</CODE> </TD><TD> Use named pipes to connect to a MySQL server on NT.
</TD></TR>
<TR><TD><CODE>protocol=(TCP | SOCKET | PIPE | MEMORY)</CODE> </TD><TD> Which protocol to use when connecting to server (New in 4.1)
</TD></TR>
<TR><TD><CODE>port</CODE> </TD><TD> Default port number.
</TD></TR>
<TR><TD><CODE>return-found-rows</CODE> </TD><TD> Tell <CODE>mysql_info()</CODE> to return found rows instead of updated rows when using <CODE>UPDATE</CODE>.
</TD></TR>
<TR><TD><CODE>shared-memory-base-name=name</CODE> </TD><TD> Shared memory name to use to connect to server (default is "MySQL"). New in MySQL 4.1.
</TD></TR>
<TR><TD><CODE>socket</CODE> </TD><TD> Default socket number.
</TD></TR>
<TR><TD><CODE>user</CODE> </TD><TD> Default user.
</TD></TR>
</TABLE>

<P>
Note that <CODE>timeout</CODE> has been replaced by <CODE>connect-timeout</CODE>, but
<CODE>timeout</CODE> will still work for a while.

</P>
<P>
For more information about option files, see section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.

</P>

<H4>8.1.3.165  Return Values</H4>

<P>
Zero for success.  Non-zero if you used an unknown option.

</P>

<H4>8.1.3.166  Example</H4>


<PRE>
MYSQL mysql;

mysql_init(&#38;mysql);
mysql_options(&#38;mysql,MYSQL_OPT_COMPRESS,0);
mysql_options(&#38;mysql,MYSQL_READ_DEFAULT_GROUP,"odbc");
if (!mysql_real_connect(&#38;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&#38;mysql));
}
</PRE>

<P>
The above requests the client to use the compressed client/server protocol and
read the additional options from the <CODE>odbc</CODE> section in the <TT>`my.cnf'</TT>
file.

</P>



<H4><A NAME="mysql_ping" HREF="manual_toc.html#mysql_ping">8.1.3.167  <CODE>mysql_ping()</CODE></A></H4>

<P>
<A NAME="IDX1604"></A>

</P>
<P>
<CODE>int mysql_ping(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.168  Description</H4>

<P>
Checks whether the connection to the server is working. If it has gone
down, an automatic reconnection is attempted.

</P>
<P>
This function can be used by clients that remain idle for a long while,
to check whether the server has closed the connection and reconnect
if necessary.

</P>

<H4>8.1.3.169  Return Values</H4>

<P>
Zero if the server is alive. Non-zero if an error occurred.

</P>

<H4>8.1.3.170  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_query" HREF="manual_toc.html#mysql_query">8.1.3.171  <CODE>mysql_query()</CODE></A></H4>

<P>
<A NAME="IDX1605"></A>

</P>
<P>
<CODE>int mysql_query(MYSQL *mysql, const char *query)</CODE>

</P>

<H4>8.1.3.172  Description</H4>
<P>
Executes the SQL query pointed to by the null-terminated string <CODE>query</CODE>.
The query must consist of a single SQL statement.  You should not add
a terminating semicolon (<SAMP>`;'</SAMP>) or <CODE>\g</CODE> to the statement.

</P>
<P>
<CODE>mysql_query()</CODE> cannot be used for queries that contain binary data; you
should use <CODE>mysql_real_query()</CODE> instead.  (Binary data may contain the
<SAMP>`\0'</SAMP> character, which <CODE>mysql_query()</CODE> interprets as the end of the
query string.)

</P>
<P>
If you want to know if the query should return a result set or not, you can
use <CODE>mysql_field_count()</CODE> to check for this.
See section <A HREF="manual.html#mysql_field_count">8.1.3.85  <CODE>mysql_field_count()</CODE></A>.

</P>

<H4>8.1.3.173  Return Values</H4>

<P>
Zero if the query was successful. Non-zero if an error occurred.

</P>

<H4>8.1.3.174  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_real_connect" HREF="manual_toc.html#mysql_real_connect">8.1.3.175  <CODE>mysql_real_connect()</CODE></A></H4>

<P>
<A NAME="IDX1606"></A>

</P>
<P>
<CODE>MYSQL *mysql_real_connect(MYSQL *mysql, const char *host,
                 const char *user, const char *passwd, const char *db,
                 unsigned int port, const char *unix_socket,
                 unsigned int client_flag)</CODE>

</P>

<H4>8.1.3.176  Description</H4>

<P>
<CODE>mysql_real_connect()</CODE> attempts to establish a connection to a
MySQL database engine running on <CODE>host</CODE>.
<CODE>mysql_real_connect()</CODE> must complete successfully before you can execute
any of the other API functions, with the exception of
<CODE>mysql_get_client_info()</CODE>.

</P>
<P>
The parameters are specified as follows:

</P>

<UL>
<LI>

The first parameter should be the address of an existing <CODE>MYSQL</CODE>
structure.  Before calling <CODE>mysql_real_connect()</CODE> you must call
<CODE>mysql_init()</CODE> to initialise the <CODE>MYSQL</CODE> structure. You can
change a lot of connect options with the <CODE>mysql_options()</CODE>
call.  See section <A HREF="manual.html#mysql_options">8.1.3.163  <CODE>mysql_options()</CODE></A>.

<LI>

The value of <CODE>host</CODE> may be either a hostname or an IP address.  If
<CODE>host</CODE> is <CODE>NULL</CODE> or the string <CODE>"localhost"</CODE>, a connection to
the local host is assumed. If the OS supports sockets (Unix) or named pipes
(Windows), they are used instead of TCP/IP to connect to the server.

<LI>

The <CODE>user</CODE> parameter contains the user's MySQL login ID.  If
<CODE>user</CODE> is <CODE>NULL</CODE>, the current user is assumed.  Under Unix, this is
the current login name.  Under Windows ODBC, the current user name must be
specified explicitly.
See section <A HREF="manual.html#ODBC_administrator">8.2.2  How to Fill in the Various Fields in the ODBC Administrator Program</A>.

<LI>

The <CODE>passwd</CODE> parameter contains the password for <CODE>user</CODE>.  If
<CODE>passwd</CODE> is <CODE>NULL</CODE>, only entries in the <CODE>user</CODE> table for the
user that have a blank (empty) password field will be checked for a match. This
allows the database administrator to set up the MySQL privilege
system in such a way that users get different privileges depending on whether
or not they have specified a password.

Note: Do not attempt to encrypt the password before calling
<CODE>mysql_real_connect()</CODE>; password encryption is handled automatically by
the client API.

<LI>

<CODE>db</CODE> is the database name.
If <CODE>db</CODE> is not <CODE>NULL</CODE>, the connection will set the default
database to this value.

<LI>

If <CODE>port</CODE> is not 0, the value will be used as the port number
for the TCP/IP connection.  Note that the <CODE>host</CODE> parameter
determines the type of the connection.

<LI>

If <CODE>unix_socket</CODE> is not <CODE>NULL</CODE>, the string specifies the
socket or named pipe that should be used.  Note that the <CODE>host</CODE>
parameter determines the type of the connection.

<LI>

The value of <CODE>client_flag</CODE> is usually 0, but can be set to a combination
of the following flags in very special circumstances:

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Flag name</STRONG> </TD><TD> <STRONG>Flag description</STRONG>
</TD></TR>
<TR><TD><CODE>CLIENT_COMPRESS</CODE> </TD><TD> Use compression protocol.
</TD></TR>
<TR><TD><CODE>CLIENT_FOUND_ROWS</CODE> </TD><TD> Return the number of found (matched) rows, not the number of affected rows.
</TD></TR>
<TR><TD><CODE>CLIENT_IGNORE_SPACE</CODE> </TD><TD> Allow spaces after function names. Makes all functions names reserved words.
</TD></TR>
<TR><TD><CODE>CLIENT_INTERACTIVE</CODE> </TD><TD> Allow <CODE>interactive_timeout</CODE> seconds (instead of <CODE>wait_timeout</CODE> seconds) of inactivity before closing the connection.
</TD></TR>
<TR><TD><CODE>CLIENT_NO_SCHEMA</CODE> </TD><TD> Don't allow the <CODE>db_name.tbl_name.col_name</CODE> syntax.  This is for ODBC. It causes the parser to generate an error if you use that syntax, which is useful for trapping bugs in some ODBC programs.
</TD></TR>
<TR><TD><CODE>CLIENT_ODBC</CODE> </TD><TD> The client is an ODBC client. This changes <CODE>mysqld</CODE> to be more ODBC-friendly.
</TD></TR>
<TR><TD><CODE>CLIENT_SSL</CODE> </TD><TD> Use SSL (encrypted protocol).
</TD></TR>
</TABLE>
</UL>


<H4>8.1.3.177  Return Values</H4>

<P>
A <CODE>MYSQL*</CODE> connection handle if the connection was successful,
<CODE>NULL</CODE> if the connection was unsuccessful.  For a successful connection,
the return value is the same as the value of the first parameter.

</P>

<H4>8.1.3.178  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_CONN_HOST_ERROR</CODE>
<DD>
Failed to connect to the MySQL server.

<DT><CODE>CR_CONNECTION_ERROR</CODE>
<DD>
Failed to connect to the local MySQL server.

<DT><CODE>CR_IPSOCK_ERROR</CODE>
<DD>
Failed to create an IP socket.

<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.

<DT><CODE>CR_SOCKET_CREATE_ERROR</CODE>
<DD>
Failed to create a Unix socket.

<DT><CODE>CR_UNKNOWN_HOST</CODE>
<DD>
Failed to find the IP address for the hostname.

<DT><CODE>CR_VERSION_ERROR</CODE>
<DD>
A protocol mismatch resulted from attempting to connect to a server with a
client library that uses a different protocol version.  This can happen if you
use a very old client library to connect to a new server that wasn't started
with the <CODE>--old-protocol</CODE> option.

<DT><CODE>CR_NAMEDPIPEOPEN_ERROR</CODE>
<DD>
Failed to create a named pipe on Windows.

<DT><CODE>CR_NAMEDPIPEWAIT_ERROR</CODE>
<DD>
Failed to wait for a named pipe on Windows.

<DT><CODE>CR_NAMEDPIPESETSTATE_ERROR</CODE>
<DD>
Failed to get a pipe handler on Windows.

<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
If <CODE>connect_timeout</CODE> &#62; 0 and it took longer then <CODE>connect_timeout</CODE>
seconds to connect to the server or if the server died while executing the
<CODE>init-command</CODE>.

</DL>


<H4>8.1.3.179  Example</H4>


<PRE>
MYSQL mysql;

mysql_init(&#38;mysql);
mysql_options(&#38;mysql,MYSQL_READ_DEFAULT_GROUP,"your_prog_name");
if (!mysql_real_connect(&#38;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&#38;mysql));
}
</PRE>

<P>
By using <CODE>mysql_options()</CODE> the MySQL library will read the
<CODE>[client]</CODE> and <CODE>[your_prog_name]</CODE> sections in the <TT>`my.cnf'</TT>
file which will ensure that your program will work, even if someone has
set up MySQL in some non-standard way.

</P>
<P>
Note that upon connection, <CODE>mysql_real_connect()</CODE> sets the <CODE>reconnect</CODE>
flag (part of the <CODE>MYSQL</CODE> structure) to a value of <CODE>1</CODE>. This
flag indicates, in the event that a query cannot be performed because
of a lost connection, to try reconnecting to the server before giving up.

</P>



<H4><A NAME="mysql_real_escape_string" HREF="manual_toc.html#mysql_real_escape_string">8.1.3.180  <CODE>mysql_real_escape_string()</CODE></A></H4>

<P>
<A NAME="IDX1607"></A>

</P>
<P>
<CODE>unsigned long mysql_real_escape_string(MYSQL *mysql, char *to, const char *from, unsigned long length)</CODE>

</P>

<H4>8.1.3.181  Description</H4>

<P>
This function is used to create a legal SQL string that you can use in a
SQL statement. See section <A HREF="manual.html#String_syntax">6.1.1.1  Strings</A>.

</P>
<P>
The string in <CODE>from</CODE> is encoded to an escaped SQL string, taking
into account the current character set of the connection. The result is placed
in <CODE>to</CODE> and a terminating null byte is appended.  Characters
encoded are <CODE>NUL</CODE> (ASCII 0), <SAMP>`\n'</SAMP>, <SAMP>`\r'</SAMP>, <SAMP>`\'</SAMP>,
<SAMP>`''</SAMP>, <SAMP>`"'</SAMP>, and Control-Z (see section <A HREF="manual.html#Literals">6.1.1  Literals: How to Write Strings and Numbers</A>).
(Strictly speaking, MySQL requires only that backslash and the quote
character used to quote the string in the query be escaped.  This function
quotes the other characters to make them easier to read in log files.)

</P>
<P>
The string pointed to by <CODE>from</CODE> must be <CODE>length</CODE> bytes long.  You
must allocate the <CODE>to</CODE> buffer to be at least <CODE>length*2+1</CODE> bytes
long.  (In the worst case, each character may need to be encoded as using two
bytes, and you need room for the terminating null byte.)  When
<CODE>mysql_real_escape_string()</CODE> returns, the contents of <CODE>to</CODE> will be a
null-terminated string.  The return value is the length of the encoded
string, not including the terminating null character.

</P>

<H4>8.1.3.182  Example</H4>


<PRE>
char query[1000],*end;

end = strmov(query,"INSERT INTO test_table values(");
*end++ = '\'';
end += mysql_real_escape_string(&#38;mysql, end,"What's this",11);
*end++ = '\'';
*end++ = ',';
*end++ = '\'';
end += mysql_real_escape_string(&#38;mysql, end,"binary data: \0\r\n",16);
*end++ = '\'';
*end++ = ')';

if (mysql_real_query(&#38;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&#38;mysql));
}
</PRE>

<P>
The <CODE>strmov()</CODE> function used in the example is included in the
<CODE>mysqlclient</CODE> library and works like <CODE>strcpy()</CODE> but returns a
pointer to the terminating null of the first parameter.

</P>

<H4>8.1.3.183  Return Values</H4>

<P>
The length of the value placed into <CODE>to</CODE>, not including the
terminating null character.

</P>

<H4>8.1.3.184  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_real_query" HREF="manual_toc.html#mysql_real_query">8.1.3.185  <CODE>mysql_real_query()</CODE></A></H4>

<P>
<A NAME="IDX1608"></A>

</P>
<P>
<CODE>int mysql_real_query(MYSQL *mysql, const char *query, unsigned long length)</CODE>

</P>

<H4>8.1.3.186  Description</H4>

<P>
Executes the SQL query pointed to by <CODE>query</CODE>, which should be a string
<CODE>length</CODE> bytes long.  The query must consist of a single SQL statement.
You should not add a terminating semicolon (<SAMP>`;'</SAMP>) or <CODE>\g</CODE> to the
statement.

</P>
<P>
You <STRONG>must</STRONG> use <CODE>mysql_real_query()</CODE> rather than
<CODE>mysql_query()</CODE> for queries that contain binary data, because binary data
may contain the <SAMP>`\0'</SAMP> character.  In addition, <CODE>mysql_real_query()</CODE>
is faster than <CODE>mysql_query()</CODE> because it does not call <CODE>strlen()</CODE> on
the query string.

</P>
<P>
If you want to know if the query should return a result set or not, you can
use <CODE>mysql_field_count()</CODE> to check for this.
See section <A HREF="manual.html#mysql_field_count">8.1.3.85  <CODE>mysql_field_count()</CODE></A>.

</P>

<H4>8.1.3.187  Return Values</H4>

<P>
Zero if the query was successful. Non-zero if an error occurred.

</P>

<H4>8.1.3.188  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_reload" HREF="manual_toc.html#mysql_reload">8.1.3.189  <CODE>mysql_reload()</CODE></A></H4>

<P>
<A NAME="IDX1609"></A>

</P>
<P>
<CODE>int mysql_reload(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.190  Description</H4>

<P>
Asks the MySQL server to reload the grant tables. The
connected user must have the <CODE>RELOAD</CODE> privilege.

</P>
<P>
This function is deprecated.  It is preferable to use <CODE>mysql_query()</CODE>
to issue a SQL <CODE>FLUSH PRIVILEGES</CODE> statement instead.

</P>

<H4>8.1.3.191  Return Values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>8.1.3.192  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_row_seek" HREF="manual_toc.html#mysql_row_seek">8.1.3.193  <CODE>mysql_row_seek()</CODE></A></H4>

<P>
<A NAME="IDX1610"></A>

</P>
<P>
<CODE>MYSQL_ROW_OFFSET mysql_row_seek(MYSQL_RES *result, MYSQL_ROW_OFFSET offset)</CODE>

</P>

<H4>8.1.3.194  Description</H4>
<P>
Sets the row cursor to an arbitrary row in a query result set.  This requires
that the result set structure contains the entire result of the query, so
<CODE>mysql_row_seek()</CODE> may be used in conjunction only with
<CODE>mysql_store_result()</CODE>, not with <CODE>mysql_use_result()</CODE>.

</P>
<P>
The offset should be a value returned from a call to <CODE>mysql_row_tell()</CODE>
or to <CODE>mysql_row_seek()</CODE>.  This value is not simply a row number; if you
want to seek to a row within a result set using a row number, use
<CODE>mysql_data_seek()</CODE> instead.

</P>

<H4>8.1.3.195  Return Values</H4>

<P>
The previous value of the row cursor.  This value may be passed to a
subsequent call to <CODE>mysql_row_seek()</CODE>.

</P>

<H4>8.1.3.196  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_row_tell" HREF="manual_toc.html#mysql_row_tell">8.1.3.197  <CODE>mysql_row_tell()</CODE></A></H4>

<P>
<A NAME="IDX1611"></A>

</P>
<P>
<CODE>MYSQL_ROW_OFFSET mysql_row_tell(MYSQL_RES *result)</CODE>

</P>

<H4>8.1.3.198  Description</H4>

<P>
Returns the current position of the row cursor for the last
<CODE>mysql_fetch_row()</CODE>. This value can be used as an argument to
<CODE>mysql_row_seek()</CODE>.

</P>
<P>
You should use <CODE>mysql_row_tell()</CODE> only after <CODE>mysql_store_result()</CODE>,
not after <CODE>mysql_use_result()</CODE>.

</P>

<H4>8.1.3.199  Return Values</H4>

<P>
The current offset of the row cursor.

</P>

<H4>8.1.3.200  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_select_db" HREF="manual_toc.html#mysql_select_db">8.1.3.201  <CODE>mysql_select_db()</CODE></A></H4>

<P>
<A NAME="IDX1612"></A>

</P>
<P>
<CODE>int mysql_select_db(MYSQL *mysql, const char *db)</CODE>

</P>

<H4>8.1.3.202  Description</H4>

<P>
Causes the database specified by <CODE>db</CODE> to become the default (current)
database on the connection specified by <CODE>mysql</CODE>.  In subsequent queries,
this database is the default for table references that do not include an
explicit database specifier.

</P>
<P>
<CODE>mysql_select_db()</CODE> fails unless the connected user can be authenticated
as having permission to use the database.

</P>

<H4>8.1.3.203  Return Values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>8.1.3.204  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_shutdown" HREF="manual_toc.html#mysql_shutdown">8.1.3.205  <CODE>mysql_shutdown()</CODE></A></H4>

<P>
<A NAME="IDX1613"></A>

</P>
<P>
<CODE>int mysql_shutdown(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.206  Description</H4>

<P>
Asks the database server to shut down. The connected user must have
<CODE>SHUTDOWN</CODE> privileges.

</P>

<H4>8.1.3.207  Return Values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>8.1.3.208  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_stat" HREF="manual_toc.html#mysql_stat">8.1.3.209  <CODE>mysql_stat()</CODE></A></H4>

<P>
<A NAME="IDX1614"></A>

</P>
<P>
<CODE>char *mysql_stat(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.210  Description</H4>

<P>
Returns a character string containing information similar to that provided by
the <CODE>mysqladmin status</CODE> command.  This includes uptime in seconds and
the number of running threads, questions, reloads, and open tables.

</P>

<H4>8.1.3.211  Return Values</H4>

<P>
A character string describing the server status. <CODE>NULL</CODE> if an
error occurred.

</P>

<H4>8.1.3.212  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_store_result" HREF="manual_toc.html#mysql_store_result">8.1.3.213  <CODE>mysql_store_result()</CODE></A></H4>

<P>
<A NAME="IDX1615"></A>

</P>
<P>
<CODE>MYSQL_RES *mysql_store_result(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.214  Description</H4>

<P>
You must call <CODE>mysql_store_result()</CODE> or <CODE>mysql_use_result()</CODE>
for every query that successfully retrieves data (<CODE>SELECT</CODE>,
<CODE>SHOW</CODE>, <CODE>DESCRIBE</CODE>, <CODE>EXPLAIN</CODE>).

</P>
<P>
You don't have to call <CODE>mysql_store_result()</CODE> or
<CODE>mysql_use_result()</CODE> for other queries, but it will not do any
harm or cause any notable performance if you call <CODE>mysql_store_result()</CODE>
in all cases.  You can detect if the query didn't have a result set by
checking if <CODE>mysql_store_result()</CODE> returns 0 (more about this later one).

</P>
<P>
If you want to know if the query should return a result set or not, you can
use <CODE>mysql_field_count()</CODE> to check for this.
See section <A HREF="manual.html#mysql_field_count">8.1.3.85  <CODE>mysql_field_count()</CODE></A>.

</P>
<P>
<CODE>mysql_store_result()</CODE> reads the entire result of a query to the client,
allocates a <CODE>MYSQL_RES</CODE> structure, and places the result into this
structure.

</P>
<P>
<CODE>mysql_store_result()</CODE> returns a null pointer if the query didn't return
a result set (if the query was, for example, an <CODE>INSERT</CODE> statement).

</P>
<P>
<CODE>mysql_store_result()</CODE> also returns a null pointer if reading of the
result set failed. You can check if you got an error by checking if
<CODE>mysql_error()</CODE> doesn't return a null pointer, if
<CODE>mysql_errno()</CODE> returns &#60;&#62; 0, or if <CODE>mysql_field_count()</CODE>
returns &#60;&#62; 0.

</P>
<P>
An empty result set is returned if there are no rows returned.  (An empty
result set differs from a null pointer as a return value.)

</P>
<P>
Once you have called <CODE>mysql_store_result()</CODE> and got a result back
that isn't a null pointer, you may call <CODE>mysql_num_rows()</CODE> to find
out how many rows are in the result set.

</P>
<P>
You can call <CODE>mysql_fetch_row()</CODE> to fetch rows from the result set,
or <CODE>mysql_row_seek()</CODE> and <CODE>mysql_row_tell()</CODE> to obtain or
set the current row position within the result set.

</P>
<P>
You must call <CODE>mysql_free_result()</CODE> once you are done with the result
set.

</P>
<P>
See section <A HREF="manual.html#NULL_mysql_store_result">8.1.12.1  Why Is It that After <CODE>mysql_query()</CODE> Returns Success, <CODE>mysql_store_result()</CODE> Sometimes Returns <CODE>NULL</CODE>?</A>.

</P>

<H4>8.1.3.215  Return Values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result structure with the results. <CODE>NULL</CODE> if
an error occurred.

</P>

<H4>8.1.3.216  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_thread_id" HREF="manual_toc.html#mysql_thread_id">8.1.3.217  <CODE>mysql_thread_id()</CODE></A></H4>

<P>
<A NAME="IDX1616"></A>

</P>
<P>
<CODE>unsigned long mysql_thread_id(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.218  Description</H4>

<P>
Returns the thread ID of the current connection.  This value can be used as
an argument to <CODE>mysql_kill()</CODE> to kill the thread.

</P>
<P>
If the connection is lost and you reconnect with <CODE>mysql_ping()</CODE>, the
thread ID will change.  This means you should not get the thread ID and store
it for later. You should get it when you need it.

</P>

<H4>8.1.3.219  Return Values</H4>

<P>
The thread ID of the current connection.

</P>

<H4>8.1.3.220  Errors</H4>
<P>
None.

</P>



<H4><A NAME="mysql_use_result" HREF="manual_toc.html#mysql_use_result">8.1.3.221  <CODE>mysql_use_result()</CODE></A></H4>

<P>
<A NAME="IDX1617"></A>

</P>
<P>
<CODE>MYSQL_RES *mysql_use_result(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.222  Description</H4>

<P>
You must call <CODE>mysql_store_result()</CODE> or <CODE>mysql_use_result()</CODE> for
every query that successfully retrieves data (<CODE>SELECT</CODE>, <CODE>SHOW</CODE>,
<CODE>DESCRIBE</CODE>, <CODE>EXPLAIN</CODE>).

</P>
<P>
<CODE>mysql_use_result()</CODE> initiates a result set retrieval but does not
actually read the result set into the client like <CODE>mysql_store_result()</CODE>
does.  Instead, each row must be retrieved individually by making calls to
<CODE>mysql_fetch_row()</CODE>.  This reads the result of a query directly from the
server without storing it in a temporary table or local buffer, which is
somewhat faster and uses much less memory than <CODE>mysql_store_result()</CODE>.
The client will only allocate memory for the current row and a communication
buffer that may grow up to <CODE>max_allowed_packet</CODE> bytes.

</P>
<P>
On the other hand, you shouldn't use <CODE>mysql_use_result()</CODE> if you are
doing a lot of processing for each row on the client side, or if the output
is sent to a screen on which the user may type a <CODE>^S</CODE> (stop scroll).
This will tie up the server and prevent other threads from updating any
tables from which the data is being fetched.

</P>
<P>
When using <CODE>mysql_use_result()</CODE>, you must execute
<CODE>mysql_fetch_row()</CODE> until a <CODE>NULL</CODE> value is returned, otherwise, the
unfetched rows will be returned as part of the result set for your next
query. The C API will give the error <CODE>Commands out of sync; you can't
run this command now</CODE> if you forget to do this!

</P>
<P>
You may not use <CODE>mysql_data_seek()</CODE>, <CODE>mysql_row_seek()</CODE>,
<CODE>mysql_row_tell()</CODE>, <CODE>mysql_num_rows()</CODE>, or
<CODE>mysql_affected_rows()</CODE> with a result returned from
<CODE>mysql_use_result()</CODE>, nor may you issue other queries until the
<CODE>mysql_use_result()</CODE> has finished.  (However, after you have fetched all
the rows, <CODE>mysql_num_rows()</CODE> will accurately return the number of rows
fetched.)

</P>
<P>
You must call <CODE>mysql_free_result()</CODE> once you are done with the result
set.

</P>

<H4>8.1.3.223  Return Values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result structure. <CODE>NULL</CODE> if an error occurred.

</P>

<H4>8.1.3.224  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H4><A NAME="mysql_commit" HREF="manual_toc.html#mysql_commit">8.1.3.225  <CODE>mysql_commit()</CODE></A></H4>

<P>
<A NAME="IDX1618"></A>

</P>
<P>
<CODE>my_bool mysql_commit(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.226  Description</H4>

<P>
Commits the current transaction.
Available from MySQL 4.1

</P>

<H4>8.1.3.227  Return Values</H4>

<P>
Zero if successful. Non-zero if an error occured.

</P>

<H4>8.1.3.228  Errors</H4>

<P>
None

</P>



<H4><A NAME="mysql_rollback" HREF="manual_toc.html#mysql_rollback">8.1.3.229  <CODE>mysql_rollback()</CODE></A></H4>

<P>
<A NAME="IDX1619"></A>

</P>
<P>
<CODE>my_bool mysql_rollback(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.230  Description</H4>

<P>
Rollbacks the current transaction.
Available from MySQL 4.1

</P>

<H4>8.1.3.231  Return Values</H4>

<P>
Zero if successful. Non-zero if an error occured.

</P>

<H4>8.1.3.232  Errors</H4>

<P>
None.

</P>



<H4><A NAME="mysql_autocommit" HREF="manual_toc.html#mysql_autocommit">8.1.3.233  <CODE>mysql_autocommit()</CODE></A></H4>

<P>
<A NAME="IDX1620"></A>

</P>
<P>
<CODE>my_bool mysql_autocommit(MYSQL *mysql, my_bool mode)</CODE>

</P>

<H4>8.1.3.234  Description</H4>

<P>
Sets autocommit mode on/off.
If the <CODE>mode</CODE> is 1, set autocommit mode to on; in case of 0, set to off.
Available from MySQL 4.1

</P>

<H4>8.1.3.235  Return Values</H4>

<P>
Zero if successful. Non-zero if an error occured

</P>

<H4>8.1.3.236  Errors</H4>

<P>
None.

</P>



<H4><A NAME="mysql_more_results" HREF="manual_toc.html#mysql_more_results">8.1.3.237  <CODE>mysql_more_results()</CODE></A></H4>

<P>
<A NAME="IDX1621"></A>

</P>
<P>
<CODE>my_bool mysql_more_results(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.238  Description</H4>

<P>
Returns true if more results exists from the currently executed query,
and the application must call <CODE>mysql_next_result()</CODE> to fetch the
results.
Available from MySQL 4.1

</P>

<H4>8.1.3.239  Return Values</H4>

<P>
<CODE>TRUE</CODE> if more results exists. <CODE>FALSE</CODE> if no more results exists.

</P>

<H4>8.1.3.240  Errors</H4>

<P>
None.

</P>



<H4><A NAME="mysql_next_result" HREF="manual_toc.html#mysql_next_result">8.1.3.241  <CODE>mysql_next_result()</CODE></A></H4>

<P>
<A NAME="IDX1622"></A>

</P>
<P>
<CODE>int mysql_next_result(MYSQL *mysql)</CODE>

</P>

<H4>8.1.3.242  Description</H4>

<P>
If more query results exists, then <CODE>mysql_next_result()</CODE> reads the
next query results and returns the status back to application.
Available from MySQL 4.1

</P>

<H4>8.1.3.243  Return Values</H4>

<P>
Zero if successful. Non-zero if an error occured

</P>

<H4>8.1.3.244  Errors</H4>

<P>
None.

</P>



<H3><A NAME="C_API_Prepared_statements" HREF="manual_toc.html#C_API_Prepared_statements">8.1.4  C API Prepared Statements</A></H3>

<P>
From MySQL 4.1, you can also make use of the prepared statements using
the statement handler 'MYSQL_STMT', which supports multiple query
executions along with input and output binding.

</P>
<P>
Prepared execution is an efficient way to execute a statement more than
once. The statement is first parsed, or prepared. This is executed one
or more times at a later time using the statement handle that is
returned during the prepare.

</P>
<P>
Another advantage of prepared statements is that it uses a binary protocol
which makes the data tranfer between client and server in a more efficient
way than the old MySQL protocol.

</P>
<P>
Prepared execution is faster than direct execution for statements
executed more than once, primarly becuase the query is parsed only
once; In the case of direct execution, the query is parsed every
time. Prepared execution also can provide a reduction in the network
traffic becuase during the execute call, it only sends the data for the
parameters.

</P>



<H3><A NAME="C_API_Prepared_statement_datatypes" HREF="manual_toc.html#C_API_Prepared_statement_datatypes">8.1.5  C API Prepared Statements DataTypes</A></H3>

<P>
Prepared statements mainly uses the following two <CODE>MYSQL_STMT</CODE> and
<CODE>MYSQL_BIND</CODE> structures:

</P>
<DL COMPACT>

<DT><CODE>MYSQL_STMT</CODE>
<DD>
<A NAME="IDX1623"></A>
 
This structure represents a statement handle to prepared statements.It
is used for all statement related functions. 

The statement is initialized when the query is prepared using 
<CODE>mysql_prepare()</CODE>.

One connection can have 'n' statement handles, and the limit depends up on
the system resources.

<A NAME="IDX1624"></A>
<DT><CODE>MYSQL_BIND</CODE>
<DD>
This structure is used in order to bind parameter
buffers(<CODE>mysql_bind_param()</CODE>) inorder to the parameters data to
<CODE>mysql_execute()</CODE> call; as well as to  bind row
buffers(<CODE>mysql_bind_result()</CODE>) to fetch the result set data using
<CODE>mysql_fetch()</CODE>.

The <CODE>MYSQL_BIND</CODE> structure contains the members listed here:

<DL COMPACT>

<DT><CODE>enum enum_field_types buffer_type [input]</CODE>
<DD>
The type of the buffer. The <CODE>type</CODE> value must be one of the following:

<UL>
<LI><CODE>MYSQL_TYPE_TINY</CODE>

<LI><CODE>MYSQL_TYPE_SHORT</CODE>

<LI><CODE>MYSQL_TYPE_LONG</CODE>

<LI><CODE>MYSQL_TYPE_LONGLONG</CODE>

<LI><CODE>MYSQL_TYPE_FLOAT</CODE>

<LI><CODE>MYSQL_TYPE_DOUBLE</CODE>

<LI><CODE>MYSQL_TYPE_TIME</CODE>

<LI><CODE>MYSQL_TYPE_DATE</CODE>

<LI><CODE>MYSQL_TYPE_DATETIME</CODE>

<LI><CODE>MYSQL_TYPE_TIMESTAMP</CODE>

<LI><CODE>MYSQL_TYPE_STRING</CODE>

<LI><CODE>MYSQL_TYPE_VAR_STRING</CODE>

<LI><CODE>MYSQL_TYPE_TINY_BLOB</CODE>

<LI><CODE>MYSQL_TYPE_MEDIUM_BLOB</CODE>

<LI><CODE>MYSQL_TYPE_LONG_BLOB</CODE>

<LI><CODE>MYSQL_TYPE_BLOB</CODE>

</UL>

<DT><CODE>void *buffer [input/output]</CODE>
<DD>
A pointer to a buffer for the parameters data in case if it is used to
supply parameters data or pointer to a buffer in which to return the
data when the structure is used for result set bind.

<DT><CODE>unsigned long buffer_length [input]</CODE>
<DD>
Length of the <CODE>*buffer</CODE> in bytes. For character and binary C data,
the buffer_length specifies the length of the <CODE>*buffer</CODE> to be used
as a parameter data in case if it is used with <CODE>mysql_bind_param()</CODE>
or to return that many bytes when fetching results when this is used
with <CODE>mysql_bind_result()</CODE>.

<DT><CODE>long *length [input/output]</CODE>
<DD>
Pointer to the buffer for the parameter's length. When the structure is
used as a input parameter data binding, then this argument points to a
buffer that, when <CODE>mysql_execute()</CODE> is called, contains the length
of the parameter value stored in *buffer. This is ignored except for
character or binary C data.

If the length is a null pointer, then the protocol assumes that all
character and binary data are null terminated.

When this structure is used in output binding, then <CODE>mysql_fetch()</CODE>
return the the length of the data that is returned.

<DT><CODE>bool *is_null [input/output]</CODE>
<DD>
Indicates if the parameter data is NULL or fetched data is NULL.
</DL>

<A NAME="IDX1625"></A>
<DT><CODE>MYSQL_TIME</CODE>
<DD>
This structure is used to send and receive DATE, TIME and
TIMESTAMP data directly to/from server.

The <CODE>MYSQL_TIME</CODE> structure contains the members listed here:

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Member</STRONG> </TD><TD> <STRONG>Type</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>year</CODE> </TD><TD> unsigned int </TD><TD> Year.
</TD></TR>
<TR><TD><CODE>month</CODE> </TD><TD> unsigned int </TD><TD> Month of the year.
</TD></TR>
<TR><TD><CODE>day</CODE> </TD><TD> unsigned int </TD><TD> Day of the month.
</TD></TR>
<TR><TD><CODE>hour</CODE> </TD><TD> unsigned int </TD><TD> Hour of the day(TIME).
</TD></TR>
<TR><TD><CODE>minute</CODE> </TD><TD> unsigned int </TD><TD> Minute of the hour.
</TD></TR>
<TR><TD><CODE>second</CODE> </TD><TD> unsigned int </TD><TD> Second of the minute.
</TD></TR>
<TR><TD><CODE>neg</CODE> </TD><TD> my_bool </TD><TD> A boolean flag to indicate if the time is negative.
</TD></TR>
<TR><TD><CODE>second_part</CODE> </TD><TD> unsigned long </TD><TD> Fraction part of the second(not yet used)
</TD></TR>
</TABLE>
</DL>



<H3><A NAME="C_API_Prepared_statements_function_overview" HREF="manual_toc.html#C_API_Prepared_statements_function_overview">8.1.6  C API Prepared Statements Function Overview</A></H3>

<P>
<A NAME="IDX1626"></A>
<A NAME="IDX1627"></A>

</P>
<P>
The functions available in the prepared statements are listed here and
are described in greater detail in the later section.
See section <A HREF="manual.html#C_API_Prepared_statement_functions">8.1.7  C API Prepared Statement Function Descriptions</A>.

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Function</STRONG> </TD><TD> <STRONG>Description</STRONG>

</TD></TR>
<TR><TD><STRONG>mysql_prepare()</STRONG> </TD><TD>
Prepares an SQL string for execution.

</TD></TR>
<TR><TD><STRONG>mysql_param_count()</STRONG> </TD><TD>
Returns the number of parameters in a prepared SQL statement.

</TD></TR>
<TR><TD><STRONG>mysql_prepare_result()</STRONG> </TD><TD>
Returns prepared statement meta information in the form of resultset.

</TD></TR>
<TR><TD><STRONG>mysql_bind_param()</STRONG> </TD><TD>
Binds a buffer to parameter markers in a prepared SQL statement.

</TD></TR>
<TR><TD><STRONG>mysql_execute()</STRONG> </TD><TD>
Executes the prepared statement.

</TD></TR>
<TR><TD><STRONG>mysql_stmt_affected_rows()</STRONG> </TD><TD>
Returns the number of rows changes/deleted/inserted by the last UPDATE, DELETE, or INSERT query.

</TD></TR>
<TR><TD><STRONG>mysql_bind_result()</STRONG> </TD><TD>
Binds application data buffers to columns in the resultset.

</TD></TR>
<TR><TD><STRONG>mysql_stmt_store_result()</STRONG> </TD><TD>
Retrieves the complete result set to the client.

</TD></TR>
<TR><TD><STRONG>mysql_fetch()</STRONG> </TD><TD>
Fetches the next rowset of data from the result set and returns data for all bound columns.

</TD></TR>
<TR><TD><STRONG>mysql_stmt_close()</STRONG> </TD><TD>
Frees memory used by prepared statement.

</TD></TR>
<TR><TD><STRONG>mysql_stmt_errno()</STRONG> </TD><TD>
Returns the error number for the last statement execution.

</TD></TR>
<TR><TD><STRONG>mysql_stmt_error()</STRONG> </TD><TD>
Returns the error message for the last statement execution.

</TD></TR>
<TR><TD><STRONG>mysql_send_long_data()</STRONG> </TD><TD>
Sends long data in chunks to server.
</TD></TR>
</TABLE>

<P>
Call <CODE>mysql_prepare()</CODE> to prepare and initialize the statement
handle, then call <CODE>mysql_bind_param()</CODE> to supply the parameters
data, and then call <CODE>mysql_execute()</CODE> to execute the query. You can
repeat the <CODE>mysql_execute()</CODE> by changing parameter values from the
respective buffer supplied through <CODE>mysql_bind_param()</CODE>.

</P>
<P>
In case if the query is a SELECT statement or any other query which
results in a resultset, then mysql_prepare() will also return the result
set meta data information in the form of <CODE>MYSQL_RES </CODE> result set 
through <CODE>mysql_prepare_result()</CODE>.

</P>
<P>
You can supply the result buffers using <CODE>mysql_bind_result()</CODE>, so
that the <CODE>mysql_fetch()</CODE> will automatically returns data to this
buffers. This is row by row fetching.

</P>
<P>
You can also send the text or binary data in chunks to server using
<CODE>mysql_send_long_data()</CODE>, by specifying the option is_long_data=1
or length=MYSQL_LONG_DATA or -2 in the MYSQL_BIND structure supplied 
with <CODE>mysql_bind_param()</CODE>.

</P>
<P>
Once the statement execution is over, it must be freed using
<CODE>mysql_stmt_close</CODE> so that it frees all the alloced resources for
the statement handle.

</P>

<H4>8.1.6.1  Execution Steps:</H4>

<P>
To prepare and execute a statement, the application:

</P>

<UL>
<LI>

Calls <STRONG>mysql_prepare()</STRONG> and passes it a string containing the SQL
statement. On a successful prepare, mysql_prepare returns the valid statement
handle back to the application
<LI>

If the query results in a resultset, then <STRONG>mysql_prepare_result</STRONG>
returns the result set meta info..
<LI>

Sets the values of any parameters using <STRONG>mysql_bind_param</STRONG>. All
parameters must be set; else it will return an error or produce
un-expected results
<LI>

Calls <STRONG>mysql_execute()</STRONG> to execute the statement.
<LI>

Repeat steps 2 and 3 as necessary, by changing the parameter values and
re-executing the statement.
<LI>

Bind the data buffers to return the row values, if it is a result set
query; using <STRONG>mysql_bind_result()</STRONG>.
<LI>

Fetch the data to buffers row by row by calling <STRONG>mysql_fetch()</STRONG>
repetedely until no more rows found.
<LI>

When <STRONG>mysql_prepare()</STRONG> is called, in the MySQL client/server protocol:

<UL>
<LI>

Server parses the query and sends the ok status back to client by
assinging a statement id. It also sends total number of parameters,
columns count and its meta information if it is a result set oriented
query. All syntax and symantecs of the query is checked during this call
by the server.
<LI>

Client uses this statement id for the further executions, so that server
identifies the statement back from the pool of statements. Now, client
allocates a statement handle with this id and returns back to
application.
</UL>

<LI>

When <STRONG>mysql_execute()</STRONG> is called, in the MySQL client/server protocol:

<UL>
<LI>

Client uses the statement handle and sends the parameters data to
server.
<LI>

Server identifies the statement using the id provided by the client, and
replaces the parameter markers with the newly supplied data and executes
the query. If it results in a result set, then sends the data back to
client, else sends an OK status with total number of rows
changes/deleted/inserted.
</UL>

<LI>

When <STRONG>mysql_fetch()</STRONG> is called, in the MySQL client/server protocol:

<UL>
<LI>

Client reads the data from the packet row by row and places it to
application data buffers by doing the necessary conversions. If the
application buffer type is same as that of field type, then the
conversions are stright forward.
</UL>

</UL>

<P>
You can get the statement error code and message using
<CODE>mysql_stmt_errno()</CODE> and <CODE>mysql_stmt_error()</CODE> respectively.

</P>



<H3><A NAME="C_API_Prepared_statement_functions" HREF="manual_toc.html#C_API_Prepared_statement_functions">8.1.7  C API Prepared Statement Function Descriptions</A></H3>

<P>
You need to use the following functions when you want to prepare and
execute the queries.

</P>



<H4><A NAME="mysql_prepare" HREF="manual_toc.html#mysql_prepare">8.1.7.1  <CODE>mysql_prepare()</CODE></A></H4>

<P>
<A NAME="IDX1628"></A>

</P>
<P>
<CODE>MYSQL_STMT * mysql_prepare(MYSQL *mysql, const char *query, unsigned
long length)</CODE>

</P>

<H4>8.1.7.2  Description</H4>

<P>
Prepares the SQL query pointed to by the null-terminated string
'query'. The query must consist of a single SQL statement. You should
not add a terminating semicolon (`;`) or \g to the statement.

</P>
<P>
The application can include one or more parameter markers in the SQL
statement. To include a parameter marker, the appication embeds a
question mark (<CODE>?</CODE>) into the SQL string at the appropriate
position. 

</P>
<P>
The markers are legal only in certain places in SQL statements. For
example, they are not allowed in the select list(the list of columns to
be returned by a SELECT statement), nor are they allowed as both
operands of a binary operator such as the equal sign (=), becuase it
would be impossible to determine the parameter type. In general,
parameters are legal only in Data Manipulation Languange(DML)
statements, and not in Data Defination Language(DDL) statements.

</P>
<P>
The parameter markers are then bound to application variables using
<CODE>mysql_bind_param()</CODE>.

</P>


<H4>8.1.7.3  Return Values</H4>

<P>
<CODE>MYSQL_STMT</CODE> if the prepare was successful. NULL if an error
occured.

</P>

<H4>8.1.7.4  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unkown error occured
</DL>

<P>
If the prepare is not successful, i.e. when <CODE>mysql_prepare()</CODE> returned a
NULL statement, errors can be obtained by calling <CODE>mysql_error()</CODE>. 

</P>


<H4>8.1.7.5  Example</H4>

<P>
For the usage of <CODE>mysql_prepare()</CODE> refer to the Example from
section <A HREF="manual.html#mysql_execute">8.1.7.21  <CODE>mysql_execute()</CODE></A>.

</P>



<H4><A NAME="mysql_param_count" HREF="manual_toc.html#mysql_param_count">8.1.7.6  <CODE>mysql_param_count()</CODE></A></H4>

<P>
<A NAME="IDX1629"></A>

</P>
<P>
<CODE>unsigned int mysql_param_count(MYSQL_STMT *stmt)</CODE>

</P>

<H4>8.1.7.7  Description</H4>

<P>
Returns the number of parameter markers present from the prepared query.

</P>

<H4>8.1.7.8  Return Values</H4>

<P>
An unsigned integer representing the number of parameters in a
statement.

</P>

<H4>8.1.7.9  Errors</H4>

<P>
None

</P>

<H4>8.1.7.10  Example</H4>

<P>
For the usage of <CODE>mysql_param_count()</CODE> refer to the Example from
section <A HREF="manual.html#mysql_execute">8.1.7.21  <CODE>mysql_execute()</CODE></A>.

</P>



<H4><A NAME="mysql_prepare_result" HREF="manual_toc.html#mysql_prepare_result">8.1.7.11  <CODE>mysql_prepare_result()</CODE></A></H4>

<P>
<A NAME="IDX1630"></A>

</P>
<P>
<CODE>MYSQL_RES *mysql_prepare_result(MYSQL_STMT *stmt)</CODE>

</P>

<H4>8.1.7.12  Description</H4>

<P>
If the <CODE>mysql_prepare()</CODE> resulted in a result set query, then
<CODE>mysql_prepare_result()</CODE> returns the result set meta data in the form of
<CODE>MYSQL_RES</CODE> structure; which can further be used to process the
meta information such as total number of fields and individual field
information. This resulted result set can be passed as an argument to
any of the field based APIs in order to process the result set meta data 
information such as:

</P>

<UL>
<LI>mysql_num_fields()

<LI>mysql_fetch_field()

<LI>mysql_fetch_field_direct()

<LI>mysql_fetch_fields()

<LI>mysql_field_count()

<LI>mysql_field_seek()

<LI>mysql_field_tell() and

<LI>mysql_free_result()

</UL>


<H4>8.1.7.13  Return Values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result structure. NULL if no meta information exists from
the prepared query.

</P>


<H4>8.1.7.14  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occured
</DL>


<H4>8.1.7.15  Example</H4>

<P>
For the usage of <CODE>mysql_prepare_result()</CODE> refer to the Example from
section <A HREF="manual.html#mysql_fetch">8.1.7.40  <CODE>mysql_fetch()</CODE></A>

</P>



<H4><A NAME="mysql_bind_param" HREF="manual_toc.html#mysql_bind_param">8.1.7.16  <CODE>mysql_bind_param()</CODE></A></H4>

<P>
<A NAME="IDX1631"></A>

</P>
<P>
<CODE>int mysql_bind_param(MYSQL_STMT *stmt, MYSQL_BIND *bind)</CODE>

</P>

<H4>8.1.7.17  Description</H4>

<P>
<CODE>mysql_bind_param</CODE> is used to bind data for the parameter markers
in the SQL statement from <CODE>mysql_prepare</CODE>. It uses the structure
MYSQL_BIND to supply the data.
 
The supported buffer types are:

</P>

<UL>
<LI>

MYSQL_TYPE_TINY
<LI>

MYSQL_TYPE_SHORT
<LI>

MYSQL_TYPE_LONG
<LI>

MYSQL_TYPE_LONGLONG
<LI>

MYSQL_TYPE_FLOAT
<LI>

MYSQL_TYPE_DOUBLE
<LI>

MYSQL_TYPE_TIME
<LI>

MYSQL_TYPE_DATE
<LI>

MYSQL_TYPE_DATETIME
<LI>

MYSQL_TYPE_TIMESTAMP
<LI>

MYSQL_TYPE_STRING
<LI>

MYSQL_TYPE_VAR_STRING
<LI>

MYSQL_TYPE_TINY_BLOB
<LI>

MYSQL_TYPE_MEDIUM_BLOB
<LI>

MYSQL_TYPE_LONG_BLOB
</UL>


<H4>8.1.7.18  Return Values</H4>

<P>
Zero if the bind was successful. Non-zero if an error occured.

</P>

<H4>8.1.7.19  Errors</H4>
<DL COMPACT>

<DT><CODE>CR_NO_PREPARE_STMT</CODE>
<DD>
No prepared statement exists
<DT><CODE>CR_NO_PARAMETERS_EXISTS</CODE>
<DD>
No parameters exists to bind
<DT><CODE>CR_INVALID_BUFFER_USE</CODE>
<DD>
Indicates if the bind is to supply the long data in chunks and if the
buffer type is non string or binary
<DT><CODE>CR_UNSUPPORTED_PARAM_TYPE</CODE>
<DD>
The conversion is not supported, possibly the buffer_type is illegal or
its not from the above list of supported types.
<DT><CODE>CR_OUT_OF_MEMOR</CODE>
<DD>
Out of memory
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occured
</DL>


<H4>8.1.7.20  Example</H4>

<P>
For the usage of <CODE>mysql_bind_param()</CODE> refer to the Example from
section <A HREF="manual.html#mysql_execute">8.1.7.21  <CODE>mysql_execute()</CODE></A>.

</P>



<H4><A NAME="mysql_execute" HREF="manual_toc.html#mysql_execute">8.1.7.21  <CODE>mysql_execute()</CODE></A></H4>

<P>
<A NAME="IDX1632"></A>

</P>
<P>
<CODE>int mysql_execute(MYSQL_STMT *stmt</CODE>.

</P>

<H4>8.1.7.22  Description</H4>

<P>
<CODE>mysql_execute()</CODE> executes the prepared query associated with the
statement handle. The parameter marker values will be sent to server
during this call, so that server replaces markers with this newly
supplied data.

</P>
<P>
If the statement is UPDATE,DELETE,or INSERT, the total number of
changed/deletd/inserted values can be found by calling
<CODE>mysql_stmt_affected_rows</CODE>. If this is a result set query, then one
must call <CODE>mysql_fetch()</CODE> to fetch the data prior to calling any
other calls which results in query processing. For more information on
how to fetch the statement binary data, refer to section <A HREF="manual.html#mysql_fetch">8.1.7.40  <CODE>mysql_fetch()</CODE></A>.
 


<P><STRONG>8.1.7.23  Return Values</STRONG></P>

</P>
<P>
<CODE>mysql_execute()</CODE> returns the following return values:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Return Value</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD>0 </TD><TD> Successful
</TD></TR>
<TR><TD>1 </TD><TD> Error occured. Error code and
message can be obtained by calling <CODE>mysql_stmt_errno()</CODE> and <CODE>mysql_stmt_error()</CODE>.
</TD></TR>
</TABLE>


<H4>8.1.7.24  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_NO_PREPARE_QUERY</CODE>
<DD>
No query prepared prior to execution
<DT><CODE>CR_ALL_PARAMS_NOT_BOUND</CODE>
<DD>
Not all parameters data is supplied
<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order. 
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory. 
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away. 
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query. 
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred. 
</DL>


<H4>8.1.7.25  Example</H4>

<P>
The following example explains the uasage of <CODE>mysql_prepare</CODE>,
<CODE>mysql_param_count</CODE>, <CODE>mysql_bind_param</CODE>, <CODE>mysql_execute</CODE>
and <CODE>mysql_stmt_affected_rows()</CODE>.

</P>

<PRE>

MYSQL_BIND   bind[3];
MYSQL_STMT   *stmt;
ulonglong    affected_rows;
long         length;
unsigned int param_count;
int          int_data;
short        small_data;
char         str_data[50], query[255];
my_bool      is_null;

  /* Set autocommit mode to true */
  mysql_autocommit(mysql, 1);
  
  if (mysql_query(mysql,"DROP TABLE IF EXISTS test_table"))
  {
    fprintf(stderr, "\n drop table failed");
    fprintf(stderr, "\n %s", mysql_error(mysql));
    exit(0);
  }
  if (mysql_query(mysql,"CREATE TABLE test_table(col1 int, col2 varchar(50), \
                                                 col3 smallint,\
                                                 col4 timestamp(14))"))
  {
    fprintf(stderr, "\n create table failed");
    fprintf(stderr, "\n %s", mysql_error(mysql));
    exit(0);
  }
  
  /* Prepare a insert query with 3 parameters */
  strmov(query, "INSERT INTO test_table(col1,col2,col3) values(?,?,?)");
  if(!(stmt = mysql_prepare(mysql, query, strlen(query))))
  {
    fprintf(stderr, "\n prepare, insert failed");
    fprintf(stderr, "\n %s", mysql_error(mysql));
    exit(0);
  }
  fprintf(stdout, "\n prepare, insert successful");

  /* Get the parameter count from the statement */
  param_count= mysql_param_count(stmt);

  fprintf(stdout, "\n total parameters in insert: %d", param_count);
  if (param_count != 3) /* validate parameter count */
  {
    fprintf(stderr, "\n invalid parameter count returned by MySQL");
    exit(0);
  }

  /* Bind the data for the parameters */

  /* INTEGER PART */
  bind[0].buffer_type= MYSQL_TYPE_LONG;
  bind[0].buffer= (char *)&#38;int_data;
  bind[0].is_null= 0;
  bind[0].length= 0;

  /* STRING PART */
  bind[1].buffer_type= MYSQL_TYPE_VAR_STRING;
  bind[1].buffer= (char *)str_data;
  bind[1].buffer_length= sizeof(str_data);
  bind[1].is_null= 0;
  bind[1].length= 0;

  /* SMALLINT PART */
  bind[2].buffer_type= MYSQL_TYPE_SHORT;
  bind[2].buffer= (char *)&#38;small_data;
  bind[2].is_null= &#38;is_null;
  bind[2].length= 0;
  is_null= 0;

  /* Bind the buffers */
  if (mysql_bind_param(stmt, bind))
  {
    fprintf(stderr, "\n param bind failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

  /* Specify the data */
  int_data= 10;             /* integer */
  strcpy(str_data,"MySQL"); /* string  */

  /* INSERT SMALLINT data as NULL */
  is_null= 1;

  /* Execute the insert statement - 1*/
  if (mysql_execute(stmt))
  {
    fprintf(stderr, "\n execute 1 failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    fprintf(stderr, "\n send a bug report to bugs@lists.mysql.com, by asking why this is not working ?");
    exit(0);
  }
    
  /* Get the total rows affected */   
  affected_rows= mysql_stmt_affected_rows(stmt);

  fprintf(stdout, "\n total affected rows: %lld", affected_rows);
  if (affected_rows != 1) /* validate affected rows */
  {
    fprintf(stderr, "\n invalid affected rows by MySQL");
    exit(0);
  }

  /* Re-execute the insert, by changing the values */
  int_data= 1000;             
  strcpy(str_data,"The most popular open source database"); 
  small_data= 1000;         /* smallint */
  is_null= 0;               /* reset NULL */
 
  /* Execute the insert statement - 2*/
  if (mysql_execute(stmt))
  {
    fprintf(stderr, "\n execute 2 failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }
    
  /* Get the total rows affected */   
  affected_rows= mysql_stmt_affected_rows(stmt);

  fprintf(stdout, "\n total affected rows: %lld", affected_rows);
  if (affected_rows != 1) /* validate affected rows */
  {
    fprintf(stderr, "\n invalid affected rows by MySQL");
    exit(0);
  }

  /* Close the statement */
  if (mysql_stmt_close(stmt))
  {
    fprintf(stderr, "\n failed while closing the statement");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }
  
  /* DROP THE TABLE */
  if (mysql_query(mysql,"DROP TABLE test_table"))
  {
    fprintf(stderr, "\n drop table failed");
    fprintf(stderr, "\n %s", mysql_error(mysql));
    exit(0);
  }
  fprintf(stdout, "Success, MySQL prepared statements are working!!!");
</PRE>



<H4><A NAME="mysql_stmt_affected_rows" HREF="manual_toc.html#mysql_stmt_affected_rows">8.1.7.26  <CODE>mysql_stmt_affected_rows()</CODE></A></H4>

<P>
<A NAME="IDX1633"></A>

</P>
<P>
<CODE>ulonglong mysql_stmt_affected_rows(MYSQL_STMT *stmt)</CODE>

</P>

<H4>8.1.7.27  Description</H4>

<P>
Returns total number of rows changed by the last execute statement. May
be called immediatlely after mysql_execute() for UPDATE,DELETE,or INSERT
statements.For SELECT statements, mysql_stmt_affected rows works like
mysql_num_rows().

</P>

<H4>8.1.7.28  Return Values</H4>

<P>
An integer greater than zero indicates the number of rows affected or
retrieved. Zero indicates that no records where updated for an UPDATE 
statement, no rows matched the WHERE clause in the query or that no 
query has yet been executed. -1 indicates that the query returned an 
error or that, for a SELECT query, mysql_stmt_affected_rows() was called 
prior to calling mysql_fetch(). 

</P>

<H4>8.1.7.29  Errors</H4>

<P>
None.

</P>

<H4>8.1.7.30  Example</H4>

<P>
For the usage of <CODE>mysql_stmt_affected_rows()</CODE> refer to the Example
from section <A HREF="manual.html#mysql_execute">8.1.7.21  <CODE>mysql_execute()</CODE></A>.

</P>



<H4><A NAME="mysql_bind_result" HREF="manual_toc.html#mysql_bind_result">8.1.7.31  <CODE>mysql_bind_result()</CODE></A></H4>

<P>
<A NAME="IDX1634"></A>

</P>
<P>
<CODE>my_bool mysql_bind_result(MYSQL_STMT *stmt, MYSQL_BIND *bind)</CODE>

</P>

<H4>8.1.7.32  Description</H4>

<P>
<CODE>mysql_bind_result()</CODE> is used to associate, or bind, columns in the
resultset to data buffers and length buffers. When <CODE>mysql_fetch()</CODE> is
called to fetch data, the MySQL client protocol returns the data for the
bound columns in the specified buffers.

</P>
<P>
Note that all columns must be bound prior to calling <CODE>mysql_fetch()</CODE>
in case of fetching the data to buffers; else <CODE>mysql_fetch()</CODE> simply ignores
the data fetch; also the buffers should be sufficient enough to hold the
data as the protocol doesn't return the data in chunks.

</P>
<P>
A column can be bound or rebound at any time, even after data has been
fetched from the result set. The new binding takes effect the next time
<CODE>mysql_fetch()</CODE> is called. For example, suppose an application binds
the columns in a result set and calls <CODE>mysql_fetch()</CODE>. The mysql
protocol returns data in the bound buffers. Now suppose the application
binds the columns to a different set of buffers, then the protocol does
not place the data for the just fetched row in the newly bound
buffers. Instead, it does when the next <CODE>mysql_fetch()</CODE> is called.

</P>
<P>
To bind a column, an application calls <CODE>mysql_bind_result()</CODE> and
passes the type, address, and the address of the length buffer.
 
The supported buffer types are:

</P>

<UL>
<LI>

MYSQL_TYPE_TINY
<LI>

MYSQL_TYPE_SHORT
<LI>

MYSQL_TYPE_LONG
<LI>

MYSQL_TYPE_LONGLONG
<LI>

MYSQL_TYPE_FLOAT
<LI>

MYSQL_TYPE_DOUBLE
<LI>

MYSQL_TYPE_TIME
<LI>

MYSQL_TYPE_DATE
<LI>

MYSQL_TYPE_DATETIME
<LI>

MYSQL_TYPE_TIMESTAMP
<LI>

MYSQL_TYPE_STRING
<LI>

MYSQL_TYPE_VAR_STRING
<LI>

MYSQL_TYPE_BLOB
<LI>

MYSQL_TYPE_TINY_BLOB
<LI>

MYSQL_TYPE_MEDIUM_BLOB
<LI>

MYSQL_TYPE_LONG_BLOB
</UL>


<H4>8.1.7.33  Return Values</H4>

<P>
Zero if the bind was successful. Non-zero if an error occured.

</P>

<H4>8.1.7.34  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_NO_PREPARE_STMT</CODE>
<DD>
No prepared statement exists
<DT><CODE>CR_UNSUPPORTED_PARAM_TYPE</CODE>
<DD>
The conversion is not supported, possibly the buffer_type is illegal or
its not from the list of supported types.
<DT><CODE>CR_OUT_OF_MEMOR</CODE>
<DD>
Out of memory
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occured
</DL>


<H4>8.1.7.35  Example</H4>

<P>
For the usage of <CODE>mysql_bind_result()</CODE> refer to the Example from
section <A HREF="manual.html#mysql_fetch">8.1.7.40  <CODE>mysql_fetch()</CODE></A>

</P>



<H4><A NAME="mysql_stmt_store_result" HREF="manual_toc.html#mysql_stmt_store_result">8.1.7.36  <CODE>mysql_stmt_store_result()</CODE></A></H4>

<P>
<A NAME="IDX1635"></A>

</P>
<P>
<CODE>int mysql_stmt_store_result(MYSQL_STMT *stmt)</CODE>

</P>

<H4>8.1.7.37  Description</H4>

<P>
You must call <CODE>mysql_stmt_store_result()</CODE> for every query that
successfully retrieves
data(<CODE>SELECT</CODE>,<CODE>SHOW</CODE>,<CODE>DESCRIBE</CODE>,<CODE>EXPLAIN</CODE>), and only
if you want to buffer the complete result set by the client, so that the
subsequent <CODE>mysql_fetch()</CODE> call returns buffered data.

</P>
<P>
You don't have to call <CODE>mysql_stmt_store_result()</CODE> for other
queries, but it will not harm or cause any notable performance in all
cases.You can detect if the query didn't have a result set by checking
if <CODE>mysql_prepare_result()</CODE> returns 0. For more information refer
to section <A HREF="manual.html#mysql_prepare_result">8.1.7.11  <CODE>mysql_prepare_result()</CODE></A>.

</P>

<H4>8.1.7.38  Return Values</H4>

<P>
<CODE>Zero</CODE> if the results are buffered successfully or <CODE>Non Zero</CODE> in case of an error.

</P>

<H4>8.1.7.39  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order. 
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory. 
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away. 
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query. 
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred. 
</DL>



<H4><A NAME="mysql_fetch" HREF="manual_toc.html#mysql_fetch">8.1.7.40  <CODE>mysql_fetch()</CODE></A></H4>

<P>
<A NAME="IDX1636"></A>

</P>
<P>
<CODE>int mysql_fetch(MYSQL_STMT *stmt)</CODE>

</P>

<H4>8.1.7.41  Description</H4>

<P>
<CODE>mysql_fetch()</CODE> returns the next rowset in the result set. It can
be called only while the result set exists i.e. after a call to
<CODE>mysql_execute()</CODE> that creates a result set or after
<CODE>mysql_stmt_store_result()</CODE>, which is called after
<CODE>mysql_execute()</CODE> to buffer the entire resultset.

</P>
<P>
If row buffers are bound using <CODE>mysql_bind_result()</CODE>, it returns
the data in those buffers for all the columns in the current row
set and the lengths are returned to the length pointer.

</P>
<P>
Note that, all columns must be bound by the application.

</P>
<P>
If the data fetched is a NULL data, then the <CODE>is_null</CODE> value from
<CODE>MYSQL_BIND</CODE> contains TRUE, 1, else the data and its length is
returned to <CODE>*buffer</CODE> and <CODE>*length</CODE> variables based on the
buffer type specified by the application. All numeric, float and double
types have the fixed length(in bytes) as listed below:

</P>

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Type</STRONG> </TD><TD> <STRONG>Length</STRONG>
</TD></TR>
<TR><TD>MYSQL_TYPE_TINY </TD><TD> 1
</TD></TR>
<TR><TD>MYSQL_TYPE_SHORT </TD><TD> 2
</TD></TR>
<TR><TD>MYSQL_TYPE_LONG </TD><TD> 4
</TD></TR>
<TR><TD>MYSQL_TYPE_FLOAT </TD><TD> 4
</TD></TR>
<TR><TD>MYSQL_TYPE_LONGLONG </TD><TD> 8
</TD></TR>
<TR><TD>MYSQL_TYPE_DOUBLE </TD><TD> 8
</TD></TR>
<TR><TD>MYSQL_TYPE_TIME </TD><TD> sizeof(MYSQL_TIME)
</TD></TR>
<TR><TD>MYSQL_TYPE_DATE </TD><TD> sizeof(MYSQL_TIME)
</TD></TR>
<TR><TD>MYSQL_TYPE_DATETIME </TD><TD> sizeof(MYSQL_TIME)
</TD></TR>
<TR><TD>MYSQL_TYPE_TIMESTAMP </TD><TD> sizeof(MYSQL_TIME)
</TD></TR>
<TR><TD>MYSQL_TYPE_STRING </TD><TD> data length
</TD></TR>
<TR><TD>MYSQL_TYPE_VAR_STRING </TD><TD> data_length
</TD></TR>
<TR><TD>MYSQL_TYPE_BLOB </TD><TD> data_length
</TD></TR>
<TR><TD>MYSQL_TYPE_TINY_BLOB </TD><TD> data_length
</TD></TR>
<TR><TD>MYSQL_TYPE_MEDIUM_BLOB </TD><TD> data_length
</TD></TR>
<TR><TD>MYSQL_TYPE_LONG_BLOB </TD><TD> data_length
</TD></TR>
</TABLE>

<P>
<BR>
where <CODE>*data_length</CODE> is nothing but the 'Actual length of the data'.

</P>

<H4>8.1.7.42  Return Values</H4>

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Return Value</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD>0 </TD><TD> Successful, the data has been
fetched to application data buffers.
</TD></TR>
<TR><TD>1 </TD><TD> Error occured. Error code and
message can be obtained by calling <CODE>mysql_stmt_errno()</CODE> and <CODE>mysql_stmt_error()</CODE>.
</TD></TR>
<TR><TD>100, MYSQL_NO_DATA </TD><TD> No more rows/data exists
</TD></TR>
</TABLE>


<H4>8.1.7.43  Errors</H4>
<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order. 
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory. 
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away. 
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query. 
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred. 
<DT><CODE>CR_UNSUPPORTED_PARAM_TYPE</CODE>
<DD>
If the buffer type is MYSQL_TYPE_DATE,DATETIME,TIME,or TIMESTAMP; and if
the field type is not DATE, TIME, DATETIME or TIMESTAMP.
<DT><CODE></CODE>
<DD>
All other unsupported conversion errors are returned from
<CODE>mysql_bind_result()</CODE>.
</DL>


<H4>8.1.7.44  Example</H4>

<P>
The following example explains the usage of <CODE>mysql_prepare_result</CODE>,
<CODE>mysql_bind_result()</CODE>, and <CODE>mysql_fetch()</CODE>

</P>

<PRE>
  
MYSQL_STMT *stmt;  
MYSQL_BIND bind[2];
MYSQL_RES  *result;
int        int_data;
long       int_length, str_length;
char       str_data[50];
my_bool    is_null[2];

  query= "SELECT col1, col2 FROM test_table WHERE col1= 10)");
  if (!(stmt= mysql_prepare(&#38;mysql, query, strlen(query)))
  {
    fprintf(stderr, "\n prepare failed");
    fprintf(stderr, "\n %s", mysql_error(&#38;stmt));
    exit(0);
  }

  /* Get the fields meta information */
  if (!(result= mysql_prepare_result(stmt)))
  {
    fprintf(stderr, "\n prepare_result failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

  fprintf(stdout, "Total fields: %ld", mysql_num_fields(result));

  if (mysql_num_fields(result) != 2)
  {
    fprintf(stderr, "\n prepare returned invalid field count");
    exit(0);
  }

  /* Execute the SELECT query */
  if (mysql_execute(stmt))
  {
    fprintf(stderr, "\n execute failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));  
    exit(0);
  }

  /* Bind the result data buffers */
  bind[0].buffer_type= MYSQL_TYPE_LONG;
  bind[0].buffer= (char *)&#38;int_data;
  bind[0].is_null= &#38;is_null[0];
  bind[0].length= &#38;int_length;

  bind[1].buffer_type= MYSQL_TYPE_VAR_STRING;
  bind[1].buffer= (void *)str_data;
  bind[1].is_null= &#38;is_null[1];
  bind[1].length= &#38;str_length;

  if (mysql_bind_result(stmt, bind))
  {
    fprintf(stderr, "\n bind_result failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }  

  /* Now fetch data to buffers */
  if (mysql_fetch(stmt))
  {
    fprintf(stderr, "\n fetch failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }  
  
  if (is_null[0])
    fprintf(stdout, "\n Col1 data is NULL");
  else
    fprintf(stdout, "\n Col1: %d, length: %ld", int_data, int_length);
   
   if (is_null[1])
     fprintf(stdout, "\n Col2 data is NULL");
   else
    fprintf(stdout, "\n Col2: %s, length: %ld", str_data, str_length);

   
  /* call mysql_fetch again */
  if (mysql_fetch(stmt) |= MYSQL_NO_DATA)
  {
    fprintf(stderr, "\n fetch return more than one row);
    exit(0);
  }  

  /* Free the prepare result meta information */
  mysql_free_result(result);

  /* Free the statement handle */
  if (mysql_stmt_free(stmt))
  {
    fprintf(stderr, "\n failed to free the statement handle);
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }  
 
</PRE>



<H4><A NAME="mysql_send_long_data" HREF="manual_toc.html#mysql_send_long_data">8.1.7.45  <CODE>mysql_send_long_data()</CODE></A></H4>

<P>
<A NAME="IDX1637"></A>

</P>
<P>
<CODE>int mysql_send_long_data(MYSQL_STMT *stmt, unsigned int
parameter_number, const char *data, ulong length)</CODE>

</P>

<H4>8.1.7.46  Description</H4>

<P>
Allows an application to send the data in pieces or chunks to
server. This function can be used to send character or binary data
values in parts to a column(it must be a text or blob) with a character or
binary data type.

</P>
<P>
The <CODE>data</CODE> is a pointer to buffer containing the actual data for
the parameter represendted by <CODE>parameter_number</CODE>. The <CODE>length</CODE>
indicates the amount of data to be sent in bytes.

</P>

<H4>8.1.7.47  Return Values</H4>

<P>
Zero if the data is sent successfully to server. Non-zero if an error
occured.

</P>

<H4>8.1.7.48  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_INVALID_PARAMETER_NO</CODE>
<DD>
Invalid parameter number
<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away
<DT><CODE>CR_OUT_OF_MEMOR</CODE>
<DD>
Out of memory
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occured
</DL>


<H4>8.1.7.49  Example</H4>
<P>
The following example explains how to send the data in chunks to text
column:

<PRE>
  
MYSQL_BIND bind[1];
long       length;

  query= "INSERT INTO test_long_data(text_column) VALUES(?)");
  if (!mysql_prepare(&#38;mysql, query, strlen(query))
  {
    fprintf(stderr, "\n prepare failed");
    fprintf(stderr, "\n %s", mysql_error(&#38;stmt));
    exit(0);
  }
   memset(bind, 0, sizeof(bind));
   bind[0].buffer_type= MYSQL_TYPE_STRING;
   bind[0].length= &#38;length;
   bind[0].is_null= 0;

  /* Bind the buffers */
  if (mysql_bind_param(stmt, bind))
  {
    fprintf(stderr, "\n param bind failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

   /* Supply data in chunks to server */
   if (!mysql_send_long_data(stmt,1,"MySQL",5))
  {
    fprintf(stderr, "\n send_long_data failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

   /* Supply the next piece of data */
   if (mysql_send_long_data(stmt,1," - The most popular open source database",40))
  {
    fprintf(stderr, "\n send_long_data failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

   /* Now, execute the query */
   if (mysql_execute(stmt))
  {
    fprintf(stderr, "\n mysql_execute failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

   This inserts the data, "MySQL - The most popular open source database" 
   to the field 'text_column'.  
</PRE>



<H4><A NAME="mysql_stmt_close" HREF="manual_toc.html#mysql_stmt_close">8.1.7.50  <CODE>mysql_stmt_close()</CODE></A></H4>

<P>
<A NAME="IDX1638"></A>

</P>
<P>
<CODE>my_bool mysql_stmt_close(MYSQL_STMT *)</CODE>

</P>

<H4>8.1.7.51  Description</H4>

<P>
Closes the prepared statement. <CODE>mysql_stmt_close()</CODE> also
deallocates the statement handle pointed to by <CODE>stmt</CODE>. 

</P>
<P>
If the current query results are pending or un-read; this cancels the
query results; so that next call can be executed.

</P>

<H4>8.1.7.52  Return Values</H4>

<P>
Zero if the statement was freed successfully. Non-zero if an error occured.

</P>

<H4>8.1.7.53  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The MySQL server has gone away
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unkown error occured
</DL>


<H4>8.1.7.54  Example</H4>

<P>
For the usage of <CODE>mysql_stmt_close()</CODE> refer to the Example from
section <A HREF="manual.html#mysql_execute">8.1.7.21  <CODE>mysql_execute()</CODE></A>.

</P>



<H4><A NAME="mysql_stmt_errno" HREF="manual_toc.html#mysql_stmt_errno">8.1.7.55  <CODE>mysql_stmt_errno()</CODE></A></H4>

<P>
<A NAME="IDX1639"></A>

</P>
<P>
<CODE>unsigned int mysql_stmt_errno(MYSQL_STMT *stmt)</CODE>

</P>

<H4>8.1.7.56  Description</H4>

<P>
For the statement specified by <CODE>stmt</CODE>, <CODE>mysql_stmt_errno()</CODE>
returns the error code for the most recently invoked statement API
function that can succeed or fail. A return value of zero means that no
error occured. Client error message numbers are listed in the MySQL
errmsg.h header file. Server error message numbers are listed in
mysqld_error.h. In the MySQL source distribution you can find a complete
list of error messages and error numbers in the file Docs/mysqld_error.txt

</P>

<H4>8.1.7.57  Return Values</H4>

<P>
An error code value. Zero if no error occured.

</P>

<H4>8.1.7.58  Errors</H4>

<P>
None

</P>



<H4><A NAME="mysql_stmt_error" HREF="manual_toc.html#mysql_stmt_error">8.1.7.59  <CODE>mysql_stmt_error()</CODE></A></H4>

<P>
<A NAME="IDX1640"></A>

</P>
<P>
<CODE>char *mysql_stmt_error(MYSQL_STMT *stmt)</CODE>

</P>

<H4>8.1.7.60  Description</H4>

<P>
For the statement specified by <CODE>stmt</CODE>, <CODE>mysql_stmt_error()</CODE>
returns the error message for the most recently invoked statement API
that can succeed or fail. An empty string ("") is returned if no error
occured. This means the following two sets are equivalent:

</P>

<PRE>

if (mysql_stmt_errno(stmt))
{
  // an error occured
}

if (mysql_stmt_error(stmt))
{
  // an error occured
}
</PRE>

<P>
The language of the client error messages many be changed by recompiling
the MySQL client library. Currently you can choose error messages in
several different languages.

</P>

<H4>8.1.7.61  Return Values</H4>

<P>
A character string that describes the error. An empry string if no error
occured.

</P>

<H4>8.1.7.62  Errors</H4>

<P>
None

</P>



<H3><A NAME="C_API_multiple_queries" HREF="manual_toc.html#C_API_multiple_queries">8.1.8  C API Handling multiple query executions</A></H3>

<P>
From version 4.1, MySQL supports the multi query execution in a single
command. In order to do this, you must set the client flag
<CODE>CLIENT_MULTI_QUERIES</CODE> option when opening the connection.

</P>
<P>
By default <CODE>mysql_query()</CODE> or <CODE>mysql_real_query()</CODE> returns
only the first query status and the subsequent queries status can
be processed using <CODE>mysql_more_results()</CODE> and
<CODE>mysql_next_result()</CODE>.

</P>

<PRE>

  /* Connect to server with option CLIENT_MULTI_QUERIES */
  mysql_real_query(..., CLIENT_MULTI_QUERIES);

  /* Now execute multiple queries */
  mysql_query(mysql,"DROP TABLE IF EXISTS test_table;\
                     CREATE TABLE test_table(id int);\
                     INSERT INTO test_table VALUES(10);\
                     UPDATE test_table SET id=20 WHERE id=10;\
                     SELECT * FROM test_table;\
                     DROP TABLE test_table";
  while (mysql_more_results(mysql))
  {
    /* Process all results */
    mysql_next_result(mysql);
    ...
    printf("total affected rows: %lld", mysql_affected_rows(mysql));
    ...
    if ((result= mysql_store_result(mysql))
    {
      /* Returned a result set, process it */
    }
  }

</PRE>



<H3><A NAME="C_API_date_handling" HREF="manual_toc.html#C_API_date_handling">8.1.9  C API Handling DATE, TIME and TIMESTAMP</A></H3>

<P>
Using the new binary protocol from MySQL 4.1 and above, one can send and
receive the DATE, TIME and TIMESTAMP data using the <CODE>MYSQL_TIME</CODE>
structure. 

</P>
<P>
<CODE>MYSQL_TIME</CODE> structure consites of the following members:

</P>

<UL>
<LI>year

<LI>month

<LI>day

<LI>hour

<LI>minute

<LI>second

<LI>second_part

</UL>

<P>
In order to send the data, one must use the prepared statements through
<CODE>mysql_prepare()</CODE> and <CODE>mysql_execute()</CODE>; and must bind the
parameter using type as <CODE>MYSQL_TYPE_DATE</CODE> inorder to process date
value, <CODE>MYSQL_TYPE_TIME</CODE> for time and <CODE>MYSQL_TYPE_DATETIME</CODE> or
<CODE>MYSQL_TYPE_TIMESTAMP</CODE> for datetime/timestamp using
<CODE>mysql_bind_param()</CODE> when sending and <CODE>mysql_bind_results()</CODE>
while receiving the data.

</P>
<P>
Here is a simple example; which inserts the DATE, TIME and TIMESTAMP data.

</P>

<PRE>

MYSQL_TIME  ts;
MYSQL_BIND  bind[3];
MYSQL_STMT  *stmt;
  
  strmov(query, "INSERT INTO test_table(date_field, time_field,
                                        timestamp_field) VALUES(?,?,?");

  stmt= mysql_prepare(mysql, query, strlen(query))); 

  /* setup input buffers for all 3 parameters */
  bind[0].buffer_type= MYSQL_TYPE_DATE;
  bind[0].buffer= (char *)&#38;ts;
  bind[0].is_null= 0;
  bind[0].length= 0;
  ..
  bind[1]= bind[2]= bind[0];
  ..

  mysql_bind_param(stmt, bind);

  /* supply the data to be sent is the ts structure */
  ts.year= 2002;
  ts.month= 02;
  ts.day= 03;

  ts.hour= 10;
  ts.minute= 45;
  ts.second= 20;

  mysql_execute(stmt);
  .. 

</PRE>



<H3><A NAME="C_Thread_functions" HREF="manual_toc.html#C_Thread_functions">8.1.10  C API Threaded Function Descriptions</A></H3>

<P>
You need to use the following functions when you want to create a
threaded client. See section <A HREF="manual.html#Threaded_clients">8.1.14  How to Make a Threaded Client</A>.

</P>



<H4><A NAME="my_init" HREF="manual_toc.html#my_init">8.1.10.1  <CODE>my_init()</CODE></A></H4>

<P>
<A NAME="IDX1641"></A>

</P>
<P>
<CODE>void my_init(void)</CODE>

</P>

<H4>8.1.10.2  Description</H4>

<P>
This function needs to be called once in the program before calling any
MySQL function.  This initialises some global variables that MySQL
needs.  If you are using a thread-safe client library, this will also
call <CODE>mysql_thread_init()</CODE> for this thread.

</P>
<P>
This is automatically called by <CODE>mysql_init()</CODE>,
<CODE>mysql_server_init()</CODE> and <CODE>mysql_connect()</CODE>.

</P>

<H4>8.1.10.3  Return Values</H4>

<P>
None.

</P>


<H4><A NAME="mysql_thread_init" HREF="manual_toc.html#mysql_thread_init">8.1.10.4  <CODE>mysql_thread_init()</CODE></A></H4>

<P>
<A NAME="IDX1642"></A>

</P>
<P>
<CODE>my_bool mysql_thread_init(void)</CODE>

</P>

<H4>8.1.10.5  Description</H4>

<P>
This function needs to be called for each created thread to initialise
thread-specific variables.

</P>
<P>
This is automatically called by <CODE>my_init()</CODE> and <CODE>mysql_connect()</CODE>.

</P>

<H4>8.1.10.6  Return Values</H4>

<P>
None.

</P>


<H4><A NAME="mysql_thread_end" HREF="manual_toc.html#mysql_thread_end">8.1.10.7  <CODE>mysql_thread_end()</CODE></A></H4>

<P>
<A NAME="IDX1643"></A>

</P>
<P>
<CODE>void mysql_thread_end(void)</CODE>

</P>

<H4>8.1.10.8  Description</H4>

<P>
This function needs to be called before calling <CODE>pthread_exit()</CODE> to
free memory allocated by <CODE>mysql_thread_init()</CODE>.

</P>
<P>
Note that this function <STRONG>is not invoked automatically</STRONG> by the client
library.  It must be called explicitly to avoid a memory leak.

</P>

<H4>8.1.10.9  Return Values</H4>

<P>
None.

</P>


<H4><A NAME="mysql_thread_safe" HREF="manual_toc.html#mysql_thread_safe">8.1.10.10  <CODE>mysql_thread_safe()</CODE></A></H4>

<P>
<A NAME="IDX1644"></A>

</P>
<P>
<CODE>unsigned int mysql_thread_safe(void)</CODE>

</P>

<H4>8.1.10.11  Description</H4>

<P>
This function indicates whether the client is compiled as thread-safe.

</P>

<H4>8.1.10.12  Return Values</H4>

<P>
1 is the client is thread-safe, 0 otherwise.

</P>


<H3><A NAME="C_Embedded_Server_func" HREF="manual_toc.html#C_Embedded_Server_func">8.1.11  C API Embedded Server Function Descriptions</A></H3>

<P>
You must use the following functions if you want to allow your
application to be linked against the embedded MySQL server library.
See section <A HREF="manual.html#libmysqld">8.1.15  libmysqld, the Embedded MySQL Server Library</A>.

</P>
<P>
If the program is linked with <CODE>-lmysqlclient</CODE> instead of
<CODE>-lmysqld</CODE>, these functions do nothing.  This makes it
possible to choose between using the embedded MySQL server and
a stand-alone server without modifying any code.

</P>



<H4><A NAME="mysql_server_init" HREF="manual_toc.html#mysql_server_init">8.1.11.1  <CODE>mysql_server_init()</CODE></A></H4>

<P>
<A NAME="IDX1645"></A>

</P>
<P>
<CODE>int mysql_server_init(int argc, char **argv, char **groups)</CODE>

</P>

<H4>8.1.11.2  Description</H4>

<P>
This function <STRONG>must</STRONG> be called once in the program using the
embedded server before calling any other MySQL function.  It starts up
the server and initialises any subsystems (<CODE>mysys</CODE>, InnoDB, etc.) 
that the server uses.  If this function is not called, the program will
crash.  If you are using the DBUG package that comes with MySQL, you
should call this after you have called <CODE>MY_INIT()</CODE>.

</P>
<P>
The <CODE>argc</CODE> and <CODE>argv</CODE> arguments are analogous to the arguments
to <CODE>main()</CODE>.  The first element of <CODE>argv</CODE> is ignored (it
typically contains the program name).  For convenience, <CODE>argc</CODE> may
be <CODE>0</CODE> (zero) if there are no command-line arguments for the
server.  <CODE>mysql_server_init()</CODE> makes a copy of the arguments so
it's safe to destroy <CODE>argv</CODE> or <CODE>groups</CODE> after the call.

</P>
<P>
The <CODE>NULL</CODE>-terminated list of strings in <CODE>groups</CODE>
selects which groups in the option files will be active.
See section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.  For convenience, <CODE>groups</CODE> may be
<CODE>NULL</CODE>, in which case the <CODE>[server]</CODE> and <CODE>[emedded]</CODE> groups
will be active.

</P>

<H4>8.1.11.3  Example</H4>


<PRE>
#include &#60;mysql.h&#62;
#include &#60;stdlib.h&#62;

static char *server_args[] = {
  "this_program",       /* this string is not used */
  "--datadir=.",
  "--key_buffer_size=32M"
};
static char *server_groups[] = {
  "embedded",
  "server",
  "this_program_SERVER",
  (char *)NULL
};

int main(void) {
  mysql_server_init(sizeof(server_args) / sizeof(char *),
                    server_args, server_groups);

  /* Use any MySQL API functions here */

  mysql_server_end();

  return EXIT_SUCCESS;
}
</PRE>


<H4>8.1.11.4  Return Values</H4>

<P>
0 if okay, 1 if an error occurred.

</P>


<H4><A NAME="mysql_server_end" HREF="manual_toc.html#mysql_server_end">8.1.11.5  <CODE>mysql_server_end()</CODE></A></H4>

<P>
<A NAME="IDX1646"></A>

</P>
<P>
<CODE>void mysql_server_end(void)</CODE>

</P>

<H4>8.1.11.6  Description</H4>

<P>
This function <STRONG>must</STRONG> be called once in the program after
all other MySQL functions.  It shuts down the embedded server.

</P>

<H4>8.1.11.7  Return Values</H4>

<P>
None.

</P>


<H3><A NAME="C_API_problems" HREF="manual_toc.html#C_API_problems">8.1.12  Common questions and problems when using the C API</A></H3>

<P>
<A NAME="IDX1647"></A>
<A NAME="IDX1648"></A>

</P>



<H4><A NAME="NULL_mysql_store_result" HREF="manual_toc.html#NULL_mysql_store_result">8.1.12.1  Why Is It that After <CODE>mysql_query()</CODE> Returns Success, <CODE>mysql_store_result()</CODE> Sometimes Returns <CODE>NULL</CODE>?</A></H4>

<P>
It is possible for <CODE>mysql_store_result()</CODE> to return <CODE>NULL</CODE>
following a successful call to <CODE>mysql_query()</CODE>.  When this happens, it
means one of the following conditions occurred:

</P>

<UL>
<LI>

There was a <CODE>malloc()</CODE> failure (for example, if the result set was too
large).

<LI>

The data couldn't be read (an error occurred on the connection).

<LI>

The query returned no data (for example, it was an <CODE>INSERT</CODE>,
<CODE>UPDATE</CODE>, or <CODE>DELETE</CODE>).
</UL>

<P>
You can always check whether the statement should have produced a
non-empty result by calling <CODE>mysql_field_count()</CODE>.  If
<CODE>mysql_field_count()</CODE> returns zero, the result is empty and the last
query was a statement that does not return values (for example, an
<CODE>INSERT</CODE> or a <CODE>DELETE</CODE>).  If <CODE>mysql_field_count()</CODE> returns a
non-zero value, the statement should have produced a non-empty result.
See the description of the <CODE>mysql_field_count()</CODE> function for an
example.

</P>
<P>
You can test for an error by calling <CODE>mysql_error()</CODE> or
<CODE>mysql_errno()</CODE>.

</P>


<H4><A NAME="Query_results" HREF="manual_toc.html#Query_results">8.1.12.2  What Results Can I Get From a Query?</A></H4>

<P>
In addition to the result set returned by a query, you can also get the
following information:

</P>

<UL>
<LI>

<CODE>mysql_affected_rows()</CODE> returns the number of rows affected by the last
query when doing an <CODE>INSERT</CODE>, <CODE>UPDATE</CODE>, or <CODE>DELETE</CODE>. An
exception is that if <CODE>DELETE</CODE> is used without a <CODE>WHERE</CODE> clause, the
table is re-created empty, which is much faster! In this case,
<CODE>mysql_affected_rows()</CODE> returns zero for the number of records
affected.

<LI>

<CODE>mysql_num_rows()</CODE> returns the number of rows in a result set.  With
<CODE>mysql_store_result()</CODE>, <CODE>mysql_num_rows()</CODE> may be called as soon as
<CODE>mysql_store_result()</CODE> returns.  With <CODE>mysql_use_result()</CODE>,
<CODE>mysql_num_rows()</CODE> may be called only after you have fetched all the
rows with <CODE>mysql_fetch_row()</CODE>.

<LI>

<CODE>mysql_insert_id()</CODE> returns the ID generated by the last
query that inserted a row into a table with an <CODE>AUTO_INCREMENT</CODE> index.
See section <A HREF="manual.html#mysql_insert_id">8.1.3.130  <CODE>mysql_insert_id()</CODE></A>.

<LI>

Some queries (<CODE>LOAD DATA INFILE ...</CODE>, <CODE>INSERT INTO
... SELECT ...</CODE>, <CODE>UPDATE</CODE>) return additional information.  The result is
returned by <CODE>mysql_info()</CODE>.  See the description for <CODE>mysql_info()</CODE>
for the format of the string that it returns.  <CODE>mysql_info()</CODE> returns a
<CODE>NULL</CODE> pointer if there is no additional information.
</UL>



<H4><A NAME="Getting_unique_ID" HREF="manual_toc.html#Getting_unique_ID">8.1.12.3  How Can I Get the Unique ID for the Last Inserted Row?</A></H4>

<P>
<A NAME="IDX1649"></A>
<A NAME="IDX1650"></A>
<A NAME="IDX1651"></A>
<A NAME="IDX1652"></A>

</P>
<P>
If you insert a record in a table containing a column that has the
<CODE>AUTO_INCREMENT</CODE> attribute, you can get the most recently generated
ID by calling the <CODE>mysql_insert_id()</CODE> function.

</P>
<P>
You can also retrieve the ID by using the <CODE>LAST_INSERT_ID()</CODE> function in
a query string that you pass to <CODE>mysql_query()</CODE>.

</P>
<P>
You can check if an <CODE>AUTO_INCREMENT</CODE> index is used by executing
the following code. This also checks if the query was an <CODE>INSERT</CODE> with
an <CODE>AUTO_INCREMENT</CODE> index:

</P>

<PRE>
if (mysql_error(&#38;mysql)[0] == 0 &#38;&
    mysql_num_fields(result) == 0 &#38;&
    mysql_insert_id(&#38;mysql) != 0)
{
    used_id = mysql_insert_id(&#38;mysql);
}
</PRE>

<P>
The most recently generated ID is maintained in the server on a
per-connection basis.  It will not be changed by another client. It will not
even be changed if you update another <CODE>AUTO_INCREMENT</CODE> column with a
non-magic value (that is, a value that is not <CODE>NULL</CODE> and not <CODE>0</CODE>).

</P>
<P>
If you want to use the ID that was generated for one table and insert
it into a second table, you can use SQL statements like this:

</P>

<PRE>
INSERT INTO foo (auto,text)
    VALUES(NULL,'text');              # generate ID by inserting NULL
INSERT INTO foo2 (id,text)
    VALUES(LAST_INSERT_ID(),'text');  # use ID in second table
</PRE>



<H4><A NAME="C_API_linking_problems" HREF="manual_toc.html#C_API_linking_problems">8.1.12.4  Problems Linking with the C API</A></H4>

<P>
<A NAME="IDX1653"></A>
<A NAME="IDX1654"></A>

</P>
<P>
When linking with the C API, the following errors may occur on some systems:

</P>

<PRE>
gcc -g -o client test.o -L/usr/local/lib/mysql -lmysqlclient -lsocket -lnsl

Undefined        first referenced
 symbol          in file
floor            /usr/local/lib/mysql/libmysqlclient.a(password.o)
ld: fatal: Symbol referencing errors. No output written to client
</PRE>

<P>
If this happens on your system, you must include the math library by
adding <CODE>-lm</CODE> to the end of the compile/link line.

</P>



<H3><A NAME="Building_clients" HREF="manual_toc.html#Building_clients">8.1.13  Building Client Programs</A></H3>

<P>
<A NAME="IDX1655"></A>
<A NAME="IDX1656"></A>
<A NAME="IDX1657"></A>
<A NAME="IDX1658"></A>

</P>
<P>
If you compile MySQL clients that you've written yourself or that
you obtain from a third-party, they must be linked using the
<CODE>-lmysqlclient -lz</CODE> option on the link command.  You may also need to
specify a <CODE>-L</CODE> option to tell the linker where to find the library.  For
example, if the library is installed in <TT>`/usr/local/mysql/lib'</TT>, use
<CODE>-L/usr/local/mysql/lib -lmysqlclient -lz</CODE> on the link command.

</P>
<P>
For clients that use MySQL header files, you may need to specify a
<CODE>-I</CODE> option when you compile them (for example,
<CODE>-I/usr/local/mysql/include</CODE>), so the compiler can find the header
files.

</P>
<P>
To make the above simpler on Unix we have provied the
<CODE>mysql_config</CODE> script for you. See section <A HREF="manual.html#mysql_config">4.8.9  <CODE>mysql_config</CODE>, Get compile options for compiling clients</A>.

</P>
<P>
You can use this to compile a MySQL client by as follows:

</P>

<PRE>
CFG=/usr/local/mysql/bin/mysql_config
sh -c "gcc -o progname `$CFG --cflags` progname.c `$CFG --libs`"
</PRE>

<P>
The <CODE>sh -c</CODE> is need to get the shell to not threat the output from
<CODE>mysql_config</CODE> as one word.

</P>


<H3><A NAME="Threaded_clients" HREF="manual_toc.html#Threaded_clients">8.1.14  How to Make a Threaded Client</A></H3>

<P>
<A NAME="IDX1659"></A>
<A NAME="IDX1660"></A>

</P>
<P>
The client library is almost thread-safe. The biggest problem is
that the subroutines in <TT>`net.c'</TT> that read from sockets are not
interrupt safe.  This was done with the thought that you might want to
have your own alarm that can break a long read to a server.  If you
install interrupt handlers for the <CODE>SIGPIPE</CODE> interrupt,
the socket handling should be thread-safe.

</P>
<P>
In the older binaries we distribute on our web site
(<a HREF="http://www.mysql.com/">http://www.mysql.com/</a>), the client libraries are not normally
compiled with the thread-safe option (the Windows binaries are by
default compiled to be thread-safe). Newer binary distributions should
have both a normal and a thread-safe client library.

</P>
<P>
To get a threaded client where you can interrupt the client from other
threads and set timeouts when talking with the MySQL server, you should
use the <CODE>-lmysys</CODE>, <CODE>-lmystrings</CODE>, and <CODE>-ldbug</CODE> libraries and
the <CODE>net_serv.o</CODE> code that the server uses.

</P>
<P>
If you don't need interrupts or timeouts, you can just compile a
thread-safe client library <CODE>(mysqlclient_r)</CODE> and use this.  See section <A HREF="manual.html#C">8.1  MySQL C API</A>.  In this case you don't have to worry about the
<CODE>net_serv.o</CODE> object file or the other MySQL libraries.

</P>
<P>
When using a threaded client and you want to use timeouts and
interrupts, you can make great use of the routines in the
<TT>`thr_alarm.c'</TT> file.  If you are using routines from the
<CODE>mysys</CODE> library, the only thing you must remember is to call
<CODE>my_init()</CODE> first! See section <A HREF="manual.html#C_Thread_functions">8.1.10  C API Threaded Function Descriptions</A>.

</P>
<P>
All functions except <CODE>mysql_real_connect()</CODE> are by default
thread-safe.  The following notes describe how to compile a thread-safe
client library and use it in a thread-safe manner.  (The notes below for
<CODE>mysql_real_connect()</CODE> actually apply to <CODE>mysql_connect()</CODE> as
well, but because <CODE>mysql_connect()</CODE> is deprecated, you should be
using <CODE>mysql_real_connect()</CODE> anyway.)

</P>
<P>
To make <CODE>mysql_real_connect()</CODE> thread-safe, you must recompile the
client library with this command:

</P>

<PRE>
shell&#62; ./configure --enable-thread-safe-client
</PRE>

<P>
This will create a thread-safe client library <CODE>libmysqlclient_r</CODE>.
(Assuming your OS has a thread-safe <CODE>gethostbyname_r()</CODE> function.)
This library is thread-safe per connection.  You can let two threads
share the same connection with the following caveats:

</P>

<UL>
<LI>

Two threads can't send a query to the MySQL server at the same time on
the same connection.  In particular, you have to ensure that between a
<CODE>mysql_query()</CODE> and <CODE>mysql_store_result()</CODE> no other thread is using
the same connection.
<LI>

Many threads can access different result sets that are retrieved with
<CODE>mysql_store_result()</CODE>.
<LI>

If you use <CODE>mysql_use_result</CODE>, you have to ensure that no other thread
is using the same connection until the result set is closed.
However, it really is best for threaded clients that share the same
connection to use <CODE>mysql_store_result()</CODE>.
<LI>

If you want to use multiple threads on the same connection, you must
have a mutex lock around your <CODE>mysql_query()</CODE> and
<CODE>mysql_store_result()</CODE> call combination.  Once
<CODE>mysql_store_result()</CODE> is ready, the lock can be released and other
threads may query the same connection.
<LI>

If you program with POSIX threads, you can use
<CODE>pthread_mutex_lock()</CODE> and <CODE>pthread_mutex_unlock()</CODE> to
establish and release a mutex lock.
</UL>

<P>
You need to know the following if you have a thread that is calling
MySQL functions which did not create the connection to the
MySQL database:

</P>
<P>
When you call <CODE>mysql_init()</CODE> or <CODE>mysql_connect()</CODE>, MySQL will
create a thread-specific variable for the thread that is used by the
debug library (among other things).

</P>
<P>
If you call a MySQL function, before the thread has
called <CODE>mysql_init()</CODE> or <CODE>mysql_connect()</CODE>, the thread will
not have the necessary thread-specific variables in place and you are
likely to end up with a core dump sooner or later.

</P>
<P>
The get things to work smoothly you have to do the following:

</P>

<OL>
<LI>

Call <CODE>my_init()</CODE> at the start of your program if it calls
any other MySQL function before calling <CODE>mysql_real_connect()</CODE>.
<LI>

Call <CODE>mysql_thread_init()</CODE> in the thread handler before calling
any MySQL function.
<LI>

In the thread, call <CODE>mysql_thread_end()</CODE> before calling
<CODE>pthread_exit()</CODE>.  This will free the memory used by MySQL
thread-specific variables.
</OL>

<P>
You may get some errors because of undefined symbols when linking your
client with <CODE>libmysqlclient_r</CODE>. In most cases this is because you haven't
included the thread libraries on the link/compile line.

</P>


<H3><A NAME="libmysqld" HREF="manual_toc.html#libmysqld">8.1.15  libmysqld, the Embedded MySQL Server Library</A></H3>

<P>
<A NAME="IDX1661"></A>
<A NAME="IDX1662"></A>

</P>



<H4><A NAME="libmysqld_overview" HREF="manual_toc.html#libmysqld_overview">8.1.15.1  Overview of the Embedded MySQL Server Library</A></H4>

<P>
The embedded MySQL server library makes it possible to run a
full-featured MySQL server inside the client application.  The
main benefits are increased speed and more simple management for
embedded applications.

</P>
<P>
The API is identical for the embedded MySQL version and the
client/server version.  To change an old threaded application to use the
embedded library, you normally only have to add calls to the following
functions:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Function</STRONG> </TD><TD> <STRONG>When to call</STRONG>
</TD></TR>
<TR><TD><CODE>mysql_server_init()</CODE> </TD><TD> Should be called before any other MySQL function is called, preferably early in the <CODE>main()</CODE> function.
</TD></TR>
<TR><TD><CODE>mysql_server_end()</CODE> </TD><TD> Should be called before your program exits.
</TD></TR>
<TR><TD><CODE>mysql_thread_init()</CODE> </TD><TD> Should be called in each thread you create that will access MySQL.
</TD></TR>
<TR><TD><CODE>mysql_thread_end()</CODE> </TD><TD> Should be called before calling <CODE>pthread_exit()</CODE>
</TD></TR>
</TABLE>

<P>
Then you must link your code with <TT>`libmysqld.a'</TT> instead of <TT>`libmysqlclient.a'</TT>.

</P>
<P>
The above <CODE>mysql_server_xxx</CODE> functions are also included in
<TT>`libmysqlclient.a'</TT> to allow you to change between the embedded and the
client/server version by just linking your application with the right
library. See section <A HREF="manual.html#mysql_server_init">8.1.11.1  <CODE>mysql_server_init()</CODE></A>.

</P>



<H4><A NAME="libmysqld_compiling" HREF="manual_toc.html#libmysqld_compiling">8.1.15.2  Compiling Programs with <CODE>libmysqld</CODE></A></H4>

<P>
To get a <CODE>libmysqld</CODE> library you should configure MySQL with the
<CODE>--with-embedded-server</CODE> option.

</P>
<P>
When you link your program with <CODE>libmysqld</CODE>, you must also include
the system-specific <CODE>pthread</CODE> libraries and some libraries that
the MySQL server uses.  You can get the full list of libraries by executing
<CODE>mysql_config --libmysqld-libs</CODE>.

</P>
<P>
The correct flags for compiling and linking a threaded program
must be used, even if you do not directly call any thread
functions in your code.

</P>


<H4><A NAME="libmysqld_restrictions" HREF="manual_toc.html#libmysqld_restrictions">8.1.15.3  Restrictions when using the Embedded MySQL Server</A></H4>

<P>
The embedded server has the following limitations:

</P>

<UL>
<LI>

No support for ISAM tables. (This is mainly done to make the library smaller)
<LI>

No UDF functions.
<LI>

No stack trace on core dump.
<LI>

No internal RAID support. (This is not normally needed as most OS has
nowadays support for big files).
<LI>

You can set this up as a server or a master (no replication).
<LI>

You can't connect to the embedded server from an outside process with
sockets or TCP/IP.
</UL>

<P>
Some of these limitations can be changed by editing the <TT>`mysql_embed.h'</TT>
include file and recompiling MySQL.

</P>


<H4><A NAME="libmysqld_options" HREF="manual_toc.html#libmysqld_options">8.1.15.4  Using Option Files with the Embedded Server</A></H4>

<P>
<A NAME="IDX1663"></A>

</P>
<P>
The following is the recommended way to use option files to make it easy
to switch between a client/server application and one where MySQL is
embedded. See section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.

</P>

<UL>
<LI>

Put common options in the <CODE>[server]</CODE> section. These will be read by
both MySQL versions.
<LI>

Put client/server-specific options in the <CODE>[mysqld]</CODE> section.
<LI>

Put embedded MySQL-specific options in the <CODE>[embedded]</CODE> section.
<LI>

Put application-specific options in a <CODE>[ApplicationName_SERVER]</CODE>
section.
</UL>



<H4><A NAME="libmysqld_TODO" HREF="manual_toc.html#libmysqld_TODO">8.1.15.5  Things left to do in Embedded Server (TODO)</A></H4>

<P>
<A NAME="IDX1664"></A>

</P>

<UL>
<LI>

We are going to provide options to leave out some parts of MySQL to make
the library smaller.
<LI>

There is still a lot of speed optimisation to do.
<LI>

Errors are written to stderr.  We will add an option to specify a
filename for these.
<LI>

We have to change InnoDB to not be so verbose when using in the embedded
version.
</UL>



<H4><A NAME="libmysqld_example" HREF="manual_toc.html#libmysqld_example">8.1.15.6  A Simple Embedded Server Example</A></H4>

<P>
This example program and makefile should work without any
changes on a Linux or FreeBSD system.  For other operating
systems, minor changes will be needed.  This example is
designed to give enough details to understand the problem,
without the clutter that is a necessary part of a real
application.

</P>
<P>
To try out the example, create an <TT>`test_libmysqld'</TT> directory
at the same level as the mysql-4.0 source directory.  Save
the <TT>`test_libmysqld.c'</TT> source and the <TT>`GNUmakefile'</TT> in the
directory, and run GNU <TT>`make'</TT> from inside the <TT>`test_libmysqld'</TT>
directory.

</P>
<P>
<TT>`test_libmysqld.c'</TT>

<PRE>
/*
 * A simple example client, using the embedded MySQL server library
 */

#include &#60;mysql.h&#62;
#include &#60;stdarg.h&#62;
#include &#60;stdio.h&#62;
#include &#60;stdlib.h&#62;

MYSQL *db_connect(const char *dbname);
void db_disconnect(MYSQL *db);
void db_do_query(MYSQL *db, const char *query);

const char *server_groups[] = {
  "test_libmysqld_SERVER", "embedded", "server", NULL
};

int
main(int argc, char **argv)
{
  MYSQL *one, *two;

  /* mysql_server_init() must be called before any other mysql
   * functions.
   *
   * You can use mysql_server_init(0, NULL, NULL), and it will
   * initialise the server using groups = {
   *   "server", "embedded", NULL
   *  }.
   *
   * In your $HOME/.my.cnf file, you probably want to put:

[test_libmysqld_SERVER]
language = /path/to/source/of/mysql/sql/share/english

   * You could, of course, modify argc and argv before passing
   * them to this function.  Or you could create new ones in any
   * way you like.  But all of the arguments in argv (except for
   * argv[0], which is the program name) should be valid options
   * for the MySQL server.
   *
   * If you link this client against the normal mysqlclient
   * library, this function is just a stub that does nothing.
   */
  mysql_server_init(argc, argv, (char **)server_groups);

  one = db_connect("test");
  two = db_connect(NULL);

  db_do_query(one, "SHOW TABLE STATUS");
  db_do_query(two, "SHOW DATABASES");

  mysql_close(two);
  mysql_close(one);

  /* This must be called after all other mysql functions */
  mysql_server_end();

  exit(EXIT_SUCCESS);
}

static void
die(MYSQL *db, char *fmt, ...)
{
  va_list ap;
  va_start(ap, fmt);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  (void)putc('\n', stderr);
  if (db)
    db_disconnect(db);
  exit(EXIT_FAILURE);
}

MYSQL *
db_connect(const char *dbname)
{
  MYSQL *db = mysql_init(NULL);
  if (!db)
    die(db, "mysql_init failed: no memory");
  /*
   * Notice that the client and server use separate group names.
   * This is critical, because the server will not accept the
   * client's options, and vice versa.
   */
  mysql_options(db, MYSQL_READ_DEFAULT_GROUP, "test_libmysqld_CLIENT");
  if (!mysql_real_connect(db, NULL, NULL, NULL, dbname, 0, NULL, 0))
    die(db, "mysql_real_connect failed: %s", mysql_error(db));

  return db;
}

void
db_disconnect(MYSQL *db)
{
  mysql_close(db);
}

void
db_do_query(MYSQL *db, const char *query)
{
  if (mysql_query(db, query) != 0)
    goto err;

  if (mysql_field_count(db) &#62; 0)
  {
    MYSQL_RES   *res;
    MYSQL_ROW    row, end_row;
    int num_fields;

    if (!(res = mysql_store_result(db)))
      goto err;
    num_fields = mysql_num_fields(res);
    while ((row = mysql_fetch_row(res)))
    {
      (void)fputs("&#62;&#62; ", stdout);
      for (end_row = row + num_fields; row &#60; end_row; ++row)
        (void)printf("%s\t", row ? (char*)*row : "NULL");
      (void)fputc('\n', stdout);
    }
    (void)fputc('\n', stdout);
  }
  else
    (void)printf("Affected rows: %lld\n", mysql_affected_rows(db));

  mysql_free_result(res);

  return;

err:
  die(db, "db_do_query failed: %s [%s]", mysql_error(db), query);
}
</PRE>

<P>
<TT>`GNUmakefile'</TT>

<PRE>
# This assumes the MySQL software is installed in /usr/local/mysql
inc      := /usr/local/mysql/include/mysql
lib      := /usr/local/mysql/lib

# If you have not installed the MySQL software yet, try this instead
#inc      := $(HOME)/mysql-4.0/include
#lib      := $(HOME)/mysql-4.0/libmysqld

CC       := gcc
CPPFLAGS := -I$(inc) -D_THREAD_SAFE -D_REENTRANT
CFLAGS   := -g -W -Wall
LDFLAGS  := -static
# You can change -lmysqld to -lmysqlclient to use the
# client/server library
LDLIBS    = -L$(lib) -lmysqld -lz -lm -lcrypt

ifneq (,$(shell grep FreeBSD /COPYRIGHT 2&#62;/dev/null))
# FreeBSD
LDFLAGS += -pthread
else
# Assume Linux
LDLIBS += -lpthread
endif

# This works for simple one-file test programs
sources := $(wildcard *.c)
objects := $(patsubst %c,%o,$(sources))
targets := $(basename $(sources))

all: $(targets)

clean:
	rm -f $(targets) $(objects) *.core
</PRE>



<H4><A NAME="libmysqld_licensing" HREF="manual_toc.html#libmysqld_licensing">8.1.15.7  Licensing the Embedded Server</A></H4>

<P>
The MySQL source code is covered by the GNU GPL license
(see section <A HREF="manual.html#GPL_license">H  GNU General Public License</A>).  One result of this is that any program
which includes, by linking with <CODE>libmysqld</CODE>, the MySQL
source code must be released as free software (under a license
compatible with the GPL).

</P>
<P>
We encourage everyone to promote free software by releasing
code under the GPL or a compatible license.  For those who
are not able to do this, another option is to purchase a
commercial licence for the MySQL code from MySQL AB.
For details, please see section <A HREF="manual.html#MySQL_licenses">1.4.3  MySQL Licenses</A>.

</P>



<H2><A NAME="ODBC" HREF="manual_toc.html#ODBC">8.2  MySQL ODBC Support</A></H2>

<P>
<A NAME="IDX1665"></A>
<A NAME="IDX1666"></A>
<A NAME="IDX1667"></A>
<A NAME="IDX1668"></A>

</P>

<P>
MySQL provides support for ODBC by means of the <CODE>MyODBC</CODE>
program.  This chapter will teach you how to install <CODE>MyODBC</CODE>,
and how to use it.  Here, you will also find a list of common programs that
are known to work with <CODE>MyODBC</CODE>.

</P>



<H3><A NAME="Installing_MyODBC" HREF="manual_toc.html#Installing_MyODBC">8.2.1  How To Install MyODBC</A></H3>

<P>
<CODE>MyODBC</CODE> 2.50 is a 32-bit ODBC 2.50 specification level 0 (with
level 1 and level 2 features) driver for connecting an ODBC-aware
application to MySQL.  <CODE>MyODBC</CODE> works on Windows 9x/Me/NT/2000/XP
and most Unix platforms.
<CODE>MyODBC</CODE> 3.51 is an enhanced version with ODBC 3.5x specification
level 1 (complete core API + level 2 features).

</P>
<P>
<CODE>MyODBC</CODE> is <CODE>Open Source</CODE>, and you can find the newest
version at <a HREF="http://www.mysql.com/downloads/api-myodbc.html">http://www.mysql.com/downloads/api-myodbc.html</a>.
Please note that the 2.50.x versions are <CODE>LGPL</CODE> licensed,
whereas the 3.51.x versions are <CODE>GPL</CODE> licensed.

</P>
<P>
If you have problem with <CODE>MyODBC</CODE> and your program also works
with OLEDB, you should try the OLEDB driver.

</P>
<P>
Normally you only need to install <CODE>MyODBC</CODE> on Windows machines.
You only need <CODE>MyODBC</CODE> for Unix if you have a program like
ColdFusion that is running on the Unix machine and uses ODBC to connect
to the databases.

</P>
<P>
If you want to install <CODE>MyODBC</CODE> on a Unix box, you will also need
an <CODE>ODBC</CODE> manager.  <CODE>MyODBC</CODE> is known to work with
most of the Unix ODBC managers.

</P>
<P>
To install <CODE>MyODBC</CODE> on Windows, you should download the
appropriate <CODE>MyODBC</CODE> <TT>`.zip'</TT> file,
unpack it with <CODE>WinZIP</CODE> or some similar program,
and execute the <TT>`SETUP.EXE'</TT> file.

</P>
<P>
On Windows/NT/XP you may get the following error when trying to install
<CODE>MyODBC</CODE>:

</P>

<PRE>
An error occurred while copying C:\WINDOWS\SYSTEM\MFC30.DLL. Restart
Windows and try installing again (before running any applications which
use ODBC)
</PRE>

<P>
The problem in this case is that some other program is using ODBC and
because of how Windows is designed, you may not in this case be able to
install a new ODBC drivers with Microsoft's ODBC setup program. In most
cases you can continue by just pressing <CODE>Ignore</CODE> to copy the rest
of the MyODBC files and the final installation should still work.  If
this doesn't work, the solution is to reboot your computer in ``safe
mode`` (Choose this by pressing F8 just before your machine starts
Windows during rebooting), install <CODE>MyODBC</CODE>, and reboot to normal
mode.

</P>

<UL>
<LI>

To make a connection to a Unix box from a Windows box, with an ODBC
application (one that doesn't support MySQL natively), you must
first install <CODE>MyODBC</CODE> on the Windows machine.
<LI>

The user and Windows machine must have the access privileges to the
MySQL server on the Unix machine.  This is set up with the
<CODE>GRANT</CODE> command. See section <A HREF="manual.html#GRANT">4.3.1  <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> Syntax</A>.
<LI>

You must create an ODBC DSN entry as follows:


<UL>
<LI>

Open the Control Panel on the Windows machine.
<LI>

Double-click the ODBC Data Sources 32-bit icon.
<LI>

Click the tab User DSN.
<LI>

Click the button Add.
<LI>

Select MySQL in the screen Create New Data Source and click
the Finish button.
<LI>

The MySQL Driver default configuration screen is shown.
See section <A HREF="manual.html#ODBC_administrator">8.2.2  How to Fill in the Various Fields in the ODBC Administrator Program</A>.
</UL>

<LI>

Now start your application and select the ODBC driver with the DSN you
specified in the ODBC administrator.
</UL>

<P>
Notice that there are other configuration options on the screen of
MySQL (trace, don't prompt on connect, etc) that you can try if
you run into problems.

</P>



<H3><A NAME="ODBC_administrator" HREF="manual_toc.html#ODBC_administrator">8.2.2  How to Fill in the Various Fields in the ODBC Administrator Program</A></H3>

<P>
<A NAME="IDX1669"></A>

</P>
<P>
There are three possibilities for specifying the server name on
Windows95:

</P>

<UL>
<LI>

Use the IP address of the server.
<LI>

Add a file <TT>`\windows\lmhosts'</TT> with the following information:


<PRE>
ip hostname
</PRE>

For example:


<PRE>
194.216.84.21 my_hostname
</PRE>

<LI>

Configure the PC to use DNS.
</UL>

<P>
Example of how to fill in the <CODE>ODBC setup</CODE>:

<PRE>
Windows DSN name:   test
Description:        This is my test database
MySql Database:     test
Server:             194.216.84.21
User:               monty
Password:           my_password
Port:
</PRE>

<P>
The value for the <CODE>Windows DSN name</CODE> field is any name that is unique
in your Windows ODBC setup.

</P>
<P>
You don't have to specify values for the <CODE>Server</CODE>, <CODE>User</CODE>,
<CODE>Password</CODE>, or <CODE>Port</CODE> fields in the ODBC setup screen.
However, if you do, the values will be used as the defaults later when
you attempt to make a connection.  You have the option of changing the
values at that time.

</P>
<P>
If the port number is not given, the default port (3306)
is used.

</P>
<P>
If you specify the option <CODE>Read options from C:\my.cnf</CODE>, the groups
<CODE>client</CODE> and <CODE>odbc</CODE> will be read from the <TT>`C:\my.cnf'</TT> file.
You can use all options that are usable by <CODE>mysql_options()</CODE>.
See section <A HREF="manual.html#mysql_options">8.1.3.163  <CODE>mysql_options()</CODE></A>.

</P>



<H3><A NAME="MyODBC_connect_parameters" HREF="manual_toc.html#MyODBC_connect_parameters">8.2.3  Connect parameters for MyODBC</A></H3>

<P>
One can specify the following parameters for <CODE>MyODBC</CODE> on
the <CODE>[Servername]</CODE> section of an <TT>`ODBC.INI'</TT> file or
through  the <CODE>InConnectionString</CODE> argument in the
<CODE>SQLDriverConnect()</CODE> call.

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Parameter</STRONG> </TD><TD> <STRONG>Default value</STRONG> </TD><TD> <STRONG>Comment</STRONG>
</TD></TR>
<TR><TD>user </TD><TD> ODBC (on Windows) </TD><TD> The username used to connect to MySQL.
</TD></TR>
<TR><TD>server </TD><TD> localhost </TD><TD> The hostname of the MySQL server.
</TD></TR>
<TR><TD>database </TD><TD> </TD><TD> The default database.
</TD></TR>
<TR><TD>option </TD><TD> 0 </TD><TD> A integer by which you can specify how <CODE>MyODBC</CODE> should work. See below.
</TD></TR>
<TR><TD>port </TD><TD> 3306 </TD><TD> The TCP/IP port to use if <CODE>server</CODE> is not <CODE>localhost</CODE>.
</TD></TR>
<TR><TD>stmt </TD><TD> </TD><TD> A statement that will be executed when connecting to <CODE>MySQL</CODE>.
</TD></TR>
<TR><TD>password </TD><TD> </TD><TD> The password for the <CODE>server</CODE> <CODE>user</CODE> combination.
</TD></TR>
<TR><TD>socket </TD><TD> </TD><TD> The socket or Windows pipe to connect to.
</TD></TR>
</TABLE>

<P>
The option argument is used to tell <CODE>MyODBC</CODE> that the client isn't 100%
ODBC compliant. On Windows, one normally sets the option flag by
toggling the different options on the connection screen but one can also
set this in the opton argument. The following options are listed in the
same order as they appear in the <CODE>MyODBC</CODE> connect screen:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Bit</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD>1 </TD><TD> The client can't handle that <CODE>MyODBC</CODE> returns the real width of a column.
</TD></TR>
<TR><TD>2 </TD><TD> The client can't handle that MySQL returns the true value of affected rows.  If this flag is set then MySQL returns 'found rows' instead.  One must have MySQL 3.21.14 or newer to get this to work.
</TD></TR>
<TR><TD>4 </TD><TD> Make a debug log in c:\myodbc.log.  This is the same as putting <CODE>MYSQL_DEBUG=d:t:O,c::\myodbc.log</CODE> in <TT>`AUTOEXEC.BAT'</TT>
</TD></TR>
<TR><TD>8 </TD><TD> Don't set any packet limit for results and parameters.
</TD></TR>
<TR><TD>16 </TD><TD> Don't prompt for questions even if driver would like to prompt
</TD></TR>
<TR><TD>32 </TD><TD> Simulate a ODBC 1.0 driver in some context.
</TD></TR>
<TR><TD>64 </TD><TD> Ignore use of database name in 'database.table.column'.
</TD></TR>
<TR><TD>128 </TD><TD> Force use of ODBC manager cursors (experimental).
</TD></TR>
<TR><TD>256 </TD><TD> Disable the use of extended fetch (experimental).
</TD></TR>
<TR><TD>512 </TD><TD> Pad CHAR fields to full column length.
</TD></TR>
<TR><TD>1024 </TD><TD> SQLDescribeCol() will return fully qualifed column names
</TD></TR>
<TR><TD>2048 </TD><TD> Use the compressed server/client protocol
</TD></TR>
<TR><TD>4096 </TD><TD> Tell server to ignore space after function name and before <CODE>'('</CODE> (needed by PowerBuilder).  This will make all function names keywords!
</TD></TR>
<TR><TD>8192 </TD><TD> Connect with named pipes to a <CODE>mysqld</CODE> server running on NT.
</TD></TR>
<TR><TD>16384 </TD><TD> Change LONGLONG columns to INT columns (some applications can't handle LONGLONG).
</TD></TR>
<TR><TD>32768 </TD><TD> Return 'user' as Table_qualifier and Table_owner from SQLTables (experimental)
</TD></TR>
<TR><TD>65536 </TD><TD> Read parameters from the <CODE>client</CODE> and <CODE>odbc</CODE> groups from <TT>`my.cnf'</TT>
</TD></TR>
<TR><TD>131072 </TD><TD> Add some extra safety checks (should not bee needed but...)
</TD></TR>
</TABLE>

<P>
If you want to have many options, you should add the above flags!  For
example setting option to 12 (4+8) gives you debugging without package
limits!

</P>
<P>
The default <TT>`MYODBC.DLL'</TT> is compiled for optimal performance.  If
you want to debug <CODE>MyODBC</CODE> (for example to enable tracing),
you should instead use <TT>`MYODBCD.DLL'</TT>.  To install this file, copy
<TT>`MYODBCD.DLL'</TT> over the installed <TT>`MYODBC.DLL'</TT> file.

</P>



<H3><A NAME="ODBC_Problems" HREF="manual_toc.html#ODBC_Problems">8.2.4  How to Report Problems with MyODBC</A></H3>

<P>
<CODE>MyODBC</CODE> has been tested with Access, Admndemo.exe, C++-Builder,
Borland Builder 4, Centura Team Developer (formerly Gupta SQL/Windows),
ColdFusion (on Solaris and NT with svc pack 5), Crystal Reports,
DataJunction, Delphi, ERwin, Excel, iHTML, FileMaker Pro, FoxPro, Notes
4.5/4.6, SBSS, Perl DBD-ODBC, Paradox, Powerbuilder, Powerdesigner 32
bit, VC++, and Visual Basic.

</P>
<P>
If you know of any other applications that work with <CODE>MyODBC</CODE>, please
send mail to <a HREF="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a> about this!

</P>
<P>
With some programs you may get an error like:
<CODE>Another user has modifies the record that you have modified</CODE>. In most
cases this can be solved by doing one of the following things:

</P>

<UL>
<LI>

Add a primary key for the table if there isn't one already.
<LI>

Add a timestamp column if there isn't one already.
<LI>

Only use double float fields. Some programs may fail when they compare
single floats.
</UL>

<P>
If the above doesn't help, you should do a <CODE>MyODBC</CODE> trace file and
try to figure out why things go wrong.

</P>



<H3><A NAME="MyODBC_clients" HREF="manual_toc.html#MyODBC_clients">8.2.5  Programs Known to Work with MyODBC</A></H3>

<P>
Most programs should work with <CODE>MyODBC</CODE>, but for each of those
listed here, we have tested it ourselves or received confirmation from
some user that it works:

</P>
<DL COMPACT>

<DT><STRONG>Program</STRONG>
<DD>
<STRONG>Comment</STRONG>
<A NAME="IDX1670"></A>

<DT>Access
<DD>
To make Access work:

<UL>
<LI>

If you are using Access 2000, you should get and install the newest
(version 2.6 or above) Microsoft MDAC (<CODE>Microsoft Data Access
Components</CODE>) from <a HREF="http://www.microsoft.com/data/">http://www.microsoft.com/data/</a>.  This will fix
the following bug in Access: when you export data to MySQL, the
table and column names aren't specified.  Another way to around this bug
is to upgrade to MyODBC Version 2.50.33 and MySQL Version
3.23.x, which together provide a workaround for this bug!

You should also get and apply the Microsoft Jet 4.0 Service Pack 5 (SP5)
which can be found here
<a HREF="http://support.microsoft.com/support/kb/articles/Q%20239/1/14.ASP">http://support.microsoft.com/support/kb/articles/Q 239/1/14.ASP</a>.
This will fix some cases where columns are marked as <CODE>#deleted#</CODE>
in Access.

Note that if you are using MySQL Version 3.22, you must to apply the
MDAC patch and use MyODBC 2.50.32 or 2.50.34 and above to go around
this problem.
<LI>

For all Access versions, you should enable the MyODBC option flag
<CODE>Return matching rows</CODE>. For Access 2.0, you should additionally enable
<CODE>Simulate ODBC 1.0</CODE>.
<LI>

You should have a timestamp in all tables you want to be able to update.
For maximum portability <CODE>TIMESTAMP(14)</CODE> or simple <CODE>TIMESTAMP</CODE>
is recommended instead of other <CODE>TIMESTAMP(X)</CODE> variations.
<LI>

You should have a primary key in the table. If not, new or updated rows
may show up as <CODE>#DELETED#</CODE>.
<LI>

Only use <CODE>DOUBLE</CODE> float fields. Access fails when comparing with
single floats.  The symptom usually is that new or updated rows may show
up as <CODE>#DELETED#</CODE> or that you can't find or update rows.
<LI>

If you are linking a table through MyODBC, which has <CODE>BIGINT</CODE> as
one of the column, then the results will be displayed as <CODE>#DELETED</CODE>. The
work around solution is:

<UL>
<LI>

Have one more dummy column with <CODE>TIMESTAMP</CODE> as the data type, preferably
<CODE>TIMESTAMP(14)</CODE>.
<LI>

Check the <CODE>'Change BIGINT columns to INT'</CODE> in connection options dialog in
ODBC DSN Administrator
<LI>

Delete the table link from access and re-create it.
</UL>

It still displays the previous records as <CODE>#DELETED#</CODE>, but newly
added/updated records will be displayed properly.
<LI>

If you still get the error <CODE>Another user has changed your data</CODE> after
adding a <CODE>TIMESTAMP</CODE> column, the following trick may help you:

Don't use <CODE>table</CODE> data sheet view. Create instead a form with the
fields you want, and use that <CODE>form</CODE> data sheet view.  You should
set the <CODE>DefaultValue</CODE> property for the <CODE>TIMESTAMP</CODE> column to
<CODE>NOW()</CODE>.  It may be a good idea to hide the <CODE>TIMESTAMP</CODE> column
from view so your users are not confused.
<LI>

In some cases, Access may generate illegal SQL queries that
MySQL can't understand. You can fix this by selecting
<CODE>"Query|SQLSpecific|Pass-Through"</CODE> from the Access menu.
<LI>

Access on NT will report <CODE>BLOB</CODE> columns as <CODE>OLE OBJECTS</CODE>. If
you want to have <CODE>MEMO</CODE> columns instead, you should change the
column to <CODE>TEXT</CODE> with <CODE>ALTER TABLE</CODE>.
<LI>

Access can't always handle <CODE>DATE</CODE> columns properly. If you have a problem
with these, change the columns to <CODE>DATETIME</CODE>.
<LI>

If you have in Access a column defined as <CODE>BYTE</CODE>, Access will try
to export this as <CODE>TINYINT</CODE> instead of <CODE>TINYINT UNSIGNED</CODE>.
This will give you problems if you have values &#62; 127 in the column!
</UL>

<A NAME="IDX1671"></A>
<DT>ADO
<DD>
When you are coding with the ADO API and <CODE>MyODBC</CODE> you need to put
attention in some default properties that aren't supported by the
MySQL server.  For example, using the <CODE>CursorLocation
Property</CODE> as <CODE>adUseServer</CODE> will return for the <CODE>RecordCount
Property</CODE> a result of -1. To have the right value, you need to set this
property to <CODE>adUseClient</CODE>, like is showing in the VB code here:


<PRE>
Dim myconn As New ADODB.Connection
Dim myrs As New Recordset
Dim mySQL As String
Dim myrows As Long

myconn.Open "DSN=MyODBCsample"
mySQL = "SELECT * from user"
myrs.Source = mySQL
Set myrs.ActiveConnection = myconn
myrs.CursorLocation = adUseClient
myrs.Open
myrows = myrs.RecordCount

myrs.Close
myconn.Close
</PRE>

Another workaround is to use a <CODE>SELECT COUNT(*)</CODE> statement
for a similar query to get the correct row count.

<DT>Active server pages (ASP)
<DD>
You should use the option flag <CODE>Return matching rows</CODE>.

<DT>BDE applications
<DD>
To get these to work, you should set the option flags
<CODE>Don't optimize column widths</CODE> and <CODE>Return matching rows</CODE>.

<A NAME="IDX1672"></A>
<DT>Borland Builder 4
<DD>
When you start a query you can use the property <CODE>Active</CODE> or use the
method <CODE>Open</CODE>.  Note that <CODE>Active</CODE> will start by automatically
issuing a <CODE>SELECT * FROM ...</CODE> query that may not be a good thing if
your tables are big!
<DT>ColdFusion (On Unix)
<DD>
The following information is taken from the ColdFusion documentation:

Use the following information to configure ColdFusion Server for Linux
to use the unixODBC driver with <CODE>MyODBC</CODE> for MySQL data
sources.  Allaire has verified that <CODE>MyODBC</CODE> Version 2.50.26
works with MySQL Version 3.22.27 and ColdFusion for Linux. (Any
newer version should also work.) You can download <CODE>MyODBC</CODE> at
<a HREF="http://www.mysql.com/downloads/api-myodbc.html">http://www.mysql.com/downloads/api-myodbc.html</a>

<A NAME="IDX1673"></A>
ColdFusion Version 4.5.1 allows you to us the ColdFusion Administrator
to add the MySQL data source. However, the driver is not
included with ColdFusion Version 4.5.1. Before the MySQL driver
will appear in the ODBC datasources drop-down list, you must build and
copy the <CODE>MyODBC</CODE> driver to
<TT>`/opt/coldfusion/lib/libmyodbc.so'</TT>.

The Contrib directory contains the program <TT>`mydsn-xxx.zip'</TT> which allows
you to build and remove the DSN registry file for the MyODBC driver
on Coldfusion applications.

<A NAME="IDX1674"></A>
<DT>DataJunction
<DD>
You have to change it to output <CODE>VARCHAR</CODE> rather than <CODE>ENUM</CODE>, as
it exports the latter in a manner that causes MySQL grief.
<A NAME="IDX1675"></A>
<DT>Excel
<DD>
Works. A few tips:

<UL>
<LI>

If you have problems with dates, try to select them as strings using the
<CODE>CONCAT()</CODE> function. For example:

<PRE>
select CONCAT(rise_time), CONCAT(set_time)
    from sunrise_sunset;
</PRE>

Values retrieved as strings this way should be correctly recognised
as time values by Excel97.

The purpose of <CODE>CONCAT()</CODE> in this example is to fool ODBC into thinking
the column is of ``string type''. Without the <CODE>CONCAT()</CODE>, ODBC knows the
column is of time type, and Excel does not understand that.

Note that this is a bug in Excel, because it automatically converts a
string to a time. This would be great if the source was a text file, but
is plain stupid when the source is an ODBC connection that reports
exact types for each column.
</UL>

<A NAME="IDX1676"></A>
<DT>Word
<DD>
To retrieve data from MySQL to Word/Excel documents, you need to
use the <CODE>MyODBC</CODE> driver and the Add-in Microsoft Query help.

For example, create a db with a table containing 2 columns of text:


<UL>
<LI>

Insert rows using the <CODE>mysql</CODE> client command-line tool.
<LI>

Create a DSN file using the ODBC manager, for example, <TT>`my'</TT> for the db above.
<LI>

Open the Word application.
<LI>

Create a blank new documentation.
<LI>

Using the tool bar called Database, press the button insert database.
<LI>

Press the button Get Data.
<LI>

At the right hand of the screen Get Data, press the button Ms Query.
<LI>

In the Ms Query create a New Data Source using the DSN file my.
<LI>

Select the new query.
<LI>

Select the columns that you want.
<LI>

Make a filter if you want.
<LI>

Make a Sort if you want.
<LI>

Select Return Data to Microsoft Word.
<LI>

Click Finish.
<LI>

Click Insert data and select the records.
<LI>

Click OK and you see the rows in your Word document.
</UL>

<A NAME="IDX1677"></A>
<DT>odbcadmin
<DD>
Test program for ODBC.
<A NAME="IDX1678"></A>
<DT>Delphi
<DD>
You must use BDE Version 3.2 or newer.  Set the <CODE>Don't optimize column width</CODE>
option field when connecting to MySQL.

Also, here is some potentially useful Delphi code that sets up both an
ODBC entry and a BDE entry for <CODE>MyODBC</CODE> (the BDE entry requires a BDE
Alias Editor that is free at a Delphi Super Page near
you. (Thanks to Bryan Brunton <a HREF="mailto:bryan@flesherfab.com">bryan@flesherfab.com</a> for this):


<PRE>
fReg:= TRegistry.Create;
  fReg.OpenKey('\Software\ODBC\ODBC.INI\DocumentsFab', True);
  fReg.WriteString('Database', 'Documents');
  fReg.WriteString('Description', ' ');
  fReg.WriteString('Driver', 'C:\WINNT\System32\myodbc.dll');
  fReg.WriteString('Flag', '1');
  fReg.WriteString('Password', '');
  fReg.WriteString('Port', ' ');
  fReg.WriteString('Server', 'xmark');
  fReg.WriteString('User', 'winuser');
  fReg.OpenKey('\Software\ODBC\ODBC.INI\ODBC Data Sources', True);
  fReg.WriteString('DocumentsFab', 'MySQL');
  fReg.CloseKey;
  fReg.Free;

  Memo1.Lines.Add('DATABASE NAME=');
  Memo1.Lines.Add('USER NAME=');
  Memo1.Lines.Add('ODBC DSN=DocumentsFab');
  Memo1.Lines.Add('OPEN MODE=READ/WRITE');
  Memo1.Lines.Add('BATCH COUNT=200');
  Memo1.Lines.Add('LANGDRIVER=');
  Memo1.Lines.Add('MAX ROWS=-1');
  Memo1.Lines.Add('SCHEMA CACHE DIR=');
  Memo1.Lines.Add('SCHEMA CACHE SIZE=8');
  Memo1.Lines.Add('SCHEMA CACHE TIME=-1');
  Memo1.Lines.Add('SQLPASSTHRU MODE=SHARED AUTOCOMMIT');
  Memo1.Lines.Add('SQLQRYMODE=');
  Memo1.Lines.Add('ENABLE SCHEMA CACHE=FALSE');
  Memo1.Lines.Add('ENABLE BCD=FALSE');
  Memo1.Lines.Add('ROWSET SIZE=20');
  Memo1.Lines.Add('BLOBS TO CACHE=64');
  Memo1.Lines.Add('BLOB SIZE=32');

  AliasEditor.Add('DocumentsFab','MySQL',Memo1.Lines);
</PRE>

<A NAME="IDX1679"></A>
<DT>C++ Builder
<DD>
Tested with BDE Version 3.0. The only known problem is that when the table
schema changes, query fields are not updated. BDE, however, does not seem
to recognise primary keys, only the index PRIMARY, though this has not
been a problem.

<DT>Vision
<DD>
You should use the option flag <CODE>Return matching rows</CODE>.

<A NAME="IDX1680"></A>
<DT>Visual Basic
<DD>
To be able to update a table, you must define a primary key for the table.

Visual Basic with ADO can't handle big integers. This means that some queries
like <CODE>SHOW PROCESSLIST</CODE> will not work properly.  The fix is to set
the option <CODE>OPTION=16384</CODE> in the ODBC connect string or to set
the <CODE>Change BIGINT columns to INT</CODE> option in the MyODBC connect screen.
You may also want to set the <CODE>Return matching rows</CODE> option.

<DT>VisualInterDev
<DD>
If you get the error <CODE>[Microsoft][ODBC Driver Manager] Driver does
not support this parameter</CODE> the reason may be that you have a
<CODE>BIGINT</CODE> in your result.  Try setting the <CODE>Change BIGINT
columns to INT</CODE> option in the MyODBC connect screen.

<DT>Visual Objects
<DD>
You should use the option flag <CODE>Don't optimize column widths</CODE>.
</DL>



<H3><A NAME="ODBC_and_last_insert_id" HREF="manual_toc.html#ODBC_and_last_insert_id">8.2.6  How to Get the Value of an <CODE>AUTO_INCREMENT</CODE> Column in ODBC</A></H3>

<P>
<A NAME="IDX1681"></A>

</P>
<P>
A common problem is how to get the value of an automatically generated ID
from an <CODE>INSERT</CODE>. With ODBC, you can do something like this (assuming
that <CODE>auto</CODE> is an <CODE>AUTO_INCREMENT</CODE> field):

</P>

<PRE>
INSERT INTO foo (auto,text) VALUES(NULL,'text');
SELECT LAST_INSERT_ID();
</PRE>

<P>
Or, if you are just going to insert the ID into another table, you can do this:

</P>

<PRE>
INSERT INTO foo (auto,text) VALUES(NULL,'text');
INSERT INTO foo2 (id,text) VALUES(LAST_INSERT_ID(),'text');
</PRE>

<P>
See section <A HREF="manual.html#Getting_unique_ID">8.1.12.3  How Can I Get the Unique ID for the Last Inserted Row?</A>.

</P>
<P>
For the benefit of some ODBC applications (at least Delphi and Access),
the following query can be used to find a newly inserted row:

<PRE>
SELECT * FROM tbl_name WHERE auto IS NULL;
</PRE>



<H3><A NAME="MyODBC_bug_report" HREF="manual_toc.html#MyODBC_bug_report">8.2.7  Reporting Problems with MyODBC</A></H3>

<P>
<A NAME="IDX1682"></A>
<A NAME="IDX1683"></A>
<A NAME="IDX1684"></A>

</P>
<P>
If you encounter difficulties with <CODE>MyODBC</CODE>, you should start by
making a log file from the ODBC manager (the log you get when requesting
logs from ODBCADMIN) and a <CODE>MyODBC</CODE> log.

</P>
<P>
To get a <CODE>MyODBC</CODE> log, you need to do the following:

</P>

<OL>
<LI>

Ensure that you are using <TT>`myodbcd.dll'</TT> and not <TT>`myodbc.dll'</TT>.
The easiest way to do this is to get <TT>`myodbcd.dll'</TT> from the MyODBC
distribution and copy it over the <TT>`myodbc.dll'</TT>, which is probably
in your <TT>`C:\windows\system32'</TT> or <TT>`C:\winnt\system32'</TT> directory.

Note that you probably want to restore the old myodbc.dll file when you
have finished testing, as this is a lot faster than <TT>`myodbcd.dll'</TT>.
<LI>

Tag the `Trace MyODBC' option flag in the <CODE>MyODBC</CODE> connect/configure
screen.  The log will be written to file <TT>`C:\myodbc.log'</TT>.

If the trace option is not remembered when you are going back to the
above screen, it means that you are not using the <CODE>myodbcd.dll</CODE>
driver (see the item above).
<LI>

Start your application and try to get it to fail.
</OL>

<P>
Check the <CODE>MyODBC trace file</CODE>, to find out what could be wrong.
You should be able to find out the issued queries by searching after
the string <CODE>&#62;mysql_real_query</CODE> in the <TT>`myodbc.log'</TT> file.

</P>
<P>
You should also try duplicating the queries in the <CODE>mysql</CODE> monitor
or <CODE>admndemo</CODE> to find out if the error is MyODBC or MySQL.

</P>
<P>
If you find out something is wrong, please only send the relevant rows
(max 40 rows) to <a HREF="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a>.  Please never
send the whole MyODBC or ODBC log file!

</P>
<P>
If you are unable to find out what's wrong, the last option is to
make an archive (tar or zip) that contains a MyODBC trace file, the ODBC
log file, and a README file that explains the problem.  You can send this
to <a HREF="ftp://support.mysql.com/pub/mysql/secret/">ftp://support.mysql.com/pub/mysql/secret/</a>.  Only we at
MySQL AB will have access to the files you upload, and we will
be very discrete with the data!

</P>
<P>
If you can create a program that also shows this problem, please
upload this too!

</P>
<P>
If the program works with some other SQL server, you should make an ODBC log
file where you do exactly the same thing in the other SQL server.

</P>
<P>
Remember that the more information you can supply to us, the more
likely it is that we can fix the problem!

</P>



<H2><A NAME="Java" HREF="manual_toc.html#Java">8.3  MySQL Java Connectivity (JDBC)</A></H2>

<P>
<A NAME="IDX1685"></A>
<A NAME="IDX1686"></A>
<A NAME="IDX1687"></A>

</P>
<P>
There are 2 supported JDBC drivers for MySQL:

</P>

<UL>
<LI>

<CODE>MySQL Connector/J</CODE> from MySQL AB, implemented in 100% native Java.
This product was formerly known as the <CODE>mm.mysql</CODE> driver.
You can download <CODE>MySQL Connector/J</CODE> from
<a HREF="http://www.mysql.com/products/connector-j/">http://www.mysql.com/products/connector-j/</a>.
<LI>

The Resin JDBC driver, which can be found at
<a HREF="http://www.caucho.com/projects/jdbc-mysql/index.xtp">http://www.caucho.com/projects/jdbc-mysql/index.xtp</a>.
</UL>

<P>
For documentation, consult any JDBC documentation, plus each driver's
own documentation for MySQL-specific features.

</P>



<H2><A NAME="PHP" HREF="manual_toc.html#PHP">8.4  MySQL PHP API</A></H2>

<P>
<A NAME="IDX1688"></A>

</P>
<P>
PHP is a server-side, HTML-embedded scripting language that may be used to
create dynamic web pages.  It contains support for accessing several
databases, including MySQL.  PHP may be run as a separate program
or compiled as a module for use with the Apache web server.

</P>
<P>
The distribution and documentation are available at the PHP web site
(<a HREF="http://www.php.net/">http://www.php.net/</a>).

</P>



<H3><A NAME="PHP_problems" HREF="manual_toc.html#PHP_problems">8.4.1  Common Problems with MySQL and PHP</A></H3>


<UL>
<LI>Error: "Maximum Execution Time Exceeded"

This is a PHP limit; go into the <TT>`php3.ini'</TT> file and set the maximum
execution time up from 30 seconds to something higher, as needed.
It is also not a bad idea to double the ram allowed per script to 16MB instead of
8 MB.
<LI>Error: "Fatal error: Call to unsupported or undefined function mysql_connect() in .."

This means that your PHP version isn't compiled with MySQL support.
You can either compile a dynamic MySQL module and load it into PHP or
recompile PHP with built-in MySQL support.  This is described in
detail in the PHP manual.
<LI>Error: "undefined reference to `uncompress'"

This means that the client library is compiled with support for a compressed
client/server protocol. The fix is to add <CODE>-lz</CODE> last when linking
with <CODE>-lmysqlclient</CODE>.
</UL>



<H2><A NAME="Perl" HREF="manual_toc.html#Perl">8.5  MySQL Perl API</A></H2>

<P>
<A NAME="IDX1689"></A>
<A NAME="IDX1690"></A>

</P>
<P>
This section documents the Perl <CODE>DBI</CODE> interface.  The former interface
was called <CODE>mysqlperl</CODE>.  <CODE>DBI</CODE>/<CODE>DBD</CODE> now is the
recommended Perl interface, so <CODE>mysqlperl</CODE> is obsolete and is not
documented here.

</P>



<H3><A NAME="DBI_with_DBD" HREF="manual_toc.html#DBI_with_DBD">8.5.1  <CODE>DBI</CODE> with <CODE>DBD::mysql</CODE></A></H3>

<P>
<A NAME="IDX1691"></A>

</P>
<P>
<CODE>DBI</CODE> is a generic interface for many databases. That means that
you can write a script that works with many different database engines
without change. You need a DataBase Driver (DBD) defined for each
database type. For MySQL, this driver is called
<CODE>DBD::mysql</CODE>.

</P>
<P>
For more information on the Perl5 DBI, please visit the <CODE>DBI</CODE> web
page and read the documentation:

<PRE>
<a HREF="http://dbi.perl.org/">http://dbi.perl.org/</a>
</PRE>

<P>
For more information on Object Oriented Programming
(OOP) as defined in Perl5, see the Perl OOP page:

<PRE>
<a HREF="http://language.perl.com/info/documentation.html">http://language.perl.com/info/documentation.html</a>
</PRE>

<P>
Note that if you want to use transactions with Perl, you need to have
<CODE>Msql-Mysql-modules</CODE> version 1.2216 or newer.

</P>
<P>
The recommended Perl module is <CODE>DBD-mysql-2.1022</CODE> or newer.

</P>
<P>
Installation instructions for MySQL Perl support are given in
section <A HREF="manual.html#Perl_support">2.7  Perl Installation Comments</A>.

</P>
<P>
If you have the MySQL module installed, you can find information about
specific MySQL functionallity with one of the following command

</P>

<PRE>
shell&#62; <CODE>perldoc DBD/mysql</CODE>
shell&#62; <CODE>perldoc mysql</CODE>
</PRE>



<H3><A NAME="Perl_DBI_Class" HREF="manual_toc.html#Perl_DBI_Class">8.5.2  The <CODE>DBI</CODE> Interface</A></H3>

<P>
<A NAME="IDX1692"></A>

</P>
<P>
<STRONG>Portable DBI Methods</STRONG>

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Method</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>connect</CODE> </TD><TD> Establishes a connection to a database server.
</TD></TR>
<TR><TD><CODE>disconnect</CODE> </TD><TD> Disconnects from the database server.
</TD></TR>
<TR><TD><CODE>prepare</CODE> </TD><TD> Prepares a SQL statement for execution.
</TD></TR>
<TR><TD><CODE>execute</CODE> </TD><TD> Executes prepared statements.
</TD></TR>
<TR><TD><CODE>do</CODE> </TD><TD> Prepares and executes a SQL statement.
</TD></TR>
<TR><TD><CODE>quote</CODE> </TD><TD> Quotes string or <CODE>BLOB</CODE> values to be inserted.
</TD></TR>
<TR><TD><CODE>fetchrow_array</CODE> </TD><TD> Fetches the next row as an array of fields.
</TD></TR>
<TR><TD><CODE>fetchrow_arrayref</CODE> </TD><TD> Fetches next row as a reference array of fields.
</TD></TR>
<TR><TD><CODE>fetchrow_hashref</CODE> </TD><TD> Fetches next row as a reference to a hashtable.
</TD></TR>
<TR><TD><CODE>fetchall_arrayref</CODE> </TD><TD> Fetches all data as an array of arrays.
</TD></TR>
<TR><TD><CODE>finish</CODE> </TD><TD> Finishes a statement and lets the system free resources.
</TD></TR>
<TR><TD><CODE>rows</CODE> </TD><TD> Returns the number of rows affected.
</TD></TR>
<TR><TD><CODE>data_sources</CODE> </TD><TD> Returns an array of databases available on localhost.
</TD></TR>
<TR><TD><CODE>ChopBlanks</CODE> </TD><TD> Controls whether <CODE>fetchrow_*</CODE> methods trim spaces.
</TD></TR>
<TR><TD><CODE>NUM_OF_PARAMS</CODE> </TD><TD> The number of placeholders in the prepared statement.
</TD></TR>
<TR><TD><CODE>NULLABLE</CODE> </TD><TD> Which columns can be <CODE>NULL</CODE>.
</TD></TR>
<TR><TD><CODE>trace</CODE> </TD><TD> Perform tracing for debugging.
</TD></TR>
</TABLE>

<P>
<STRONG>MySQL-specific Methods</STRONG>

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Method</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>insertid</CODE> </TD><TD> The latest <CODE>AUTO_INCREMENT</CODE> value.
</TD></TR>
<TR><TD><CODE>is_blob</CODE> </TD><TD> Which columns are <CODE>BLOB</CODE> values.
</TD></TR>
<TR><TD><CODE>is_key</CODE> </TD><TD> Which columns are keys.
</TD></TR>
<TR><TD><CODE>is_num</CODE> </TD><TD> Which columns are numeric.
</TD></TR>
<TR><TD><CODE>is_pri_key</CODE> </TD><TD> Which columns are primary keys.
</TD></TR>
<TR><TD><CODE>is_not_null</CODE> </TD><TD> Which columns CANNOT be <CODE>NULL</CODE>. See <CODE>NULLABLE</CODE>.
</TD></TR>
<TR><TD><CODE>length</CODE> </TD><TD> Maximum possible column sizes.
</TD></TR>
<TR><TD><CODE>max_length</CODE> </TD><TD> Maximum column sizes actually present in result.
</TD></TR>
<TR><TD><CODE>NAME</CODE> </TD><TD> Column names.
</TD></TR>
<TR><TD><CODE>NUM_OF_FIELDS</CODE> </TD><TD> Number of fields returned.
</TD></TR>
<TR><TD><CODE>table</CODE> </TD><TD> Table names in returned set.
</TD></TR>
<TR><TD><CODE>type</CODE> </TD><TD> All column types.
</TD></TR>
</TABLE>

<P>
The Perl methods are described in more detail in the following sections.
Variables used for method return values have these meanings:

</P>
<DL COMPACT>

<DT><CODE>$dbh</CODE>
<DD>
Database handle

<DT><CODE>$sth</CODE>
<DD>
Statement handle

<DT><CODE>$rc</CODE>
<DD>
Return code (often a status)

<DT><CODE>$rv</CODE>
<DD>
Return value (often a row count)
</DL>

<P>
<STRONG>Portable DBI Methods</STRONG>

</P>
<DL COMPACT>

<DT><CODE>connect($data_source, $username, $password)</CODE>
<DD>
<A NAME="IDX1693"></A>
 <A NAME="IDX1694"></A>
 
Use the <CODE>connect</CODE> method to make a database connection to the data
source. The <CODE>$data_source</CODE> value should begin with
<CODE>DBI:driver_name:</CODE>.
Example uses of <CODE>connect</CODE> with the <CODE>DBD::mysql</CODE> driver:

<PRE>
$dbh = DBI-&#62;connect("DBI:mysql:$database", $user, $password);
$dbh = DBI-&#62;connect("DBI:mysql:$database:$hostname",
                    $user, $password);
$dbh = DBI-&#62;connect("DBI:mysql:$database:$hostname:$port",
                    $user, $password);
</PRE>

If the user name and/or password are undefined, <CODE>DBI</CODE> uses the
values of the <CODE>DBI_USER</CODE> and <CODE>DBI_PASS</CODE> environment variables,
respectively. If you don't specify a hostname, it defaults to
<CODE>'localhost'</CODE>. If you don't specify a port number, it defaults to the
default MySQL port (3306).

As of <CODE>Msql-Mysql-modules</CODE> Version 1.2009,
the <CODE>$data_source</CODE> value allows certain modifiers:

<DL COMPACT>

<DT><CODE>mysql_read_default_file=file_name</CODE>
<DD>
Read <TT>`filename'</TT> as an option file.  For information on option files,
see section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.

<DT><CODE>mysql_read_default_group=group_name</CODE>
<DD>
The default group when reading an option file is normally the
<CODE>[client]</CODE> group.  By specifying the <CODE>mysql_read_default_group</CODE>
option, the default group becomes the <CODE>[group_name]</CODE> group.

<DT><CODE>mysql_compression=1</CODE>
<DD>
Use compressed communication between the client and server (MySQL
Version 3.22.3 or later).

<DT><CODE>mysql_socket=/path/to/socket</CODE>
<DD>
Specify the pathname of the Unix socket that is used to connect
to the server (MySQL Version 3.21.15 or later).
</DL>

Multiple modifiers may be given; each must be preceded by a semicolon.

For example, if you want to avoid hardcoding the user name and password into
a <CODE>DBI</CODE> script, you can take them from the user's <TT>`~/.my.cnf'</TT>
option file instead by writing your <CODE>connect</CODE> call like this:


<PRE>
$dbh = DBI-&#62;connect("DBI:mysql:$database"
                . ";mysql_read_default_file=$ENV{HOME}/.my.cnf",
                $user, $password);
</PRE>

This call will read options defined for the <CODE>[client]</CODE> group in the
option file.  If you wanted to do the same thing but use options specified
for the <CODE>[perl]</CODE> group as well, you could use this:


<PRE>
$dbh = DBI-&#62;connect("DBI:mysql:$database"
                . ";mysql_read_default_file=$ENV{HOME}/.my.cnf"
                . ";mysql_read_default_group=perl",
                $user, $password);
</PRE>

<A NAME="IDX1695"></A>
<A NAME="IDX1696"></A>
<DT><CODE>disconnect</CODE>
<DD>
The <CODE>disconnect</CODE> method disconnects the database handle from the database.
This is typically called right before you exit from the program.
Example:

<PRE>
$rc = $dbh-&#62;disconnect;
</PRE>

<A NAME="IDX1697"></A>
<A NAME="IDX1698"></A>
<DT><CODE>prepare($statement)</CODE>
<DD>
Prepares a SQL statement for execution by the database engine
and returns a statement handle <CODE>($sth)</CODE>, which you can use to invoke
the <CODE>execute</CODE> method.

Typically you handle <CODE>SELECT</CODE> statements (and <CODE>SELECT</CODE>-like
statements such as <CODE>SHOW</CODE>, <CODE>DESCRIBE</CODE>, and <CODE>EXPLAIN</CODE>) by
means of <CODE>prepare</CODE> and <CODE>execute</CODE>.  Example:


<PRE>
$sth = $dbh-&#62;prepare($statement)
    or die "Can't prepare $statement: $dbh-&#62;errstr\n";
</PRE>

If you want to read big results to your client you can tell Perl to use
<CODE>mysql_use_result()</CODE> with:


<PRE>
my $sth = $dbh-&#62;prepare($statement { "mysql_use_result" =&#62; 1});
</PRE>

<A NAME="IDX1699"></A>
<A NAME="IDX1700"></A>
<DT><CODE>execute</CODE>
<DD>
The <CODE>execute</CODE> method executes a prepared statement. For
non-<CODE>SELECT</CODE> statements, <CODE>execute</CODE> returns the number of rows
affected.  If no rows are affected, <CODE>execute</CODE> returns <CODE>"0E0"</CODE>,
which Perl treats as zero but regards as true. If an error occurs,
<CODE>execute</CODE> returns <CODE>undef</CODE>. For <CODE>SELECT</CODE> statements,
<CODE>execute</CODE> only starts the SQL query in the database; you need to use one
of the <CODE>fetch_*</CODE> methods described here to retrieve the data.
Example:

<PRE>
$rv = $sth-&#62;execute
          or die "can't execute the query: $sth-&#62;errstr;
</PRE>

<A NAME="IDX1701"></A>
<A NAME="IDX1702"></A>
<DT><CODE>do($statement)</CODE>
<DD>
The <CODE>do</CODE> method prepares and executes a SQL statement and returns the
number of rows affected.  If no rows are affected, <CODE>do</CODE> returns
<CODE>"0E0"</CODE>, which Perl treats as zero but regards as true.  This method is
generally used for non-<CODE>SELECT</CODE> statements that cannot be prepared in
advance (due to driver limitations) or that do not need to be executed more
than once (inserts, deletes, etc.). Example:

<PRE>
$rv = $dbh-&#62;do($statement)
        or die "Can't execute $statement: $dbh- &#62;errstr\n";
</PRE>

Generally the 'do' statement is much faster (and is preferable)
than prepare/execute for statements that don't contain parameters.

<A NAME="IDX1703"></A>
<A NAME="IDX1704"></A>
<A NAME="IDX1705"></A>
<A NAME="IDX1706"></A>
<DT><CODE>quote($string)</CODE>
<DD>
The <CODE>quote</CODE> method is used to "escape" any special characters contained in
the string and to add the required outer quotation marks.
Example:

<PRE>
$sql = $dbh-&#62;quote($string)
</PRE>

<A NAME="IDX1707"></A>
<A NAME="IDX1708"></A>
<DT><CODE>fetchrow_array</CODE>
<DD>
This method fetches the next row of data and returns it as an array of
field values.  Example:

<PRE>
while(@row = $sth-&#62;fetchrow_array) {
        print qw($row[0]\t$row[1]\t$row[2]\n);
}
</PRE>

<A NAME="IDX1709"></A>
<A NAME="IDX1710"></A>
<DT><CODE>fetchrow_arrayref</CODE>
<DD>
This method fetches the next row of data and returns it as a reference
to an array of field values. Example:

<PRE>
while($row_ref = $sth-&#62;fetchrow_arrayref) {
        print qw($row_ref-&#62;[0]\t$row_ref-&#62;[1]\t$row_ref-&#62;[2]\n);
}
</PRE>

<A NAME="IDX1711"></A>
<A NAME="IDX1712"></A>
<DT><CODE>fetchrow_hashref</CODE>
<DD>
This method fetches a row of data and returns a reference to a hash
table containing field name/value pairs. This method is not nearly as
efficient as using array references as demonstrated above. Example:

<PRE>
while($hash_ref = $sth-&#62;fetchrow_hashref) {
        print qw($hash_ref-&#62;{firstname}\t$hash_ref-&#62;{lastname}\t\
                $hash_ref-&#62;{title}\n);
}
</PRE>

<A NAME="IDX1713"></A>
<A NAME="IDX1714"></A>
<DT><CODE>fetchall_arrayref</CODE>
<DD>
This method is used to get all the data (rows) to be returned from the
SQL statement. It returns a reference to an array of references to arrays
for each row. You access or print the data by using a nested
loop. Example:

<PRE>
my $table = $sth-&#62;fetchall_arrayref
                or die "$sth-&#62;errstr\n";
my($i, $j);
for $i ( 0 .. $#{$table} ) {
        for $j ( 0 .. $#{$table-&#62;[$i]} ) {
                print "$table-&#62;[$i][$j]\t";
        }
        print "\n";
}
</PRE>

<A NAME="IDX1715"></A>
<A NAME="IDX1716"></A>
<DT><CODE>finish</CODE>
<DD>
Indicates that no more data will be fetched from this statement
handle. You call this method to free up the statement handle and any
system resources associated with it.  Example:

<PRE>
$rc = $sth-&#62;finish;
</PRE>

<A NAME="IDX1717"></A>
<A NAME="IDX1718"></A>
<DT><CODE>rows</CODE>
<DD>
Returns the number of rows changed (updated, deleted, etc.) by the last
command.  This is usually used after a non-<CODE>SELECT</CODE> <CODE>execute</CODE>
statement.  Example:

<PRE>
$rv = $sth-&#62;rows;
</PRE>

<A NAME="IDX1719"></A>
<A NAME="IDX1720"></A>
<DT><CODE>NULLABLE</CODE>
<DD>
Returns a reference to an array of values that indicate whether columns may
contain <CODE>NULL</CODE> values.
The possible values for each array element are 0 or the empty string if the
column cannot be <CODE>NULL</CODE>, 1 if it can, and 2 if the column's <CODE>NULL</CODE>
status is unknown.
Example:

<PRE>
$null_possible = $sth-&#62;{NULLABLE};
</PRE>

<A NAME="IDX1721"></A>
<A NAME="IDX1722"></A>
<DT><CODE>NUM_OF_FIELDS</CODE>
<DD>
This attribute indicates
the number of fields returned by a <CODE>SELECT</CODE> or <CODE>SHOW FIELDS</CODE>
statement.  You may use this for checking whether a statement returned a
result: A zero value indicates a non-<CODE>SELECT</CODE> statement like
<CODE>INSERT</CODE>, <CODE>DELETE</CODE>, or <CODE>UPDATE</CODE>.
Example:

<PRE>
$nr_of_fields = $sth-&#62;{NUM_OF_FIELDS};
</PRE>

<A NAME="IDX1723"></A>
<A NAME="IDX1724"></A>
<DT><CODE>data_sources($driver_name)</CODE>
<DD>
This method returns an array containing names of databases available to the
MySQL server on the host <CODE>'localhost'</CODE>.
Example:

<PRE>
@dbs = DBI-&#62;data_sources("mysql");
</PRE>

<A NAME="IDX1725"></A>
<A NAME="IDX1726"></A>
<DT><CODE>ChopBlanks</CODE>
<DD>
This attribute determines whether the <CODE>fetchrow_*</CODE> methods will chop
leading and trailing blanks from the returned values.
Example:

<PRE>
$sth-&#62;{'ChopBlanks'} =1;
</PRE>

<A NAME="IDX1727"></A>
<A NAME="IDX1728"></A>
<DT><CODE>trace($trace_level)</CODE>
<DD>
<DT><CODE>trace($trace_level, $trace_filename)</CODE>
<DD>
The <CODE>trace</CODE> method enables or disables tracing.  When invoked as a
<CODE>DBI</CODE> class method, it affects tracing for all handles.  When invoked as
a database or statement handle method, it affects tracing for the given
handle (and any future children of the handle).  Setting <CODE>$trace_level</CODE>
to 2 provides detailed trace information.  Setting <CODE>$trace_level</CODE> to 0
disables tracing.  Trace output goes to the standard error output by
default.  If <CODE>$trace_filename</CODE> is specified, the file is opened in
append mode and output for <STRONG>all</STRONG> traced handles is written to that
file.  Example:

<PRE>
DBI-&#62;trace(2);                # trace everything
DBI-&#62;trace(2,"/tmp/dbi.out"); # trace everything to
                              # /tmp/dbi.out
$dth-&#62;trace(2);               # trace this database handle
$sth-&#62;trace(2);               # trace this statement handle
</PRE>

<A NAME="IDX1729"></A>
<A NAME="IDX1730"></A>
You can also enable <CODE>DBI</CODE> tracing by setting the <CODE>DBI_TRACE</CODE>
environment variable.  Setting it to a numeric value is equivalent to calling
<CODE>DBI-&#62;(value)</CODE>.  Setting it to a pathname is equivalent to calling
<CODE>DBI-&#62;(2,value)</CODE>.

</DL>

<P>
<STRONG>MySQL-specific Methods</STRONG>

</P>
<P>
The methods shown here are MySQL-specific and not part of the
<CODE>DBI</CODE> standard.  Several of them are now deprecated:
<CODE>is_blob</CODE>, <CODE>is_key</CODE>, <CODE>is_num</CODE>, <CODE>is_pri_key</CODE>,
<CODE>is_not_null</CODE>, <CODE>length</CODE>, <CODE>max_length</CODE>, and <CODE>table</CODE>.
Where <CODE>DBI</CODE>-standard alternatives exist, they are noted here:

</P>
<DL COMPACT>

<DT><CODE>insertid</CODE>
<DD>
<A NAME="IDX1731"></A>
 <A NAME="IDX1732"></A>
 <A NAME="IDX1733"></A>
 
If you use the <CODE>AUTO_INCREMENT</CODE> feature of MySQL, the new
auto-incremented values will be stored here.
Example:

<PRE>
$new_id = $sth-&#62;{insertid};
</PRE>

As an alternative, you can use <CODE>$dbh-&#62;{'mysql_insertid'}</CODE>.

<A NAME="IDX1734"></A>
<A NAME="IDX1735"></A>
<DT><CODE>is_blob</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the
respective column is a <CODE>BLOB</CODE>.
Example:

<PRE>
$keys = $sth-&#62;{is_blob};
</PRE>

<A NAME="IDX1736"></A>
<A NAME="IDX1737"></A>
<DT><CODE>is_key</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the
respective column is a key.
Example:

<PRE>
$keys = $sth-&#62;{is_key};
</PRE>

<A NAME="IDX1738"></A>
<A NAME="IDX1739"></A>
<DT><CODE>is_num</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the
respective column contains numeric values.
Example:

<PRE>
$nums = $sth-&#62;{is_num};
</PRE>

<A NAME="IDX1740"></A>
<A NAME="IDX1741"></A>
<DT><CODE>is_pri_key</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the respective column is a primary key.
Example:

<PRE>
$pri_keys = $sth-&#62;{is_pri_key};
</PRE>

<A NAME="IDX1742"></A>
<A NAME="IDX1743"></A>
<DT><CODE>is_not_null</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of FALSE indicates that this column may contain <CODE>NULL</CODE>
values.
Example:

<PRE>
$not_nulls = $sth-&#62;{is_not_null};
</PRE>

<CODE>is_not_null</CODE> is deprecated; it is preferable to use the
<CODE>NULLABLE</CODE> attribute (described above), because that is a DBI standard.

<A NAME="IDX1744"></A>
<A NAME="IDX1745"></A>
<A NAME="IDX1746"></A>
<A NAME="IDX1747"></A>
<DT><CODE>length</CODE>
<DD>
<DT><CODE>max_length</CODE>
<DD>
Each of these methods returns a reference to an array of column sizes.  The
<CODE>length</CODE> array indicates the maximum possible sizes that each column may
be (as declared in the table description).  The <CODE>max_length</CODE> array
indicates the maximum sizes actually present in the result table.  Example:


<PRE>
$lengths = $sth-&#62;{length};
$max_lengths = $sth-&#62;{max_length};
</PRE>

<A NAME="IDX1748"></A>
<A NAME="IDX1749"></A>
<DT><CODE>NAME</CODE>
<DD>
Returns a reference to an array of column names.
Example:

<PRE>
$names = $sth-&#62;{NAME};
</PRE>

<A NAME="IDX1750"></A>
<A NAME="IDX1751"></A>
<DT><CODE>table</CODE>
<DD>
Returns a reference to an array of table names.
Example:

<PRE>
$tables = $sth-&#62;{table};
</PRE>

<A NAME="IDX1752"></A>
<A NAME="IDX1753"></A>
<DT><CODE>type</CODE>
<DD>
Returns a reference to an array of column types.
Example:

<PRE>
$types = $sth-&#62;{type};
</PRE>

</DL>



<H3><A NAME="DBI-info" HREF="manual_toc.html#DBI-info">8.5.3  More <CODE>DBI</CODE>/<CODE>DBD</CODE> Information</A></H3>

<P>
<A NAME="IDX1754"></A>

</P>
<P>
You can use the <CODE>perldoc</CODE> command to get more information about
<CODE>DBI</CODE>.

</P>

<PRE>
perldoc DBI
perldoc DBI::FAQ
perldoc DBD::mysql
</PRE>

<P>
You can also use the <CODE>pod2man</CODE>, <CODE>pod2html</CODE>, etc., tools to
translate to other formats.

</P>
<P>
You can find the latest <CODE>DBI</CODE> information at
the <CODE>DBI</CODE> web page: <a HREF="http://dbi.perl.org/">http://dbi.perl.org/</a>.

</P>



<H2><A NAME="Cplusplus" HREF="manual_toc.html#Cplusplus">8.6  MySQL C++ API</A></H2>

<P>
<A NAME="IDX1755"></A>

</P>
<P>
MySQL Connector/C++ (or <CODE>MySQL++</CODE>) is the official MySQL API for C++. More
information can be found at <a HREF="http://www.mysql.com/products/mysql++/">http://www.mysql.com/products/mysql++/</a>.

</P>



<H3><A NAME="Borland_C++" HREF="manual_toc.html#Borland_C++">8.6.1  Borland C++</A></H3>

<P>
<A NAME="IDX1756"></A>

</P>
<P>
You can compile the MySQL Windows source with Borland C++ 5.02.
(The Windows source includes only projects for Microsoft VC++, for
Borland C++ you have to do the project files yourself.)

</P>
<P>
One known problem with Borland C++ is that it uses a different structure
alignment than VC++.  This means that you will run into problems if you
try to use the default <CODE>libmysql.dll</CODE> libraries (that was compiled
with VC++) with Borland C++. You can do one of the following to avoid
this problem.

</P>

<UL>
<LI>

You can use the static MySQL libraries for Borland C++ that you
can find on <a HREF="http://www.mysql.com/downloads/os-win32.html">http://www.mysql.com/downloads/os-win32.html</a>.
<LI>

Only call <CODE>mysql_init()</CODE> with <CODE>NULL</CODE> as an argument, not a
pre-allocated MYSQL struct.
</UL>



<H2><A NAME="Python" HREF="manual_toc.html#Python">8.7  MySQL Python API</A></H2>

<P>
<A NAME="IDX1757"></A>

</P>
<P>
MySQLdb provides MySQL support for Python, compliant with the Python DB API
version 2.0. It can be found at
<a HREF="http://sourceforge.net/projects/mysql-python/">http://sourceforge.net/projects/mysql-python/</a>.

</P>



<H2><A NAME="Tcl" HREF="manual_toc.html#Tcl">8.8  MySQL Tcl API</A></H2>

<P>
<A NAME="IDX1758"></A>

</P>
<P>
MySQLtcl is a simple API for accessing a MySQL database server from the Tcl
programming language. It can be found at <a HREF="http://www.xdobry.de/mysqltcl/">http://www.xdobry.de/mysqltcl/</a>.

</P>


<H2><A NAME="Eiffel" HREF="manual_toc.html#Eiffel">8.9  MySQL Eiffel wrapper</A></H2>

<P>
<A NAME="IDX1759"></A>
<A NAME="IDX1760"></A>

</P>
<P>
Eiffel MySQL is an interface to the MySQL database server using the Eiffel
programming language, written by Michael Ravits. It can be found at
<a HREF="http://efsa.sourceforge.net/archive/ravits/mysql.htm">http://efsa.sourceforge.net/archive/ravits/mysql.htm</a>.

</P>


<H1><A NAME="Extending_MySQL" HREF="manual_toc.html#Extending_MySQL">9  Extending MySQL</A></H1>



<H2><A NAME="MySQL_internals" HREF="manual_toc.html#MySQL_internals">9.1  MySQL Internals</A></H2>

<P>
<A NAME="IDX1761"></A>
<A NAME="IDX1762"></A>

</P>
<P>
This chapter describes a lot of things that you need to know when
working on the MySQL code. If you plan to contribute to MySQL
development, want to have access to the bleeding-edge in-between
versions code, or just want to keep track of development, follow the
instructions in section <A HREF="manual.html#Installing_source_tree">2.3.4  Installing from the Development Source Tree</A>.
If you are interested in MySQL internals, you should also subscribe
to our <CODE>internals</CODE> mailing list. This list is relatively low
traffic. For details on how to subscribe, please see
section <A HREF="manual.html#Mailing-list">1.7.1.1  The MySQL Mailing Lists</A>.
All developers at MySQL AB are on the <CODE>internals</CODE> list and we
help other people who are working on the MySQL code. Feel free to
use this list both to ask questions about the code and to send
patches that you would like to contribute to the MySQL project!

</P>



<H3><A NAME="MySQL_threads" HREF="manual_toc.html#MySQL_threads">9.1.1  MySQL Threads</A></H3>

<P>
The MySQL server creates the following threads:

</P>

<UL>

<LI>

The TCP/IP connection thread handles all connection requests and
creates a new dedicated thread to handle the authentication and
SQL query processing for each connection.

<LI>

On Windows NT there is a named pipe handler thread that does the same work as
the TCP/IP connection thread on named pipe connect requests.

<LI>

The signal thread handles all signals.  This thread also normally handles
alarms and calls <CODE>process_alarm()</CODE> to force timeouts on connections
that have been idle too long.

<LI>

If <CODE>mysqld</CODE> is compiled with <CODE>-DUSE_ALARM_THREAD</CODE>, a dedicated
thread that handles alarms is created.  This is only used on some systems where
there are problems with <CODE>sigwait()</CODE> or if one wants to use the
<CODE>thr_alarm()</CODE> code in ones application without a dedicated signal
handling thread.

<LI>

If one uses the <CODE>--flush_time=#</CODE> option, a dedicated thread is created
to flush all tables at the given interval.

<LI>

Every connection has its own thread.

<LI>

Every different table on which one uses <CODE>INSERT DELAYED</CODE> gets its
own thread.

<LI>

If you use <CODE>--master-host</CODE>, a slave replication thread will be
started to read and apply updates from the master.
</UL>

<P>
<CODE>mysqladmin processlist</CODE> only shows the connection, <CODE>INSERT DELAYED</CODE>,
and replication threads.

</P>



<H3><A NAME="MySQL_test_suite" HREF="manual_toc.html#MySQL_test_suite">9.1.2  MySQL Test Suite</A></H3>

<P>
<A NAME="IDX1763"></A>
<A NAME="IDX1764"></A>

</P>
<P>
Until recently, our main full-coverage test suite was based on proprietary
customer data and for that reason has not been publicly available. The only
publicly available part of our testing process consisted of the <CODE>crash-me</CODE>
test, a Perl DBI/DBD benchmark found in the <CODE>sql-bench</CODE> directory, and
miscellaneous tests located in <CODE>tests</CODE> directory. The lack of a
standardised publicly available test suite has made it difficult for our users,
as well developers, to do regression tests on the MySQL code. To
address this problem, we have created a new test system that is included in
the source and binary distributions starting in Version 3.23.29.

</P>
<P>
The current set of test cases doesn't test everything in MySQL, but it
should catch most obvious bugs in the SQL processing code, OS/library
issues, and is quite thorough in testing replication.  Our eventual goal
is to have the tests cover 100% of the code.  We welcome contributions
to our test suite.  You may especially want to contribute tests that
examine the functionality critical to your system, as this will ensure
that all future MySQL releases will work well with your
applications.

</P>



<H4><A NAME="running_mysqltest" HREF="manual_toc.html#running_mysqltest">9.1.2.1  Running the MySQL Test Suite</A></H4>

<P>
The test system consist of a test language interpreter
(<CODE>mysqltest</CODE>), a shell script to run all
tests(<CODE>mysql-test-run</CODE>), the actual test cases written in a special
test language, and their expected results.  To run the test suite on
your system after a build, type <CODE>make test</CODE> or
<CODE>mysql-test/mysql-test-run</CODE> from the source root.  If you have
installed a binary distribution, <CODE>cd</CODE> to the install root
(eg. <CODE>/usr/local/mysql</CODE>), and do <CODE>scripts/mysql-test-run</CODE>.
All tests should succeed.  If not, you should try to find out why and
report the problem if this is a bug in MySQL.
See section <A HREF="manual.html#Reporting_mysqltest_bugs">9.1.2.3  Reporting Bugs in the MySQL Test Suite</A>.

</P>
<P>
If you have a copy of <CODE>mysqld</CODE> running on the machine where you want to
run the test suite you do not have to stop it, as long as it is not using
ports <CODE>9306</CODE> and <CODE>9307</CODE>.  If one of those ports is taken, you should
edit <CODE>mysql-test-run</CODE> and change the values of the master and/or slave
port to one that is available.

</P>
<P>
You can run one individual test case with
<CODE>mysql-test/mysql-test-run test_name</CODE>.

</P>
<P>
If one test fails, you should test running <CODE>mysql-test-run</CODE> with
the <CODE>--force</CODE> option to check if any other tests fails.

</P>



<H4><A NAME="extending_mysqltest" HREF="manual_toc.html#extending_mysqltest">9.1.2.2  Extending the MySQL Test Suite</A></H4>

<P>
You can use the <CODE>mysqltest</CODE> language to write your own test cases.
Unfortunately, we have not yet written full documentation for it - we plan to
do this shortly.  You can, however, look at our current test cases and use
them as an example.  The following points should help you get started:

</P>

<UL>
<LI>

The tests are located in <CODE>mysql-test/t/*.test</CODE>

<LI>

A test case consists of <CODE>;</CODE> terminated statements and is similar to the
input of <CODE>mysql</CODE> command-line client.  A statement by default is a query
to be sent to MySQL server, unless it is recognised as internal
command (eg. <CODE>sleep</CODE>).

<LI>

All queries that produce results@-e.g., <CODE>SELECT</CODE>, <CODE>SHOW</CODE>,
<CODE>EXPLAIN</CODE>, etc., must be preceded with <CODE>@/path/to/result/file</CODE>.  The
file must contain the expected results.  An easy way to generate the result
file is to run <CODE>mysqltest -r &#60; t/test-case-name.test</CODE> from
<CODE>mysql-test</CODE> directory, and then edit the generated result files, if
needed, to adjust them to the expected output.  In that case, be very careful
about not adding or deleting any invisible characters - make sure to only
change the text and/or delete lines.  If you have to insert a line, make sure
the fields are separated with a hard tab, and there is a hard tab at the end.
You may want to use <CODE>od -c</CODE> to make sure your text editor has not messed
anything up during edit.  We, of course, hope that you will never have to edit
the output of <CODE>mysqltest -r</CODE> as you only have to do it when you find a
bug.

<LI>

To be consistent with our setup, you should put your result files in
<CODE>mysql-test/r</CODE> directory and name them <CODE>test_name.result</CODE>.  If the
test produces more than one result, you should use <CODE>test_name.a.result</CODE>,
<CODE>test_name.b.result</CODE>, etc.

<LI>

If a statement returns an error, you should on the line before the statement
specify with the <CODE>--error error-number</CODE>.  The error number can be
a list of possible error numbers separated with <CODE>','</CODE>.

<LI>

If you are writing a replication test case, you should on the first line of
the test file, put <CODE>source include/master-slave.inc;</CODE>.  To switch between
master and slave, use <CODE>connection master;</CODE> and <CODE>connection slave;</CODE>.
If you need to do something on an alternate connection, you can do
<CODE>connection master1;</CODE> for the master, and <CODE>connection slave1;</CODE> for
the slave.

<LI>

If you need to do something in a loop, you can use something like this:

<PRE>
let $1=1000;
while ($1)
{
 # do your queries here
 dec $1;
}
</PRE>

<LI>

To sleep between queries, use the <CODE>sleep</CODE> command. It supports fractions
of a second, so you can do <CODE>sleep 1.3;</CODE>, for example, to sleep 1.3
seconds.

<LI>

To run the slave with additional options for your test case, put them
in the command-line format in <CODE>mysql-test/t/test_name-slave.opt</CODE>. For
the master, put them in <CODE>mysql-test/t/test_name-master.opt</CODE>.

<LI>

If you have a question about the test suite, or have a test case to contribute,
e-mail to <a HREF="mailto:internals@lists.mysql.com">internals@lists.mysql.com</a>. As the list does not accept
attachments, you should ftp all the relevant files to:
<a HREF="ftp://support.mysql.com/pub/mysql/Incoming/">ftp://support.mysql.com/pub/mysql/Incoming/</a>

</UL>



<H4><A NAME="Reporting_mysqltest_bugs" HREF="manual_toc.html#Reporting_mysqltest_bugs">9.1.2.3  Reporting Bugs in the MySQL Test Suite</A></H4>

<P>
If your MySQL version doesn't pass the test suite you should
do the following:

</P>

<UL>
<LI>

Don't send a bug report before you have found out as much as possible of
what when wrong!  When you do it, please use the <CODE>mysqlbug</CODE> script
so that we can get information about your system and <CODE>MySQL</CODE>
version. See section <A HREF="manual.html#Bug_reports">1.7.1.3  How to Report Bugs or Problems</A>.
<LI>

Make sure to include the output of <CODE>mysql-test-run</CODE>, as well as
contents of all <CODE>.reject</CODE> files in <CODE>mysql-test/r</CODE> directory.
<LI>

If a test in the test suite fails, check if the test fails also when run
by its own:


<PRE>
cd mysql-test
mysql-test-run --local test-name
</PRE>

If this fails, then you should configure MySQL with
<CODE>--with-debug</CODE> and run <CODE>mysql-test-run</CODE> with the
<CODE>--debug</CODE> option. If this also fails send the trace file
<TT>`var/tmp/master.trace'</TT> to ftp://support.mysql.com/pub/mysql/secret
so that we can examine it. Please remember to also include a full
description of your system, the version of the mysqld binary and how you
compiled it.

<LI>

Try also to run <CODE>mysql-test-run</CODE> with the <CODE>--force</CODE> option to
see if there is any other test that fails.

<LI>

If you have compiled MySQL yourself, check our manual for how
to compile MySQL on your platform or, preferable, use one of
the binaries we have compiled for you at
<a HREF="http://www.mysql.com/downloads/">http://www.mysql.com/downloads/</a>.  All our standard binaries should
pass the test suite !

<LI>

If you get an error, like <CODE>Result length mismatch</CODE> or <CODE>Result
content mismatch</CODE> it means that the output of the test didn't match
exactly the expected output. This could be a bug in MySQL or
that your mysqld version produces slight different results under some
circumstances.

Failed test results are put in a file with the same base name as the
result file with the <CODE>.reject</CODE> extension.  If your test case is
failing, you should do a diff on the two files.  If you cannot see how
they are different, examine both with <CODE>od -c</CODE> and also check their
lengths.

<LI>

If a test fails totally, you should check the logs file in the
<CODE>mysql-test/var/log</CODE> directory for hints of what went wrong.

<LI>

If you have compiled MySQL with debugging you can try to debug this
by running <CODE>mysql-test-run</CODE> with the <CODE>--gdb</CODE> and/or <CODE>--debug</CODE>
options.
See section <A HREF="manual.html#Making_trace_files">E.1.2  Creating Trace Files</A>.

If you have not compiled MySQL for debugging you should probably
do that.  Just specify the <CODE>--with-debug</CODE> options to <CODE>configure</CODE>!
See section <A HREF="manual.html#Installing_source">2.3  Installing a MySQL Source Distribution</A>.
</UL>



<H2><A NAME="Adding_functions" HREF="manual_toc.html#Adding_functions">9.2  Adding New Functions to MySQL</A></H2>

<P>
<A NAME="IDX1765"></A>
<A NAME="IDX1766"></A>
<A NAME="IDX1767"></A>
<A NAME="IDX1768"></A>
<A NAME="IDX1769"></A>

</P>
<P>
There are two ways to add new functions to MySQL:

</P>

<UL>
<LI>You can add the function through the user-definable function (UDF)

interface.  User-definable functions are added and removed dynamically using
the <CODE>CREATE FUNCTION</CODE> and <CODE>DROP FUNCTION</CODE> statements.
See section <A HREF="manual.html#CREATE_FUNCTION">9.2.1  <CODE>CREATE FUNCTION/DROP FUNCTION</CODE> Syntax</A>.

<LI>You can add the function as a native (built in) MySQL function.

Native functions are compiled into the <CODE>mysqld</CODE> server and become
available on a permanent basis.
</UL>

<P>
Each method has advantages and disadvantages:

</P>

<UL>
<LI>

If you write a user-definable function, you must install the object file
in addition to the server itself.  If you compile your function into the
server, you don't need to do that.
<LI>

You can add UDFs to a binary MySQL distribution.  Native functions
require you to modify a source distribution.
<LI>

If you upgrade your MySQL distribution, you can continue to use your
previously installed UDFs.  For native functions, you must repeat your
modifications each time you upgrade.
</UL>

<P>
Whichever method you use to add new functions, they may be used just like
native functions such as <CODE>ABS()</CODE> or <CODE>SOUNDEX()</CODE>.

</P>



<H3><A NAME="CREATE_FUNCTION" HREF="manual_toc.html#CREATE_FUNCTION">9.2.1  <CODE>CREATE FUNCTION/DROP FUNCTION</CODE> Syntax</A></H3>

<P>
<A NAME="IDX1770"></A>
<A NAME="IDX1771"></A>
<A NAME="IDX1772"></A>
<A NAME="IDX1773"></A>
<A NAME="IDX1774"></A>
<A NAME="IDX1775"></A>
<A NAME="IDX1776"></A>

</P>

<PRE>
CREATE [AGGREGATE] FUNCTION function_name RETURNS {STRING|REAL|INTEGER}
       SONAME shared_library_name

DROP FUNCTION function_name
</PRE>

<P>
A user-definable function (UDF) is a way to extend MySQL with a new
function that works like native (built in) MySQL functions such as
<CODE>ABS()</CODE> and <CODE>CONCAT()</CODE>.

</P>
<P>
<CODE>AGGREGATE</CODE> is a new option for MySQL Version 3.23.  An
<CODE>AGGREGATE</CODE> function works exactly like a native MySQL
<CODE>GROUP</CODE> function like <CODE>SUM</CODE> or <CODE>COUNT()</CODE>.

</P>
<P>
<CODE>CREATE FUNCTION</CODE> saves the function's name, type, and shared library
name in the <CODE>mysql.func</CODE> system table.  You must have the
<CODE>INSERT</CODE> and <CODE>DELETE</CODE> privileges for the <CODE>mysql</CODE> database
to create and drop functions.

</P>
<P>
All active functions are reloaded each time the server starts, unless
you start <CODE>mysqld</CODE> with the <CODE>--skip-grant-tables</CODE> option.  In
this case, UDF initialisation is skipped and UDFs are unavailable.
(An active function is one that has been loaded with <CODE>CREATE FUNCTION</CODE>
and not removed with <CODE>DROP FUNCTION</CODE>.)

</P>
<P>
For instructions on writing user-definable functions, see section <A HREF="manual.html#Adding_functions">9.2  Adding New Functions to MySQL</A>.  For the UDF mechanism to work, functions must be written in C or
C++, your operating system must support dynamic loading and you must have
compiled <CODE>mysqld</CODE> dynamically (not statically).

</P>
<P>
Note that to make <CODE>AGGREGATE</CODE> work, you must have a
<CODE>mysql.func</CODE> table that contains the column <CODE>type</CODE>.  If this
is not the case, you should run the script
<CODE>mysql_fix_privilege_tables</CODE> to get this fixed.

</P>



<H3><A NAME="Adding_UDF" HREF="manual_toc.html#Adding_UDF">9.2.2  Adding a New User-definable Function</A></H3>

<P>
<A NAME="IDX1777"></A>
<A NAME="IDX1778"></A>
<A NAME="IDX1779"></A>

</P>

<P>
For the UDF mechanism to work, functions must be written in C or C++ and your
operating system must support dynamic loading.  The MySQL source
distribution includes a file <TT>`sql/udf_example.cc'</TT> that defines 5 new
functions.  Consult this file to see how UDF calling conventions work.

</P>
<P>
For <CODE>mysqld</CODE> to be able to use UDF functions, you should configure MySQL
with <CODE>--with-mysqld-ldflags=-rdynamic</CODE> The reason is that to on
many platforms (including Linux) you can load a dynamic library (with
<CODE>dlopen()</CODE>) from a static linked program, which you would get if
you are using <CODE>--with-mysqld-ldflags=-all-static</CODE> If you want to
use an UDF that needs to access symbols from <CODE>mysqld</CODE> (like the
<CODE>methaphone</CODE> example in <TT>`sql/udf_example.cc'</TT> that uses
<CODE>default_charset_info</CODE>), you must link the program with
<CODE>-rdynamic</CODE> (see <CODE>man dlopen</CODE>).

</P>
<P>
For each function that you want to use in SQL statements, you should define
corresponding C (or C++) functions.  In the discussion below, the name
``xxx'' is used for an example function name.  To distinquish between SQL and
C/C++ usage, <CODE>XXX()</CODE> (uppercase) indicates a SQL function call, and
<CODE>xxx()</CODE> (lowercase) indicates a C/C++ function call.

</P>
<P>
The C/C++ functions that you write to implement the interface for
<CODE>XXX()</CODE> are:

</P>
<DL COMPACT>

<DT><CODE>xxx()</CODE> (required)
<DD>
The main function.  This is where the function result is computed.
The correspondence between the SQL type and return type of your C/C++
function is shown here:

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>SQL type</STRONG> </TD><TD> <STRONG>C/C++ type</STRONG>
</TD></TR>
<TR><TD><CODE>STRING</CODE> </TD><TD> <CODE>char *</CODE>
</TD></TR>
<TR><TD><CODE>INTEGER</CODE> </TD><TD> <CODE>long long</CODE>
</TD></TR>
<TR><TD><CODE>REAL</CODE> </TD><TD> <CODE>double</CODE>
</TD></TR>
</TABLE>

<DT><CODE>xxx_init()</CODE> (optional)
<DD>
The initialisation function for <CODE>xxx()</CODE>.  It can be used to:


<UL>
<LI>

Check the number of arguments to <CODE>XXX()</CODE>.
<LI>

Check that the arguments are of a required type or, alternatively,
tell MySQL to coerce arguments to the types you want when
the main function is called.
<LI>

Allocate any memory required by the main function.
<LI>

Specify the maximum length of the result.
<LI>

Specify (for <CODE>REAL</CODE> functions) the maximum number of decimals.
<LI>

Specify whether the result can be <CODE>NULL</CODE>.
</UL>

<DT><CODE>xxx_deinit()</CODE> (optional)
<DD>
The deinitialisation function for <CODE>xxx()</CODE>.  It should deallocate any
memory allocated by the initialisation function.
</DL>

<P>
When a SQL statement invokes <CODE>XXX()</CODE>, MySQL calls the
initialisation function <CODE>xxx_init()</CODE> to let it perform any required
setup, such as argument checking or memory allocation.  If <CODE>xxx_init()</CODE>
returns an error, the SQL statement is aborted with an error message and the
main and deinitialisation functions are not called.  Otherwise, the main
function <CODE>xxx()</CODE> is called once for each row.  After all rows have been
processed, the deinitialisation function <CODE>xxx_deinit()</CODE> is called so it
can perform any required cleanup.

</P>
<P>
For aggregate functions (like <CODE>SUM()</CODE>), you must also provide the
following functions:

</P>
<DL COMPACT>

<DT><CODE>xxx_reset()</CODE> (required)
<DD>
Reset sum and insert the argument as the initial value for a new group.
<DT><CODE>xxx_add()</CODE> (required)
<DD>
Add the argument to the old sum.
</DL>

<P>
When using aggregate UDF functions MySQL works the following way:

</P>

<OL>
<LI>

Call <CODE>xxx_init()</CODE> to let the aggregate function allocate the memory it
will need to store results.
<LI>

Sort the table according to the <CODE>GROUP BY</CODE> expression.
<LI>

For the first row in a new group, call the <CODE>xxx_reset()</CODE> function.
<LI>

For each new row that belongs in the same group, call the
<CODE>xxx_add()</CODE> function.
<LI>

When the group changes or after the last row has been processed,
call <CODE>xxx()</CODE> to get the result for the aggregate.
<LI>

Repeat 3-5 until all rows has been processed
<LI>

Call <CODE>xxx_deinit()</CODE> to let the UDF free any memory it has allocated.
</OL>

<P>
All functions must be thread-safe (not just the main function,
but the initialisation and deinitialisation functions as well). This means
that you are not allowed to allocate any global or static variables that
change!  If you need memory, you should allocate it in <CODE>xxx_init()</CODE>
and free it in <CODE>xxx_deinit()</CODE>.

</P>



<H4><A NAME="UDF_calling" HREF="manual_toc.html#UDF_calling">9.2.2.1  UDF Calling Sequences for simple functions</A></H4>

<P>
<A NAME="IDX1780"></A>

</P>
<P>
The main function should be declared as shown here.  Note that the return
type and parameters differ, depending on whether you will declare the SQL
function <CODE>XXX()</CODE> to return <CODE>STRING</CODE>, <CODE>INTEGER</CODE>, or <CODE>REAL</CODE>
in the <CODE>CREATE FUNCTION</CODE> statement:

</P>
<P>
For <CODE>STRING</CODE> functions:

</P>

<PRE>
char *xxx(UDF_INIT *initid, UDF_ARGS *args,
          char *result, unsigned long *length,
          char *is_null, char *error);
</PRE>

<P>
For <CODE>INTEGER</CODE> functions:

</P>

<PRE>
long long xxx(UDF_INIT *initid, UDF_ARGS *args,
              char *is_null, char *error);
</PRE>

<P>
For <CODE>REAL</CODE> functions:

</P>

<PRE>
double xxx(UDF_INIT *initid, UDF_ARGS *args,
              char *is_null, char *error);
</PRE>

<P>
The initialisation and deinitialisation functions are declared like this:

</P>

<PRE>
my_bool xxx_init(UDF_INIT *initid, UDF_ARGS *args, char *message);

void xxx_deinit(UDF_INIT *initid);
</PRE>

<P>
The <CODE>initid</CODE> parameter is passed to all three functions.  It points to a
<CODE>UDF_INIT</CODE> structure that is used to communicate information between
functions.  The <CODE>UDF_INIT</CODE> structure members are listed below.  The
initialisation function should fill in any members that it wishes to change.
(To use the default for a member, leave it unchanged.):

</P>
<DL COMPACT>

<DT><CODE>my_bool maybe_null</CODE>
<DD>
<CODE>xxx_init()</CODE> should set <CODE>maybe_null</CODE> to <CODE>1</CODE> if <CODE>xxx()</CODE>
can return <CODE>NULL</CODE>.  The default value is <CODE>1</CODE> if any of the
arguments are declared <CODE>maybe_null</CODE>.

<DT><CODE>unsigned int decimals</CODE>
<DD>
Number of decimals.  The default value is the maximum number of decimals in
the arguments passed to the main function.  (For example, if the function is
passed <CODE>1.34</CODE>, <CODE>1.345</CODE>, and <CODE>1.3</CODE>, the default would be 3,
because <CODE>1.345</CODE> has 3 decimals.

<DT><CODE>unsigned int max_length</CODE>
<DD>
The maximum length of the string result.  The default value differs depending
on the result type of the function.  For string functions, the default is the
length of the longest argument.  For integer functions, the default is 21
digits.  For real functions, the default is 13 plus the number of decimals
indicated by <CODE>initid-&#62;decimals</CODE>.  (For numeric functions, the length
includes any sign or decimal point characters.)

If you want to return a blob, you can set this to 65K or 16M; this
memory is not allocated but used to decide which column type to use if
there is a need to temporary store the data.

<DT><CODE>char *ptr</CODE>
<DD>
A pointer that the function can use for its own purposes.  For example,
functions can use <CODE>initid-&#62;ptr</CODE> to communicate allocated memory
between functions.  In <CODE>xxx_init()</CODE>, allocate the memory and assign it
to this pointer:


<PRE>
initid-&#62;ptr = allocated_memory;
</PRE>

In <CODE>xxx()</CODE> and <CODE>xxx_deinit()</CODE>, refer to <CODE>initid-&#62;ptr</CODE> to use
or deallocate the memory.
</DL>



<H4><A NAME="UDF_aggr._calling" HREF="manual_toc.html#UDF_aggr._calling">9.2.2.2  UDF Calling Sequences for aggregate functions</A></H4>

<P>
<A NAME="IDX1781"></A>

</P>
<P>
Here follows a description of the different functions you need to define
when you want to create an aggregate UDF function.

</P>

<PRE>
char *xxx_reset(UDF_INIT *initid, UDF_ARGS *args,
                char *is_null, char *error);
</PRE>

<P>
This function is called when MySQL finds the first row in a new group.
In the function you should reset any internal summary variables and then set
the given argument as the first argument in the group.

</P>
<P>
In many cases this is implemented internally by reseting all variables
and then calling <CODE>xxx_add()</CODE>.

</P>

<PRE>
char *xxx_add(UDF_INIT *initid, UDF_ARGS *args,
              char *is_null, char *error);
</PRE>

<P>
This function is called for all rows that belongs to the same group,
except for the first row. In this you should add the value in UDF_ARGS
to your internal summary variable.

</P>
<P>
The <CODE>xxx()</CODE> function should be declared identical as when you
define a simple UDF function. See section <A HREF="manual.html#UDF_calling">9.2.2.1  UDF Calling Sequences for simple functions</A>.

</P>
<P>
This function is called when all rows in the group has been processed.
You should normally never access the <CODE>args</CODE> variable here but
return your value based on your internal summary variables.

</P>
<P>
All argument processing in <CODE>xxx_reset()</CODE> and <CODE>xxx_add()</CODE>
should be done identically as for normal UDF functions. See section <A HREF="manual.html#UDF_arguments">9.2.2.3  Argument Processing</A>.

</P>
<P>
The return value handling in <CODE>xxx()</CODE> should be done identically as
for a normal UDF. See section <A HREF="manual.html#UDF_return_values">9.2.2.4  Return Values and Error Handling</A>.

</P>
<P>
The pointer argument to <CODE>is_null</CODE> and <CODE>error</CODE> is the same for
all calls to <CODE>xxx_reset()</CODE>, <CODE>xxx_add()</CODE> and <CODE>xxx()</CODE>.
You can use this to remember that you got an error or if the <CODE>xxx()</CODE>
function should return <CODE>NULL</CODE>. Note that you should not store a string
into <CODE>*error</CODE>!  This is just a 1 byte flag!

</P>
<P>
<CODE>is_null</CODE> is reset for each group (before calling <CODE>xxx_reset()</CODE>.
<CODE>error</CODE> is never reset.

</P>
<P>
If <CODE>isnull</CODE> or <CODE>error</CODE> are set after <CODE>xxx()</CODE> then MySQL
will return <CODE>NULL</CODE> as the result for the group function.

</P>


<H4><A NAME="UDF_arguments" HREF="manual_toc.html#UDF_arguments">9.2.2.3  Argument Processing</A></H4>

<P>
<A NAME="IDX1782"></A>
<A NAME="IDX1783"></A>

</P>
<P>
The <CODE>args</CODE> parameter points to a <CODE>UDF_ARGS</CODE> structure that has the
members listed here:

</P>
<DL COMPACT>

<DT><CODE>unsigned int arg_count</CODE>
<DD>
The number of arguments.  Check this value in the initialisation function
if you want your function to be called with a particular number of arguments.
For example:


<PRE>
if (args-&#62;arg_count != 2)
{
    strcpy(message,"XXX() requires two arguments");
    return 1;
}
</PRE>

<DT><CODE>enum Item_result *arg_type</CODE>
<DD>
The types for each argument.  The possible type values are
<CODE>STRING_RESULT</CODE>, <CODE>INT_RESULT</CODE>, and <CODE>REAL_RESULT</CODE>.

To make sure that arguments are of a given type and return an
error if they are not, check the <CODE>arg_type</CODE> array in the initialisation
function.  For example:


<PRE>
if (args-&#62;arg_type[0] != STRING_RESULT ||
    args-&#62;arg_type[1] != INT_RESULT)
{
    strcpy(message,"XXX() requires a string and an integer");
    return 1;
}
</PRE>

As an alternative to requiring your function's arguments to be of particular
types, you can use the initialisation function to set the <CODE>arg_type</CODE>
elements to the types you want.  This causes MySQL to coerce
arguments to those types for each call to <CODE>xxx()</CODE>.  For example, to
specify coercion of the first two arguments to string and integer, do this in
<CODE>xxx_init()</CODE>:


<PRE>
args-&#62;arg_type[0] = STRING_RESULT;
args-&#62;arg_type[1] = INT_RESULT;
</PRE>

<DT><CODE>char **args</CODE>
<DD>
<CODE>args-&#62;args</CODE> communicates information to the initialisation function
about the general nature of the arguments your function was called with.  For a
constant argument <CODE>i</CODE>, <CODE>args-&#62;args[i]</CODE> points to the argument
value.  (See below for instructions on how to access the value properly.)
For a non-constant argument, <CODE>args-&#62;args[i]</CODE> is <CODE>0</CODE>.
A constant argument is an expression that uses only constants, such as
<CODE>3</CODE> or <CODE>4*7-2</CODE> or <CODE>SIN(3.14)</CODE>.  A non-constant argument is an
expression that refers to values that may change from row to row, such as
column names or functions that are called with non-constant arguments.

For each invocation of the main function, <CODE>args-&#62;args</CODE> contains the
actual arguments that are passed for the row currently being processed.

Functions can refer to an argument <CODE>i</CODE> as follows:


<UL>
<LI>

An argument of type <CODE>STRING_RESULT</CODE> is given as a string pointer plus a
length, to allow handling of binary data or data of arbitrary length.  The
string contents are available as <CODE>args-&#62;args[i]</CODE> and the string length
is <CODE>args-&#62;lengths[i]</CODE>.  You should not assume that strings are
null-terminated.

<LI>

For an argument of type <CODE>INT_RESULT</CODE>, you must cast
<CODE>args-&#62;args[i]</CODE> to a <CODE>long long</CODE> value:


<PRE>
long long int_val;
int_val = *((long long*) args-&#62;args[i]);
</PRE>

<LI>

For an argument of type <CODE>REAL_RESULT</CODE>, you must cast
<CODE>args-&#62;args[i]</CODE> to a <CODE>double</CODE> value:


<PRE>
double    real_val;
real_val = *((double*) args-&#62;args[i]);
</PRE>

</UL>

<DT><CODE>unsigned long *lengths</CODE>
<DD>
For the initialisation function, the <CODE>lengths</CODE> array indicates the
maximum string length for each argument. You should not change these.
For each invocation of the main function, <CODE>lengths</CODE> contains the
actual lengths of any string arguments that are passed for the row
currently being processed.  For arguments of types <CODE>INT_RESULT</CODE> or
<CODE>REAL_RESULT</CODE>, <CODE>lengths</CODE> still contains the maximum length of
the argument (as for the initialisation function).
</DL>



<H4><A NAME="UDF_return_values" HREF="manual_toc.html#UDF_return_values">9.2.2.4  Return Values and Error Handling</A></H4>

<P>
<A NAME="IDX1784"></A>
<A NAME="IDX1785"></A>
<A NAME="IDX1786"></A>
<A NAME="IDX1787"></A>

</P>
<P>
The initialisation function should return <CODE>0</CODE> if no error occurred and
<CODE>1</CODE> otherwise.  If an error occurs, <CODE>xxx_init()</CODE> should store a
null-terminated error message in the <CODE>message</CODE> parameter.  The message
will be returned to the client.  The message buffer is
<CODE>MYSQL_ERRMSG_SIZE</CODE> characters long, but you should try to keep the
message to less than 80 characters so that it fits the width of a standard
terminal screen.

</P>
<P>
The return value of the main function <CODE>xxx()</CODE> is the function value, for
<CODE>long long</CODE> and <CODE>double</CODE> functions.  A string functions should
return a pointer to the result and store the length of the string in the
<CODE>length</CODE> arguments.

</P>
<P>
Set these to the contents and length of the return value.  For example:

</P>

<PRE>
memcpy(result, "result string", 13);
*length = 13;
</PRE>

<P>
The <CODE>result</CODE> buffer that is passed to the calc function is 255 byte
big. If your result fits in this, you don't have to worry about memory
allocation for results.

</P>
<P>
If your string function needs to return a string longer than 255 bytes,
you must allocate the space for it with <CODE>malloc()</CODE> in your
<CODE>xxx_init()</CODE> function or your <CODE>xxx()</CODE> function and free it in
your <CODE>xxx_deinit()</CODE> function.  You can store the allocated memory
in the <CODE>ptr</CODE> slot in the <CODE>UDF_INIT</CODE> structure for reuse by
future <CODE>xxx()</CODE> calls.  See section <A HREF="manual.html#UDF_calling">9.2.2.1  UDF Calling Sequences for simple functions</A>.

</P>
<P>
To indicate a return value of <CODE>NULL</CODE> in the main function, set
<CODE>is_null</CODE> to <CODE>1</CODE>:

</P>

<PRE>
*is_null = 1;
</PRE>

<P>
To indicate an error return in the main function, set the <CODE>error</CODE>
parameter to <CODE>1</CODE>:

</P>

<PRE>
*error = 1;
</PRE>

<P>
If <CODE>xxx()</CODE> sets <CODE>*error</CODE> to <CODE>1</CODE> for any row, the function
value is <CODE>NULL</CODE> for the current row and for any subsequent rows
processed by the statement in which <CODE>XXX()</CODE> was invoked.  (<CODE>xxx()</CODE>
will not even be called for subsequent rows.) <STRONG>Note</STRONG>: in
MySQL versions prior to 3.22.10, you should set both <CODE>*error</CODE>
and <CODE>*is_null</CODE>:

</P>

<PRE>
*error = 1;
*is_null = 1;
</PRE>



<H4><A NAME="UDF_compiling" HREF="manual_toc.html#UDF_compiling">9.2.2.5  Compiling and Installing User-definable Functions</A></H4>

<P>
<A NAME="IDX1788"></A>
<A NAME="IDX1789"></A>
<A NAME="IDX1790"></A>

</P>
<P>
Files implementing UDFs must be compiled and installed on the host where the
server runs.  This process is described below for the example UDF file
<TT>`udf_example.cc'</TT> that is included in the MySQL source
distribution.  This file contains the following functions:

</P>

<UL>
<LI>

<CODE>metaphon()</CODE> returns a metaphon string of the string argument.
This is something like a soundex string, but it's more tuned for English.
<LI>

<CODE>myfunc_double()</CODE> returns the sum of the ASCII values of the
characters in its arguments, divided by the sum of the length of its arguments.
<LI>

<CODE>myfunc_int()</CODE> returns the sum of the length of its arguments.
<LI>

<CODE>sequence([const int])</CODE> returns an sequence starting from the given
number or 1 if no number has been given.
<LI>

<CODE>lookup()</CODE> returns the IP number for a hostname.
<LI>

<CODE>reverse_lookup()</CODE> returns the hostname for an IP number.
The function may be called with a string <CODE>"xxx.xxx.xxx.xxx"</CODE> or
four numbers.
</UL>

<P>
A dynamically loadable file should be compiled as a sharable object file,
using a command something like this:

</P>

<PRE>
shell&#62; gcc -shared -o udf_example.so myfunc.cc
</PRE>

<P>
You can easily find out the correct compiler options for your system by
running this command in the <TT>`sql'</TT> directory of your MySQL
source tree:

</P>

<PRE>
shell&#62; make udf_example.o
</PRE>

<P>
You should run a compile command similar to the one that <CODE>make</CODE> displays,
except that you should remove the <CODE>-c</CODE> option near the end of the line
and add <CODE>-o udf_example.so</CODE> to the end of the line.  (On some systems,
you may need to leave  the <CODE>-c</CODE> on the command.)

</P>
<P>
Once you compile a shared object containing UDFs, you must install it
and tell MySQL about it.  Compiling a shared object from
<TT>`udf_example.cc'</TT> produces a file named something like
<TT>`udf_example.so'</TT> (the exact name may vary from platform to platform).
Copy this file to some directory searched by <CODE>ld</CODE>, such as
<TT>`/usr/lib'</TT>.  On many systems, you can set the <CODE>LD_LIBRARY</CODE> or
<CODE>LD_LIBRARY_PATH</CODE> environment variable to point at the directory where
you have your UDF function files. The <CODE>dlopen</CODE> manual page tells you
which variable you should use on your system. You should set this in
<CODE>mysql.server</CODE> or <CODE>safe_mysqld</CODE> startup scripts and restart
<CODE>mysqld</CODE>.

</P>
<P>
After the library is installed, notify <CODE>mysqld</CODE> about the new
functions with these commands:

</P>

<PRE>
mysql&#62; CREATE FUNCTION metaphon RETURNS STRING SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION myfunc_double RETURNS REAL SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION myfunc_int RETURNS INTEGER SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION lookup RETURNS STRING SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION reverse_lookup
    -&#62;        RETURNS STRING SONAME "udf_example.so";
mysql&#62; CREATE AGGREGATE FUNCTION avgcost
    -&#62;        RETURNS REAL SONAME "udf_example.so";
</PRE>

<P>
Functions can be deleted using <CODE>DROP FUNCTION</CODE>:

</P>

<PRE>
mysql&#62; DROP FUNCTION metaphon;
mysql&#62; DROP FUNCTION myfunc_double;
mysql&#62; DROP FUNCTION myfunc_int;
mysql&#62; DROP FUNCTION lookup;
mysql&#62; DROP FUNCTION reverse_lookup;
mysql&#62; DROP FUNCTION avgcost;
</PRE>

<P>
The <CODE>CREATE FUNCTION</CODE> and <CODE>DROP FUNCTION</CODE> statements update the
system table <CODE>func</CODE> in the <CODE>mysql</CODE> database.  The function's name,
type and shared library name are saved in the table.  You must have the
<CODE>INSERT</CODE> and <CODE>DELETE</CODE> privileges for the <CODE>mysql</CODE> database
to create and drop functions.

</P>
<P>
You should not use <CODE>CREATE FUNCTION</CODE> to add a function that has already
been created.  If you need to reinstall a function, you should remove it with
<CODE>DROP FUNCTION</CODE> and then reinstall it with <CODE>CREATE FUNCTION</CODE>.  You
would need to do this, for example, if you recompile a new version of your
function, so that <CODE>mysqld</CODE> gets the new version.  Otherwise, the server
will continue to use the old version.

</P>
<P>
Active functions are reloaded each time the server starts, unless you start
<CODE>mysqld</CODE> with the <CODE>--skip-grant-tables</CODE> option.  In this case, UDF
initialisation is skipped and UDFs are unavailable.  (An active function is
one that has been loaded with <CODE>CREATE FUNCTION</CODE> and not removed with
<CODE>DROP FUNCTION</CODE>.)

</P>



<H3><A NAME="Adding_native_function" HREF="manual_toc.html#Adding_native_function">9.2.3  Adding a New Native Function</A></H3>

<P>
<A NAME="IDX1791"></A>
<A NAME="IDX1792"></A>
<A NAME="IDX1793"></A>

</P>
<P>
The procedure for adding a new native function is described here.  Note
that you cannot add native functions to a binary distribution because
the procedure involves modifying MySQL source code.  You must
compile MySQL yourself from a source distribution.  Also note
that if you migrate to another version of MySQL (for example,
when a new version is released), you will need to repeat the procedure
with the new version.

</P>
<P>
To add a new native MySQL function, follow these steps:

</P>

<OL>
<LI>

Add one line to <TT>`lex.h'</TT> that defines the function name in the
<CODE>sql_functions[]</CODE> array.
<LI>

If the function prototype is simple (just takes zero, one, two or three
arguments), you should in lex.h specify SYM(FUNC_ARG#) (where # is the
number of arguments) as the second argument in the
<CODE>sql_functions[]</CODE> array and add a function that creates a function
object in <TT>`item_create.cc'</TT>.  Take a look at <CODE>"ABS"</CODE> and
<CODE>create_funcs_abs()</CODE> for an example of this.

If the function prototype is complicated (for example takes a variable number
of arguments), you should add two lines to <TT>`sql_yacc.yy'</TT>. One
indicates the preprocessor symbol that <CODE>yacc</CODE> should define (this
should be added at the beginning of the file). Then define the function
parameters and add an ``item'' with these parameters to the
<CODE>simple_expr</CODE> parsing rule.  For an example, check all occurrences
of <CODE>ATAN</CODE> in <TT>`sql_yacc.yy'</TT> to see how this is done.
<LI>

In <TT>`item_func.h'</TT>, declare a class inheriting from <CODE>Item_num_func</CODE> or
<CODE>Item_str_func</CODE>, depending on whether your function returns a number or a
string.
<LI>

In <TT>`item_func.cc'</TT>, add one of the following declarations, depending
on whether you are defining a numeric or string function:

<PRE>
double   Item_func_newname::val()
longlong Item_func_newname::val_int()
String  *Item_func_newname::Str(String *str)
</PRE>

If you inherit your object from any of the standard items (like
<CODE>Item_num_func</CODE> you probably only have to define one of the above
functions and let the parent object take care of the other functions.
For example, the <CODE>Item_str_func</CODE> class defines a <CODE>val()</CODE> function
that executes <CODE>atof()</CODE> on the value returned by <CODE>::str()</CODE>.

<LI>

You should probably also define the following object function:

<PRE>
void Item_func_newname::fix_length_and_dec()
</PRE>

This function should at least calculate <CODE>max_length</CODE> based on the
given arguments. <CODE>max_length</CODE> is the maximum number of characters
the function may return.  This function should also set <CODE>maybe_null
= 0</CODE> if the main function can't return a <CODE>NULL</CODE> value.  The
function can check if any of the function arguments can return
<CODE>NULL</CODE> by checking the arguments <CODE>maybe_null</CODE> variable. You
can take a look at <CODE>Item_func_mod::fix_length_and_dec</CODE> for a
typical example of how to do this.
</OL>

<P>
All functions must be thread-safe (in other words, don't use any global or
static variables in the functions without protecting them with mutexes).

</P>
<P>
If you want to return <CODE>NULL</CODE>, from <CODE>::val()</CODE>, <CODE>::val_int()</CODE>
or <CODE>::str()</CODE> you should set <CODE>null_value</CODE> to 1 and return 0.

</P>
<P>
For <CODE>::str()</CODE> object functions, there are some additional
considerations to be aware of:

</P>

<UL>
<LI>

The <CODE>String *str</CODE> argument provides a string buffer that may be
used to hold the result. (For more information about the <CODE>String</CODE> type,
take a look at the <TT>`sql_string.h'</TT> file.)
<LI>

The <CODE>::str()</CODE> function should return the string that holds the result or
<CODE>(char*) 0</CODE> if the result is <CODE>NULL</CODE>.
<LI>

All current string functions try to avoid allocating any memory unless
absolutely necessary!
</UL>



<H2><A NAME="Adding_procedures" HREF="manual_toc.html#Adding_procedures">9.3  Adding New Procedures to MySQL</A></H2>

<P>
<A NAME="IDX1794"></A>
<A NAME="IDX1795"></A>
<A NAME="IDX1796"></A>

</P>
<P>
In MySQL, you can define a procedure in C++ that can access and
modify the data in a query before it is sent to the client.  The modification
can be done on row-by-row or <CODE>GROUP BY</CODE> level.

</P>
<P>
We have created an example procedure in MySQL Version 3.23 to
show you what can be done.

</P>
<P>
Additionally we recommend you to take a look at <CODE>mylua</CODE>.
With this you can use the LUA language to load a procedure at
runtime into <CODE>mysqld</CODE>.

</P>



<H3><A NAME="procedure_analyse" HREF="manual_toc.html#procedure_analyse">9.3.1  Procedure Analyse</A></H3>

<P>
<CODE>analyse([max elements,[max memory]])</CODE>

</P>
<P>
This procedure is defined in the <TT>`sql/sql_analyse.cc'</TT>.  This
examines the result from your query and returns an analysis of the
results:

</P>

<UL>
<LI>

<CODE>max elements</CODE> (default 256) is the maximum number of distinct values
<CODE>analyse</CODE> will notice per column.  This is used by <CODE>analyse</CODE> to check if
the optimal column type should be of type <CODE>ENUM</CODE>.
<LI>

<CODE>max memory</CODE> (default 8192) is the maximum memory <CODE>analyse</CODE> should
allocate per column while trying to find all distinct values.
</UL>


<PRE>
SELECT ... FROM ... WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</PRE>



<H3><A NAME="Writing_a_procedure" HREF="manual_toc.html#Writing_a_procedure">9.3.2  Writing a Procedure</A></H3>

<P>
For the moment, the only documentation for this is the source.

</P>
<P>
You can find all information about procedures by examining the following files:

</P>

<UL>
<LI><TT>`sql/sql_analyse.cc'</TT>

<LI><TT>`sql/procedure.h'</TT>

<LI><TT>`sql/procedure.cc'</TT>

<LI><TT>`sql/sql_select.cc'</TT>

</UL>



<H1><A NAME="Problems" HREF="manual_toc.html#Problems">A  Problems and Common Errors</A></H1>

<P>
<A NAME="IDX1797"></A>
<A NAME="IDX1798"></A>

</P>

<P>
This chapter lists some common problems and error messages that users have
run into.  You will learn how to figure out what the problem is, and what
to do to solve it.  You will also find proper solutions to some common
problems.

</P>



<H2><A NAME="What_is_crashing" HREF="manual_toc.html#What_is_crashing">A.1  How to Determine What Is Causing Problems</A></H2>

<P>
When you run into problems, the first thing you should do is to find out
which program / piece of equipment is causing problems:

</P>

<UL>
<LI>

If you have one of the following symptoms, then it is probably a hardware
(like memory, motherboard, CPU, or hard disk) or kernel problem:

<UL>
<LI>

The keyboard doesn't work.  This can normally be checked by pressing
Caps Lock. If the Caps Lock light doesn't change you have to replace
your keyboard.  (Before doing this, you should try to reboot
your computer and check all cables to the keyboard.)
<LI>

The mouse pointer doesn't move.
<LI>

The machine doesn't answer to a remote machine's pings.
<LI>

Different, unrelated programs don't behave correctly.
<LI>

If your system rebooted unexpectedly (a faulty user level program should
<STRONG>never</STRONG> be able to take down your system).
</UL>

In this case you should start by checking all your cables and run some
diagnostic tool to check your hardware!
You should also check if there are any patches, updates, or service
packs for your operating system that could likely solve your problems.
Check also that all your libraries (like glibc) are up to date.

It's always good to use a machine with ECC memory to discover
memory problems early!
<LI>

If your keyboard is locked up, you may be able to fix this by
logging into your machine from another machine and execute
<CODE>kbd_mode -a</CODE> on it.

<LI>

Please examine your system log file (/var/log/messages or similar) for
reasons for your problems.  If you think the problem is in MySQL
then you should also examine MySQL's log files. See section <A HREF="manual.html#Binary_log">4.9.4  The Binary Log</A>.

<LI>

If you don't think you have hardware problems, you should try to find
out which program is causing problems.

Try using <CODE>top</CODE>, <CODE>ps</CODE>, <CODE>taskmanager</CODE>, or some similar program,
to check which program is taking all CPU or is locking the machine.

<LI>

Check with <CODE>top</CODE>, <CODE>df</CODE>, or a similar program if you are out of
memory, disk space, open files, or some other critical resource.

<LI>

If the problem is some runaway process, you can always try to kill it. If it
doesn't want to die, there is probably a bug in the operating system.
</UL>

<P>
If after you have examined all other possibilities and you have
concluded that it's the MySQL server or a MySQL client
that is causing the problem, it's time to do a bug report for our
mailing list or our support team.  In the bug report, try to give a
very detailed description of how the system is behaving and what you think is
happening. You should also state why you think it's MySQL that
is causing the problems.  Take into consideration all the situations in
this chapter. State any problems exactly how they appear when you
examine your system. Use the 'cut and paste' method for any output
and/or error messages from programs and/or log files!

</P>
<P>
Try to describe in detail which program is not working and all
symptoms you see!  We have in the past received many bug reports that just
state "the system doesn't work".  This doesn't provide us with any
information about what could be the problem.

</P>
<P>
If a program fails, it's always useful to know:

</P>

<UL>
<LI>

Has the program in question made a segmentation fault (core dumped)?
<LI>

Is the program taking up the whole CPU? Check with <CODE>top</CODE>. Let the
program run for a while, it may be evaluating something heavy.
<LI>

If it's the <CODE>mysqld</CODE> server that is causing problems, can you
do <CODE>mysqladmin -u root ping</CODE> or <CODE>mysqladmin -u root processlist</CODE>?
<LI>

What does a client program say (try with <CODE>mysql</CODE>, for example)
when you try to connect to the MySQL server?
Does the client jam?  Do you get any output from the program?
</UL>

<P>
When sending a bug report, you should of follow the outlines
described in this manual. See section <A HREF="manual.html#Asking_questions">1.7.1.2  Asking Questions or Reporting Bugs</A>.

</P>



<H2><A NAME="Common_errors" HREF="manual_toc.html#Common_errors">A.2  Common Errors When Using MySQL</A></H2>

<P>
<A NAME="IDX1799"></A>

</P>

<P>
This section lists some errors that users frequently get.  You will find
descriptions of the errors, and how to solve the problem here.

</P>



<H3><A NAME="Error_Access_denied" HREF="manual_toc.html#Error_Access_denied">A.2.1  <CODE>Access denied</CODE> Error</A></H3>

<P>
<A NAME="IDX1800"></A>
<A NAME="IDX1801"></A>
<A NAME="IDX1802"></A>

</P>
<P>
See section <A HREF="manual.html#Access_denied">4.2.11  Causes of <CODE>Access denied</CODE> Errors</A>.
See section <A HREF="manual.html#Privileges">4.2.6  How the Privilege System Works</A>.

</P>



<H3><A NAME="Gone_away" HREF="manual_toc.html#Gone_away">A.2.2  <CODE>MySQL server has gone away</CODE> Error</A></H3>

<P>
This section also covers the related <CODE>Lost connection to server
during query</CODE> error.

</P>
<P>
The most common reason for the <CODE>MySQL server has gone away</CODE> error
is that the server timed out and closed the connection. By default, the
server closes the connection after 8 hours if nothing has happened. You
can change the time limit by setting the <CODE>wait_timeout</CODE> variable when
you start <CODE>mysqld</CODE>.

</P>
<P>
Another common reason to receive the <CODE>MySQL server has gone away</CODE> error
is because you have issued a ``close'' on your MySQL connection
and then tried to run a query on the closed connection.

</P>
<P>
If you have a script, you just have to issue the query again for the client
to do an automatic reconnection.

</P>
<P>
You normally can get the following error codes in this case
(which one you get is OS-dependent):

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Error code</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>CR_SERVER_GONE_ERROR</CODE> </TD><TD> The client couldn't send a question to the
server.
</TD></TR>
<TR><TD><CODE>CR_SERVER_LOST</CODE> </TD><TD> The client didn't get an error when writing
to the server, but it didn't get a full answer (or any answer) to the question.
</TD></TR>
</TABLE>

<P>
You will also get this error if someone has kills the running thread with
<CODE>kill #threadid#</CODE>.

</P>
<P>
You can check that the MySQL hasn't died by executing <CODE>mysqladmin
version</CODE> and examining the uptime.  If the problem is that mysqld
crashed you should concentrate one finding the reason for the crash.
You should in this case start by checking if issuing the query again
will kill MySQL again. See section <A HREF="manual.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</A>.

</P>
<P>
You can also get these errors if you send a query to the server that is
incorrect or too large. If <CODE>mysqld</CODE> gets a packet that is too large
or out of order, it assumes that something has gone wrong with the client and
closes the connection.  If you need big queries (for example, if you are
working with big <CODE>BLOB</CODE> columns), you can increase the query limit by
starting <CODE>mysqld</CODE> with the <CODE>-O max_allowed_packet=#</CODE> option
(default 1M). The extra memory is allocated on demand, so <CODE>mysqld</CODE> will
allocate more memory only when you issue a big query or when <CODE>mysqld</CODE> must
return a big result row!

</P>
<P>
You will also get a lost connection if you are sending a packet &#62;= 16M
if your client is older than 4.0.8 and your server is 4.0.8 and above, or
the other way around.

</P>
<P>
If you want to make a bug report regarding this problem, be sure that
you include the following information:

</P>

<UL>
<LI>

Include information if MySQL died or not. (You can find this in the
<CODE>hostname.err file</CODE>. See section <A HREF="manual.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</A>.
<LI>

If a specific query kills <CODE>mysqld</CODE> and the involved tables where
checked with <CODE>CHECK TABLE</CODE> before you did the query, can you do
a test case for this? See section <A HREF="manual.html#Reproduceable_test_case">E.1.6  Making a Test Case If You Experience Table Corruption</A>.
<LI>

What is the value of the <CODE>wait_timeout</CODE> variable in the MySQL server ?
<CODE>mysqladmin variables</CODE> gives you the value of this
<LI>

Have you tried to run <CODE>mysqld</CODE> with <CODE>--log</CODE> and check if the
issued query appears in the log ?
</UL>

<P>
See section <A HREF="manual.html#Asking_questions">1.7.1.2  Asking Questions or Reporting Bugs</A>.

</P>


<H3><A NAME="Can_not_connect_to_server" HREF="manual_toc.html#Can_not_connect_to_server">A.2.3  <CODE>Can't connect to [local] MySQL server</CODE> Error</A></H3>

<P>
A MySQL client on Unix can connect to the <CODE>mysqld</CODE> server in two
different ways: Unix sockets, which connect through a file in the file
system (default <TT>`/tmp/mysqld.sock'</TT>) or TCP/IP, which connects
through a port number.  Unix sockets are faster than TCP/IP but can only
be used when connecting to a server on the same computer.  Unix sockets
are used if you don't specify a hostname or if you specify the special
hostname <CODE>localhost</CODE>.

</P>
<P>
On Windows, if the <CODE>mysqld</CODE> server is running on 9x/Me, you can
connect only via TCP/IP. If the server is running on NT/2000/XP and
mysqld is started with <CODE>--enable-named-pipe</CODE>, you
can also connect with named pipes. The name of the named pipe is MySQL.
If you don't give a hostname when connecting to <CODE>mysqld</CODE>, a MySQL
client will first try to connect to the named pipe, and if this doesn't
work it will connect to the TCP/IP port.  You can force the use of named
pipes on Windows by using <CODE>.</CODE> as the hostname.

</P>
<P>
The error (2002) <CODE>Can't connect to ...</CODE> normally means that there
isn't a MySQL server running on the system or that you are
using a wrong socket file or TCP/IP port when trying to connect to the
<CODE>mysqld</CODE> server.

</P>
<P>
Start by checking (using <CODE>ps</CODE> or the task manager on Windows) that
there is a process running named <CODE>mysqld</CODE> on your server!  If there
isn't any <CODE>mysqld</CODE> process, you should start one. See section <A HREF="manual.html#Starting_server">2.4.2  Problems Starting the MySQL Server</A>.

</P>
<P>
If a <CODE>mysqld</CODE> process is running, you can check the server by
trying these different connections (the port number and socket pathname
might be different in your setup, of course):

</P>

<PRE>
shell&#62; mysqladmin version
shell&#62; mysqladmin variables
shell&#62; mysqladmin -h `hostname` version variables
shell&#62; mysqladmin -h `hostname` --port=3306 version
shell&#62; mysqladmin -h 'ip for your host' version
shell&#62; mysqladmin --protocol=socket --socket=/tmp/mysql.sock version
</PRE>

<P>
Note the use of backquotes rather than forward quotes with the <CODE>hostname</CODE>
command; these cause the output of <CODE>hostname</CODE> (that is, the current
hostname) to be substituted into the <CODE>mysqladmin</CODE> command.

</P>
<P>
Here are some reasons the <CODE>Can't connect to local MySQL server</CODE>
error might occur:

</P>

<UL>
<LI>

<CODE>mysqld</CODE> is not running.
<LI>

You are running on a system that uses MIT-pthreads.
If you are running on a system that doesn't have native threads,
<CODE>mysqld</CODE> uses the MIT-pthreads package.  See section <A HREF="manual.html#Which_OS">2.2.5  Operating Systems Supported by MySQL</A>.  However,
not all MIT-pthreads versions support Unix sockets. On a system
without sockets support you must always specify the hostname explicitly
when connecting to the server. Try using this command to check the
connection to the server:

<PRE>
shell&#62; mysqladmin -h `hostname` version
</PRE>

<LI>

Someone has removed the Unix socket that <CODE>mysqld</CODE> uses (default
<TT>`/tmp/mysqld.sock'</TT>).  You might have a <CODE>cron</CODE> job that removes
the MySQL socket (for example, a job that removes old files
from the <TT>`/tmp'</TT> directory).  You can always run <CODE>mysqladmin
version</CODE> and check that the socket <CODE>mysqladmin</CODE> is trying to use
really exists.  The fix in this case is to change the <CODE>cron</CODE> job to
not remove <TT>`mysqld.sock'</TT> or to place the socket somewhere else.
See section <A HREF="manual.html#Problems_with_mysql.sock">A.4.5  How to Protect or Change the MySQL Socket File <TT>`/tmp/mysql.sock'</TT></A>.
<LI>

You have started the <CODE>mysqld</CODE> server with
the <CODE>--socket=/path/to/socket</CODE> option.  If you change the socket
pathname for the server, you must also notify the MySQL clients
about the new path. You can do this by providing the socket path
as an argument to the client. See section <A HREF="manual.html#Problems_with_mysql.sock">A.4.5  How to Protect or Change the MySQL Socket File <TT>`/tmp/mysql.sock'</TT></A>.
<LI>

You are using Linux and one thread has died (core dumped).  In this case
you must kill the other <CODE>mysqld</CODE> threads (for example, with the
<CODE>mysql_zap</CODE> script before you can start a new MySQL
server.  See section <A HREF="manual.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</A>.
<LI>

You may not have read and write privilege to either the directory that holds
the socket file or privilege to the socket file itself. In this case you
have to either change the privilege for the directory / file or restart
<CODE>mysqld</CODE> so that it uses a directory that you can access.
</UL>

<P>
If you get the error message <CODE>Can't connect to MySQL server on
some_hostname</CODE>, you can try the following things to find out what the
problem is :

</P>

<UL>
<LI>

Check if the server is up by doing <CODE>telnet your-host-name
tcp-ip-port-number</CODE> and press Enter a couple of times.  If there
is a MySQL server running on this port you should get a
responses that includes the version number of the running MySQL
server.  If you get an error like <CODE>telnet: Unable to connect to
remote host: Connection refused</CODE>, then there is no server running on the
given port.
<LI>

Try connecting to the <CODE>mysqld</CODE> daemon on the local machine and check
the TCP/IP port that <CODE>mysqld</CODE> it's configured to use (variable <CODE>port</CODE>) with
<CODE>mysqladmin variables</CODE>.
<LI>

Check that your <CODE>mysqld</CODE> server is not started with the
<CODE>--skip-networking</CODE> option.
</UL>



<H3><A NAME="Blocked_host" HREF="manual_toc.html#Blocked_host">A.2.4  <CODE>Host '...' is blocked</CODE> Error</A></H3>

<P>
If you get an error like this:

</P>

<PRE>
Host 'hostname' is blocked because of many connection errors.
Unblock with 'mysqladmin flush-hosts'
</PRE>

<P>
this means that <CODE>mysqld</CODE> has gotten a lot (<CODE>max_connect_errors</CODE>)
of connect requests from the host <CODE>'hostname'</CODE> that have been interrupted
in the middle. After <CODE>max_connect_errors</CODE> failed requests, <CODE>mysqld</CODE>
assumes that something is wrong (like an attack from a cracker), and
blocks the site from further connections until someone executes the command
<CODE>mysqladmin flush-hosts</CODE>.

</P>
<P>
By default, <CODE>mysqld</CODE> blocks a host after 10 connection errors.
You can easily adjust this by starting the server like this:

</P>

<PRE>
shell&#62; safe_mysqld -O max_connect_errors=10000 &#38;
</PRE>

<P>
Note that if you get this error message for a given host, you should first
check that there isn't anything wrong with TCP/IP connections from that
host.  If your TCP/IP connections aren't working, it won't do you any good to
increase the value of the <CODE>max_connect_errors</CODE> variable!

</P>



<H3><A NAME="Too_many_connections" HREF="manual_toc.html#Too_many_connections">A.2.5  <CODE>Too many connections</CODE> Error</A></H3>

<P>
If you get the error <CODE>Too many connections</CODE> when you try to connect
to MySQL, this means that there is already <CODE>max_connections</CODE>
clients connected to the <CODE>mysqld</CODE> server.

</P>
<P>
If you need more connections than the default (100), then you should restart
<CODE>mysqld</CODE> with a bigger value for the <CODE>max_connections</CODE> variable.

</P>
<P>
Note that <CODE>mysqld</CODE> actually allows (<CODE>max_connections</CODE>+1)
clients to connect.  The last connection is reserved for a user with the
<CODE>SUPER</CODE> privilege.  By not giving this privilege to normal
users (they shouldn't need this), an administrator with this privilege
can log in and use <CODE>SHOW PROCESSLIST</CODE> to find out what could be
wrong. See section <A HREF="manual.html#SHOW_PROCESSLIST">4.5.6.6  <CODE>SHOW PROCESSLIST</CODE></A>.

</P>
<P>
The maximum number of connects MySQL is depending on how good
the thread library is on a given platform. Linux or Solaris should be
able to support 500-1000 simultaneous connections, depending on how much
RAM you have and what your clients are doing.

</P>



<H3><A NAME="Non-transactional_tables" HREF="manual_toc.html#Non-transactional_tables">A.2.6  <CODE>Some non-transactional changed tables couldn't be rolled back</CODE> Error</A></H3>

<P>
<A NAME="IDX1803"></A>

</P>
<P>
If you get the error/warning: <CODE>Warning: Some non-transactional
changed tables couldn't be rolled back</CODE> when trying to do a
<CODE>ROLLBACK</CODE>, this means that some of the tables you used in the
transaction didn't support transactions.  These non-transactional tables
will not be affected by the <CODE>ROLLBACK</CODE> statement.

</P>
<P>
The most typical case when this happens is when you have tried to create
a table of a type that is not supported by your <CODE>mysqld</CODE> binary.
If <CODE>mysqld</CODE> doesn't support a table type (or if the table type is
disabled by a startup option) , it will instead create the table type
with the table type that is most resembles to the one you requested,
probably <CODE>MyISAM</CODE>.

</P>
<P>
You can check the table type for a table by doing:

</P>
<P>
<CODE>SHOW TABLE STATUS LIKE 'table_name'</CODE>. See section <A HREF="manual.html#SHOW_TABLE_STATUS">4.5.6.2  <CODE>SHOW TABLE STATUS</CODE></A>.

</P>
<P>
You can check the extensions your <CODE>mysqld</CODE> binary supports by doing:

</P>
<P>
<CODE>show variables like 'have_%'</CODE>. See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.

</P>



<H3><A NAME="Out_of_memory" HREF="manual_toc.html#Out_of_memory">A.2.7  <CODE>Out of memory</CODE> Error</A></H3>

<P>
If you issue a query and get something like the following error:

</P>

<PRE>
mysql: Out of memory at line 42, 'malloc.c'
mysql: needed 8136 byte (8k), memory in use: 12481367 bytes (12189k)
ERROR 2008: MySQL client ran out of memory
</PRE>

<P>
note that the error refers to the MySQL client <CODE>mysql</CODE>. The
reason for this error is simply that the client does not have enough memory to
store the whole result.

</P>
<P>
To remedy the problem, first check that your query is correct. Is it
reasonable that it should return so many rows?  If so,
you can use <CODE>mysql --quick</CODE>, which uses <CODE>mysql_use_result()</CODE>
to retrieve the result set.  This places less of a load on the client (but
more on the server).

</P>



<H3><A NAME="Packet_too_large" HREF="manual_toc.html#Packet_too_large">A.2.8  <CODE>Packet too large</CODE> Error</A></H3>

<P>
When a MySQL client or the <CODE>mysqld</CODE> server gets a packet bigger
than <CODE>max_allowed_packet</CODE> bytes, it issues a <CODE>Packet too large</CODE>
error and closes the connection.

</P>
<P>
In MySQL 3.23 the biggest possible packet is 16M (due to limits in the
client/server protocol). In MySQL 4.0.1 and up, this is only limited by
the amount on memory you have on your server (up to a theoretical
maximum of 2G).

</P>
<P>
A communication packet is a single SQL statement sent to the MySQL server
or a single row that is sent to the client.

</P>
<P>
When a MySQL client or the <CODE>mysqld</CODE> server gets a packet bigger
than <CODE>max_allowed_packet</CODE> bytes, it issues a <CODE>Packet too
large</CODE> error and closes the connection.  With some clients, you may also
get <CODE>Lost connection to MySQL server during query</CODE> error if the
communication packet is too big.

</P>
<P>
Note that both the client and the server has it's own
<CODE>max_allowed_packet</CODE> variable. If you want to handle big packets,
you have to increase this variable both in the client and in the server.

</P>
<P>
It's safe to increase this variable as memory is only allocated when
needed; this variable is more a precaution to catch wrong packets
between the client/server and also to ensure that you don't accidentally
use big packets so that you run out of memory.

</P>
<P>
If you are using the <CODE>mysql</CODE> client, you may specify a bigger
buffer by starting the client with
<CODE>mysql --set-variable=max_allowed_packet=8M</CODE>.
Other clients have different methods to set this variable.
Please note that <CODE>--set-variable</CODE> is deprecated since
MySQL 4.0, just use <CODE>--max-allowed-packet=8M</CODE> instead.
 
You can use the option file to set <CODE>max_allowed_packet</CODE> to a larger
size in <CODE>mysqld</CODE>.  For example, if you are expecting to store the
full length of a <CODE>MEDIUMBLOB</CODE> into a table, you'll need to start
the server with the <CODE>set-variable=max_allowed_packet=16M</CODE> option.

</P>
<P>
You can also get strange problems with large packets if you are using
big blobs, but you haven't given <CODE>mysqld</CODE> access to enough memory
to handle the query.  If you suspect this is the case, try adding
<CODE>ulimit -d 256000</CODE> to the beginning of the <CODE>safe_mysqld</CODE> script
and restart <CODE>mysqld</CODE>.

</P>


<H3><A NAME="Communication_errors" HREF="manual_toc.html#Communication_errors">A.2.9  Communication Errors / Aborted Connection</A></H3>

<P>
<A NAME="IDX1804"></A>
<A NAME="IDX1805"></A>
<A NAME="IDX1806"></A>

</P>
<P>
Starting with <CODE>MySQL 3.23.40</CODE> you only get the <CODE>Aborted
connection</CODE> error of you start <CODE>mysqld</CODE> with <CODE>--warnings</CODE>.

</P>
<P>
If you find errors like the following in your error log.

</P>

<PRE>
010301 14:38:23  Aborted connection 854 to db: 'users' user: 'josh'
</PRE>

<P>
See section <A HREF="manual.html#Error_log">4.9.1  The Error Log</A>.

</P>
<P>
This means that something of the following has happened:

</P>

<UL>
<LI>

The client program did not call <CODE>mysql_close()</CODE> before exit.
<LI>

The client had been sleeping more than <CODE>wait_timeout</CODE> or
<CODE>interactive_timeout</CODE> without doing any requests.
See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.
See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.
<LI>

The client program ended abruptly in the middle of the transfer.
</UL>

<P>
When the above happens, the server variable <CODE>Aborted_clients</CODE> is
incremented.

</P>
<P>
The server variable <CODE>Aborted_connects</CODE> is incremented when:

</P>

<UL>
<LI>

When a connection packet doesn't contain the right information.
<LI>

When the user didn't have privileges to connect to a database.
<LI>

When a user uses a wrong password.
<LI>

When it takes more than <CODE>connect_timeout</CODE> seconds to get
a connect package.
See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.
</UL>

<P>
Note that the above could indicate that someone is trying to break into
your database!

</P>
<P>
Other reasons for problems with Aborted clients / Aborted connections.

<UL>
<LI>

Usage of Ethernet protocol with Linux, both half and full duplex.
Many Linux Ethernet drivers have this bug. You should test for this
bug by transferring a huge file via ftp between these two machines.
If a transfer goes in burst-pause-burst-pause ... mode then you are
experiencing a Linux duplex syndrome.
The only solution is switching duplex mode for both your network card
and Hub/Switch to either full duplex or to half duplex and testing the
results to decide on the best setting.
<LI>

Some problem with the thread library that causes interrupts on reads.
<LI>

Badly configured TCP/IP.
<LI>

Faulty Ethernets or hubs or switches, cables ... This can be diagnosed
properly only by replacing hardware.
<LI>

<CODE>max_allowed_packet</CODE> is too small or queries require more memory
than you have alloacated for <CODE>mysqld</CODE>. See section <A HREF="manual.html#Packet_too_large">A.2.8  <CODE>Packet too large</CODE> Error</A>.
</UL>



<H3><A NAME="Full_table" HREF="manual_toc.html#Full_table">A.2.10  <CODE>The table is full</CODE> Error</A></H3>

<P>
<A NAME="IDX1807"></A>

</P>
<P>
There is a couple of different cases when you can get this error:

</P>

<UL>
<LI>

You are using an older MySQL version (before 3.23.0) when an in-memory
temporary table becomes larger than <CODE>tmp_table_size</CODE> bytes.
To avoid this problem, you can use the <CODE>-O tmp_table_size=#</CODE> option
to make <CODE>mysqld</CODE> increase the temporary table size or use the SQL
option <CODE>BIG_TABLES</CODE> before you issue the problematic query.
See section <A HREF="manual.html#SET_OPTION">5.5.6  <CODE>SET</CODE> Syntax</A>.

You can also start <CODE>mysqld</CODE> with the <CODE>--big-tables</CODE> option.
This is exactly the same as using <CODE>BIG_TABLES</CODE> for all queries.

In MySQL Version 3.23, in-memory temporary tables will automatically be
converted to a disk-based <CODE>MyISAM</CODE> table after the table size gets
bigger than <CODE>tmp_table_size</CODE>.
<LI>

You are using <CODE>InnoDB</CODE> tables and run out of room in the
<CODE>InnoDB</CODE> tablespace. In this case the solution is to extend the
<CODE>InnoDB</CODE> tablespace.
<LI>

You are using <CODE>ISAM</CODE> or <CODE>MyISAM</CODE> tables on an OS that only
supports files of 2G in size and you have hit this limit for the data
or index file.
<LI>

You are using <CODE>MyISAM</CODE> tables and the needed data or index size is
bigger than what MySQL has allocated pointers for.  (If you don't specify
<CODE>MAX_ROWS</CODE> to <CODE>CREATE TABLE</CODE> MySQL will only allocate pointers
to hold 4G of data).

You can check the maximum data/index sizes by doing

<PRE>
SHOW TABLE STATUS FROM database LIKE 'table_name';
</PRE>

or using <CODE>myisamchk -dv database/table_name</CODE>.

If this is the problem, you can fix it by doing something like:

<PRE>
ALTER TABLE table_name MAX_ROWS=1000000000 AVG_ROW_LENGTH=nnn;
</PRE>

You only have to specify <CODE>AVG_ROW_LENGTH</CODE> for tables with BLOB/TEXT
fields as in this case MySQL can't optimise the space required based
only on the number of rows.
</UL>



<H3><A NAME="Cannot_create" HREF="manual_toc.html#Cannot_create">A.2.11  <CODE>Can't create/write to file</CODE> Error</A></H3>

<P>
<A NAME="IDX1808"></A>

</P>
<P>
If you get an error for some queries of type:

</P>

<PRE>
Can't create/write to file '\\sqla3fe_0.ism'.
</PRE>

<P>
this means that MySQL can't create a temporary file for the
result set in the given temporary directory. (The above error is a
typical error message on Windows, and the Unix error message is similar.)
The fix is to start <CODE>mysqld</CODE> with <CODE>--tmpdir=path</CODE> or to add to your
option file:

</P>

<PRE>
[mysqld]
tmpdir=C:/temp
</PRE>

<P>
assuming that the <TT>`c:\\temp'</TT> directory exists. See section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.

</P>
<P>
Check also the error code that you get with <CODE>perror</CODE>. One reason
may also be a disk full error;

</P>

<PRE>
shell&#62; perror 28
Error code  28:  No space left on device
</PRE>



<H3><A NAME="Commands_out_of_sync" HREF="manual_toc.html#Commands_out_of_sync">A.2.12  <CODE>Commands out of sync</CODE> Error in Client</A></H3>

<P>
<A NAME="IDX1809"></A>

</P>
<P>
If you get <CODE>Commands out of sync; you can't run this command now</CODE>
in your client code, you are calling client functions in the wrong order!

</P>
<P>
This can happen, for example, if you are using <CODE>mysql_use_result()</CODE> and
try to execute a new query before you have called <CODE>mysql_free_result()</CODE>.
It can also happen if you try to execute two queries that return data without
a <CODE>mysql_use_result()</CODE> or <CODE>mysql_store_result()</CODE> in between.

</P>



<H3><A NAME="Ignoring_user" HREF="manual_toc.html#Ignoring_user">A.2.13  <CODE>Ignoring user</CODE> Error</A></H3>

<P>
If you get the following error:

</P>
<P>
<CODE>Found wrong password for user: 'some_user@some_host'; ignoring user</CODE>

</P>
<P>
this means that when <CODE>mysqld</CODE> was started or when it reloaded the
permissions tables, it found an entry in the <CODE>user</CODE> table with
an invalid password.  As a result, the entry is simply ignored by the
permission system.

</P>
<P>
Possible causes of and fixes for this problem:

</P>

<UL>
<LI>

You may be running a new version of <CODE>mysqld</CODE> with an old
<CODE>user</CODE> table.
You can check this by executing <CODE>mysqlshow mysql user</CODE> to see if
the password field is shorter than 16 characters. If so, you can correct this
condition by running the <CODE>scripts/add_long_password</CODE> script.

<LI>

The user has an old password (8 characters long) and you didn't start
<CODE>mysqld</CODE> with the <CODE>--old-protocol</CODE> option.
Update the user in the <CODE>user</CODE> table with a new password or
restart <CODE>mysqld</CODE> with <CODE>--old-protocol</CODE>.

<LI>

<A NAME="IDX1810"></A>
You have specified a password in the <CODE>user</CODE> table without using the
<CODE>PASSWORD()</CODE> function.  Use <CODE>mysql</CODE> to update the user in the
<CODE>user</CODE> table with a new password. Make sure to use the <CODE>PASSWORD()</CODE>
function:


<PRE>
mysql&#62; UPDATE user SET password=PASSWORD('your password')
    -&#62;             WHERE user='XXX';
</PRE>

</UL>



<H3><A NAME="Cannot_find_table" HREF="manual_toc.html#Cannot_find_table">A.2.14  <CODE>Table 'xxx' doesn't exist</CODE> Error</A></H3>

<P>
If you get the error <CODE>Table 'xxx' doesn't exist</CODE> or <CODE>Can't
find file: 'xxx' (errno: 2)</CODE>, this means that no table exists
in the current database with the name <CODE>xxx</CODE>.

</P>
<P>
Note that as MySQL uses directories and files to store databases and
tables, the database and table names are <STRONG>case-sensitive</STRONG>!
(On Windows the databases and tables names are not case-sensitive, but all
references to a given table within a query must use the same case!)

</P>
<P>
You can check which tables you have in the current database with
<CODE>SHOW TABLES</CODE>. See section <A HREF="manual.html#SHOW">4.5.6  <CODE>SHOW</CODE> Syntax</A>.

</P>



<H3><A NAME="Cannot_initialize_character_set" HREF="manual_toc.html#Cannot_initialize_character_set">A.2.15  <CODE>Can't initialize character set xxx</CODE> error</A></H3>

<P>
<A NAME="IDX1811"></A>

</P>
<P>
If you get an error like:

</P>

<PRE>
MySQL Connection Failed: Can't initialize character set xxx
</PRE>

<P>
This means one of the following things:

</P>

<UL>
<LI>

The character set is a multi-byte character set and you have no support
for the character set in the client.

In this case you need to recompile the client with
<CODE>--with-charset=xxx</CODE> or with <CODE>--with-extra-charsets=xxx</CODE>.
See section <A HREF="manual.html#configure_options">2.3.3  Typical <CODE>configure</CODE> Options</A>.

All standard MySQL binaries are compiled with
<CODE>--with-extra-character-sets=complex</CODE> which will enable support for
all multi-byte character sets. See section <A HREF="manual.html#Character_sets">4.6.1  The Character Set Used for Data and Sorting</A>.

<LI>

The character set is a simple character set which is not compiled into
<CODE>mysqld</CODE> and the character set definition files are not in the place
where the client expects to find them.

In this case you need to:


<UL>
<LI>

Recompile the client with support for the character set.
See section <A HREF="manual.html#configure_options">2.3.3  Typical <CODE>configure</CODE> Options</A>.
<LI>

Specify to the client where the character set definition files are. For many
clients you can do this with the
<CODE>--character-sets-dir=path-to-charset-dir</CODE> option.
<LI>

Copy the character definition files to the path where the client expects them
to be.
</UL>

</UL>



<H3><A NAME="Not_enough_file_handles" HREF="manual_toc.html#Not_enough_file_handles">A.2.16  File Not Found</A></H3>

<P>
If you get <CODE>ERROR '...' not found (errno: 23)</CODE>, <CODE>Can't open
file: ... (errno: 24)</CODE>, or any other error with <CODE>errno 23</CODE> or
<CODE>errno 24</CODE> from MySQL, it means that you haven't allocated
enough file descriptors for MySQL.  You can use the
<CODE>perror</CODE> utility to get a description of what the error number
means:

</P>

<PRE>
shell&#62; perror 23
File table overflow
shell&#62; perror 24
Too many open files
shell&#62; perror 11
Resource temporarily unavailable
</PRE>

<P>
The problem here is that <CODE>mysqld</CODE> is trying to keep open too many
files simultaneously.  You can either tell <CODE>mysqld</CODE> not to open so
many files at once or increase the number of file descriptors
available to <CODE>mysqld</CODE>.

</P>
<P>
To tell <CODE>mysqld</CODE> to keep open fewer files at a time, you can make
the table cache smaller by using the <CODE>-O table_cache=32</CODE> option to
<CODE>safe_mysqld</CODE> (the default value is 64). Reducing the value of
<CODE>max_connections</CODE> will also reduce the number of open files (the
default value is 90).

</P>
<P>
<A NAME="IDX1812"></A>
To change the number of file descriptors available to <CODE>mysqld</CODE>, you
can use the option <CODE>--open-files-limit=#</CODE> to <CODE>safe_mysqld</CODE> or
<CODE>-O open-files-limit=#</CODE> to <CODE>mysqld</CODE>.
See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.
The easiest way to do that is to add the option to your option file.
See section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.  If you have an old <CODE>mysqld</CODE> version that
doesn't support this, you can edit the <CODE>safe_mysqld</CODE> script.  There
is a commented-out line <CODE>ulimit -n 256</CODE> in the script.  You can
remove the <CODE>'#'</CODE> character to uncomment this line, and change the
number 256 to affect the number of file descriptors available to
<CODE>mysqld</CODE>.

</P>
<P>
<CODE>ulimit</CODE> (and <CODE>open-files-limit</CODE>) can increase the number of
file descriptors, but only up to the limit imposed by the operating
system. There is also a 'hard' limit that can only be overrided if you
start <CODE>safe_mysqld</CODE> or <CODE>mysqld</CODE> as root (just remember that
you need to also use the <CODE>--user=...</CODE> option in this case).  If you
need to increase the OS limit on the number of file descriptors
available to each process, consult the documentation for your operating
system.

</P>
<P>
Note that if you run the <CODE>tcsh</CODE> shell, <CODE>ulimit</CODE> will not work!
<CODE>tcsh</CODE> will also report incorrect values when you ask for the current
limits!  In this case you should start <CODE>safe_mysqld</CODE> with <CODE>sh</CODE>!

</P>



<H2><A NAME="Installation_Issues" HREF="manual_toc.html#Installation_Issues">A.3  Installation Related Issues</A></H2>



<H3><A NAME="Link_errors" HREF="manual_toc.html#Link_errors">A.3.1  Problems When Linking with the MySQL Client Library</A></H3>

<P>
<A NAME="IDX1813"></A>
<A NAME="IDX1814"></A>
<A NAME="IDX1815"></A>

</P>
<P>
If you are linking your program and you get errors for unreferenced
symbols that start with <CODE>mysql_</CODE>, like the following:

</P>

<PRE>
/tmp/ccFKsdPa.o: In function `main':
/tmp/ccFKsdPa.o(.text+0xb): undefined reference to `mysql_init'
/tmp/ccFKsdPa.o(.text+0x31): undefined reference to `mysql_real_connect'
/tmp/ccFKsdPa.o(.text+0x57): undefined reference to `mysql_real_connect'
/tmp/ccFKsdPa.o(.text+0x69): undefined reference to `mysql_error'
/tmp/ccFKsdPa.o(.text+0x9a): undefined reference to `mysql_close'
</PRE>

<P>
you should be able to solve this by adding <CODE>-Lpath-to-the-mysql-library
-lmysqlclient</CODE> <STRONG>last</STRONG> on your link line.

</P>
<P>
If you get <CODE>undefined reference</CODE> errors for the <CODE>uncompress</CODE>
or <CODE>compress</CODE> function, add <CODE>-lz</CODE> <STRONG>last</STRONG> on your link
line and try again!

</P>
<P>
If you get <CODE>undefined reference</CODE> errors for functions that should
exist on your system, like <CODE>connect</CODE>, check the man page for the
function in question, for which libraries you should add to the link
line!

</P>
<P>
If you get <CODE>undefined reference</CODE> errors for functions that don't
exist on your system, like the following:

</P>

<PRE>
mf_format.o(.text+0x201): undefined reference to `__lxstat'
</PRE>

<P>
it usually means that your library is compiled on a system that is not
100% compatible with yours.  In this case you should download the
latest MySQL source distribution and compile this yourself.
See section <A HREF="manual.html#Installing_source">2.3  Installing a MySQL Source Distribution</A>.

</P>
<P>
If you are trying to run a program and you then get errors for
unreferenced symbols that start with <CODE>mysql_</CODE> or that the
<CODE>mysqlclient</CODE> library can't be found, this means that your system
can't find the share <TT>`libmysqlclient.so'</TT> library.

</P>
<P>
The fix for this is to tell your system to search after shared
libraries where the library is located by one of the following methods:

</P>

<UL>
<LI>

Add the path to the directory where you have <TT>`libmysqlclient.so'</TT> the
<CODE>LD_LIBRARY_PATH</CODE> environment variable.
<LI>

Add the path to the directory where you have <TT>`libmysqlclient.so'</TT> the
<CODE>LD_LIBRARY</CODE> environment variable.
<LI>

Copy <TT>`libmysqlclient.so'</TT> to some place that is searched by your system,
like <TT>`/lib'</TT>, and update the shared library information by executing
<CODE>ldconfig</CODE>.
</UL>

<P>
Another way to solve this problem is to link your program statically, with
<CODE>-static</CODE>, or by removing the dynamic MySQL libraries
before linking your code. In the second case you should be
sure that no other programs are using the dynamic libraries!

</P>



<H3><A NAME="Changing_MySQL_user" HREF="manual_toc.html#Changing_MySQL_user">A.3.2  How to Run MySQL As a Normal User</A></H3>

<P>
<A NAME="IDX1816"></A>
<A NAME="IDX1817"></A>

</P>
<P>
The MySQL server <CODE>mysqld</CODE> can be started and run by any user.
In order to change <CODE>mysqld</CODE> to run as a Unix user <CODE>user_name</CODE>, you must
do the following:

</P>

<OL>
<LI>

Stop the server if it's running (use <CODE>mysqladmin shutdown</CODE>).

<LI>

Change the database directories and files so that <CODE>user_name</CODE> has
privileges to read and write files in them (you may need to do this as
the Unix <CODE>root</CODE> user):


<PRE>
shell&#62; chown -R user_name /path/to/mysql/datadir
</PRE>

If directories or files within the MySQL data directory are
symlinks, you'll also need to follow those links and change the directories
and files they point to.  <CODE>chown -R</CODE> may not follow symlinks for
you.

<LI>

Start the server as user <CODE>user_name</CODE>, or, if you are using
MySQL Version 3.22 or later, start <CODE>mysqld</CODE> as the Unix <CODE>root</CODE>
user and use the <CODE>--user=user_name</CODE> option.  <CODE>mysqld</CODE> will switch
to run as the Unix user <CODE>user_name</CODE> before accepting any connections.

<LI>

To start the server as the given user name automatically at system
startup time, add a <CODE>user</CODE> line that specifies the user name to
the <CODE>[mysqld]</CODE> group of the <TT>`/etc/my.cnf'</TT> option file or the
<TT>`my.cnf'</TT> option file in the server's data directory. For example:


<PRE>
[mysqld]
user=user_name
</PRE>

</OL>

<P>
At this point, your <CODE>mysqld</CODE> process should be running fine and dandy as
the Unix user <CODE>user_name</CODE>. One thing hasn't changed, though: the
contents of the permissions tables. By default (right after running the
permissions table install script <CODE>mysql_install_db</CODE>), the MySQL
user <CODE>root</CODE> is the only user with permission to access the <CODE>mysql</CODE>
database or to create or drop databases.  Unless you have changed those
permissions, they still hold. This shouldn't stop you from accessing
MySQL as the MySQL <CODE>root</CODE> user when you're logged in
as a Unix user other than <CODE>root</CODE>; just specify the <CODE>-u root</CODE> option
to the client program.

</P>
<P>
Note that accessing MySQL as <CODE>root</CODE>, by supplying <CODE>-u
root</CODE> on the command-line, has <STRONG>nothing</STRONG> to do with MySQL running
as the Unix <CODE>root</CODE> user, or, indeed, as another Unix user. The access
permissions and user names of MySQL are completely separate from
Unix user names. The only connection with Unix user names is that if you
don't provide a <CODE>-u</CODE> option when you invoke a client program, the client
will try to connect using your Unix login name as your MySQL user
name.

</P>
<P>
If your Unix box itself isn't secured, you should probably at least put a
password on the MySQL <CODE>root</CODE> users in the access tables.
Otherwise, any user with an account on that machine can run <CODE>mysql -u
root db_name</CODE> and do whatever he likes.

</P>



<H3><A NAME="File_permissions" HREF="manual_toc.html#File_permissions">A.3.3  Problems with File Permissions</A></H3>

<P>
<A NAME="IDX1818"></A>
<A NAME="IDX1819"></A>
<A NAME="IDX1820"></A>

</P>
<P>
If you have problems with file permissions, for example, if <CODE>mysql</CODE>
issues the following error message when you create a table:

</P>

<PRE>
ERROR: Can't find file: 'path/with/filename.frm' (Errcode: 13)
</PRE>

<P>
<A NAME="IDX1821"></A>
<A NAME="IDX1822"></A>
then the environment variable <CODE>UMASK</CODE> might be set incorrectly when
<CODE>mysqld</CODE> starts up.  The default umask value is <CODE>0660</CODE>. You can
change this behaviour by starting <CODE>safe_mysqld</CODE> as follows:

</P>

<PRE>
shell&#62; UMASK=384  # = 600 in octal
shell&#62; export UMASK
shell&#62; /path/to/safe_mysqld &#38;
</PRE>

<P>
<A NAME="IDX1823"></A>
<A NAME="IDX1824"></A>
By default MySQL will create database and <CODE>RAID</CODE>
directories with permission type 0700.  You can modify this behaviour by
setting the <CODE>UMASK_DIR</CODE> variable. If you set this, new
directories are created with the combined <CODE>UMASK</CODE> and
<CODE>UMASK_DIR</CODE>. For example, if you want to give group access to
all new directories, you can do:

</P>

<PRE>
shell&#62; UMASK_DIR=504  # = 770 in octal
shell&#62; export UMASK_DIR
shell&#62; /path/to/safe_mysqld &#38;
</PRE>

<P>
In MySQL Version 3.23.25 and above, MySQL assumes that the
value for <CODE>UMASK</CODE> and <CODE>UMASK_DIR</CODE> is in octal if it starts
with a zero.

</P>
<P>
See section <A HREF="manual.html#Environment_variables">F  Environment Variables</A>.

</P>



<H2><A NAME="Administration_Issues" HREF="manual_toc.html#Administration_Issues">A.4  Administration Related Issues</A></H2>



<H3><A NAME="Crashing" HREF="manual_toc.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</A></H3>

<P>
<A NAME="IDX1825"></A>

</P>
<P>
All MySQL versions are tested on many platforms before they are
released.  This doesn't mean that there aren't any bugs in
MySQL, but it means if there are bugs, they are very few and can be
hard to find.  If you have a problem, it will always help if you try to
find out exactly what crashes your system, as you will have a much better
chance of getting this fixed quickly.

</P>
<P>
First, you should try to find out whether the problem is that the
<CODE>mysqld</CODE> daemon dies or whether your problem has to do with your
client.  You can check how long your <CODE>mysqld</CODE> server has been up by
executing <CODE>mysqladmin version</CODE>.  If <CODE>mysqld</CODE> has died, you may
find the reason for this in the file
<TT>`mysql-data-directory/`hostname`.err'</TT>. See section <A HREF="manual.html#Error_log">4.9.1  The Error Log</A>.

</P>
<P>
Many crashes of MySQL are caused by corrupted index / data
files.  MySQL will update the data on disk, with the
<CODE>write()</CODE> system call, after every SQL statement and before the
client is notified about the result. (This is not true if you are running
with <CODE>delay_key_write</CODE>, in which case only the data is written.)
This means that the data is safe even if <CODE>mysqld</CODE> crashes, as the OS will
ensure that the not flushed data is written to disk.  You can force
MySQL to sync everything to disk after every SQL command by
starting <CODE>mysqld</CODE> with <CODE>--flush</CODE>.

</P>
<P>
The above means that normally you shouldn't get corrupted tables unless:

</P>

<UL>
<LI>

Someone/something killed <CODE>mysqld</CODE> or the machine in the middle
of an update.
<LI>

You have found a bug in <CODE>mysqld</CODE> that caused it to die in the
middle of an update.
<LI>

Someone is manipulating the data/index files outside of <STRONG>mysqld</STRONG>
without locking the table properly.
<LI>

If you are running many <CODE>mysqld</CODE> servers on the same data on a
system that doesn't support good filesystem locks (normally handled by
the <CODE>lockd</CODE> daemon ) or if you are running
multiple servers with <CODE>--skip-external-locking</CODE>
<LI>

You have a crashed index/datafile that contains very wrong data that
got <CODE>mysqld</CODE> confused.
<LI>

You have found a bug in the data storage code. This isn't that likely,
but it's at least possible.  In this case you can try to change the file
type to another storage engine by using <CODE>ALTER TABLE</CODE> on a
repaired copy of the table!
</UL>

<P>
Because it is very difficult to know why something is crashing, first try to
check whether things that work for others crash for you.  Please try
the following things:

</P>

<UL>
Take down the <CODE>mysqld</CODE> daemon with <CODE>mysqladmin shutdown</CODE>, run
<CODE>myisamchk --silent --force */*.MYI</CODE> on all tables, and restart the
<CODE>mysqld</CODE> daemon.  This will ensure that you are running from a clean
state.  See section <A HREF="manual.html#MySQL_Database_Administration">4  Database Administration</A>.

<LI>

Use <CODE>mysqld --log</CODE> and try to determine from the information in the log
whether some specific query kills the server. About 95% of all bugs are
related to a particular query!  Normally this is one of the last queries in
the log file just before MySQL restarted. See section <A HREF="manual.html#Query_log">4.9.2  The General Query Log</A>.
If you can repeatadly kill MySQL with one of the queries, even
when you have checked all tables just before doing the query, then you
have been able to locate the bug and should do a bug report for this!
See section <A HREF="manual.html#Bug_reports">1.7.1.3  How to Report Bugs or Problems</A>.

<LI>

Try to make a test case that we can use to reproduce the problem.
See section <A HREF="manual.html#Reproduceable_test_case">E.1.6  Making a Test Case If You Experience Table Corruption</A>.

<LI>

Try running the included mysql-test test and the MySQL
benchmarks.  See section <A HREF="manual.html#MySQL_test_suite">9.1.2  MySQL Test Suite</A>.  They should test MySQL
rather well.  You can also add code to the benchmarks that simulates
your application!  The benchmarks can be found in the <TT>`bench'</TT>
directory in the source distribution or, for a binary distribution, in
the <TT>`sql-bench'</TT> directory under your MySQL installation
directory.

<LI>

Try <CODE>fork_test.pl</CODE> and <CODE>fork2_test.pl</CODE>.

<LI>

If you configure MySQL for debugging, it will be much easier to
gather information about possible errors if something goes wrong.
Reconfigure MySQL with the <CODE>--with-debug</CODE> option or
<CODE>--with-debug=full</CODE> to <CODE>configure</CODE> and then recompile.
See section <A HREF="manual.html#Debugging_server">E.1  Debugging a MySQL server</A>.

<LI>

Configuring MySQL for debugging causes a safe memory allocator to be
included that can find some errors. It also provides a lot of output about
what is happening.

<LI>

Have you applied the latest patches for your operating system?

<LI>

Use the <CODE>--skip-external-locking</CODE> option to <CODE>mysqld</CODE>.  On some
systems, the <CODE>lockd</CODE> lock manager does not work properly; the
<CODE>--skip-external-locking</CODE> option tells <CODE>mysqld</CODE> not to use external
locking.  (This means that you cannot run 2 <CODE>mysqld</CODE> servers on the same
data and that you must be careful if you use <CODE>myisamchk</CODE>, but it may be
instructive to try the option as a test.)

<LI>

Have you tried <CODE>mysqladmin -u root processlist</CODE> when <CODE>mysqld</CODE>
appears to be running but not responding?  Sometimes <CODE>mysqld</CODE> is not
comatose even though you might think so.  The problem may be that all
connections are in use, or there may be some internal lock problem.
<CODE>mysqladmin processlist</CODE> will usually be able to make a connection even
in these cases, and can provide useful information about the current number
of connections and their status.

<LI>

Run the command <CODE>mysqladmin -i 5 status</CODE> or <CODE>mysqladmin -i 5
-r status</CODE> or in a separate window to produce statistics while you run
your other queries.

<LI>

Try the following:

<OL>
<LI>

Start <CODE>mysqld</CODE> from <CODE>gdb</CODE> (or in another debugger).
See section <A HREF="manual.html#Using_gdb_on_mysqld">E.1.3  Debugging mysqld under gdb</A>.

<LI>

Run your test scripts.

<LI>

Print the backtrace and the local variables at the 3 lowest levels. In gdb you
can do this with the following commands when <CODE>mysqld</CODE> has crashed inside
gdb:


<PRE>
backtrace
info local
up
info local
up
info local
</PRE>

With gdb you can also examine which threads exist with <CODE>info
threads</CODE> and switch to a specific thread with <CODE>thread #</CODE>, where
<CODE>#</CODE> is the thread id.
</OL>

<LI>

Try to simulate your application with a Perl script to force
MySQL to crash or misbehave.

<LI>

Send a normal bug report. See section <A HREF="manual.html#Bug_reports">1.7.1.3  How to Report Bugs or Problems</A>. Be even more detailed
than usual.  Because MySQL works for many people, it may be that the
crash results from something that exists only on your computer (for example,
an error that is related to your particular system libraries).
<LI>

If you have a problem with tables with dynamic-length rows and you are
not using <CODE>BLOB/TEXT</CODE> columns (but only <CODE>VARCHAR</CODE> columns), you
can try to change all <CODE>VARCHAR</CODE> to <CODE>CHAR</CODE> with <CODE>ALTER
TABLE</CODE>.  This will force MySQL to use fixed-size rows.
Fixed-size rows take a little extra space, but are much more tolerant to
corruption!

The current dynamic row code has been in use at MySQL AB for at
least 3 years without any problems, but by nature dynamic-length rows are
more prone to errors, so it may be a good idea to try the above to see if
it helps!
</UL>



<H3><A NAME="Resetting_permissions" HREF="manual_toc.html#Resetting_permissions">A.4.2  How to Reset a Forgotten Root Password</A></H3>

<P>
<A NAME="IDX1826"></A>
<A NAME="IDX1827"></A>
<A NAME="IDX1828"></A>

</P>
<P>
If you never set a <CODE>root</CODE> password for MySQL, then the server will
not require a password at all for connecting as <CODE>root</CODE>. It is
recommended to always set a password for each user. See section <A HREF="manual.html#Security">4.2.2  How to Make MySQL Secure Against Crackers</A>.

</P>
<P>
If you have set a <CODE>root</CODE> password, but forgot what it was, you can
set a new password with the following procedure:

</P>

<OL>
<LI>

Take down the <CODE>mysqld</CODE> server by sending a <CODE>kill</CODE> (not <CODE>kill
-9</CODE>) to the <CODE>mysqld</CODE> server.  The pid is stored in a <TT>`.pid'</TT>
file, which is normally in the MySQL database directory:

<PRE>
shell&#62; kill `cat /mysql-data-directory/hostname.pid`
</PRE>

You must be either the Unix <CODE>root</CODE> user or the same user <CODE>mysqld</CODE>
runs as to do this.
<LI>

Restart <CODE>mysqld</CODE> with the <CODE>--skip-grant-tables</CODE> option.
<LI>

Set a new password with the <CODE>mysqladmin password</CODE> command:

<PRE>
shell&#62; mysqladmin -u root password 'mynewpassword'
</PRE>

<LI>

Now you can either stop <CODE>mysqld</CODE> and restart it normally,
or just load the privilege tables with:

<PRE>
shell&#62; mysqladmin -h hostname flush-privileges
</PRE>

<LI>

After this, you should be able to connect using the new password.
</OL>

<P>
Alternatively, you can set the new password using the <CODE>mysql</CODE> client:

<OL>
<LI>

Take down and restart <CODE>mysqld</CODE> with the <CODE>--skip-grant-tables</CODE>
option as described above.
<LI>

Connect to the <CODE>mysqld</CODE> server with:

<PRE>
shell&#62; mysql -u root mysql
</PRE>

<LI>

Issue the following commands in the <CODE>mysql</CODE> client:

<PRE>
mysql&#62; UPDATE user SET Password=PASSWORD('mynewpassword')
    -&#62;             WHERE User='root';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<LI>

After this, you should be able to connect using the new password.
<LI>

You can now stop <CODE>mysqld</CODE> and restart it normally.
</OL>



<H3><A NAME="Full_disk" HREF="manual_toc.html#Full_disk">A.4.3  How MySQL Handles a Full Disk</A></H3>

<P>
<A NAME="IDX1829"></A>
<A NAME="IDX1830"></A>

</P>
<P>
When a disk-full condition occurs, MySQL does the following:

</P>

<UL>
<LI>

It checks once every minute to see whether there is enough space to
write the current row. If there is enough space, it continues as if nothing had
happened.
<LI>

Every 6 minutes it writes an entry to the log file warning about the disk
full condition.
</UL>

<P>
To alleviate the problem, you can take the following actions:

</P>

<UL>
<LI>

To continue, you only have to free enough disk space to insert all records.
<LI>

To abort the thread, you must send a <CODE>mysqladmin kill</CODE> to the thread.
The thread will be aborted the next time it checks the disk (in 1 minute).
<LI>

Note that other threads may be waiting for the table that caused the disk
full condition.  If you have several ``locked'' threads, killing the one
thread that is waiting on the disk-full condition will allow the other
threads to continue.
</UL>

<P>
Exceptions to the above behaveour is when you use <CODE>REPAIR</CODE> or
<CODE>OPTIMIZE</CODE> or when the indexes are created in a batch after an
<CODE>LOAD DATA INFILE</CODE> or after an <CODE>ALTER TABLE</CODE> statement.

</P>
<P>
All of the above commands may use big temporary files that left to
themself would cause big problems for the rest of the system.  If
MySQL gets disk full while doing any of the above operations,
it will remove the big temporary files and mark the table as crashed
(except for <CODE>ALTER TABLE</CODE>, in which the old table will be left
unchanged).

</P>



<H3><A NAME="Temporary_files" HREF="manual_toc.html#Temporary_files">A.4.4  Where MySQL Stores Temporary Files</A></H3>

<P>
MySQL uses the value of the <CODE>TMPDIR</CODE> environment variable as
the pathname of the directory in which to store temporary files.  If you don't
have <CODE>TMPDIR</CODE> set, MySQL uses the system default, which is
normally <TT>`/tmp'</TT> or <TT>`/usr/tmp'</TT>.  If the filesystem containing your
temporary file directory is too small, you should edit <CODE>safe_mysqld</CODE> to
set <CODE>TMPDIR</CODE> to point to a directory in a filesystem where you have
enough space!  You can also set the temporary directory using the
<CODE>--tmpdir</CODE> option to <CODE>mysqld</CODE>.

</P>
<P>
MySQL creates all temporary files as hidden files. This ensures
that the temporary files will be removed if <CODE>mysqld</CODE> is terminated.  The
disadvantage of using hidden files is that you will not see a big temporary
file that fills up the filesystem in which the temporary file directory is
located.

</P>
<P>
When sorting (<CODE>ORDER BY</CODE> or <CODE>GROUP BY</CODE>), MySQL normally
uses one or two temporary files. The maximum disk-space needed is:

</P>

<PRE>
(length of what is sorted + sizeof(database pointer))
* number of matched rows
* 2
</PRE>

<P>
<CODE>sizeof(database pointer)</CODE> is usually 4, but may grow in the future for
really big tables.

</P>
<P>
For some <CODE>SELECT</CODE> queries, MySQL also creates temporary SQL
tables. These are not hidden and have names of the form <TT>`SQL_*'</TT>.

</P>
<P>
<CODE>ALTER TABLE</CODE> creates a temporary table in the same directory as
the original table.

</P>
<P>
If you use MySQL 4.1 or later you can spread load between
several physical disks by setting <CODE>--tmpdir</CODE> to a list of paths
separated by colon <CODE>:</CODE> (semicolon <CODE>;</CODE> on Windows). They
will be used in round-robin fashion.
<STRONG>Note:</STRONG> These paths should end up on different <STRONG>physical</STRONG> disks,
not different partitions of the same disk.

</P>


<H3><A NAME="Problems_with_mysql.sock" HREF="manual_toc.html#Problems_with_mysql.sock">A.4.5  How to Protect or Change the MySQL Socket File <TT>`/tmp/mysql.sock'</TT></A></H3>

<P>
<A NAME="IDX1831"></A>
<A NAME="IDX1832"></A>

</P>
<P>
If you have problems with the fact that anyone can delete the
MySQL communication socket <TT>`/tmp/mysql.sock'</TT>, you can,
on most versions of Unix, protect your <TT>`/tmp'</TT> filesystem by setting
the <CODE>sticky</CODE> bit on it.  Log in as <CODE>root</CODE> and do the following:

</P>

<PRE>
shell&#62; chmod +t /tmp
</PRE>

<P>
This will protect your <TT>`/tmp'</TT> filesystem so that files can be deleted
only by their owners or the superuser (<CODE>root</CODE>).

</P>
<P>
You can check if the <CODE>sticky</CODE> bit is set by executing <CODE>ls -ld /tmp</CODE>.
If the last permission bit is <CODE>t</CODE>, the bit is set.

</P>
<P>
<A NAME="IDX1833"></A>

</P>
<P>
You can change the place where MySQL uses / puts the socket file the
following ways:

</P>

<UL>
<LI>

Specify the path in a global or local option file.
For example, put in <CODE>/etc/my.cnf</CODE>:


<PRE>
[client]
socket=path-for-socket-file

[mysqld]
socket=path-for-socket-file
</PRE>

See section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.
<LI>

Specifying this on the command-line to <CODE>safe_mysqld</CODE> and most
clients with the <CODE>--socket=path-for-socket-file</CODE> option.
<LI>

Specify the path to the socket in the <CODE>MYSQL_UNIX_PORT</CODE> environment
variable.
<LI>

Defining the path with the <CODE>configure</CODE> option
<CODE>--with-unix-socket-path=path-for-socket-file</CODE>. See section <A HREF="manual.html#configure_options">2.3.3  Typical <CODE>configure</CODE> Options</A>.
</UL>

<P>
You can test that the socket works with this command:

</P>

<PRE>
shell&#62; mysqladmin --socket=/path/to/socket version
</PRE>



<H3><A NAME="Timezone_problems" HREF="manual_toc.html#Timezone_problems">A.4.6  Time Zone Problems</A></H3>

<P>
<A NAME="IDX1834"></A>
<A NAME="IDX1835"></A>

</P>
<P>
<A NAME="IDX1836"></A>
<A NAME="IDX1837"></A>

</P>
<P>
If you have a problem with <CODE>SELECT NOW()</CODE> returning values in GMT and
not your local time, you have to set the <CODE>TZ</CODE> environment variable to
your current time zone.  This should be done for the environment in which
the server runs, for example, in <CODE>safe_mysqld</CODE> or <CODE>mysql.server</CODE>.
See section <A HREF="manual.html#Environment_variables">F  Environment Variables</A>.

</P>



<H2><A NAME="Query_Issues" HREF="manual_toc.html#Query_Issues">A.5  Query Related Issues</A></H2>



<H3><A NAME="Case_sensitivity" HREF="manual_toc.html#Case_sensitivity">A.5.1  Case-Sensitivity in Searches</A></H3>

<P>
<A NAME="IDX1838"></A>
<A NAME="IDX1839"></A>
<A NAME="IDX1840"></A>
<A NAME="IDX1841"></A>

</P>
<P>
By default, MySQL searches are case-insensitive (although there are
some character sets that are never case-insensitive, such as <CODE>czech</CODE>).
That means that if you search with <CODE>col_name LIKE 'a%'</CODE>, you will get all
column values that start with <CODE>A</CODE> or <CODE>a</CODE>. If you want to make this
search case-sensitive, use something like <CODE>INSTR(col_name, "A")=1</CODE> to
check a prefix. Or use <CODE>STRCMP(col_name, "A") = 0</CODE> if the column value
must be exactly <CODE>"A"</CODE>.

</P>
<P>
Simple comparison operations (<CODE>&#62;=, &#62;, = , &#60; , &#60;=</CODE>, sorting and
grouping) are based on each character's ``sort value''. Characters with
the same sort value (like E, e and ) are treated as the same character!

</P>
<P>
In older MySQL versions <CODE>LIKE</CODE> comparisons were done on
the uppercase value of each character (E == e but E &#60;&#62; ).  In newer
MySQL versions <CODE>LIKE</CODE> works just like the other comparison
operators.

</P>
<P>
If you want a column always to be treated in case-sensitive fashion,
declare it as <CODE>BINARY</CODE>. See section <A HREF="manual.html#CREATE_TABLE">6.5.3  <CODE>CREATE TABLE</CODE> Syntax</A>.

</P>
<P>
If you are using Chinese data in the so-called big5 encoding, you want to
make all character columns <CODE>BINARY</CODE>. This works because the sorting
order of big5 encoding characters is based on the order of ASCII codes.

</P>



<H3><A NAME="Using_DATE" HREF="manual_toc.html#Using_DATE">A.5.2  Problems Using <CODE>DATE</CODE> Columns</A></H3>

<P>
<A NAME="IDX1842"></A>

</P>
<P>
<A NAME="IDX1843"></A>
<A NAME="IDX1844"></A>

</P>
<P>
The format of a <CODE>DATE</CODE> value is <CODE>'YYYY-MM-DD'</CODE>. According to ANSI
SQL, no other format is allowed. You should use this format in <CODE>UPDATE</CODE>
expressions and in the WHERE clause of <CODE>SELECT</CODE> statements.  For
example:

</P>

<PRE>
mysql&#62; SELECT * FROM tbl_name WHERE date &#62;= '1997-05-05';
</PRE>

<P>
As a convenience, MySQL automatically converts a date to a number if
the date is used in a numeric context (and vice versa). It is also smart
enough to allow a ``relaxed'' string form when updating and in a <CODE>WHERE</CODE>
clause that compares a date to a <CODE>TIMESTAMP</CODE>, <CODE>DATE</CODE>, or a
<CODE>DATETIME</CODE> column.  (Relaxed form means that any punctuation character
may be used as the separator between parts. For example, <CODE>'1998-08-15'</CODE>
and <CODE>'1998#08#15'</CODE> are equivalent.) MySQL can also convert a
string containing no separators (such as <CODE>'19980815'</CODE>), provided it
makes sense as a date.

</P>
<P>
The special date <CODE>'0000-00-00'</CODE> can be stored and retrieved as
<CODE>'0000-00-00'.</CODE> When using a <CODE>'0000-00-00'</CODE> date through
<CODE>MyODBC</CODE>, it will automatically be converted to <CODE>NULL</CODE> in
<CODE>MyODBC</CODE> Version 2.50.12 and above, because ODBC can't handle this kind of
date.

</P>
<P>
Because MySQL performs the conversions described above, the following
statements work:

</P>

<PRE>
mysql&#62; INSERT INTO tbl_name (idate) VALUES (19970505);
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('19970505');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('97-05-05');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('1997.05.05');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('1997 05 05');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('0000-00-00');

mysql&#62; SELECT idate FROM tbl_name WHERE idate &#62;= '1997-05-05';
mysql&#62; SELECT idate FROM tbl_name WHERE idate &#62;= 19970505;
mysql&#62; SELECT MOD(idate,100) FROM tbl_name WHERE idate &#62;= 19970505;
mysql&#62; SELECT idate FROM tbl_name WHERE idate &#62;= '19970505';
</PRE>

<P>
However, the following will not work:

</P>

<PRE>
mysql&#62; SELECT idate FROM tbl_name WHERE STRCMP(idate,'19970505')=0;
</PRE>

<P>
<CODE>STRCMP()</CODE> is a string function, so it converts <CODE>idate</CODE> to
a string and performs a string comparison.  It does not convert
<CODE>'19970505'</CODE> to a date and perform a date comparison.

</P>
<P>
Note that MySQL does very limited checking whether the date is
correct.  If you store an incorrect date, such as <CODE>'1998-2-31'</CODE>, the
wrong date will be stored.

</P>
<P>
Because MySQL packs dates for storage, it can't store any given date as
it would not fit onto the result buffer. The rules for accepting a date
are:

<UL>
<LI>

If MySQL can store and retrieve a given date, the wrong date is accepted
for <CODE>DATE</CODE> and <CODE>DATETIME</CODE> columns.
<LI>

All days values between 0-31 are accepted for any date.  This makes it
very convenient for web applications where you ask year, month and day
in 3 different fields.
<LI>

The day or month field may be zero.  This is convenient if you want
to store a birthdate in a <CODE>DATE</CODE> column and you only know part
of the date.
</UL>

<P>
If the date cannot be converted to any reasonable value, a <CODE>0</CODE> is
stored in the <CODE>DATE</CODE> field, which will be retrieved as
<CODE>0000-00-00</CODE>.  This is both a speed and convenience issue as we
believe that the database's responsiblity is to retrieve the same date
you stored (even if the data was not logically correct in all cases).
We think it is up to the application to check the dates, and not the server.

</P>


<H3><A NAME="Problems_with_NULL" HREF="manual_toc.html#Problems_with_NULL">A.5.3  Problems with <CODE>NULL</CODE> Values</A></H3>

<P>
<A NAME="IDX1845"></A>

</P>
<P>
<A NAME="IDX1846"></A>

</P>
<P>
The concept of the <CODE>NULL</CODE> value is a common source of confusion for
newcomers to SQL, who often think that <CODE>NULL</CODE> is the same thing as an
empty string <CODE>""</CODE>.  This is not the case! For example, the following
statements are completely different:

</P>

<PRE>
mysql&#62; INSERT INTO my_table (phone) VALUES (NULL);
mysql&#62; INSERT INTO my_table (phone) VALUES ("");
</PRE>

<P>
Both statements insert a value into the <CODE>phone</CODE> column, but the first
inserts a <CODE>NULL</CODE> value and the second inserts an empty string.  The
meaning of the first can be regarded as ``phone number is not known'' and the
meaning of the second can be regarded as ``she has no phone''.

</P>
<P>
In SQL, the <CODE>NULL</CODE> value is always false in comparison to any
other value, even <CODE>NULL</CODE>.  An expression that contains <CODE>NULL</CODE>
always produces a <CODE>NULL</CODE> value unless otherwise indicated in
the documentation for the operators and functions involved in the
expression. All columns in the following example return <CODE>NULL</CODE>:

</P>

<PRE>
mysql&#62; SELECT NULL,1+NULL,CONCAT('Invisible',NULL);
</PRE>

<P>
If you want to search for column values that are <CODE>NULL</CODE>, you
cannot use the <CODE>=NULL</CODE> test. The following statement returns no
rows, because <CODE>expr = NULL</CODE> is FALSE, for any expression:

</P>

<PRE>
mysql&#62; SELECT * FROM my_table WHERE phone = NULL;
</PRE>

<P>
To look for <CODE>NULL</CODE> values, you must use the <CODE>IS NULL</CODE> test.
The following shows how to find the <CODE>NULL</CODE> phone number and the
empty phone number:

</P>

<PRE>
mysql&#62; SELECT * FROM my_table WHERE phone IS NULL;
mysql&#62; SELECT * FROM my_table WHERE phone = "";
</PRE>

<P>
Note that you can only add an index on a column that can have <CODE>NULL</CODE>
values if you are using MySQL Version 3.23.2 or newer and are using the
<CODE>MyISAM</CODE> or <CODE>InnoDB</CODE> table type.
In earlier versions and with other table types, you must declare such
columns <CODE>NOT NULL</CODE>. This also means you cannot then insert
<CODE>NULL</CODE> into an indexed column.

</P>
<P>
<A NAME="IDX1847"></A>
When reading data with <CODE>LOAD DATA INFILE</CODE>, empty columns are updated
with <CODE>''</CODE>. If you want a <CODE>NULL</CODE> value in a column, you should use
<CODE>\N</CODE> in the text file. The literal word <CODE>'NULL'</CODE> may also be used
under some circumstances.
See section <A HREF="manual.html#LOAD_DATA">6.4.9  <CODE>LOAD DATA INFILE</CODE> Syntax</A>.

</P>
<P>
When using <CODE>ORDER BY</CODE>, <CODE>NULL</CODE> values are presented first.
In versions prior to 4.0.2, if you sort in descending order using
<CODE>DESC</CODE>, <CODE>NULL</CODE> values are presented last.
When using <CODE>GROUP BY</CODE>, all <CODE>NULL</CODE> values are regarded as equal.

</P>
<P>
To help with <CODE>NULL</CODE> handling, you can use the <CODE>IS NULL</CODE> and
<CODE>IS NOT NULL</CODE> operators and the <CODE>IFNULL()</CODE> function.

</P>
<P>
<A NAME="IDX1848"></A>
<A NAME="IDX1849"></A>
<A NAME="IDX1850"></A>
<A NAME="IDX1851"></A>
For some column types, <CODE>NULL</CODE> values are handled specially.  If you
insert <CODE>NULL</CODE> into the first <CODE>TIMESTAMP</CODE> column of a table, the
current date and time is inserted.  If you insert <CODE>NULL</CODE> into an
<CODE>AUTO_INCREMENT</CODE> column, the next number in the sequence is inserted.

</P>



<H3><A NAME="Problems_with_alias" HREF="manual_toc.html#Problems_with_alias">A.5.4  Problems with <CODE>alias</CODE></A></H3>

<P>
<A NAME="IDX1852"></A>

</P>
<P>
You can use an alias to refer to a column in the <CODE>GROUP BY</CODE>,
<CODE>ORDER BY</CODE>, or in the <CODE>HAVING</CODE> part.  Aliases can also be used
to give columns better names:

</P>

<PRE>
SELECT SQRT(a*b) as rt FROM table_name GROUP BY rt HAVING rt &#62; 0;
SELECT id,COUNT(*) AS cnt FROM table_name GROUP BY id HAVING cnt &#62; 0;
SELECT id AS "Customer identity" FROM table_name;
</PRE>

<P>
Note that ANSI SQL doesn't allow you to refer to an alias in a
<CODE>WHERE</CODE> clause.  This is because when the <CODE>WHERE</CODE> code is
executed the column value may not yet be determined. For example, the
following query is <STRONG>illegal</STRONG>:

</P>

<PRE>
SELECT id,COUNT(*) AS cnt FROM table_name WHERE cnt &#62; 0 GROUP BY id;
</PRE>

<P>
The <CODE>WHERE</CODE> statement is executed to determine which rows should
be included in the <CODE>GROUP BY</CODE> part while <CODE>HAVING</CODE> is used to
decide which rows from the result set should be used.

</P>



<H3><A NAME="Deleting_from_related_tables" HREF="manual_toc.html#Deleting_from_related_tables">A.5.5  Deleting Rows from Related Tables</A></H3>

<P>
<A NAME="IDX1853"></A>
<A NAME="IDX1854"></A>
<A NAME="IDX1855"></A>

</P>
<P>
As MySQL doesn't support subqueries (prior to Version 4.1), nor the use of more
than one table in the <CODE>DELETE</CODE> statement (prior to Version 4.0), you
should use the following approach to delete rows from 2 related tables:

</P>

<OL>
<LI>

<CODE>SELECT</CODE> the rows based on some <CODE>WHERE</CODE> condition in the main table.
<LI>

<CODE>DELETE</CODE> the rows in the main table based on the same condition.
<LI>

<CODE>DELETE FROM related_table WHERE related_column IN (selected_rows)</CODE>.
</OL>

<P>
If the total number of characters in the query with
<CODE>related_column</CODE> is more than 1,048,576 (the default value of
<CODE>max_allowed_packet</CODE>, you should split it into smaller parts and
execute multiple <CODE>DELETE</CODE> statements.  You will probably get the
fastest <CODE>DELETE</CODE> by only deleting 100-1000 <CODE>related_column</CODE>
id's per query if the <CODE>related_column</CODE> is an index.  If the
<CODE>related_column</CODE> isn't an index, the speed is independent of the
number of arguments in the <CODE>IN</CODE> clause.

</P>



<H3><A NAME="No_matching_rows" HREF="manual_toc.html#No_matching_rows">A.5.6  Solving Problems with No Matching Rows</A></H3>

<P>
<A NAME="IDX1856"></A>
<A NAME="IDX1857"></A>

</P>
<P>
If you have a complicated query that has many tables and that doesn't
return any rows, you should use the following procedure to find out what
is wrong with your query:

</P>

<OL>
<LI>

Test the query with <CODE>EXPLAIN</CODE> and check if you can find something that is
obviously wrong. See section <A HREF="manual.html#EXPLAIN">5.2.1  <CODE>EXPLAIN</CODE> Syntax (Get Information About a <CODE>SELECT</CODE>)</A>.

<LI>

Select only those fields that are used in the <CODE>WHERE</CODE> clause.

<LI>

Remove one table at a time from the query until it returns some rows.
If the tables are big, it's a good idea to use <CODE>LIMIT 10</CODE> with the query.

<LI>

Do a <CODE>SELECT</CODE> for the column that should have matched a row against
the table that was last removed from the query.

<LI>

If you are comparing <CODE>FLOAT</CODE> or <CODE>DOUBLE</CODE> columns with numbers that
have decimals, you can't use <CODE>'='</CODE>. This problem is common in most
computer languages because floating-point values are not exact values.
In most cases, changing the <CODE>FLOAT</CODE> to a <CODE>DOUBLE</CODE> will fix this.
See section <A HREF="manual.html#Problems_with_float">A.5.7  Problems with Floating-Point Comparison</A>.

<LI>

If you still can't figure out what's wrong, create a minimal test that can
be run with <CODE>mysql test &#60; query.sql</CODE> that shows your problems.
You can create a test file with <CODE>mysqldump --quick database tables &#62; query.sql</CODE>. Open the file in an editor, remove some insert lines (if there are
too many of these), and add your select statement at the end of the file.

Test that you still have your problem by doing:


<PRE>
shell&#62; mysqladmin create test2
shell&#62; mysql test2 &#60; query.sql
</PRE>

Post the test file using <CODE>mysqlbug</CODE> to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>.
</OL>



<H3><A NAME="Problems_with_float" HREF="manual_toc.html#Problems_with_float">A.5.7  Problems with Floating-Point Comparison</A></H3>

<P>
floating-point numbers cause confusion sometimes, because these numbers
are not stored as exact values inside computer architecture. What one
can see on the screen usually is not the exact value of the number.

</P>
<P>
Field types <CODE>FLOAT</CODE>, <CODE>DOUBLE</CODE> and <CODE>DECIMAL</CODE> are such.

</P>

<PRE>
CREATE TABLE t1 (i INT, d1 DECIMAL(9,2), d2 DECIMAL(9,2));
INSERT INTO t1 VALUES (1, 101.40, 21.40), (1, -80.00, 0.00),
(2, 0.00, 0.00), (2, -13.20, 0.00), (2, 59.60, 46.40),
(2, 30.40, 30.40), (3, 37.00, 7.40), (3, -29.60, 0.00),
(4, 60.00, 15.40), (4, -10.60, 0.00), (4, -34.00, 0.00),
(5, 33.00, 0.00), (5, -25.80, 0.00), (5, 0.00, 7.20),
(6, 0.00, 0.00), (6, -51.40, 0.00);

mysql&#62; SELECT i, SUM(d1) AS a, SUM(d2) AS b
    -&#62; FROM t1 GROUP BY i HAVING a &#60;&#62; b;
+------+--------+-------+
| i    | a      | b     |
+------+--------+-------+
|    1 |  21.40 | 21.40 |
|    2 |  76.80 | 76.80 |
|    3 |   7.40 |  7.40 |
|    4 |  15.40 | 15.40 |
|    5 |   7.20 |  7.20 |
|    6 | -51.40 |  0.00 |
+------+--------+-------+
</PRE>

<P>
The result is correct. Although the first five records look like they
shouldn't pass the comparison test, they may do so because the
difference between the numbers show up around tenth decimal, or so
depending on computer architecture.

</P>
<P>
The problem cannot be solved by using ROUND() (or similar function),
because the result is still a floating-point number. Example:

</P>

<PRE>
mysql&#62; SELECT i, ROUND(SUM(d1), 2) AS a, ROUND(SUM(d2), 2) AS b
    -&#62; FROM t1 GROUP BY i HAVING a &#60;&#62; b;
+------+--------+-------+
| i    | a      | b     |
+------+--------+-------+
|    1 |  21.40 | 21.40 |
|    2 |  76.80 | 76.80 |
|    3 |   7.40 |  7.40 |
|    4 |  15.40 | 15.40 |
|    5 |   7.20 |  7.20 |
|    6 | -51.40 |  0.00 |
+------+--------+-------+
</PRE>

<P>
This is what the numbers in column 'a' look like:

<PRE>
mysql&#62; SELECT i, ROUND(SUM(d1), 2)*1.0000000000000000 AS a,
    -&#62; ROUND(SUM(d2), 2) AS b FROM t1 GROUP BY i HAVING a &#60;&#62; b;
+------+----------------------+-------+
| i    | a                    | b     |
+------+----------------------+-------+
|    1 |  21.3999999999999986 | 21.40 |
|    2 |  76.7999999999999972 | 76.80 |
|    3 |   7.4000000000000004 |  7.40 |
|    4 |  15.4000000000000004 | 15.40 |
|    5 |   7.2000000000000002 |  7.20 |
|    6 | -51.3999999999999986 |  0.00 |
+------+----------------------+-------+
</PRE>

<P>
Depending on the computer architecture you may or may not see similar results.
Each CPU may evaluate floating-point numbers differently. For example in
some machines you may get 'right' results by multiplaying both arguments
with 1, an example follows.

</P>
<P>
<STRONG>WARNING: NEVER TRUST THIS METHOD IN YOUR APPLICATION, THIS IS
AN EXAMPLE OF A WRONG METHOD!!!</STRONG>

</P>

<PRE>
mysql&#62; SELECT i, ROUND(SUM(d1), 2)*1 AS a, ROUND(SUM(d2), 2)*1 AS b
    -&#62; FROM t1 GROUP BY i HAVING a &#60;&#62; b;
+------+--------+------+
| i    | a      | b    |
+------+--------+------+
|    6 | -51.40 | 0.00 |
+------+--------+------+
</PRE>

<P>
The reason why the above example seems to be working is that on the
particular machine where the test was done, the CPU floating-point
arithmetics happens to round the numbers to same, but there is no
rule that any CPU should do so, so it cannot be trusted.

</P>
<P>
The correct way to do floating-point number comparison is to first
decide on what is the wanted tolerance between the numbers and then do
the comparison against the tolerance number. For example, if we agree on
that floating-point numbers should be regarded the same, if they are
same with precision of one of ten thousand (0.0001), the comparison
should be done like this:

</P>

<PRE>
mysql&#62; SELECT i, SUM(d1) AS a, SUM(d2) AS b FROM t1
    -&#62; GROUP BY i HAVING ABS(a - b) &#62; 0.0001;
+------+--------+------+
| i    | a      | b    |
+------+--------+------+
|    6 | -51.40 | 0.00 |
+------+--------+------+
1 row in set (0.00 sec)
</PRE>

<P>
And vice versa, if we wanted to get rows where the numbers are the same,
the test would be:

</P>

<PRE>
mysql&#62; SELECT i, SUM(d1) AS a, SUM(d2) AS b FROM t1
    -&#62; GROUP BY i HAVING ABS(a - b) &#60; 0.0001;
+------+-------+-------+
| i    | a     | b     |
+------+-------+-------+
|    1 | 21.40 | 21.40 |
|    2 | 76.80 | 76.80 |
|    3 |  7.40 |  7.40 |
|    4 | 15.40 | 15.40 |
|    5 |  7.20 |  7.20 |
+------+-------+-------+
</PRE>



<H2><A NAME="Table_Definition_Issues" HREF="manual_toc.html#Table_Definition_Issues">A.6  Table Definition Related Issues</A></H2>



<H3><A NAME="ALTER_TABLE_problems" HREF="manual_toc.html#ALTER_TABLE_problems">A.6.1  Problems with <CODE>ALTER TABLE</CODE>.</A></H3>

<P>
<A NAME="IDX1858"></A>
<A NAME="IDX1859"></A>
<A NAME="IDX1860"></A>

</P>
<P>
<CODE>ALTER TABLE</CODE> changes a table to the current character set.
If you get a duplicate key error during <CODE>ALTER TABLE</CODE>, then the cause
is either that the new character sets maps two keys to the same value
or that the table is corrupted, in which case you should run
<CODE>REPAIR TABLE</CODE> on the table.

</P>
<P>
If <CODE>ALTER TABLE</CODE> dies with an error like this:

</P>

<PRE>
Error on rename of './database/name.frm' to './database/B-a.frm' (Errcode: 17)
</PRE>

<P>
the problem may be that MySQL has crashed in a previous <CODE>ALTER
TABLE</CODE> and there is an old table named <TT>`A-something'</TT> or
<TT>`B-something'</TT> lying around.  In this case, go to the MySQL data
directory and delete all files that have names starting with <CODE>A-</CODE> or
<CODE>B-</CODE>.  (You may want to move them elsewhere instead of deleting them.)

</P>
<P>
<CODE>ALTER TABLE</CODE> works the following way:

</P>

<UL>
<LI>Create a new table named <TT>`A-xxx'</TT> with the requested changes.

<LI>All rows from the old table are copied to <TT>`A-xxx'</TT>.

<LI>The old table is renamed <TT>`B-xxx'</TT>.

<LI><TT>`A-xxx'</TT> is renamed to your old table name.

<LI><TT>`B-xxx'</TT> is deleted.

</UL>

<P>
If something goes wrong with the renaming operation, MySQL tries to
undo the changes.  If something goes seriously wrong (this shouldn't happen,
of course), MySQL may leave the old table as <TT>`B-xxx'</TT>, but a
simple rename on the system level should get your data back.

</P>



<H3><A NAME="Change_column_order" HREF="manual_toc.html#Change_column_order">A.6.2  How To Change the Order of Columns in a Table</A></H3>

<P>
<A NAME="IDX1861"></A>
<A NAME="IDX1862"></A>
<A NAME="IDX1863"></A>
<A NAME="IDX1864"></A>

</P>
<P>
The whole point of SQL is to abstract the application from the data
storage format.  You should always specify the order in which you wish to
retrieve your data.  For example:

</P>

<PRE>
SELECT col_name1, col_name2, col_name3 FROM tbl_name;
</PRE>

<P>
will return columns in the order <CODE>col_name1</CODE>, <CODE>col_name2</CODE>, <CODE>col_name3</CODE>, whereas:

</P>

<PRE>
SELECT col_name1, col_name3, col_name2 FROM tbl_name;
</PRE>

<P>
will return columns in the order <CODE>col_name1</CODE>, <CODE>col_name3</CODE>, <CODE>col_name2</CODE>.

</P>
<P>
If you want to change the order of columns anyway, you can do it as follows:

</P>

<OL>
<LI>

Create a new table with the columns in the right order.
<LI>

Execute
<CODE>INSERT INTO new_table SELECT fields-in-new_table-order FROM old_table</CODE>.
<LI>

Drop or rename <CODE>old_table</CODE>.
<LI>

<CODE>ALTER TABLE new_table RENAME old_table</CODE>.
</OL>

<P>
You should <STRONG>never</STRONG>, in an application, use <CODE>SELECT *</CODE> and
retrieve the columns based on their position, because the order and
position in which columns are returned <STRONG>cannot</STRONG> may not remain
the same (if you add/move/delete columns). A simple change to your
database structure would then cause your application to fail.
Of course <CODE>SELECT *</CODE> is quite suitable for testing queries.

</P>



<H3><A NAME="Temporary_table_problems" HREF="manual_toc.html#Temporary_table_problems">A.6.3  TEMPORARY TABLE problems</A></H3>

<P>
<A NAME="IDX1865"></A>

</P>
<P>
The following are a list of the limitations with <CODE>TEMPORARY TABLES</CODE>.

</P>

<UL>
<LI>

A temporary table can only be of type <CODE>HEAP</CODE>, <CODE>ISAM</CODE>,
<CODE>MyISAM</CODE>, <CODE>MERGE</CODE>, or <CODE>InnoDB</CODE>.
<LI>

You can't use temporary tables more than once in the same query.
For example, the following doesn't work.


<PRE>
mysql&#62; SELECT * FROM temporary_table, temporary_table AS t2;
</PRE>

<LI>

You can't use <CODE>RENAME</CODE> on a <CODE>TEMPORARY</CODE> table.
Note that <CODE>ALTER TABLE org_name RENAME new_name</CODE> works!
</UL>



<H1><A NAME="Contrib" HREF="manual_toc.html#Contrib">B  Contributed Programs</A></H1>

<P>
<A NAME="IDX1866"></A>
<A NAME="IDX1867"></A>

</P>
<P>
Many users of MySQL have contributed <EM>very</EM> useful support
tools and add-ons.

</P>
<P>
A list of some software available from the MySQL website (or any mirror) is
shown here.

</P>
<P>
You can also visit our online listing of MySQL-related software at
<a HREF="http://www.mysql.com/portal/software/">http://www.mysql.com/portal/software/</a>.
The community facilities there also allow for your input!

</P>
<P>
If you want to build MySQL support for the Perl <CODE>DBI</CODE>/<CODE>DBD</CODE>
interface, you should fetch the <CODE>Data-Dumper</CODE>, <CODE>DBI</CODE>, and
<CODE>Msql-Mysql-modules</CODE> files and install them.
See section <A HREF="manual.html#Perl_support">2.7  Perl Installation Comments</A>.

</P>
<P>
Note: The programs listed here can be freely downloaded and used.
They are copyrighted by their respective owners.
Please see individual product documentation for more details on licensing and terms.
MySQL AB assumes no liability for the correctness of the information in this
chapter or for the proper operation of the programs listed herein.

</P>


<H2><A NAME="SEC721" HREF="manual_toc.html#SEC721">B.1  APIs</A></H2>

<P>
<A NAME="IDX1868"></A>

<UL>
<LI>Perl Modules


<UL>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/KAMXbase1.2.tar.gz">http://www.mysql.com/Downloads/Contrib/KAMXbase1.2.tar.gz</a>

Convert between <TT>`.dbf'</TT> files and MySQL tables.  Perl
module written by Pratap Pereira <a HREF="mailto:pereira@ee.eng.ohio-state.edu">pereira@ee.eng.ohio-state.edu</a>,
extended by Kevin A. McGrail <a HREF="mailto:kmcgrail@digital1.peregrinehw.com">kmcgrail@digital1.peregrinehw.com</a>.
This converter can handle MEMO fields.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/HandySQL-1.1.tar.gz">http://www.mysql.com/Downloads/Contrib/HandySQL-1.1.tar.gz</a>

HandySQL is a MySQL access module. It offers a C interface embedded in Perl and is
approximately 20% faster than regular DBI.

</UL>

<A NAME="IDX1869"></A>
<LI>OLEDB


<UL>
<LI><a HREF="http://www.mysql.com/Downloads/Win32/MyOLEDB3.exe">http://www.mysql.com/Downloads/Win32/MyOLEDB3.exe</a>

MyOLEDB 3.0 installation package from SWSoft.
<LI><a HREF="http://www.mysql.com/Downloads/Win32/mysql-oledb-3.0.0.zip">http://www.mysql.com/Downloads/Win32/mysql-oledb-3.0.0.zip</a>

Source for MyOLEDB 3.0.
<LI><a HREF="http://www.mysql.com/Downloads/Win32/MySamples.zip">http://www.mysql.com/Downloads/Win32/MySamples.zip</a>

Examples and documentation for MyOLEDB.
<LI><a HREF="http://www.mysql.com/Downloads/Win32/MyOLEDB.chm">http://www.mysql.com/Downloads/Win32/MyOLEDB.chm</a>

Help files for MyOLEDB.
<LI><a HREF="http://www.mysql.com/Downloads/Win32/libmyodbc.zip">http://www.mysql.com/Downloads/Win32/libmyodbc.zip</a>

Static MyODBC library used for build MyOLEDB. Based on MyODBC code.
</UL>

<A NAME="IDX1870"></A>
<LI>C++


<UL>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysql-c++-0.02.tar.gz">http://www.mysql.com/Downloads/Contrib/mysql-c++-0.02.tar.gz</a>

MySQL C++ wrapper library. By Roland Haenel,
<a HREF="mailto:rh@ginster.net">rh@ginster.net</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MyDAO.tar.gz">http://www.mysql.com/Downloads/Contrib/MyDAO.tar.gz</a>

MySQL C++ API. By Satish <a HREF="mailto:spitfire@pn3.vsnl.net.in">spitfire@pn3.vsnl.net.in</a>. Inspired
by Roland Haenel's C++ API and Ed Carp's MyC library.

<LI><a HREF="http://www.mysql.com/products/mysql++/">http://www.mysql.com/products/mysql++/</a>

MySQL C++ API (more than just a wrapper library). Originally by
<a HREF="mailto:kevina@clark.net">kevina@clark.net</a>. Now maintained by Sinisa at MySQL AB.

<LI><a HREF="http://nelsonjr.homepage.com/NJrAPI/">http://nelsonjr.homepage.com/NJrAPI/</a>

A C++ database independent library that supports MySQL.
</UL>

<A NAME="IDX1871"></A>
<LI>Delphi


<UL>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/DelphiMySQL2.zip">http://www.mysql.com/Downloads/Contrib/DelphiMySQL2.zip</a>

Delphi interface to <CODE>libmysql.dll</CODE>, by <a HREF="mailto:bsilva@umesd.k12.or.us">bsilva@umesd.k12.or.us</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/Udmysql.pas">http://www.mysql.com/Downloads/Contrib/Udmysql.pas</a>

A wrapper for libmysql.dll for usage in Delphi. By Reiner Sombrowsky.

<LI><a HREF="http://www.fichtner.net/delphi/mysql.delphi.phtml">http://www.fichtner.net/delphi/mysql.delphi.phtml</a>

A Delphi Interface to MySQL, with source code. By Matthias Fichtner.

<LI><a HREF="http://www.productivity.org/projects/tmysql/">http://www.productivity.org/projects/tmysql/</a>

<CODE>TmySQL</CODE>, a library to use MySQL with Delphi.

<LI><a HREF="https://sourceforge.net/projects/zeoslib/">https://sourceforge.net/projects/zeoslib/</a>

Zeos Library is a set of delphi native datasets and database
components for MySql, PostgreSql, Interbase, MS SQL, Oracle,
DB/2. Also it includes development tools such as Database
Explorer and Database Designer.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/Win32/SBMySQL50Share.exe">http://www.mysql.com/Downloads/Contrib/Win32/SBMySQL50Share.exe</a>

Delphi 5 Shareware MySQL Dataset Components.
</UL>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysql-ruby-2.2.0.tar.gz">http://www.mysql.com/Downloads/Contrib/mysql-ruby-2.2.0.tar.gz</a>

MySQL Ruby module. By TOMITA Masahiro <a HREF="mailto:tommy@tmtm.org">tommy@tmtm.org</a>
Ruby is an Object-Oriented Interpreter Language
(<a HREF="http://www.netlab.co.jp/ruby/">http://www.netlab.co.jp/ruby/</a>).

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/JdmMysqlDriver-0.1.0.tar.gz">http://www.mysql.com/Downloads/Contrib/JdmMysqlDriver-0.1.0.tar.gz</a>

A VisualWorks 3.0 Smalltalk driver for MySQL. By
<a HREF="mailto:joshmiller@earthlink.net">joshmiller@earthlink.net</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/Db.py">http://www.mysql.com/Downloads/Contrib/Db.py</a>

Python module with caching. By <a HREF="mailto:gandalf@rosmail.com">gandalf@rosmail.com</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MySQLmodule-1.4.tar.gz">http://www.mysql.com/Downloads/Contrib/MySQLmodule-1.4.tar.gz</a>

Python interface for MySQL. By Joseph Skinner <a HREF="mailto:joe@earthlight.co.nz">joe@earthlight.co.nz</a>. Modified by Joerg Senekowitsch <a HREF="mailto:senekow@ibm.net">senekow@ibm.net</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MySQL-python-0.3.0.tar.gz">http://www.mysql.com/Downloads/Contrib/MySQL-python-0.3.0.tar.gz</a>

MySQLdb Python is an DB-API v2.0-compliant interface to MySQL. Transactions
are supported if the server and tables support them.  It is
thread-safe, and contains a compatibility module for older code
written for the no-longer-maintained MySQLmodule interface.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysql_mex_12.tar.gz">http://www.mysql.com/Downloads/Contrib/mysql_mex_12.tar.gz</a>

An interface program for the Matlab program by MathWorks.  The interface
is done by Kimmo Uutela and John Fisher (not by Mathworks).
Check <a HREF="http://boojum.hut.fi/~kuutela/mysqlmex.html">http://boojum.hut.fi/~kuutela/mysqlmex.html</a>
for more information.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysqltcl-1.53.tar.gz">http://www.mysql.com/Downloads/Contrib/mysqltcl-1.53.tar.gz</a>

Tcl interface for MySQL. Based on <TT>`msqltcl-1.50.tar.gz'</TT>.
For version 2.0 and more info, see <a HREF="http://www.xdobry.de/mysqltcl/">http://www.xdobry.de/mysqltcl/</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MyC-0.1.tar.gz">http://www.mysql.com/Downloads/Contrib/MyC-0.1.tar.gz</a>

A Visual Basic-like API, by Ed Carp.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/Vdb-dflts-2.1.tar.gz">http://www.mysql.com/Downloads/Contrib/Vdb-dflts-2.1.tar.gz</a>

This is a new version of a set of library utilities intended
to provide a generic interface to SQL database engines such that your
application becomes a 3-tiered application.  The advantage is that you
can easily switch between and move to other database engines by
implementing one file for the new backend without making any
changes to your applications. By <a HREF="mailto:damian@cablenet.net">damian@cablenet.net</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/DbFramework-1.10.tar.gz">http://www.mysql.com/Downloads/Contrib/DbFramework-1.10.tar.gz</a>

DbFramework is a collection of classes for manipulating MySQL
databases.  The classes are loosely based on the CDIF Data Model
Subject Area. By Paul Sharpe <a HREF="mailto:paul@miraclefish.com">paul@miraclefish.com</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/pike-mysql-1.4.tar.gz">http://www.mysql.com/Downloads/Contrib/pike-mysql-1.4.tar.gz</a>

MySQL module for pike. For use with the Roxen web server.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/squile.tar.gz">http://www.mysql.com/Downloads/Contrib/squile.tar.gz</a>

Module for <CODE>guile</CODE> that allows <CODE>guile</CODE> to interact with SQL
databases. By Hal Roberts.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/stk-mysql.tar.gz">http://www.mysql.com/Downloads/Contrib/stk-mysql.tar.gz</a>

Interface for Stk. Stk is the Tk widgets with Scheme underneath instead of Tcl.
By Terry Jones.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/eiffel-wrapper-1.0.tar.gz">http://www.mysql.com/Downloads/Contrib/eiffel-wrapper-1.0.tar.gz</a>

Eiffel wrapper by Michael Ravits.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/SQLmy0.06.tgz">http://www.mysql.com/Downloads/Contrib/SQLmy0.06.tgz</a>

FlagShip Replaceable Database Driver (RDD) for MySQL. By Alejandro
Fernandez Herrero.
The Flagship RDD homepage is at <a HREF="http://www.fship.com/rdds.html">http://www.fship.com/rdds.html</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mydsn-1.0.zip">http://www.mysql.com/Downloads/Contrib/mydsn-1.0.zip</a>

Binary and source for <CODE>mydsn.dll</CODE>. mydsn should be used to build
and remove the DSN registry file for the MyODBC driver in Coldfusion
applications.  By Miguel Angel Solrzano.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MySQL-ADA95_API.zip">http://www.mysql.com/Downloads/Contrib/MySQL-ADA95_API.zip</a>

An ADA95 interface to the MySQL API. By Francois Fabien.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MyTool-DLL_for_VB_and_MySQL.zip">http://www.mysql.com/Downloads/Contrib/MyTool-DLL_for_VB_and_MySQL.zip</a>

A DLL with MySQL C API for Visual Basic.
By Ken Menzel <a HREF="mailto:kenm@icarz.com">kenm@icarz.com</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MYSQLX.EXE">http://www.mysql.com/Downloads/Contrib/MYSQLX.EXE</a>

MySQL ActiveX Object for directly accessing your MySQL
servers from IIS/ASP, VB, VC++ skipping the slower ODBC methods. Fully
updatable, multi-threaded with full support for all MySQL fieldtypes
(version 2001.1.1). By SciBit <a HREF="http://www.scibit.com/">http://www.scibit.com/</a>.

<LI><a HREF="http://www.fastflow.it/mylua/">http://www.fastflow.it/mylua/</a>

MyLUA home page; how to use the LUA language to write MySQL
<CODE>PROCEDURE</CODE> that can be loaded runtime.


<UL>
<LI><a HREF="http://www.mysql.com/Downloads/Contrib/lua-4.0.tar.gz">http://www.mysql.com/Downloads/Contrib/lua-4.0.tar.gz</a>

LUA 4.0
<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mylua-3.23.32.1.tar.gz">http://www.mysql.com/Downloads/Contrib/mylua-3.23.32.1.tar.gz</a>

Patch for MySQL 3.23.32 to use LUA 4.0.  By Cristian Giussani.
</UL>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/patched_myodbc.zip">http://www.mysql.com/Downloads/Contrib/patched_myodbc.zip</a>

Patch (for Omniform 4.0 support) to the MyODBC driver.
By Thomas Thaele <a HREF="mailto:tthaele@papenmeier.de">tthaele@papenmeier.de</a>

</UL>

<P>
<A NAME="IDX1872"></A>


<H2><A NAME="SEC722" HREF="manual_toc.html#SEC722">B.2  Converters</A></H2>


<UL>
<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mssql2mysql.txt">http://www.mysql.com/Downloads/Contrib/mssql2mysql.txt</a>

Converter from MS-SQL to MySQL. By Michael Kofler.
The mssql2mysql home page is at
<a HREF="http://www.kofler.cc/mysql/mssql2mysql.html">http://www.kofler.cc/mysql/mssql2mysql.html</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/dbf2mysql-1.14.tar.gz">http://www.mysql.com/Downloads/Contrib/dbf2mysql-1.14.tar.gz</a>

Convert between <TT>`.dbf'</TT> files and MySQL tables. By Maarten
Boekhold (<a HREF="mailto:boekhold@cindy.et.tudelft.nl">boekhold@cindy.et.tudelft.nl</a>), William Volkman, and
Michael Widenius.  This converter includes rudimentary read-only support
for MEMO fields.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/dbf2mysql-1.13.tgz">http://www.mysql.com/Downloads/Contrib/dbf2mysql-1.13.tgz</a>

Convert between <TT>`.dbf'</TT> files and MySQL tables. By Maarten
Boekhold, <a HREF="mailto:boekhold@cindy.et.tudelft.nl">boekhold@cindy.et.tudelft.nl</a>, and Michael Widenius.
This converter can't handle MEMO fields.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/dbf2mysql.zip">http://www.mysql.com/Downloads/Contrib/dbf2mysql.zip</a>

Convert between FoxPro <TT>`.dbf'</TT> files and MySQL tables on Windows.
By Alexander Eltsyn, <a HREF="mailto:ae@nica.ru">ae@nica.ru</a> or <a HREF="mailto:ae@usa.net">ae@usa.net</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/dbf2sql.zip">http://www.mysql.com/Downloads/Contrib/dbf2sql.zip</a>

Short and simple prg that can help you transport your data from foxpro
table into MySQL table. By Danko Josic.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/dump2h-1.20.gz">http://www.mysql.com/Downloads/Contrib/dump2h-1.20.gz</a>

Convert from <CODE>mysqldump</CODE> output to a C header file. By Harry Brueckner,
<a HREF="mailto:brueckner@mail.respublica.de">brueckner@mail.respublica.de</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/exportsql.txt">http://www.mysql.com/Downloads/Contrib/exportsql.txt</a>

A script that is similar to <CODE>access_to_mysql.txt</CODE>, except that this
one is fully configurable, has better type conversion (including
detection of <CODE>TIMESTAMP</CODE> fields), provides warnings and suggestions
while converting, quotes <STRONG>all</STRONG> special characters in text and
binary data, and so on.  It will also convert to <CODE>mSQL</CODE> v1 and v2,
and is free of charge for anyone. See
<a HREF="http://www.cynergi.net/exportsql/">http://www.cynergi.net/exportsql/</a> for the latest version. By
Pedro Freire, <a HREF="mailto:support@cynergi.net">support@cynergi.net</a>.  Note: Doesn't work with
Access2!

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/access_to_mysql.txt">http://www.mysql.com/Downloads/Contrib/access_to_mysql.txt</a>

Paste this function into an Access module of a database that has the
tables you want to export. See also <CODE>exportsql</CODE>. By Brian Andrews.
Note: Doesn't work with Access2!

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/importsql.txt">http://www.mysql.com/Downloads/Contrib/importsql.txt</a>

A script that does the exact reverse of <CODE>exportsql.txt</CODE>.  That is,
it imports data from MySQL into an Access database via
ODBC. This is very handy when combined with exportsql, because it lets you
use Access for all DB design and administration, and synchronise with
your actual MySQL server either way. Free of charge. See
<a HREF="http://www.netdive.com/freebies/importsql/">http://www.netdive.com/freebies/importsql/</a> for any updates.
Created by Laurent Bossavit of NetDIVE.
<STRONG>Note</STRONG>: doesn't work with Access2!

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mdb2sql.bas">http://www.mysql.com/Downloads/Contrib/mdb2sql.bas</a>

Converter from Access97 to MySQL by Moshe Gurvich.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/msql2mysqlWrapper-1.0.tgz">http://www.mysql.com/Downloads/Contrib/msql2mysqlWrapper-1.0.tgz</a>

A C wrapper from <CODE>mSQL</CODE> to MySQL. By <a HREF="mailto:alfred@sb.net">alfred@sb.net</a>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/sqlconv.pl">http://www.mysql.com/Downloads/Contrib/sqlconv.pl</a>

A simple script that can be used to copy fields from one MySQL table
to another in bulk. Basically, you can run <CODE>mysqldump</CODE> and pipe it to
the <CODE>sqlconv.pl</CODE> script. The script will parse through the
<CODE>mysqldump</CODE> output and will rearrange the fields so they can be
inserted into a new table. An example is when you want to create a new
table for a different site you are working on, but the table is just a
bit different (that is - fields in different order, etc.).
By Steve Shreeve.
<LI><a HREF="http://www.mysql.com/Downloads/Contrib/oracledump">http://www.mysql.com/Downloads/Contrib/oracledump</a>

Perl program to convert Oracle databases to MySQL. Has same
output format as mysqldump. By Johan Andersson.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/excel2mysql">http://www.mysql.com/Downloads/Contrib/excel2mysql</a>

Perl program to import Excel spreadsheets into a MySQL database.
By Stephen Hurd <a HREF="mailto:shurd@sk.sympatico.ca">shurd@sk.sympatico.ca</a>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/T2S_100.ZIP">http://www.mysql.com/Downloads/Contrib/T2S_100.ZIP</a>.

Windows program to convert text files to MySQL databases. By
Asaf Azulay.

</UL>

<P>
<A NAME="IDX1873"></A>


<H2><A NAME="SEC723" HREF="manual_toc.html#SEC723">B.3  Utilities</A></H2>


<UL>
<LI><a HREF="http://worldcommunity.com/opensource/utilities/mysql_backup.html">http://worldcommunity.com/opensource/utilities/mysql_backup.html</a>

MySQL Backup is a backup script for MySQL. By Peter F. Brown.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysql_watchdog.pl">http://www.mysql.com/Downloads/Contrib/mysql_watchdog.pl</a>

Monitor the MySQL daemon for possible lockups. By Yermo Lamers,
<a HREF="mailto:yml@yml.com">yml@yml.com</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysql_structure_dumper.tar.gz">http://www.mysql.com/Downloads/Contrib/mysql_structure_dumper.tar.gz</a>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysql_structure_dumper.tgz">http://www.mysql.com/Downloads/Contrib/mysql_structure_dumper.tgz</a>

Prints the structure of every table in a database. By Thomas Wana.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysqlsync">http://www.mysql.com/Downloads/Contrib/mysqlsync</a>.

A Perl script to keep remote copies of a MySQL database in sync with a
central master copy. By Mark Jeftovic.  <a HREF="mailto:markjr@easydns.com">markjr@easydns.com</a>.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MySQLTutor-0.2.tar.gz">http://www.mysql.com/Downloads/Contrib/MySQLTutor-0.2.tar.gz</a>.

MySQLTutor. A MySQL tutorial for beginners.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MySQLDB.zip">http://www.mysql.com/Downloads/Contrib/MySQLDB.zip</a>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/MySQLDB-readme.html">http://www.mysql.com/Downloads/Contrib/MySQLDB-readme.html</a>.

A COM library for MySQL by Alok Singh.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mysql_replicate.pl">http://www.mysql.com/Downloads/Contrib/mysql_replicate.pl</a>

Perl program that handles replication.  By <a HREF="mailto:elble@icculus.nsg.nwu.edu">elble@icculus.nsg.nwu.edu</a>

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/DBIx-TextIndex-0.02.tar.gz">http://www.mysql.com/Downloads/Contrib/DBIx-TextIndex-0.02.tar.gz</a>

Perl script that uses reverse indexing to handle text searching.
By Daniel Koch.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/dbcheck">http://www.mysql.com/Downloads/Contrib/dbcheck</a>

Perl script that takes a backup of tables before running isamchk on them.
By Elizabeth.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mybackup">http://www.mysql.com/Downloads/Contrib/mybackup</a>.

<LI><a HREF="http://www.mswanson.com/mybackup">http://www.mswanson.com/mybackup</a> (mybackup home page)

Wrapper for mysqldump to backup all databases. By Marc Swanson.

<LI><a HREF="http://www.mysql.com/Downloads/Contrib/mdu.pl.gz">http://www.mysql.com/Downloads/Contrib/mdu.pl.gz</a>

Prints the storage usage of a MySQL database.
</UL>



<H1><A NAME="Credits" HREF="manual_toc.html#Credits">C  Credits</A></H1>

<P>
<A NAME="IDX1874"></A>

</P>
<P>
This appendix lists the developers, contributors, and supporters that have
helped to make MySQL what it is today.

</P>



<H2><A NAME="Developers" HREF="manual_toc.html#Developers">C.1  Developers at MySQL AB</A></H2>

<P>
These are the developers that are or have been employed by <CODE>MySQL AB</CODE>
to work on the <CODE>MySQL</CODE> database software, roughly in the order they
started to work with us. Following each developer is a small list of the
tasks that the developer is responsible for, or the accomplishments they
have made. All developers are involved in support.

</P>

<DL COMPACT>

<DT>Michael (Monty) Widenius
<DD>

<UL>
<LI>

Lead developer and main author of the MySQL server (<CODE>mysqld</CODE>).
<LI>

New functions for the string library.
<LI>

Most of the <CODE>mysys</CODE> library.
<LI>

The <CODE>ISAM</CODE> and <CODE>MyISAM</CODE> libraries (B-tree index file
handlers with index compression and different record formats).
<LI>

The <CODE>HEAP</CODE> library. A memory table system with our superior full dynamic
hashing. In use since 1981 and published around 1984.
<LI>

The <CODE>replace</CODE> program (take a look at it, it's <STRONG>COOL</STRONG>!).
<LI>

<CODE>MyODBC</CODE>, the ODBC driver for Windows95.
<LI>

Fixing bugs in MIT-pthreads to get it to work for MySQL Server. And
also Unireg, a curses-based application tool with many utilities.
<LI>

Porting of <CODE>mSQL</CODE> tools like <CODE>msqlperl</CODE>, <CODE>DBD</CODE>/<CODE>DBI</CODE>, and
<CODE>DB2mysql</CODE>.
<LI>

Most of <CODE>crash-me</CODE> and the foundation for the MySQL benchmarks.
</UL>

<DT>David Axmark
<DD>

<UL>
<LI>

Initial main writer of the <STRONG>Reference Manual</STRONG>,
including enhancements to <CODE>texi2html</CODE>.
<LI>

Automatic web site updating from the manual.
<LI>

Initial Autoconf, Automake, and Libtool support.
<LI>

Licensing.
<LI>

Parts of all the text files.  (Nowadays only the <TT>`README'</TT> is
left. The rest ended up in the manual.)
<LI>

Lots of testing of new features.
<LI>

Our in-house Free Software legal expert.
<LI>

Mailing list maintainer (who never has the time to do it right...).
<LI>

Our original portability code (more than 10 years old now). Nowadays
only some parts of <CODE>mysys</CODE> are left.
<LI>

Someone for Monty to call in the middle of the night when he just got
that new feature to work.
<LI>

Chief "Open Sourcerer" (MySQL community relations).
</UL>

<DT>Jani Tolonen
<DD>

<UL>
<LI>

<CODE>mysqlimport</CODE>
<LI>

A lot of extensions to the command-line clients.
<LI>

<CODE>PROCEDURE ANALYSE()</CODE>
</UL>

<DT>Sinisa Milivojevic
<DD>

<UL>
<LI>

Compression (with <CODE>zlib</CODE>) in the client/server protocol.
<LI>

Perfect hashing for the lexical analyser phase.
<LI>

Multi-row <CODE>INSERT</CODE>
<LI>

<CODE>mysqldump</CODE> -e option
<LI>

<CODE>LOAD DATA LOCAL INFILE</CODE>
<LI>

<CODE>SQL_CALC_FOUND_ROWS</CODE> <CODE>SELECT</CODE> option
<LI>

<CODE>--max-user-connections=...</CODE> option
<LI>

<CODE>net_read</CODE> and <CODE>net_write_timeout</CODE>
<LI>

<CODE>GRANT</CODE>/<CODE>REVOKE</CODE> and <CODE>SHOW GRANTS FOR</CODE>
<LI>

New client-server protocol for 4.0
<LI>

<CODE>UNION</CODE> in 4.0
<LI>

Multi-table <CODE>DELETE</CODE>/<CODE>UPDATE</CODE>
<LI>

Derived tables in 4.1
<LI>

User resources management
<LI>

Initial developer of the <CODE>MySQL++</CODE> C++ API and the <CODE>MySQLGUI</CODE> client.
</UL>

<DT>Tonu Samuel (past developer)
<DD>

<UL>
<LI>

VIO interface (the foundation for the encrypted client/server protocol).
<LI>

MySQL Filesystem (a way to use MySQL databases as files
and directories).
<LI>

The <CODE>CASE</CODE> expression.
<LI>

The <CODE>MD5()</CODE> and <CODE>COALESCE()</CODE> functions.
<LI>

<CODE>RAID</CODE> support for <CODE>MyISAM</CODE> tables.
</UL>

<DT>Sasha Pachev
<DD>

<UL>
<LI>

Initial implementation of replication (upto version 4.0).
<LI>

<CODE>SHOW CREATE TABLE</CODE>.
<LI>

<CODE>mysql-bench</CODE>
</UL>

<DT>Matt Wagner
<DD>

<UL>
<LI>

MySQL test suite.
<LI>

Webmaster (until 2002).
<LI>

Coordinator of development.
</UL>

<DT>Miguel Solorzano
<DD>

<UL>
<LI>

Win32 development and release builds.
<LI>

Windows NT server code.
<LI>

WinMySQLAdmin
</UL>

<DT>Timothy Smith (past developer)
<DD>

<UL>
<LI>

Dynamic character sets support.
<LI>

configure, RPMs and other parts of the build system.
<LI>

Initial developer of <CODE>libmysqld</CODE>, the embedded server.
</UL>

<DT>Sergei Golubchik
<DD>

<UL>
<LI>

Full-text search.
<LI>

Added keys to the <CODE>MERGE</CODE> library.
</UL>

<DT>Jeremy Cole
<DD>

<UL>
<LI>

Proofreading and editing this fine manual.
<LI>

<CODE>ALTER TABLE ... ORDER BY ...</CODE>.
<LI>

<CODE>UPDATE ... ORDER BY ...</CODE>.
<LI>

<CODE>DELETE ... ORDER BY ...</CODE>.
</UL>

<DT>Indrek Siitan
<DD>

<UL>
<LI>

Designing/programming of our web interface.
<LI>

Author of our newsletter management system.
</UL>

<DT>Jorge del Conde
<DD>

<UL>
<LI>

<CODE>MySQLCC</CODE> (<CODE>MySQL Control Center</CODE>)
<LI>

Win32 development
<LI>

Initial implementation of the website portals.
</UL>

<DT>Venu Anuganti
<DD>

<UL>
<LI>

MyODBC 3.51
<LI>

New client/server protocol for 4.1 (for prepared statements).
<LI>

</UL>

<DT>Arjen Lentz
<DD>

<UL>
<LI>

Maintainer of the MySQL Reference Manual.
<LI>

Preparing the O'Reilly printed edition of the manual.
</UL>

<DT>Alexander (Bar) Barkov, Alexey (Holyfoot) Botchkov, and Ramil Kalimullin
<DD>

<UL>
<LI>

Spatial data (GIS) and R-Trees implementation for 4.1
<LI>

Unicode and character sets for 4.1
</UL>

<DT>Oleksandr (Sanja) Byelkin
<DD>

<UL>
<LI>

Query cache in 4.0
<LI>

Implementation of subqueries (4.1).
</UL>

<DT>Aleksey (Walrus) Kishkin and Alexey (Ranger) Stroganov
<DD>

<UL>
<LI>

Benchmarks design and analysis.
<LI>

Maintenance of the MySQL test suite.
</UL>

<DT>Zak Greant
<DD>

<UL>
<LI>

Open Source advocate, MySQL community relations.
</UL>

<DT>Carsten Pedersen
<DD>

<UL>
<LI>

The MySQL Certification program.
</UL>

<DT>Lenz Grimmer
<DD>

<UL>
<LI>

Production (build and release) engineering.
</UL>

<DT>Peter Zaitsev
<DD>

<UL>
<LI>

<CODE>SHA1()</CODE>, <CODE>AES_ENCRYPT()</CODE> and <CODE>AES_DECRYPT()</CODE> functions.
<LI>

Debugging, cleaning up various features.
</UL>

<DT>Alexander (Salle) Keremidarski
<DD>

<UL>
<LI>

Support.
<LI>

Debugging.
</UL>

<DT>Per-Erik Martin
<DD>

<UL>
<LI>

Lead developer for stored procedures and triggers.
</UL>

<DT>Jim Winstead
<DD>

<UL>
<LI>

Lead web developer.
</UL>

<DT>Mark Matthews
<DD>

<UL>
<LI>

Connector/J driver (Java).
</UL>

<DT>Peter Gulutzan
<DD>

<UL>
SQL-99, SQL-2003 standards compliancy.
<LI>

Documentation of existing MySQL code/algorithms.
</UL>

</DL>



<H2><A NAME="Contributors" HREF="manual_toc.html#Contributors">C.2  Contributors to MySQL</A></H2>

<P>
<A NAME="IDX1875"></A>

</P>
<P>
While <CODE>MySQL AB</CODE> owns all copyrights in the <CODE>MySQL server</CODE>
and the <CODE>MySQL manual</CODE>, we wish to recognise those who have made
contributions of one kind or another to the <CODE>MySQL distribution</CODE>.
Contributors are listed here, in somewhat random order:

</P>
<DL COMPACT>

<DT>Paul DuBois
<DD>
Ongoing help with making this manual correct and understandable.
That includes rewriting Monty's and David's attempts at English into
English as other people know it.
<DT>Gianmassimo Vigazzola <a HREF="mailto:qwerg@mbox.vol.it">qwerg@mbox.vol.it</a> or <a HREF="mailto:qwerg@tin.it">qwerg@tin.it</a>
<DD>
The initial port to Win32/NT.
<DT>Kim Aldale
<DD>
Helped to rewrite Monty's and David's early attempts at English into
English.
<DT>Per Eric Olsson
<DD>
For more or less constructive criticism and real testing of the dynamic
record format.
<DT>Irena Pancirov <a HREF="mailto:irena@mail.yacc.it">irena@mail.yacc.it</a>
<DD>
Win32 port with Borland compiler.  <CODE>mysqlshutdown.exe</CODE> and
<CODE>mysqlwatch.exe</CODE>
<DT>David J. Hughes
<DD>
For the effort to make a shareware SQL database. At TcX, the predecessor
of MySQL AB, we started with <CODE>mSQL</CODE>, but found that it couldn't
satisfy our purposes so instead we wrote a SQL interface to our
application builder Unireg.  <CODE>mysqladmin</CODE> and <CODE>mysql</CODE> client are
programs that were largely influenced by their <CODE>mSQL</CODE> counterparts.
We have put a lot of effort into making the MySQL syntax a superset of
<CODE>mSQL</CODE>. Many of the API's ideas are borrowed from <CODE>mSQL</CODE> to
make it easy to port free <CODE>mSQL</CODE> programs to the MySQL API.
The MySQL software doesn't contain any code from <CODE>mSQL</CODE>.
Two files in the distribution (<TT>`client/insert_test.c'</TT> and
<TT>`client/select_test.c'</TT>) are based on the corresponding (non-copyrighted)
files in the <CODE>mSQL</CODE> distribution, but are modified as examples showing
the changes necessary to convert code from <CODE>mSQL</CODE> to MySQL Server.
(<CODE>mSQL</CODE> is copyrighted David J. Hughes.)
<DT>Fred Fish
<DD>
For his excellent C debugging and trace library. Monty has made a number
of smaller improvements to the library (speed and additional options).
<DT>Richard A. O'Keefe
<DD>
For his public domain string library.
<DT>Henry Spencer
<DD>
For his regex library, used in <CODE>WHERE column REGEXP regexp</CODE>.
<DT>Free Software Foundation
<DD>
From whom we got an excellent compiler (<CODE>gcc</CODE>), the <CODE>libc</CODE> library
(from which we have borrowed <TT>`strto.c'</TT> to get some code working in Linux),
and the <CODE>readline</CODE> library (for the <CODE>mysql</CODE> client).
<DT>Free Software Foundation &#38; The XEmacs development team
<DD>
For a really great editor/environment used by almost everybody at
MySQL AB/TcX/detron.
<DT>Patrick Lynch
<DD>
For helping us acquire <a HREF="http://www.mysql.com/">http://www.mysql.com/</a>.
<DT>Fred Lindberg
<DD>
For setting up qmail to handle the MySQL mailing list and for the
incredible help we got in managing the MySQL mailing lists.
<DT>Igor Romanenko <a HREF="mailto:igor@frog.kiev.ua">igor@frog.kiev.ua</a>
<DD>
<CODE>mysqldump</CODE> (previously <CODE>msqldump</CODE>, but ported and enhanced by
Monty).
<DT>Yuri Dario
<DD>
For keeping up and extending the MySQL OS/2 port.
<DT>Tim Bunce, Alligator Descartes
<DD>
For the <CODE>DBD</CODE> (Perl) interface.
<DT>Tim Bunce
<DD>
Author of <CODE>mysqlhotcopy</CODE>.
<DT>Andreas Koenig <a HREF="mailto:a.koenig@mind.de">a.koenig@mind.de</a>
<DD>
For the Perl interface for MySQL Server.
<DT>Eugene Chan <a HREF="mailto:eugene@acenet.com.sg">eugene@acenet.com.sg</a>
<DD>
For porting PHP for MySQL Server.
<DT>Michael J. Miller Jr. <a HREF="mailto:mke@terrapin.turbolift.com">mke@terrapin.turbolift.com</a>
<DD>
For the first MySQL manual. And a lot of spelling/language
fixes for the FAQ (that turned into the MySQL manual a long
time ago).
<DT>Yan Cailin
<DD>
First translator of the MySQL Reference Manual into simplified
chinese in early 2000 on which the Big5 and HK coded
(<a HREF="http://mysql.hitstar.com/">http://mysql.hitstar.com/</a>) versions were
based. <a HREF="http://linuxdb.yeah.net/"> Personal home page at
linuxdb.yeah.net</a>.
<DT>Giovanni Maruzzelli <a HREF="mailto:maruzz@matrice.it">maruzz@matrice.it</a>
<DD>
For porting iODBC (Unix ODBC).
<DT>Chris Provenzano
<DD>
Portable user level pthreads. From the copyright: This product includes
software developed by Chris Provenzano, the University of California,
Berkeley, and contributors.  We are currently using version 1_60_beta6
patched by Monty (see <TT>`mit-pthreads/Changes-mysql'</TT>).
<DT>Xavier Leroy <a HREF="mailto:Xavier.Leroy@inria.fr">Xavier.Leroy@inria.fr</a>
<DD>
The author of LinuxThreads (used by the MySQL Server on Linux).
<DT>Zarko Mocnik <a HREF="mailto:zarko.mocnik@dem.si">zarko.mocnik@dem.si</a>
<DD>
Sorting for Slovenian language and the <TT>`cset.tar.gz'</TT> module that makes
it easier to add other character sets.
<DT>"TAMITO" <a HREF="mailto:tommy@valley.ne.jp">tommy@valley.ne.jp</a>
<DD>
The <CODE>_MB</CODE> character set macros and the ujis and sjis character sets.
<DT>Joshua Chamas <a HREF="mailto:joshua@chamas.com">joshua@chamas.com</a>
<DD>
Base for concurrent insert, extended date syntax, debugging on NT, and
answering on the MySQL mailing list.
<DT>Yves Carlier <a HREF="mailto:Yves.Carlier@rug.ac.be">Yves.Carlier@rug.ac.be</a>
<DD>
<CODE>mysqlaccess</CODE>, a program to show the access rights for a user.
<DT>Rhys Jones <a HREF="mailto:rhys@wales.com">rhys@wales.com</a> (And GWE Technologies Limited)
<DD>
For JDBC, a module to extract data from a MySQL Database with a Java client.
<DT>Dr Xiaokun Kelvin ZHU <a HREF="mailto:X.Zhu@brad.ac.uk">X.Zhu@brad.ac.uk</a>
<DD>
Further development of the JDBC driver and other MySQL-related
Java tools.
<DT>James Cooper <a HREF="mailto:pixel@organic.com">pixel@organic.com</a>
<DD>
For setting up a searchable mailing list archive at his site.
<DT>Rick Mehalick <a HREF="mailto:Rick_Mehalick@i-o.com">Rick_Mehalick@i-o.com</a>
<DD>
For <CODE>xmysql</CODE>, a graphical X client for MySQL Server.
<DT>Doug Sisk <a HREF="mailto:sisk@wix.com">sisk@wix.com</a>
<DD>
For providing RPM packages of MySQL for RedHat Linux.
<DT>Diemand Alexander V. <a HREF="mailto:axeld@vial.ethz.ch">axeld@vial.ethz.ch</a>
<DD>
For providing RPM packages of MySQL for RedHat Linux-Alpha.
<DT>Antoni Pamies Olive <a HREF="mailto:toni@readysoft.es">toni@readysoft.es</a>
<DD>
For providing RPM versions of a lot of MySQL clients for Intel
and SPARC.
<DT>Jay Bloodworth <a HREF="mailto:jay@pathways.sde.state.sc.us">jay@pathways.sde.state.sc.us</a>
<DD>
For providing RPM versions for MySQL Version 3.21.
<DT>Jochen Wiedmann <a HREF="mailto:wiedmann@neckar-alb.de">wiedmann@neckar-alb.de</a>
<DD>
For maintaining the Perl <CODE>DBD::mysql</CODE> module.
<DT>Therrien Gilbert <a HREF="mailto:gilbert@ican.net">gilbert@ican.net</a>, Jean-Marc Pouyot <a HREF="mailto:jmp@scalaire.fr">jmp@scalaire.fr</a>
<DD>
French error messages.
<DT>Petr Snajdr, <a HREF="mailto:snajdr@pvt.net">snajdr@pvt.net</a>
<DD>
Czech error messages.
<DT>Jaroslaw Lewandowski <a HREF="mailto:jotel@itnet.com.pl">jotel@itnet.com.pl</a>
<DD>
Polish error messages.
<DT>Miguel Angel Fernandez Roiz
<DD>
Spanish error messages.
<DT>Roy-Magne Mo <a HREF="mailto:rmo@www.hivolda.no">rmo@www.hivolda.no</a>
<DD>
Norwegian error messages and testing of Version 3.21.#.
<DT>Timur I. Bakeyev <a HREF="mailto:root@timur.tatarstan.ru">root@timur.tatarstan.ru</a>
<DD>
Russian error messages.
<DT><a HREF="mailto:brenno@dewinter.com">brenno@dewinter.com</a> &#38; Filippo Grassilli <a HREF="mailto:phil@hyppo.com">phil@hyppo.com</a>
<DD>
Italian error messages.
<DT>Dirk Munzinger <a HREF="mailto:dirk@trinity.saar.de">dirk@trinity.saar.de</a>
<DD>
German error messages.
<DT>Billik Stefan <a HREF="mailto:billik@sun.uniag.sk">billik@sun.uniag.sk</a>
<DD>
Slovak error messages.
<DT>Stefan Saroiu <a HREF="mailto:tzoompy@cs.washington.edu">tzoompy@cs.washington.edu</a>
<DD>
Romanian error messages.
<DT>Peter Feher
<DD>
Hungarian error messages.
<DT>Roberto M. Serqueira
<DD>
Portugise error messages.
<DT>Carsten H. Pedersen
<DD>
Danish error messages.
<DT>Arjen G. Lentz
<DD>
Dutch error messages, completing earlier partial translation
(also work on consistency and spelling).
<DT>David Sacerdote <a HREF="mailto:davids@secnet.com">davids@secnet.com</a>
<DD>
Ideas for secure checking of DNS hostnames.
<DT>Wei-Jou Chen <a HREF="mailto:jou@nematic.ieo.nctu.edu.tw">jou@nematic.ieo.nctu.edu.tw</a>
<DD>
Some support for Chinese(BIG5) characters.
<DT>Wei He <a HREF="mailto:hewei@mail.ied.ac.cn">hewei@mail.ied.ac.cn</a>
<DD>
A lot of functionality for the Chinese(GBK) character set.
<DT>Zeev Suraski <a HREF="mailto:bourbon@netvision.net.il">bourbon@netvision.net.il</a>
<DD>
<CODE>FROM_UNIXTIME()</CODE> time formatting, <CODE>ENCRYPT()</CODE> functions, and
<CODE>bison</CODE> advisor.
Active mailing list member.
<DT>Luuk de Boer <a HREF="mailto:luuk@wxs.nl">luuk@wxs.nl</a>
<DD>
Ported (and extended) the benchmark suite to <CODE>DBI</CODE>/<CODE>DBD</CODE>. Have
been of great help with <CODE>crash-me</CODE> and running benchmarks. Some new
date functions. The <CODE>mysql_setpermissions</CODE> script.
<DT>Jay Flaherty <a HREF="mailto:fty@mediapulse.com">fty@mediapulse.com</a>
<DD>
Big parts of the Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> section in the manual.
<DT>Paul Southworth <a HREF="mailto:pauls@etext.org">pauls@etext.org</a>, Ray Loyzaga <a HREF="mailto:yar@cs.su.oz.au">yar@cs.su.oz.au</a>
<DD>
Proof-reading of the Reference Manual.
<DT>Alexis Mikhailov <a HREF="mailto:root@medinf.chuvashia.su">root@medinf.chuvashia.su</a>
<DD>
User-definable functions (UDFs); <CODE>CREATE FUNCTION</CODE> and
<CODE>DROP FUNCTION</CODE>.
<DT>Andreas F. Bobak <a HREF="mailto:bobak@relog.ch">bobak@relog.ch</a>
<DD>
The <CODE>AGGREGATE</CODE> extension to UDF functions.
<DT>Ross Wakelin <a HREF="mailto:R.Wakelin@march.co.uk">R.Wakelin@march.co.uk</a>
<DD>
Help to set up InstallShield for MySQL-Win32.
<DT>Jethro Wright III <a HREF="mailto:jetman@li.net">jetman@li.net</a>
<DD>
The <TT>`libmysql.dll'</TT> library.
<DT>James Pereria <a HREF="mailto:jpereira@iafrica.com">jpereira@iafrica.com</a>
<DD>
Mysqlmanager, a Win32 GUI tool for administrating MySQL Server.
<DT>Curt Sampson <a HREF="mailto:cjs@portal.ca">cjs@portal.ca</a>
<DD>
Porting of MIT-pthreads to NetBSD/Alpha and NetBSD 1.3/i386.
<DT>Antony T. Curtis <a HREF="mailto:antony.curtis@olcs.net">antony.curtis@olcs.net</a>
<DD>
Porting of the MySQL Database software to OS/2.
<DT>Martin Ramsch <a HREF="mailto:m.ramsch@computer.org">m.ramsch@computer.org</a>
<DD>
Examples in the MySQL Tutorial.
<DT>Steve Harvey
<DD>
For making <CODE>mysqlaccess</CODE> more secure.
<DT>Konark IA-64 Centre of Persistent Systems Private Limited
<DD>
<a HREF="http://www.pspl.co.in/konark/">http://www.pspl.co.in/konark/</a>.  Help with the Win64 port of the
MySQL server.
<DT>Albert Chin-A-Young.
<DD>
Configure updates for Tru64, large file support and better TCP wrappers
support.
<DT>John Birrell
<DD>
Emulation of <CODE>pthread_mutex()</CODE> for OS/2.
<DT>Benjamin Pflugmann
<DD>
Extended <CODE>MERGE</CODE> tables to handle <CODE>INSERTS</CODE>. Active member
on the MySQL mailing lists.
<DT>Guilhem Bichot
<DD>
Fixed handling of exponents for <CODE>DECIMAL</CODE>.
Author of <CODE>mysql_tableinfo</CODE>.
<DT>Jocelyn Fournier
<DD>
Excellent spotting and reporting innumerable bugs
(especially in the MySQL 4.1 subquery code).
<DT>Georg Richter
<DD>
MySQL 4.1 testing and bug hunting.
New PHP 5.0 <CODE>mysqli</CODE> extension (API) for use with MySQL 4.1 and up.
<DT>Marc Liyanage
<DD>
Maintaining the Mac OS X packages and providing invaluable feedback
on how to create Mac OS X PKGs.
</DL>

<P>
Other contributors, bugfinders, and testers: James H. Thompson, Maurizio
Menghini, Wojciech Tryc, Luca Berra, Zarko Mocnik, Wim Bonis, Elmar
Haneke, <a HREF="mailto:jehamby@lightside">jehamby@lightside</a>, <a HREF="mailto:psmith@BayNetworks.com">psmith@BayNetworks.com</a>,
<a HREF="mailto:duane@connect.com.au">duane@connect.com.au</a>, Ted Deppner <a HREF="mailto:ted@psyber.com">ted@psyber.com</a>,
Mike Simons, Jaakko Hyvatti.

</P>
<P>
And lots of bug report/patches from the folks on the mailing list.

</P>
<P>
A big tribute goes to those that help us answer questions on the
<CODE>mysql@lists.mysql.com</CODE> mailing list:

</P>
<DL COMPACT>

<DT>Daniel Koch <a HREF="mailto:dkoch@amcity.com">dkoch@amcity.com</a>
<DD>
Irix setup.
<DT>Luuk de Boer <a HREF="mailto:luuk@wxs.nl">luuk@wxs.nl</a>
<DD>
Benchmark questions.
<DT>Tim Sailer <a HREF="mailto:tps@users.buoy.com">tps@users.buoy.com</a>
<DD>
<CODE>DBD-mysql</CODE> questions.
<DT>Boyd Lynn Gerber <a HREF="mailto:gerberb@zenez.com">gerberb@zenez.com</a>
<DD>
SCO-related questions.
<DT>Richard Mehalick <a HREF="mailto:RM186061@shellus.com">RM186061@shellus.com</a>
<DD>
<CODE>xmysql</CODE>-related questions and basic installation questions.
<DT>Zeev Suraski <a HREF="mailto:bourbon@netvision.net.il">bourbon@netvision.net.il</a>
<DD>
Apache module configuration questions (log &#38; auth), PHP-related
questions, SQL syntax-related questions and other general questions.
<DT>Francesc Guasch <a HREF="mailto:frankie@citel.upc.es">frankie@citel.upc.es</a>
<DD>
General questions.
<DT>Jonathan J Smith <a HREF="mailto:jsmith@wtp.net">jsmith@wtp.net</a>
<DD>
Questions pertaining to OS-specifics with Linux, SQL syntax, and other
things that might need some work.
<DT>David Sklar <a HREF="mailto:sklar@student.net">sklar@student.net</a>
<DD>
Using MySQL from PHP and Perl.
<DT>Alistair MacDonald <a HREF="mailto:A.MacDonald@uel.ac.uk">A.MacDonald@uel.ac.uk</a>
<DD>
Not yet specified, but is flexible and can handle Linux and maybe HP-UX.
Will try to get user to use <CODE>mysqlbug</CODE>.
<DT>John Lyon <a HREF="mailto:jlyon@imag.net">jlyon@imag.net</a>
<DD>
Questions about installing MySQL on Linux systems, using either
<TT>`.rpm'</TT> files or compiling from source.
<DT>Lorvid Ltd. <a HREF="mailto:lorvid@WOLFENET.com">lorvid@WOLFENET.com</a>
<DD>
Simple billing/license/support/copyright issues.
<DT>Patrick Sherrill <a HREF="mailto:patrick@coconet.com">patrick@coconet.com</a>
<DD>
ODBC and VisualC++ interface questions.
<DT>Randy Harmon <a HREF="mailto:rjharmon@uptimecomputers.com">rjharmon@uptimecomputers.com</a>
<DD>
<CODE>DBD</CODE>, Linux, some SQL syntax questions.
</DL>



<H2><A NAME="Supporters" HREF="manual_toc.html#Supporters">C.3  Supporters to MySQL</A></H2>

<P>
<A NAME="IDX1876"></A>

</P>
<P>
While <CODE>MySQL AB</CODE> owns all copyrights in the <CODE>MySQL server</CODE>
and the <CODE>MySQL manual</CODE>, we wish to recognise the following companies,
which helped us finance the development of the <CODE>MySQL server</CODE>,
such as by paying us for developing a new feature or giving us hardware
for development of the <CODE>MySQL server</CODE>.

</P>
<DL COMPACT>

<DT>VA Linux / Andover.net
<DD>
Funded replication.
<DT>NuSphere
<DD>
Editing of the MySQL manual.
<DT>Stork Design studio
<DD>
The MySQL web site in use between 1998-2000.
<DT>Intel
<DD>
Contributed to development on Windows and Linux platforms.
<DT>Compaq
<DD>
Contributed to Development on Linux/Alpha.
<DT>SWSoft
<DD>
Development on the embedded <CODE>mysqld</CODE> version.
<DT>FutureQuest
<DD>
<CODE>--skip-show-database</CODE>
</DL>



<H1><A NAME="News" HREF="manual_toc.html#News">D  MySQL Change History</A></H1>

<P>
<A NAME="IDX1877"></A>
<A NAME="IDX1878"></A>
<A NAME="IDX1879"></A>

</P>
<P>
This appendix lists the changes from version to version in the MySQL
source code.

</P>
<P>
We are now working actively on MySQL 4.1 &#38; 5.0 and will only provide
critical bug fixes for MySQL 4.0 and MySQL 3.23.  We update this section
as we add new features, so that everybody can follow the development.

</P>
<P>
Our TODO section contains what further plans we have for 4.1 &#38;
5.0. See section <A HREF="manual.html#TODO">1.9  MySQL and The Future (The TODO)</A>.

</P>
<P>
Note that we tend to update the manual at the same time we make changes to
MySQL.  If you find a version listed here that you can't
find on the MySQL download page (<a HREF="http://www.mysql.com/downloads/">http://www.mysql.com/downloads/</a>),
this means that the version has not yet been released!

</P>



<H2><A NAME="News-5.0.x" HREF="manual_toc.html#News-5.0.x">D.1  Changes in release 5.0.0 (Development)</A></H2>

<P>
<A NAME="IDX1880"></A>

</P>
<P>
Version 5.0 is for the moment only available on for MySQL developers.
It will be publicly available as soon we are confident that the base
for stored procedures is sound and working.

</P>
<P>
The following changelog shows what is already done in the 5.0 tree:

</P>

<UL>
<LI>

Some support for stored procedures (ANSI SQL 99 style).
<LI>

Added SELECT INTO list_of_vars, which can be of mixed,
i.e., global and local type.
<LI>

Deprecated the update log : it is not supported anymore and replaced
by the binary log.
</UL>



<H2><A NAME="News-4.1.x" HREF="manual_toc.html#News-4.1.x">D.2  Changes in release 4.1.x (Alpha)</A></H2>

<P>
<A NAME="IDX1881"></A>

</P>
<P>
Version 4.1 of the MySQL server includes many enhancements and new features:
This version is available from our public BitKeeper tree (sources) and will
be available as a binary shortly.

</P>

<UL>
<LI>

Subqueries:

<PRE>
SELECT * FROM t1 WHERE t1.a=(SELECT t2.b FROM t2);

SELECT * FROM t1 WHERE (1,2,3) IN (SELECT a,b,c FROM t2);
</PRE>

<LI>

Derived tables:

<PRE>
SELECT t1.a FROM t1, (SELECT * FROM t2) t3 WHERE t1.a=t3.a;
</PRE>

<LI>

<CODE>INSERT ... ON DUPLICATE KEY UPDATE ...</CODE> syntax.  This allows you to
<CODE>UPDATE</CODE> an existing row if the insert would cause a duplicate value
in a <CODE>PRIMARY</CODE> or <CODE>UNIQUE</CODE> key. (<CODE>REPLACE</CODE> allows you to
overwrite an existing row, which is something entirely different.)
See section <A HREF="manual.html#INSERT">6.4.3  <CODE>INSERT</CODE> Syntax</A>.
<LI>

Extensive Unicode (UTF8) support.
<LI>

Character sets can be defined per column, table and database.
<LI>

<CODE>BTREE</CODE> index on <CODE>HEAP</CODE> tables.
<LI>

Support for OpenGIS (Geographical data).
<LI>

<CODE>SHOW WARNINGS</CODE> shows warnings for the last command.
See section <A HREF="manual.html#SHOW_WARNINGS">4.5.6.9  <CODE>SHOW WARNINGS | ERRORS</CODE></A>.
<LI>

Faster binary protocol with prepared statements and parameter binding.
See section <A HREF="manual.html#C_API_Prepared_statements">8.1.4  C API Prepared Statements</A>.
<LI>

Multi-line queries: You can now issue several queries at once and
then read the results in one go.
See section <A HREF="manual.html#C_API_multiple_queries">8.1.8  C API Handling multiple query executions</A>.
<LI>

Create Table: <CODE>CREATE [TEMPORARY] TABLE [IF NOT EXISTS] table LIKE table</CODE>.
<LI>

Server based <CODE>HELP command</CODE> that can be used in the <CODE>mysql</CODE>
command line client (and other clients) to get help for SQL commands.
</UL>

<P>
For a full list of changes, please refer to the changelog sections for
each individual 4.1.x release.

</P>



<H3><A NAME="News-4.1.0" HREF="manual_toc.html#News-4.1.0">D.2.1  Changes in release 4.1.0</A></H3>


<UL>
<LI>

On Windows, we are now using shared memory to communicate between server
and client when they are running on the same machine and you are
connecting to <CODE>localhost</CODE>.
<LI>

<CODE>REPAIR of MyISAM tables now uses less temporary disk space when
sorting char columns</CODE>.
<LI>

<CODE>DATE</CODE>/<CODE>DATETIME</CODE> checking is now a bit stricter then before
to be able to automatically distinguish between date, datetime, and time
with microseconds. For example, dates of type <CODE>YYYYMMDD HHMMDD</CODE> are not
supported anymore; One must either have separators between each
<CODE>DATE</CODE>/<CODE>TIME</CODE> part or not at all.
<LI>

Server side help for all MySQL functions. One can now type <CODE>help
week</CODE> in the <CODE>mysql</CODE> client and get help for the <CODE>week()</CODE>
function.
<LI>

Added new client function: <CODE>mysql_get_server_version()</CODE>.
<LI>

Fixed bug in libmysqlclient that fetched field defaults
<LI>

Fixed bug in <TT>`mysql.cc'</TT> client when skipping comments
<LI>

Added <CODE>record_in_range()</CODE> method to <CODE>MERGE</CODE> tables to be
able to choose the right index when there are many to choose from.
<LI>

Replication now works with <CODE>RAND()</CODE> and user variables <CODE>@var</CODE>.
<LI>

Allow on to change mode for <CODE>ANSI_QUOTES</CODE> on the fly.
<LI>

<CODE>EXPLAIN SELECT</CODE> now can be killed. See section <A HREF="manual.html#KILL">4.5.5  <CODE>KILL</CODE> Syntax</A>.
<LI>

<CODE>REPAIR TABLE</CODE> now can be killed. See section <A HREF="manual.html#KILL">4.5.5  <CODE>KILL</CODE> Syntax</A>.
<LI>

Allow one to specify empty key lists for <CODE>USE|IGNORE|FORCE INDEX</CODE>.
<LI>

<CODE>DROP TEMPORARY TABLE</CODE> now only drops temporary tables and doesn't
end transactions.
<LI>

Added a support for <CODE>UNION</CODE> in derived tables
<LI>

<CODE>TIMESTAMP</CODE> is now returned as string of type <CODE>'YYYY-MM-DD HH:MM:DD'</CODE>.
<LI>

New faster client/server protocol which supports prepared statements,
bound parameters, and bound result columns, binary transfer of data,
warnings.
<LI>

Added database and real table name (in case of alias) to the MYSQL_FIELD
structure.
<LI>

Multi-line queries: You can now issue several queries at once and
then read the results in one go.
<LI>

In <CODE>CREATE TABLE foo (a int not null primary key)</CODE> the
<CODE>PRIMARY</CODE> word is now optional.
<LI>

In <CODE>CREATE TABLE</CODE> the attribute <CODE>SERIAL</CODE> is now an alias for
<CODE>BIGINT NOT NULL AUTO_INCREMENT UNIQUE</CODE>.
<LI>

<CODE>SELECT ... FROM DUAL</CODE> is an alias for <CODE>SELECT ...</CODE>.
(To be compatible with some other databases).
<LI>

If one creates a too long <CODE>CHAR</CODE>/<CODE>VARCHAR</CODE> it's now
automatically changed to <CODE>TEXT</CODE> or <CODE>BLOB</CODE>; One will get a
warning in this case.
<LI>

One can specify the different <CODE>BLOB</CODE>/<CODE>TEXT</CODE> types with the
syntax <CODE>BLOB(length)</CODE> and <CODE>TEXT(length)</CODE>.  MySQL will
automatically change it to one of the internal <CODE>BLOB</CODE>/<CODE>TEXT</CODE>
types.
<LI>

<CODE>CHAR BYTE</CODE> is an alias for <CODE>CHAR BINARY</CODE>.
<LI>

<CODE>VARCHARACTER</CODE> is an alias for <CODE>VARCHAR</CODE>.
<LI>

New operators <CODE>integer MOD integer</CODE> and <CODE>integer DIV integer</CODE>.
<LI>

<CODE>SERIAL DEFAULT VALUE</CODE> added as an alias for <CODE>AUTO_INCREMENT</CODE>.
<LI>

<CODE>TRUE</CODE> and <CODE>FALSE</CODE> added as alias for 1 and 0, respectively.
<LI>

Aliases are now forced in derived tables, as per SQL-99.
<LI>

Fixed <CODE>SELECT .. LIMIT 0</CODE> to return proper row count for
<CODE>SQL_CALC_FOUND_ROWS</CODE>.
<LI>

One can specify many temporary directories to be used in a round-robin
fashion with:  <CODE>--tmpdir=dirname1:dirname2:dirname3</CODE>.
<LI>

Subqueries: <CODE>SELECT * from t1 where t1.a=(SELECT t2.b FROM t2)</CODE>.
<LI>

Derived tables:

<PRE>
SELECT a.col1, b.col2
       FROM (SELECT MAX(col1) AS col1 FROM root_table) a,
       other_table b
       WHERE a.col1=b.col1;
</PRE>

<LI>

Character sets to be defined per column, table and database.
<LI>

Unicode (UTF8) support.
<LI>

<CODE>BTREE</CODE> index on <CODE>HEAP</CODE> tables.
<LI>

Faster embedded server (new internal communication protocol).
<LI>

One can add a comment per column in <CODE>CREATE TABLE</CODE>.
<LI>

<CODE>SHOW FULL COLUMNS FROM table_name</CODE> shows column comments.
<LI>

<CODE>ALTER DATABASE</CODE>.
<LI>

Support for GIS (Geometrical data).
<LI>

<CODE>SHOW [COUNT(*)] WARNINGS</CODE> shows warnings from the last command.
<LI>

One can specify a column type for a colum in <CODE>CREATE TABLE
... SELECT</CODE> by defining the column in the <CODE>CREATE</CODE> part.


<PRE>
CREATE TABLE foo (a tinyint not null) SELECT b+1 AS 'a' FROM bar;
</PRE>

<LI>

<CODE>expr SOUNDS LIKE expr</CODE> same as <CODE>SOUNDEX(expr)=SOUNDEX(expr)</CODE>.
<LI>

<CODE>VARIANCE(expr)</CODE> returns the variance of <CODE>expr</CODE>
<LI>

One can create a table from the existing table using <CODE>CREATE 
[TEMPORARY] TABLE [IF NOT EXISTS] table (LIKE table)</CODE>. The table can 
be either normal or temporary.
<LI>

New options <CODE>--reconnect</CODE> and <CODE>disable-reconnect</CODE> for the
<CODE>mysql</CODE> client, to reconnect automatically or not if the
connection is lost.
<LI>

<CODE>START SLAVE</CODE> (<CODE>STOP SLAVE</CODE>) does not return an error
anymore if the slave is already started (stopped); it returns a
warning instead.
<LI>

<CODE>SLAVE START</CODE> and <CODE>SLAVE STOP</CODE> are not accepted by the query
parser anymore, use <CODE>START SLAVE</CODE> and <CODE>STOP SLAVE</CODE> instead.
</UL>



<H2><A NAME="News-4.0.x" HREF="manual_toc.html#News-4.0.x">D.3  Changes in release 4.0.x (Production)</A></H2>

<P>
<A NAME="IDX1882"></A>

</P>
<P>
Version 4.0 of the MySQL server includes many enhancements and new features:

</P>

<UL>
<LI>

The <CODE>InnoDB</CODE> table type is now included in the standard binaries,
adding transactions, row-level locking, and foreign keys.
See section <A HREF="manual.html#InnoDB">7.5  <CODE>InnoDB</CODE> Tables</A>.
<LI>

A query cache, offering vastly increased performance for many applications.
By caching complete result sets, later identical queries can return
instantly.
See section <A HREF="manual.html#Query_Cache">6.9  MySQL Query Cache</A>.
<LI>

Improved full-text indexing with boolean mode, truncation, and phrase searching.
See section <A HREF="manual.html#Fulltext_Search">6.8  MySQL Full-text Search</A>.
<LI>

Enhanced <CODE>MERGE</CODE> tables, now supporting <CODE>INSERT</CODE>s and
<CODE>AUTO_INCREMENT</CODE>.
See section <A HREF="manual.html#MERGE">7.2  <CODE>MERGE</CODE> Tables</A>.
<LI>

<CODE>UNION</CODE> syntax in <CODE>SELECT</CODE>.
See section <A HREF="manual.html#UNION">6.4.1.2  <CODE>UNION</CODE> Syntax</A>.
<LI>

Multi-table <CODE>DELETE</CODE> statements.
See section <A HREF="manual.html#DELETE">6.4.6  <CODE>DELETE</CODE> Syntax</A>.
<LI>

<CODE>libmysqld</CODE>, the embedded server library.
See section <A HREF="manual.html#libmysqld">8.1.15  libmysqld, the Embedded MySQL Server Library</A>.
<LI>

Additional <CODE>GRANT</CODE> privilege options for even tighter control and
security.
See section <A HREF="manual.html#GRANT">4.3.1  <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> Syntax</A>.
<LI>

Management of user resources in the <CODE>GRANT</CODE> system, particularly
useful for ISPs and other hosting providers.
See section <A HREF="manual.html#User_resources">4.3.6  Limiting user resources</A>.
<LI>

Dynamic server variables, allowing configuration changes without having
to take down the server.
See section <A HREF="manual.html#SET_OPTION">5.5.6  <CODE>SET</CODE> Syntax</A>.
<LI>

Improved replication code and features.
See section <A HREF="manual.html#Replication">4.10  Replication in MySQL</A>.
<LI>

Numerous new functions and options.
<LI>

Changes to existing code for enhanced performance and reliability.
</UL>

<P>
For a full list of changes, please refer to the changelog sections for
each individual 4.0.x release.

</P>



<H3><A NAME="News-4.0.13" HREF="manual_toc.html#News-4.0.13">D.3.1  Changes in release 4.0.13 (not released yet)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

When using a non-existing table type with <CODE>CREATE TABLE</CODE>, first
try if the default table type exists before falling back to <CODE>MyISAM</CODE>.
<LI>

Fixed wrong hostname for TCP/IP connections displayed in
<CODE>SHOW PROCESSLIST</CODE>.
<LI>

Added <CODE>MEMORY</CODE> as an alias for <CODE>HEAP</CODE>.
<LI>

Renamed function <CODE>rnd</CODE> to <CODE>my_rnd</CODE> as the name was too generic
and is an exported symbol in <CODE>libmysqlclient</CODE> (thanks to Dennis Haney
for the initial patch).
<LI>

Portability fix: renamed <TT>`include/dbug.h'</TT> to
<TT>`include/my_debug.h'</TT>.
<LI>

<CODE>mysqldump</CODE> does not silently delete the binlogs when called with
<CODE>--master-data</CODE> or <CODE>--first-slave</CODE> anymore; 
while this behaviour was convenient for some
users, others may suffer from it. Now one has to explicitely ask for
this deletion with the new <CODE>--delete-master-logs</CODE> option.
<LI>

If the slave is configured (using for example
<CODE>replicate-wild-ignore-table=mysql.%</CODE>)
to exclude <CODE>mysql.user</CODE>, <CODE>mysql.host</CODE>, <CODE>mysql.db</CODE>,
<CODE>mysql.tables_priv</CODE> and <CODE>mysql.columns_priv</CODE> from
replication, then <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> will not be replicated.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed bug in <CODE>multi-table updates</CODE> which occured whenever a
temporary table, containing update data, had to be converted from
<CODE>HEAP</CODE> to <CODE>MyISAM</CODE>.
<LI>

Fixed a bug when doing <CODE>LOAD DATA INFILE IGNORE</CODE> : when reading
the binary log, <CODE>mysqlbinlog</CODE> and the replication code read <CODE>REPLACE</CODE>
instead of <CODE>IGNORE</CODE>. This could make the slave's table
become different from the master's table. Bug #218.
<LI>

Fixed a deadlock when <CODE>relay_log_space_limit</CODE> was set to a too
small value. Bug #79.
<LI>

Fixed a bug in HAVING clause when an alias is used from the <STRONG>select list</STRONG>. 
<LI>

Fixed a bug in <CODE>MyISAM</CODE> when a row is inserted into a table with a 
large number of <CODE>NULL</CODE> columns. Bug was caused by wrong calculation
of the record length, as the space required for storage of <CODE>NULL</CODE>
bits was not added to the total record length.
<LI>

Fixed a bug when <CODE>SELECT</CODE> <STRONG>@nonexistent_variable</STRONG> caused the
error in client - server protocl due to net_printf() being sent to
the client twice.
<LI>

Fixed a bug in setting <CODE>SQL_BIG_SELECTS</CODE> option.
<LI>

Fixed a bug in <CODE>SHOW PROCESSLIST</CODE> which only displayed a localhost
in the <CODE>"Host"</CODE> column. This was caused by a glitch that only used
current thread info instead info from the linked list of threads.
<LI>

Removed unnecessary Mac OS X helper files from server RPM (bug #144).
<LI>

Allow optimzation of <CODE>multi-table-update</CODE> for InnoDB tables as well.
<LI>

Fixed a bug in <CODE>multi-table-updates</CODE> that caused some rows to be
updated several times.
<LI>

Fixed a bug in <CODE>mysqldump</CODE> when it was called with
<CODE>--master-data</CODE>: the <CODE>CHANGE MASTER TO</CODE> commands appended to
the SQL dump had wrong coordinates (bug #159).
<LI>

Fixed a bug when an updating query using <CODE>USER()</CODE> was replicated
on the slave ; this caused segfault on the slave (bug
#178). <CODE>USER()</CODE> is still badly replicated on the slave (it is
replicated to <CODE>""</CODE>).
</UL>



<H3><A NAME="News-4.0.12" HREF="manual_toc.html#News-4.0.12">D.3.2  Changes in release 4.0.12 (15 Mar 2003: Production)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<TT>`mysqld'</TT> no longer reads options from world-writeable config files.
<LI>

Integer values between 9223372036854775807 and 9999999999999999999 are now
regarded as unsigned longlongs, not as floats. This makes these values work
similar to values between 10000000000000000000 and 18446744073709551615.
<LI>

<CODE>SHOW PROCESSLIST</CODE> will now include the client TCP port after the
hostname to make it easier to know from which client the request
originated.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed <TT>`mysqld'</TT> crash on extremely small values of
<CODE>sort_buffer</CODE> variable.
<LI>

<CODE>INSERT INTO u SELECT ... FROM t</CODE> was written too late to the
binary log if t was very frequently updated during the execution of 
this query. This could cause a problem with <CODE>mysqlbinlog</CODE> or
replication. The master must be upgraded, not the slave. (bug #136).
<LI>

Fixed checking of random part of <CODE>WHERE</CODE> clause (bug #142).
<LI>

Fixed a bug with <CODE>multi-table updates</CODE> with <CODE>InnoDB</CODE>
tables. This bug occured as, in many cases, <CODE>InnoDB</CODE> tables can not
be updated "on the fly", but offsets to the records have to be stored in
a temporary table. 
<LI>

Added missing file <TT>`mysql_secure_installation'</TT> to the <CODE>server</CODE>
RPM subpackage (bug #141).
<LI>

Fixed MySQL (and <TT>`myisamchk'</TT>) crash on artificially
corrupted <CODE>.MYI</CODE> files.
<LI>

Don't allow <CODE>BACKUP TABLE</CODE> to overwrite existing files.
<LI>

Fixed a bug with multi-table <CODE>UPDATE</CODE>s when user had all privileges
on the database where tables are located and there were any entries in
<CODE>tables_priv</CODE> table, i.e. <CODE>grant_option</CODE> was true.
<LI>

Fixed a bug that allowed a user with table or column grants on some table,
<CODE>TRUNCATE</CODE> any table in the same database.
<LI>

Fixed deadlock when doing <CODE>LOCK TABLE</CODE> followed by <CODE>DROP
TABLE</CODE> in the same thread.  In this case one could still kill the thread
with <CODE>KILL</CODE>.
<LI>

<CODE>LOAD DATA LOCAL INFILE</CODE> was not properly written to the binary
log (hence not properly replicated). (bug #82).
<LI>

<CODE>RAND()</CODE> entries were not read correctly by <CODE>mysqlbinlog</CODE> from
the binary log which caused problems when restoring a table that was
inserted with <CODE>RAND()</CODE>. <CODE>INSERT INTO t1 VALUES(RAND())</CODE>. In
replication this worked ok.
<LI>

<CODE>SET SQL_LOG_BIN=0</CODE> was ignored for <CODE>INSERT DELAYED</CODE>
queries. (bug #104).
<LI>

<CODE>SHOW SLAVE STATUS</CODE> reported too old positions
(columns <CODE>Relay_Master_Log_File</CODE> and <CODE>Exec_master_log_pos</CODE>)
for the last executed statement from the master, if this statement
was the <CODE>COMMIT</CODE> of a transaction. The master must be upgraded for that,
not the slave. (bug #52).
<LI>

<CODE>LOAD DATA INFILE</CODE> was not replicated by the slave if
<CODE>replicate_*_table</CODE> was set on the slave. (bug #86).
<LI>

After <CODE>RESET SLAVE</CODE>, the coordinates displayed by <CODE>SHOW
SLAVE STATUS</CODE> looked un-reset (though they were, but only
internally). (bug #70).
<LI>

Fixed query cache invalidation on <CODE>LOAD DATA</CODE>.
<LI>

Fixed memory leak on <CODE>ANALYZE</CODE> procedure with error.
<LI>

Fixed a bug in handling <CODE>CHAR(0)</CODE> columns that could cause wrong
results from the query.
<LI>

Fixed rare bug with wrong initialization of <CODE>AUTO_INCREMENT</CODE> column,
as a secondary column in a multi-column key (see section <A HREF="manual.html#example-AUTO_INCREMENT">3.5.9  Using <CODE>AUTO_INCREMENT</CODE></A>), when
data was inserted with <CODE>INSERT ... SELECT</CODE> or <CODE>LOAD DATA</CODE> into
an empty table.
<LI>

On windows, <CODE>STOP SLAVE</CODE> didn't stop the slave until the slave
got one new command from the master (this bug has been fixed for MySQL 4.0.11
by releasing updated 4.0.11a windows packages, which include this individual
fix on top of the 4.0.11 sources). (bug #69).
<LI>

Fixed a crash when no database was selected and <CODE>LOAD DATA</CODE> command
was issued with full table name specified, including database prefix.
<LI>

Fixed a crash when shutting down replication on some platforms
(e.g. Mac OS X).
<LI>

Fixed a portability bug with <CODE>pthread_attr_getstacksize</CODE> on
HP-UX 10.20 (Patch was also included in 4.0.11a sources).
<LI>

Fixed the <CODE>bigint</CODE> test to not fail on some platforms (e.g. HP-UX and
Tru64) due to different return values of the <CODE>atof()</CODE> function.
<LI>

Fixed the <CODE>rpl_rotate_logs</CODE> test to not fail on certain platforms (e.g.
Mac OS X) due to a too long file name (changed <CODE>slave-master-info.opt</CODE>
to <CODE>.slave-mi</CODE>).
</UL>



<H3><A NAME="News-4.0.11" HREF="manual_toc.html#News-4.0.11">D.3.3  Changes in release 4.0.11 (20 Feb 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<CODE>NULL</CODE> is now sorted <STRONG>LAST</STRONG> if you use <CODE>ORDER BY ... DESC</CODE>
(as it was before before MySQL 4.0.2).  This is change was required to
follow ANSI SQL 99.  (The original change was because we thought that
ANSI SQL 99 required NULL to be always sorted at the same position, but
this was wrong).
<LI>

Added <CODE>START TRANSACTION</CODE> (ANSI SQL-99 syntax) as alias for <CODE>BEGIN</CODE>.
This is recommended to use instead of <CODE>BEGIN</CODE> to start a transaction.
<LI>

Added <CODE>OLD_PASSWORD()</CODE> as a synonym for <CODE>PASSWORD()</CODE>.
<LI>

Allow keyword <CODE>ALL</CODE> in group functions.
<LI>

Added support for some new <CODE>INNER JOIN</CODE> and <CODE>JOIN</CODE> syntaxes.
For example, <CODE>SELECT * FROM t1 INNER JOIN t2</CODE> didn't work before.
<LI>

Novell NetWare 6.0 porting effort completed, Novell patches merged into
the main source tree.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed problem with <CODE>multi-table-delete</CODE> and InnoDB tables.
<LI>

Fixed a problem with <CODE>BLOB NOT NULL</CODE> columns used with <CODE>IS NULL</CODE>.
<LI>

Re-added missing pre- and post(un)install scripts to the Linux RPM packages
(they were missing after the renaming of the server subpackage).
<LI>

Fixed that table locks are not released with multi-table updates and 
deletes with InnoDB storage engine.
<LI>

Fixed bug in updating BLOB columns with long strings.
<LI>

Fixed integer-wraparound when giving big integer (&#62;= 10 digits) to
function that requires an unsigned argument, like <CODE>CREATE TABLE (...) 
AUTO_INCREMENT=#</CODE>.
<LI>

<CODE>MIN(key_column)</CODE> could in some cases return <CODE>NULL</CODE> on a column
with <CODE>NULL</CODE> and other values.
<LI>

<CODE>MIN(key_column)</CODE> and <CODE>MAX(key_column)</CODE> could in some cases
return wrong values when used in <CODE>OUTER JOIN</CODE>.
<LI>

<CODE>MIN(key_column)</CODE> and <CODE>MAX(key_column)</CODE> could return wrong
values if one of the tables was empty.
<LI>

Fixed rare crash in compressed MyISAM tables with blobs.
<LI>

Fixed bug in using aggregate functions as argument for <CODE>INTERVAL</CODE>,
<CODE>CASE</CODE>, <CODE>FIELD</CODE>, <CODE>CONCAT_WS</CODE>, <CODE>ELT</CODE> and
<CODE>MAKE_SET</CODE> functions.
<LI>

When running with <CODE>--lower-case-table-names</CODE> (default on windows)
and you had tables or databases with mixed case on disk, then
executing <CODE>SHOW TABLE STATUS</CODE> followed with <CODE>DROP DATABASE</CODE>
or <CODE>DROP TABLE</CODE> could fail with <CODE>Errcode 13</CODE>.
</UL>



<H3><A NAME="News-4.0.10" HREF="manual_toc.html#News-4.0.10">D.3.4  Changes in release 4.0.10 (29 Jan 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Added option <CODE>--log-error[=file_name]</CODE> to <CODE>mysqld_safe</CODE> and
<CODE>mysqld</CODE>. This option will force all error messages to be put in a
log file if the option <CODE>--console</CODE> is not given. On Windows
<CODE>--log-error</CODE> is enabled as default, with a default name of
<CODE>host_name.err</CODE> if the name is not specified.
<LI>

Changed some things from <CODE>Warning:</CODE> to <CODE>Note:</CODE> in the log files.
<LI>

The mysqld server should now compile on Netware.
<LI>

Added optimisation that if one does <CODE>GROUP BY ... ORDER BY NULL</CODE>
then result is not sorted.
<LI>

New command-line option for <TT>`mysqld'</TT> to replace/disable
built-in stopword list, that is used in fulltext search.
See section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>.
<LI>

Changed default stack size from 64K to 192K; This fixes a core dump
problem on RedHat 8.0 and other systems with a glibc that requires &#62; 128K
stack for <CODE>gethostbyaddr()</CODE> to resolve a hostname. You can fix
this for earlier MySQL versions by starting mysqld with
<CODE>--thread-stack=192K</CODE>.
<LI>

Added <CODE>mysql_waitpid</CODE> to the binary distribution and the
<CODE>MySQL-client</CODE> RPM subpackage (required for <CODE>mysql-test-run</CODE>).
<LI>

Renamed the main <CODE>MySQL</CODE> RPM package to <CODE>MySQL-server</CODE>. When
updating from an older version, <CODE>MySQL-server.rpm</CODE> will simply replace
<CODE>MySQL.rpm</CODE>.
<LI>

If a slave is configured with <CODE>replicate_wild_do_table=db.%</CODE> or
<CODE>replicate_wild_ignore_table=db.%</CODE>, these rules will be applied to
<CODE>CREATE/DROP DATABASE</CODE> too.
<LI>

Added timeout value for <CODE>MASTER_POS_WAIT()</CODE>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed initialization of the random seed for newly created threads to
give a better <CODE>rand()</CODE> distribution from the first call.
<LI>

Fixed a bug that caused <CODE>mysqld</CODE> to hang when a
table was opened with the <CODE>HANDLER</CODE> command and then
dropped without being closed.
<LI>

Fixed bug in logging to binary log (which affects replication) a query
that inserts a <CODE>NULL</CODE> in an <CODE>auto_increment</CODE> field and also
uses <CODE>LAST_INSERT_ID()</CODE>.
<LI>

Fixed an unlikely bug that could cause a memory overrun when using
<CODE>ORDER BY constant_expression</CODE>.
<LI>

Fixed a table corruption in <TT>`myisamchk'</TT>'s parallel repair mode.
<LI>

Fixed bug in query cache invalidation on simple table renaming.
<LI>

Fixed bug in <CODE>mysqladmin --relative</CODE>.
<LI>

On some 64 bit systems, <CODE>show status</CODE> reported a strange number for
<CODE>Open_files</CODE> and <CODE>Open_streams</CODE>.
<LI>

Fixed wrong number of columns in <CODE>EXPLAIN</CODE> on empty table.
<LI>

Fixed bug in <CODE>LEFT JOIN</CODE> that caused zero rows to be returned in
the case the <CODE>WHERE</CODE> condition was evaluated as <CODE>FALSE</CODE> after
reading const tables. (Unlikely condition).
<LI>

<CODE>FLUSH PRIVILEGES</CODE> didn't correctly flush table/column privileges
when <CODE>mysql.tables_priv</CODE> is empty.
<LI>

Fixed bug in replication when using <CODE>LOAD DATA INFILE</CODE> one a file
that updated and auto_increment field with <CODE>NULL</CODE> or <CODE>0</CODE>. This
bug only affected MySQL 4.0 masters (not slaves or MySQL 3.23 masters).
<STRONG>NOTE</STRONG>: If you have a slave that has replicated a file with
generated auto_increment fields then the slave data is corrupted and you
should reinitialise the affected tables from the master.
<LI>

Fixed possible memory overrun when sending a blob &#62; 16M to the client.
<LI>

Fixed wrong error message when setting a <CODE>NOT NULL</CODE> field to an
expression that returned <CODE>NULL</CODE>.
<LI>

Fixed core dump bug in <CODE>str LIKE "%other_str%"</CODE> where <CODE>str</CODE> or
<CODE>other_str</CODE> contained characters &#62;= 128.
<LI>

Fixed bug: When executing on master <CODE>LOAD DATA</CODE> and InnoDB failed
with <CODE>table full</CODE> error the binary log was corrupted.
</UL>



<H3><A NAME="News-4.0.9" HREF="manual_toc.html#News-4.0.9">D.3.5  Changes in release 4.0.9 (09 Jan 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<CODE>OPTIMIZE TABLE</CODE> will for MyISAM tables treat all <CODE>NULL</CODE>
values as different when calculating cardinality.  This helps in
optimising joins between tables where one of the tables has a lot of
<CODE>NULL</CODE> values in a indexed column:

<PRE>
SELECT * from t1,t2 where t1.a=t2.key_with_a_lot_of_null;
</PRE>

<LI>

Added join operator <CODE>FORCE INDEX (key_list)</CODE>. This acts likes
<CODE>USE INDEX (key_list)</CODE> but with the addition that a table scan is
assumed to be VERY expensive.  One bad thing with this is that it makes
<CODE>FORCE</CODE> a reserved word.
<LI>

Reset internal row buffer in MyISAM after each query. This will reduce
memory in the case you have a lot of big blobs in a table.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

A security patch in 4.0.8 causes the mysqld server to die if the remote
hostname can't be resolved. This is now fixed.
<LI>

Fixed crash when replication big <CODE>LOAD DATA INFILE</CODE> statement that
caused log rotation.
</UL>



<H3><A NAME="News-4.0.8" HREF="manual_toc.html#News-4.0.8">D.3.6  Changes in release 4.0.8 (07 Jan 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Default <CODE>max_packet_length</CODE> for libmysqld.c is now 1024*1024*1024.
<LI>

One can now specify <CODE>max_allowed_packet</CODE> in a file ready by
<CODE>mysql_options(MYSQL_READ_DEFAULT_FILE)</CODE>.
for clients.
<LI>

When sending a too big packet to the server with the not compressed
protocol, the client now gets an error message instead of a lost
connection.
<LI>

We now send big queries/result rows in bigger hunks, which should give a
small speed improvement.
<LI>

Fixed some bugs with the compressed protocol for rows &#62; 16M.
<LI>

InnoDB tables now also supports <CODE>ON UPDATE CASCADE</CODE> in
<CODE>FOREIGN KEY</CODE> constraints. See the InnoDB section in the manual
for the InnoDB changelog.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> with BDB tables.
<LI>

Fixed core dump bug in <CODE>QUOTE()</CODE> function.
<LI>

Fixed a bug in handling communication packets bigger than
16M. Unfortunately this required a protocol change; If you upgrade the
server to 4.0.8 and above and have clients that uses packets &#62;=
255*255*255 bytes (=16581375) you must also upgrade your clients to at
least 4.0.8.  If you don't upgrade, the clients will hang when sending a
big packet.
<LI>

Fixed bug when sending blobs longer than 16M to client.
<LI>

Fixed bug in <CODE>GROUP BY</CODE> when used on BLOB column with <CODE>NULL</CODE> values.
<LI>

Fixed a bug in handling <CODE>NULL</CODE>s in <CODE>CASE</CODE> ... WHEN ...
</UL>



<H3><A NAME="News-4.0.7" HREF="manual_toc.html#News-4.0.7">D.3.7  Changes in release 4.0.7 (20 Dec 2002)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<CODE>mysqlbug</CODE> now also reports the compiler version used for building
the binaries (if the compiler supports the option <CODE>--version</CODE>).
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed compilation problems on OpenUnix and HPUX 10.20.
<LI>

Fixed some optimisation problems when compiling MySQL with <CODE>-DBIG_TABLES</CODE>
on a 32 bit system.
<LI>

<CODE>mysql_drop_db()</CODE> didn't check permissions properly so anyone could
drop another users database.  <CODE>DROP DATABASE</CODE> is checked properly.
</UL>



<H3><A NAME="News-4.0.6" HREF="manual_toc.html#News-4.0.6">D.3.8  Changes in release 4.0.6 (14 Dec 2002: Gamma)</A></H3>

<P>
Functionality added or changed:

</P>

<UL>
<LI>

Added syntax support for <CODE>CHARACTER SET xxx</CODE> and <CODE>CHARSET=xxx</CODE>
table options (to be able to read table dumps from 4.1).
<LI>

Fixed replication bug that caused the slave to loose its position in
some cases when the replication log was rotated.
<LI>

Fixed that a slave will restart from the start of a transaction if
it's killed in the middle of one.
<LI>

Moved the manual pages from <TT>`man'</TT> to <TT>`man/man1'</TT> in the
binary distributions.
<LI>

The default type returned by <CODE>IFNULL(A,B)</CODE> is now set to be the
more 'general' of the types of <CODE>A</CODE> and <CODE>B</CODE>. (The order is
<CODE>STRING</CODE>, <CODE>REAL</CODE> or <CODE>INTEGER</CODE>).
<LI>

Moved the <TT>`mysql.server'</TT> startup script in the RPM packages from
<TT>`/etc/rc.d/init.d/mysql'</TT> to <TT>`/etc/init.d/mysql'</TT>
(which almost all current Linux distributions support for LSB compliance).
<LI>

Added <CODE>Qcache_lowmem_prunes</CODE> status variable (number of queries that were
deleted from cache because of low memory).
<LI>

Fixed <CODE>mysqlcheck</CODE> so it can deal with table names containing dashes.
<LI>

Bulk insert optimisation
(see section <A HREF="manual.html#SHOW_VARIABLES">4.5.6.4  <CODE>SHOW VARIABLES</CODE></A>)
is no longer used when inserting small (less than 100) number of rows.
<LI>

Optimisation added for queries like
<CODE>SELECT ... FROM merge_table WHERE indexed_column=constant_expr</CODE>.
<LI>

Added functions <CODE>LOCALTIME</CODE> and <CODE>LOCALTIMESTAMP</CODE> as synonyms for
<CODE>NOW()</CODE>.
<LI>

<CODE>CEIL</CODE> is now an alias for <CODE>CEILING</CODE>.
<LI>

The <CODE>CURRENT_USER()</CODE> function can be used to get a <CODE>user@host</CODE>
value as it was matched in the <CODE>GRANT</CODE> system.
See section <A HREF="manual.html#Miscellaneous_functions">6.3.6.2  Miscellaneous Functions</A>.
<LI>

Fixed <CODE>CHECK</CODE> constraints to be compatible with ANSI SQL. This made
<CODE>CHECK</CODE> a reserved word. (Checking of <CODE>CHECK</CODE> constraints is
still not implemented).
<LI>

Added <CODE>CAST(... as CHAR)</CODE>.
<LI>

Added PostgreSQL compatible <CODE>LIMIT</CODE> syntax:
<CODE>SELECT ... LIMIT # OFFSET #</CODE>
<LI>

<CODE>mysql_change_user()</CODE> will now reset the connection to the state
of a fresh connect (Ie, <CODE>ROLLBACK</CODE> any active transaction, close
all temporary tables, reset all user variables etc..)
</UL>

<P>
Bugs fixed:

</P>

<UL>
<LI>

Fixed number of found rows returned in <CODE>multi table updates</CODE>
<LI>

Make <CODE>--lower-case-table-names</CODE> default on Mac OS X as the file system
is case sensitive.
<LI>

Transactions in <CODE>AUTOCOMMIT=0</CODE> mode didn't rotate binary log.
<LI>

A fix for the bug in a <CODE>SELECT</CODE> with joined tables with
<CODE>ORDER BY</CODE> and <CODE>LIMIT</CODE> clause when filesort had to be used.
In that case <CODE>LIMIT</CODE> was applied to filesort of one of the tables,
although it could not be.
This fix solved problems with <CODE>LEFT JOIN</CODE> too.
<LI>

<CODE>mysql_server_init()</CODE> now makes a copy of all arguments. This fixes
a problem when using the embedded server in C# program.
<LI>

Fixed buffer overrun in <CODE>libmysqlclient</CODE> library
that allowed a malicious <CODE>MySQL</CODE> server to crash the client
application.
<LI>

Fixed security-related bug in <CODE>mysql_change_user()</CODE> handling.
All users are strongly recommended to upgrade to version 4.0.6.
<LI>

Fixed bug that prevented <CODE>--chroot</CODE> command-line option of
<CODE>mysqld</CODE> from working.
<LI>

Fixed bug in phrase operator <CODE>"..."</CODE> in boolean full-text search.
<LI>

Fixed bug that caused <CODE>OPTIMIZE TABLE</CODE> to corrupt the table
under some rare circumstances.
<LI>

Part rewrite of multi-table-update to optimise it, make it safer and
more bug free.
<LI>

<CODE>LOCK TABLES</CODE> now works together with multi-table-update and
multi-table-delete.
<LI>

<CODE>--replicate-do=xxx</CODE> didn't work for <CODE>UPDATE</CODE> commands.
(Bug introduced in 4.0.0)
<LI>

Fixed shutdown problem on Mac OS X.
<LI>Major InnoDB bugs in <CODE>REPLACE, AUTO_INCREMENT,

INSERT INTO ... SELECT ...</CODE> were fixed. See the InnoDB changelog
in the InnoDB section of the manual.
</UL>



<H3><A NAME="News-4.0.5" HREF="manual_toc.html#News-4.0.5">D.3.9  Changes in release 4.0.5 (13 Nov 2002)</A></H3>

<P>
Functionality added or changed:

</P>

<UL>
<LI>

Port number was added to host name (if it is known) in <CODE>SHOW PROCESSLIST</CODE>
command
<LI>

Changed handling of last argument in <CODE>WEEK()</CODE> so that one can get
week number according to the ISO 8601 specification.
(Old code should still work).
<LI>

Fixed that <CODE>INSERT DELAYED</CODE> threads doesn't hang on <CODE>Waiting for
INSERT</CODE> when one sends a <CODE>SIGHUP</CODE> to mysqld.
<LI>

Change that <CODE>AND</CODE> works according to SQL ANSI99 when it comes to
<CODE>NULL</CODE> handling. In practice, this only affects queries where you
do something like <CODE>WHERE ... NOT (NULL AND 0)</CODE>.
<LI>

<CODE>mysqld</CODE> will now resolve <CODE>basedir</CODE> to its full path (with
<CODE>realpath()</CODE>). This enables one to use relative symlinks to the
MySQL installation directory.  This will however cause <CODE>show
variables</CODE> to report different directories on systems where there is
a symbolic link in the path.
<LI>

Fixed that MySQL will not use index scan on index disabled with
<CODE>IGNORE INDEX</CODE> or <CODE>USE INDEX</CODE>.
to be ignored.
<LI>

Added <CODE>--use-frm</CODE> option to <CODE>mysqlcheck</CODE>. When used with
<CODE>REPAIR</CODE>, it gets the table structure from the <CODE>.frm</CODE> file, so the
table can be repaired even if the <CODE>.MYI</CODE> header is corrupted.
<LI>

Fixed bug in <CODE>MAX()</CODE> optimisation when used with <CODE>JOIN</CODE> and
<CODE>ON</CODE> expressions.
<LI>

Added support for reading of MySQL 4.1 table definition files.
<LI>

<CODE>BETWEEN</CODE> behaviour changed (see section <A HREF="manual.html#Comparison_Operators">6.3.1.2  Comparison Operators</A>).
Now <CODE>datetime_col BETWEEN timestamp AND timestamp</CODE> should work
as expected.
<LI>

One can create <CODE>TEMPORARY</CODE> <CODE>MERGE</CODE> tables now.
<LI>

<CODE>DELETE FROM myisam_table</CODE> now shrinks not only the <TT>`.MYD'</TT> file but
also the <TT>`.MYI'</TT> file.
<LI>

When one uses the <CODE>--open-files-limit=#</CODE> option to <CODE>mysqld_safe</CODE>
it's now passed on to <CODE>mysqld</CODE>.
<LI>

Changed output from <CODE>EXPLAIN</CODE> from <CODE>'where used'</CODE> to
<CODE>'Using where'</CODE> to make it more in line with other output.
<LI>

Removed variable <CODE>safe_show_database</CODE> as it was not used anymore.
<LI>

Updated source tree to be built using <CODE>automake 1.5</CODE> and 
<CODE>libtool 1.4</CODE>.
<LI>

Fixed an inadvertently changed option (<CODE>--ignore-space</CODE>) back to the
original <CODE>--ignore-spaces</CODE> in <CODE>mysqlclient</CODE>. (Both syntaxes will
work).
<LI>

Don't require <CODE>UPDATE</CODE> privilege when using <CODE>REPLACE</CODE>.
<LI>

Added support for <CODE>DROP TEMPORARY TABLE ...</CODE>, to be used to make
replication safer.
<LI>

When transactions are enabled, all commands that update temporary tables
inside a <CODE>BEGIN/COMMIT</CODE> are now stored in the binary log on
<CODE>COMMIT</CODE> and not stored if one does <CODE>ROLLBACK</CODE>.  This fixes
some problems with non-transactional temporary tables used inside
transactions.
<LI>

Allow braces in joins in all positions. Formerly, things like
<CODE>SELECT * FROM (t2 LEFT JOIN t3 USING (a)), t1</CODE> worked, but
not <CODE>SELECT * FROM t1, (t2 LEFT JOIN t3 USING (a))</CODE>. Note that
braces are simply removed, they do not change the way the join is
executed.
<LI>

InnoDB now supports also isolation levels
<CODE>READ UNCOMMITTED</CODE> and <CODE>READ COMMITTED</CODE>.
For a detailed InnoDB changelog, see section <A HREF="manual.html#InnoDB_change_history">7.5.14  InnoDB Change History</A>
in this manual. 
</UL>

<P>
Bugs fixed:

</P>

<UL>
<LI>

Fixed bug in <CODE>MAX()</CODE> optimisation when used with <CODE>JOIN</CODE> and
<CODE>ON</CODE> expressions.
<LI>

Fixed that <CODE>INSERT DELAY</CODE> threads don't hang on <CODE>Waiting for
INSERT</CODE> when one sends a <CODE>SIGHUP</CODE> to <CODE>mysqld</CODE>.
<LI>

Fixed that MySQL will not use an index scan on an index that has been
disabled with <CODE>IGNORE INDEX</CODE> or <CODE>USE INDEX</CODE>.
<LI>

Corrected test for <CODE>root</CODE> user in <CODE>mysqld_safe</CODE>.
<LI>

Fixed error message issued when storage engine cannot do <CODE>CHECK</CODE>
or <CODE>REPAIR</CODE>.
<LI>

Fixed rare core dump problem in complicated <CODE>GROUP BY</CODE> queries that
didn't return any result.
<LI>

Fixed <CODE>mysqlshow</CODE> to work properly with wildcarded database names and
with database names that contain underscores.
<LI>

Portability fixes to get MySQL to compile cleanly with Sun Forte 5.0.
<LI>

Fixed <CODE>MyISAM</CODE> crash when using dynamic-row tables with huge numbers of
packed fields.
<LI>

Fixed query cache behaviour with <CODE>BDB</CODE> transactions.
<LI>

Fixed possible floating point exception in <CODE>MATCH</CODE>
relevance calculations.
<LI>

Fixed bug in full-text search <CODE>IN BOOLEAN MODE</CODE> that made <CODE>MATCH</CODE>
to return incorrect relevance value in some complex joins.
<LI>

Fixed a bug that limited <CODE>MyISAM</CODE> key length to a value
slightly less that 500. It is exactly 500 now.
<LI>

Fixed that <CODE>GROUP BY</CODE> on columns that may have a <CODE>NULL</CODE> value
doesn't always use disk based temporary tables.
<LI>

The filename argument for the <CODE>--des-key-file</CODE> argument to <CODE>mysqld</CODE>
is interpreted relative to the data directory if given as a relative pathname.
<LI>

Removed a condition that temp table with index on column that can be
<CODE>NULL</CODE> has to be <CODE>MyISAM</CODE>. This was okay for 3.23, but not
needed in 4.*. This resulted in slowdown in many queries since 4.0.2.
<LI>

Small code improvement in multi-table updates.
<LI>

Fixed a newly introduced bug that caused <CODE>ORDER BY ... LIMIT #</CODE>
to not return all rows.
<LI>

Fixed a bug in multi-table deletes when outer join is used on an empty
table, which gets first to be deleted.
<LI>

Fixed a bug in multi-table updates when a single table is updated.
<LI>

Fixed bug that caused <CODE>REPAIR TABLE</CODE> and <CODE>myisamchk</CODE>
to corrupt <CODE>FULLTEXT</CODE> indexes.
<LI>

Fixed bug with caching the <CODE>mysql</CODE> grant table database. Now queries
in this database are not cached in the query cache.
<LI>

Small fix in <CODE>mysqld_safe</CODE> for some shells.
<LI>

Give error if a <CODE>MyISAM</CODE> <CODE>MERGE</CODE> table has more than 2 ^ 32 rows and
MySQL was not compiled with <CODE>-DBIG_TABLES</CODE>.
<LI>

Fixed some <CODE>ORDER BY ... DESC</CODE> problems with <CODE>InnoDB</CODE> tables.
</UL>



<H3><A NAME="News-4.0.4" HREF="manual_toc.html#News-4.0.4">D.3.10  Changes in release 4.0.4 (29 Sep 2002)</A></H3>


<UL>
<LI>

Fixed bug where <CODE>GRANT</CODE>/<CODE>REVOKE</CODE> failed if hostname was given in
non-matching case.
<LI>

Don't give warning in <CODE>LOAD DATA INFILE</CODE> when setting a
<CODE>timestamp</CODE> to a string value of <CODE>'0'</CODE>.
<LI>

Fixed bug in <CODE>myisamchk -R</CODE> mode.
<LI>

Fixed bug that caused <CODE>mysqld</CODE> to crash on <CODE>REVOKE</CODE>.
<LI>

Fixed bug in <CODE>ORDER BY</CODE> when there is a constant in the <CODE>SELECT</CODE>
statement.
<LI>

One didn't get an error message if <CODE>mysqld</CODE> couldn't open the
privilege tables.
<LI>

<CODE>SET PASSWORD FOR ...</CODE> closed the connection in case of errors (bug
from 4.0.3).
<LI>

Increased max possible <CODE>max_allowed_packet</CODE> in <CODE>mysqld</CODE> to 1GB.
<LI>

Fixed bug when doing a multi-line <CODE>INSERT</CODE> on a table with an
<CODE>AUTO_INCREMENT</CODE> key which was not in the first part of the key.
<LI>

Changed <CODE>LOAD DATA INFILE</CODE> to not recreate index if the table had
rows from before.
<LI>

Fixed overrun bug when calling <CODE>AES_DECRYPT()</CODE> with incorrect arguments.
<LI>

<CODE>--skip-ssl</CODE> can now be used to disable SSL in the MySQL clients,
even if one is using other SSL options in an option file or previously
on the command line.
<LI>

Fixed bug in <CODE>MATCH ... AGAINST( ... IN BOOLEAN MODE)</CODE>
used with <CODE>ORDER BY</CODE>.
<LI>

Added <CODE>LOCK TABLES</CODE> and <CODE>CREATE TEMPORARY TABLES</CODE> privilege on
the database level.  One must run the <CODE>mysql_fix_privilege_tables</CODE>
script on old installations to activate these.
<LI>

In <CODE>SHOW TABLE ... STATUS</CODE>, compressed tables sometimes showed up as
<CODE>dynamic</CODE>.
<LI>

<CODE>SELECT @@[global|session].var_name</CODE> didn't report
<CODE>global | session</CODE> in the result column name.
<LI>

Fixed problem in replication that <CODE>FLUSH LOGS</CODE> in a circular
replication setup created an infinite number of binary log files.
Now a <CODE>rotate-binary-log</CODE> command in the binary log will not cause slaves
to rotate logs.
<LI>

Removed <CODE>STOP EVENT</CODE> from binary log when doing <CODE>FLUSH LOGS</CODE>.
<LI>

Disable the use of <CODE>SHOW NEW MASTER FOR SLAVE</CODE> as this needs to be
completely changed in 4.1.
<LI>

Fixed a bug with constant expression (e.g. field of a one-row table, or field
from a table, referenced by a <CODE>UNIQUE</CODE> key) appeared in <CODE>ORDER BY</CODE>
part of <CODE>SELECT DISTINCT</CODE>.
<LI>

<CODE>--log-binary=a.b.c</CODE> now properly strips off <CODE>.b.c</CODE>.
<LI>

<CODE>FLUSH LOGS</CODE> removed numerical extension for all future update logs.
<LI>

<CODE>GRANT ... REQUIRE</CODE> didn't store the SSL information in the
<CODE>mysql.user</CODE> table if SSL was not enabled in the server.
<LI>

<CODE>GRANT ... REQUIRE NONE</CODE> can now be used to remove SSL information.
<LI>

<CODE>AND</CODE> is now optional between <CODE>REQUIRE</CODE> options.
<LI>

<CODE>REQUIRE</CODE> option was not properly saved, which could cause strange
output in <CODE>SHOW GRANTS</CODE>.
<LI>

Fixed that <CODE>mysqld --help</CODE> reports correct values for <CODE>--datadir</CODE>
and <CODE>--bind-address</CODE>.
<LI>

Fixed that one can drop UDFs that didn't exist when <CODE>mysqld</CODE> was started.
<LI>

Fixed core dump problem with <CODE>SHOW VARIABLES</CODE> on some 64 bit systems
(like Solaris sparc).
<LI>

Fixed a bug in my_getopt; <CODE>--set-variable</CODE> syntax didn't work for
those options that didn't have a valid variable in my_option struct.
This affected at least <CODE>default-table-type</CODE> option.
<LI>

Fixed a bug from 4.0.2 that caused <CODE>REPAIR TABLE</CODE> and
<CODE>myisamchk --recover</CODE> to fail on tables with duplicates in a unique
key.
<LI>

Fixed a bug from 4.0.3 in calculating the default field type for some
functions. This affected queries of type <CODE>CREATE TABLE table_name
SELECT expression(),...</CODE>
<LI>

Fixed bug in queries of type
<CODE>SELECT * FROM table-list GROUP BY ...</CODE> and
<CODE>SELECT DISTINCT * FROM ...</CODE>.
<LI>

Fixed bug with the <CODE>--slow-log</CODE> when logging an administrator command
(like <CODE>FLUSH TABLES</CODE>).
<LI>

Fixed a bug that <CODE>OPTIMIZE</CODE> of locked and modified table,
reported table corruption.
<LI>

Fixed a bug in my_getopt in handling of special prefixes (<CODE>--skip-</CODE>,
<CODE>--enable-</CODE>). <CODE>--skip-external-locking</CODE> didn't work and the bug
may have affected other similar options.
<LI>

Fixed bug in checking for output file name of the <CODE>tee</CODE> option.
<LI>

Added some more optimisation to use index for
<CODE>SELECT ... FROM many_tables .. ORDER BY key limit #</CODE>
<LI>

Fixed problem in <CODE>SHOW OPEN TABLES</CODE> when a user didn't have access
permissions to one of the opened tables.
</UL>



<H3><A NAME="News-4.0.3" HREF="manual_toc.html#News-4.0.3">D.3.11  Changes in release 4.0.3 (26 Aug 2002: Beta)</A></H3>


<UL>
<LI>

Fixed problem with <CODE>configure ... --localstatedir=...</CODE>.
<LI>

Cleaned up <CODE>mysql.server</CODE> script.
<LI>

Fixed a bug in <CODE>mysqladmin shutdown</CODE> when pid file was modified
while <CODE>mysqladmin</CODE> was still waiting for the previous one to
disappear. This could happen during a very quick restart and caused
<CODE>mysqladmin</CODE> to hang until <CODE>shutdown_timeout</CODE> seconds had
passed.
<LI>

Don't increment warnings when setting <CODE>AUTO_INCREMENT</CODE> columns to
<CODE>NULL</CODE> in <CODE>LOAD DATA INFILE</CODE>.
<LI>

Fixed all boolean type variables/options to work with the old syntax,
e.g. all of these work: --lower-case-table-names, --lower-case-table-names=1,
-O lower-case-table-names=1, --set-variable=lower-case-table-names=1
<LI>

Fixed shutdown problem (SIGTERM signal handling) on Solaris. (Bug from 4.0.2).
<LI>

<CODE>SHOW MASTER STATUS</CODE> now returns an empty set if binary log is not
enabled.
<LI>

<CODE>SHOW SLAVE STATUS</CODE> now returns an empty set if slave is not initialised.
<LI>

Don't update MyISAM index file on update if not strictly necessary.
<LI>

Fixed bug in <CODE>SELECT DISTINCT ... FROM many_tables ORDER BY
not-used-column</CODE>.
<LI>

Fixed a bug with <CODE>BIGINT</CODE>s and quoted strings.
<LI>

Added <CODE>QUOTE()</CODE> function that performs SQL quoting to produce values
that can be used as data values in queries.
<LI>

Changed variable <CODE>DELAY_KEY_WRITE</CODE> to an enum to allow one set
<CODE>DELAY_KEY_WRITE</CODE> for all tables without taking down the server.
<LI>

Changed behaviour of <CODE>IF(condition,column,NULL)</CODE> so that it returns
the value of the column type.
<LI>

Made <CODE>safe_mysqld</CODE> a symlink to <CODE>mysqld_safe</CODE> in binary distribution.
<LI>

Fixed security bug when having an empty database name in the <CODE>user.db</CODE>
table.
<LI>

Fixed some problems with <CODE>CREATE TABLE ... SELECT function()</CODE>.
<LI>

<CODE>mysqld</CODE> now has the option <CODE>--temp-pool</CODE> enabled by default as this
gives better performance with some operating systems.
<LI>

Fixed hang in <CODE>CHANGE MASTER TO</CODE> if the slave thread died very quickly.
<LI>

Big cleanup in replication code (less logging, better error messages, etc..)
<LI>

If the <CODE>--code-file</CODE> option is specified, the server calls
<CODE>setrlimit()</CODE> to set the maximum allowed core file size to unlimited,
so core files can be generated.
<LI>

Fixed bug in query cache after temporary table creation.
<LI>

Added <CODE>--count=N</CODE> (<CODE>-c</CODE>) option to <CODE>mysqladmin</CODE>, to make the
program do only <CODE>N</CODE> iterations. To be used with <CODE>--sleep</CODE> (<CODE>-i</CODE>).
Useful in scripts.
<LI>

Fixed bug in multi-table <CODE>UPDATE</CODE>: when updating a table,
<CODE>do_select()</CODE> became confused about reading records from a cache.
<LI>

Fixed bug in multi-table <CODE>UPDATE</CODE> when several fields were referenced
from a single table
<LI>

Fixed bug in truncating nonexisting table.
<LI>

Fixed bug in <CODE>REVOKE</CODE> that caused user resources to be randomly set.
<LI>

Fixed bug in <CODE>GRANT</CODE> for the new <CODE>CREATE TEMPORARY TABLE</CODE> privilege.
<LI>

Fixed bug in multi-table <CODE>DELETE</CODE> when tables are re-ordered in the
table initialisation method and ref_lengths are of different sizes.
<LI>

Fixed two bugs in <CODE>SELECT DISTINCT</CODE> with large tables.
<LI>

Fixed bug in query cache initialisation with very small query cache size.
<LI>

Allow <CODE>DEFAULT</CODE> with <CODE>INSERT</CODE> statement.
<LI>

The startup parameters <CODE>myisam_max_sort_file_size</CODE> and
<CODE>myisam_max_extra_sort_file_size</CODE> are now given in bytes, not megabytes.
<LI>

External system locking of <CODE>MyISAM</CODE>/<CODE>ISAM</CODE> files is now turned
off by default.  One can turn this on with <CODE>--external-locking</CODE>.
(For most users this is never needed).
<LI>

Fixed core dump bug with <CODE>INSERT ... SET db_name.table_name.colname=''</CODE>.
<LI>

Fixed client hangup bug when using some SQL commands with wrong syntax.
<LI>

Fixed a timing bug in <CODE>DROP DATABASE</CODE>
<LI>

New <CODE>SET [GLOBAL | SESSION]</CODE> syntax to change thread-specific and global
server variables at runtime.
<LI>

Added variable <CODE>slave_compressed_protocol</CODE>.
<LI>

Renamed variable <CODE>query_cache_startup_type</CODE> to <CODE>query_cache_type</CODE>,
<CODE>myisam_bulk_insert_tree_size</CODE> to <CODE>bulk_insert_buffer_size</CODE>,
<CODE>record_buffer</CODE> to <CODE>read_buffer_size</CODE> and
<CODE>record_rnd_buffer</CODE> to <CODE>record_rnd_buffer_size</CODE>.
<LI>

Renamed some SQL variables, but old names will still work until 5.0.
See section <A HREF="manual.html#Upgrading-from-3.23">2.5.3  Upgrading From Version 3.23 to 4.0</A>.
<LI>

Renamed <CODE>--skip-locking</CODE> to <CODE>--skip-external-locking</CODE>.
<LI>

Removed unused variable <CODE>query_buffer_size</CODE>.
<LI>

Fixed a bug that made the pager option in the <CODE>mysql</CODE> client
non-functional.
<LI>

Added full <CODE>AUTO_INCREMENT</CODE> support to <CODE>MERGE</CODE> tables.
<LI>

Extended <CODE>LOG()</CODE> function to accept an optional arbitrary base
parameter.
See section <A HREF="manual.html#Mathematical_functions">6.3.3.2  Mathematical Functions</A>.
<LI>

Added <CODE>LOG2()</CODE> function (useful for finding out how many bits
a number would require for storage).
<LI>

Added <CODE>LN()</CODE> natural logarithm function for compatibility with
other databases. It is synonymous with <CODE>LOG(X)</CODE>.
</UL>



<H3><A NAME="News-4.0.2" HREF="manual_toc.html#News-4.0.2">D.3.12  Changes in release 4.0.2 (01 Jul 2002)</A></H3>


<UL>
<LI>

Cleaned up <CODE>NULL</CODE> handling for default values in <CODE>DESCRIBE
table_name</CODE>.
<LI>

Fixed <CODE>truncate()</CODE> to round up negative values to the nearest integer.
<LI>

Changed <CODE>--chroot=path</CODE> option to execute <CODE>chroot()</CODE> immediately
after all options have been parsed.
<LI>

Don't allow database names that contain <SAMP>`\'</SAMP>.
<LI>

<CODE>lower_case_table_names</CODE> now also affects database names.
<LI>

Added <CODE>XOR</CODE> operator (logical and bitwise <CODE>XOR</CODE>) with <CODE>^</CODE>
as a synonym for bitwise <CODE>XOR</CODE>.
<LI>

Added function <CODE>IS_FREE_LOCK("lock_name")</CODE>.
Based on code contributed by Hartmut Holzgraefe <a HREF="mailto:hartmut@six.de">hartmut@six.de</a>.
<LI>

Removed <CODE>mysql_ssl_clear()</CODE> from C API, as it was not needed.
<LI>

<CODE>DECIMAL</CODE> and <CODE>NUMERIC</CODE> types can now read exponential numbers.
<LI>

Added <CODE>SHA1()</CODE> function to calculate 160 bit hash value as described
in RFC 3174 (Secure Hash Algorithm). This function can be considered a
cryptographically more secure equivalent of <CODE>MD5()</CODE>.
See section <A HREF="manual.html#Miscellaneous_functions">6.3.6.2  Miscellaneous Functions</A>.
<LI>

Added <CODE>AES_ENCRYPT()</CODE> and <CODE>AES_DECRYPT()</CODE> functions to perform
encryption according to AES standard (Rijndael).
See section <A HREF="manual.html#Miscellaneous_functions">6.3.6.2  Miscellaneous Functions</A>.
<LI>

Added <CODE>--single-transaction</CODE> option to <CODE>mysqldump</CODE>, allowing a
consistent dump of <CODE>InnoDB</CODE> tables.
See section <A HREF="manual.html#mysqldump">4.8.5  <CODE>mysqldump</CODE>, Dumping Table Structure and Data</A>.
<LI>

Fixed bug in <CODE>innodb_log_group_home_dir</CODE> in <CODE>SHOW VARIABLES</CODE>.
<LI>

Fixed a bug in optimiser with merge tables when non-unique values are 
used in summing up (causing crashes).
<LI>

Fixed a bug in optimiser when a range specified makes index grouping
impossible (causing crashes).
<LI>

Fixed a rare bug when <CODE>FULLTEXT</CODE> index is present and no tables are used.
<LI>

Added privileges <CODE>CREATE TEMPORARY TABLES</CODE>, <CODE>EXECUTE</CODE>,
<CODE>LOCK TABLES</CODE>, <CODE>REPLICATION CLIENT</CODE>, <CODE>REPLICATION SLAVE</CODE>,
<CODE>SHOW DATABASES</CODE> and <CODE>SUPER</CODE>. To use these, you must have
run the <CODE>mysql_fix_privilege_tables</CODE> script after upgrading.
<LI>

Fixed query cache align data bug.
<LI>

Fixed mutex bug in replication when reading from master fails.
<LI>

Added missing mutex in <CODE>TRUNCATE TABLE</CODE>;  This fixes some core
dump/hangup problems when using <CODE>TRUNCATE TABLE</CODE>.
<LI>

Fixed bug in multi-table <CODE>DELETE</CODE> when optimiser uses only indices.
<LI>

Fixed that <CODE>ALTER TABLE table_name RENAME new_table_name</CODE> is as fast
as <CODE>RENAME TABLE</CODE>.
<LI>

Fixed bug in <CODE>GROUP BY</CODE> with two or more fields, where at least one
field can contain <CODE>NULL</CODE> values.
<LI>

Use <CODE>Turbo Boyer-Moore</CODE> algorithm to speed up <CODE>LIKE "%keyword%"</CODE>
searches.
<LI>

Fixed bug in <CODE>DROP DATABASE</CODE> with symlink.
<LI>

Fixed crash in <CODE>REPAIR ... USE_FRM</CODE>.
<LI>

Fixed bug in <CODE>EXPLAIN</CODE> with <CODE>LIMIT offset != 0</CODE>.
<LI>

Fixed bug in phrase operator <CODE>"..."</CODE> in boolean full-text search.
<LI>

Fixed bug that caused duplicated rows when using truncation operator
<CODE>*</CODE> in boolean full-text search.
<LI>

Fixed bug in truncation operator of boolean full-text search (wrong results
when there are only <CODE>+word*</CODE>s in the query).
<LI>

Fixed bug in boolean full-text search that caused a crash when an identical
<CODE>MATCH</CODE> expression that did not use an index appeared twice.
<LI>

Query cache is now automatically disabled in <CODE>mysqldump</CODE>.
<LI>

Fixed problem on Windows 98 that made sending of results very slow.
<LI>

Boolean full-text search weighting scheme changed to something more reasonable.
<LI>

Fixed bug in boolean full-text search that caused MySQL to ignore queries of
<CODE>ft_min_word_len</CODE> characters.
<LI>

Boolean full-text search now supports ``phrase searches''.
<LI>

New configure option <CODE>--without-query-cache</CODE>. 
<LI>

Memory allocation strategy for ``root memory'' changed. Block size now grows 
with number of allocated blocks.
<LI>

<CODE>INET_NTOA()</CODE> now returns <CODE>NULL</CODE> if you give it an argument that
is too large (greater than the value corresponding to <CODE>255.255.255.255</CODE>).
<LI>

Fix <CODE>SQL_CALC_FOUND_ROWS</CODE> to work with <CODE>UNION</CODE>s. It will work only
if the first <CODE>SELECT</CODE> has this option and if there is global <CODE>LIMIT</CODE>
for the entire statement. For the moment, this requires using parentheses for
individual <CODE>SELECT</CODE> queries within the statement.
<LI>

Fixed bug in <CODE>SQL_CALC_FOUND_ROWS</CODE> and <CODE>LIMIT</CODE>.
<LI>

Don't give an error for <CODE>CREATE TABLE ...(... VARCHAR(0))</CODE>.
<LI>

Fixed <CODE>SIGINT</CODE> and <CODE>SIGQUIT</CODE> problems in <TT>`mysql.cc'</TT> on Linux
with some <CODE>glibc</CODE> versions.
<LI>

Fixed bug in <TT>`convert.cc'</TT>, which is caused by having an incorrect
<CODE>net_store_length()</CODE> linked in the <CODE>CONVERT::store()</CODE> method.
<LI>

<CODE>DOUBLE</CODE> and <CODE>FLOAT</CODE> columns now honor the <CODE>UNSIGNED</CODE> flag
on storage.
<LI>

<CODE>InnoDB</CODE> now retains foreign key constraints through <CODE>ALTER TABLE</CODE>
and <CODE>CREATE/DROP INDEX</CODE>.
<LI>

<CODE>InnoDB</CODE> now allows foreign key constraints to be added through the
<CODE>ALTER TABLE</CODE> syntax.
<LI>

<CODE>InnoDB</CODE> tables can now be set to automatically grow in size (autoextend).
<LI>

Added <CODE>--ignore-lines=n</CODE> option to <CODE>mysqlimport</CODE>.  This has the
same effect as the <CODE>IGNORE n LINES</CODE> clause for <CODE>LOAD DATA</CODE>.
<LI>

Fixed bug in <CODE>UNION</CODE> with last offset being transposed to total result
set.
<LI>

<CODE>REPAIR ... USE_FRM</CODE> added.
<LI>

Fixed that <CODE>DEFAULT_SELECT_LIMIT</CODE> is always imposed on <CODE>UNION</CODE>
result set.
<LI>

Fixed that some <CODE>SELECT</CODE> options can appear only in the first
<CODE>SELECT</CODE>.
<LI>

Fixed bug with <CODE>LIMIT</CODE> with <CODE>UNION</CODE>, where last select is in
the braces.
<LI>

Fixed that full-text works fine with <CODE>UNION</CODE> operations.
<LI>

Fixed bug with indexless boolean full-text search.
<LI>

Fixed bug that sometimes appeared when full-text search was used
with ``const'' tables.
<LI>

Fixed incorrect error value when doing a <CODE>SELECT</CODE> with an empty
<CODE>HEAP</CODE> table.
<LI>

Use <CODE>ORDER BY column DESC</CODE> now sorts <CODE>NULL</CODE> values first.
(In other words, <CODE>NULL</CODE> values sort first in all cases, whether or
not <CODE>DESC</CODE> is specified.).  This is changed back in 4.0.10.
<LI>

Fixed bug in <CODE>WHERE key_name='constant' ORDER BY key_name DESC</CODE>.
<LI>

Fixed bug in <CODE>SELECT DISTINCT ... ORDER BY DESC</CODE> optimisation.
<LI>

Fixed bug in <CODE>... HAVING 'GROUP_FUNCTION'(xxx) IS [NOT] NULL</CODE>.
<LI>

Fixed bug in truncation operator for boolean full-text search.
<LI>

Allow value of <CODE>--user=#</CODE> option for <CODE>mysqld</CODE> to be specified
as a numeric user ID.
<LI>

Fixed a bug where <CODE>SQL_CALC_ROWS</CODE> returned an incorrect value when used
with one table and <CODE>ORDER BY</CODE> and with <CODE>InnoDB</CODE> tables.
<LI>

Fixed that <CODE>SELECT 0 LIMIT 0</CODE> doesn't hang thread.
<LI>

Fixed some problems with <CODE>USE/IGNORE INDEX</CODE> when using
many keys with the same start column.
<LI>

Don't use table scan with <CODE>BerkeleyDB</CODE> and <CODE>InnoDB</CODE> tables when
we can use an index that covers the whole row.
<LI>

Optimised <CODE>InnoDB</CODE> sort-buffer handling to take less memory.
<LI>

Fixed bug in multi-table <CODE>DELETE</CODE> and <CODE>InnoDB</CODE> tables.
<LI>

Fixed problem with <CODE>TRUNCATE</CODE> and <CODE>InnoDB</CODE> tables that produced the
error <CODE>Can't execute the given command because you have active locked
tables or an active transaction</CODE>.
<LI>

Added <CODE>NO_UNSIGNED_SUBTRACTION</CODE> to the set of flags that may be
specified with the <CODE>--sql-mode</CODE> option for <CODE>mysqld</CODE>.  It disables
unsigned arithmetic rules when it comes to subtraction. (This will make
MySQL 4.0 behave more closely to 3.23 with <CODE>UNSIGNED</CODE> columns).
<LI>

The result returned for all bit functions (<CODE>|</CODE>, <CODE>&#60;&#60;</CODE>, ...) is now of
type <CODE>unsigned integer</CODE>.
<LI>

Added detection of <CODE>nan</CODE> values in <CODE>MyISAM</CODE> to make it possible to
repair tables with <CODE>nan</CODE> in float or double columns.
<LI>

Fixed new bug in <CODE>myisamchk</CODE> where it didn't correctly update number of
``parts'' in the <CODE>MyISAM</CODE> index file.
<LI>

Changed to use <CODE>autoconf</CODE> 2.52 (from <CODE>autoconf</CODE> 2.13).
<LI>

Fixed optimisation problem where the MySQL Server was in ``preparing'' state
for a long time when selecting from an empty table which had contained
a lot of rows.
<LI>

Fixed bug in complicated join with <CODE>const</CODE> tables. This fix also
improves performance a bit when referring to another table from a
<CODE>const</CODE> table.
<LI>

First pre-version of multi-table <CODE>UPDATE</CODE> statement.
<LI>

Fixed bug in multi-table <CODE>DELETE</CODE>.
<LI>

Fixed bug in <CODE>SELECT CONCAT(argument_list) ... GROUP BY 1</CODE>.
<LI>

<CODE>INSERT ... SELECT</CODE> did a full rollback in case of an error. Fixed
so that we only roll back the last statement in the current transaction.
<LI>

Fixed bug with empty expression for boolean full-text search.
<LI>

Fixed core dump bug in updating full-text key from/to <CODE>NULL</CODE>.
<LI>

ODBC compatibility: Added <CODE>BIT_LENGTH()</CODE> function.
<LI>

Fixed core dump bug in <CODE>GROUP BY BINARY column</CODE>.
<LI>

Added support for <CODE>NULL</CODE> keys in <CODE>HEAP</CODE> tables.
<LI>

Use index for <CODE>ORDER BY</CODE> in queries of type:
<CODE>SELECT * FROM t WHERE key_part1=1 ORDER BY key_part1 DESC,key_part2 DESC</CODE>
<LI>

Fixed bug in <CODE>FLUSH QUERY CACHE</CODE>.
<LI>

Added <CODE>CAST()</CODE> and <CODE>CONVERT()</CODE> functions. The <CODE>CAST</CODE> and
<CODE>CONVERT</CODE> functions are nearly identical and mainly useful when you
want to create a column with a specific type in a <CODE>CREATE ... SELECT</CODE>
statement.  For more information, read section <A HREF="manual.html#Cast_Functions">6.3.5  Cast Functions</A>.
<LI>

<CODE>CREATE ... SELECT</CODE> on <CODE>DATE</CODE> and <CODE>TIME</CODE> functions now
create columns of the expected type.
<LI>

Changed order in which keys are created in tables.
<LI>

Added new columns <CODE>Null</CODE> and <CODE>Index_type</CODE> to <CODE>SHOW INDEX</CODE>
output.
<LI>

Added <CODE>--no-beep</CODE> and <CODE>--prompt</CODE> options to <CODE>mysql</CODE> command-line client.
<LI>

New feature: management of user resources.

<PRE>
GRANT ... WITH MAX_QUERIES_PER_HOUR N1
               MAX_UPDATES_PER_HOUR N2
               MAX_CONNECTIONS_PER_HOUR N3;
</PRE>

See section <A HREF="manual.html#User_resources">4.3.6  Limiting user resources</A>.

<LI>

Added <CODE>mysql_secure_installation</CODE> to the <TT>`scripts/'</TT> directory.
</UL>



<H3><A NAME="News-4.0.1" HREF="manual_toc.html#News-4.0.1">D.3.13  Changes in release 4.0.1 (23 Dec 2001)</A></H3>


<UL>
<LI>

Fixed bug when <CODE>HANDLER</CODE> was used with some unsupported table type.
<LI>

<CODE>mysqldump</CODE> now puts <CODE>ALTER TABLE tbl_name DISABLE KEYS</CODE> and
<CODE>ALTER TABLE tbl_name ENABLE KEYS</CODE> in the sql dump.
<LI>

Added <CODE>mysql_fix_extensions</CODE> script.
<LI>

Fixed stack overrun problem with <CODE>LOAD DATA FROM MASTER</CODE> on OSF/1.
<LI>

Fixed shutdown problem on HP-UX.
<LI>

Added <CODE>DES_ENCRYPT()</CODE> and <CODE>DES_DECRYPT()</CODE> functions.
<LI>

Added <CODE>FLUSH DES_KEY_FILE</CODE> statement.
<LI>

Added <CODE>--des-key-file</CODE> option to <CODE>mysqld</CODE>.
<LI>

<CODE>HEX(string)</CODE> now returns the characters in <CODE>string</CODE> converted to
hexadecimal.
<LI>

Fixed problem with <CODE>GRANT</CODE> when using <CODE>lower_case_table_names=1</CODE>.
<LI>

Changed <CODE>SELECT ... IN SHARE MODE</CODE> to
<CODE>SELECT ... LOCK IN SHARE MODE</CODE> (as in MySQL 3.23).
<LI>

A new query cache to cache results from identical <CODE>SELECT</CODE> queries.
<LI>

Fixed core dump bug on 64-bit machines when it got an incorrect communication
packet.
<LI>

<CODE>MATCH ... AGAINST(... IN BOOLEAN MODE)</CODE> can now work
without <CODE>FULLTEXT</CODE> index.
<LI>

Fixed slave to replicate from 3.23 master.
<LI>

Miscellaneous replication fixes/cleanup.
<LI>

Got shutdown to work on Mac OS X.
<LI>

Added <TT>`myisam/ft_dump'</TT> utility for low-level inspection
of <CODE>FULLTEXT</CODE> indexes.
<LI>

Fixed bug in <CODE>DELETE ... WHERE ... MATCH ...</CODE>.
<LI>

Added support for <CODE>MATCH ... AGAINST(... IN BOOLEAN MODE)</CODE>.
<STRONG>Note: you must rebuild your tables with
<CODE>ALTER TABLE tablename TYPE=MyISAM</CODE> to be
able to use boolean full-text search</STRONG>.
<LI>

<CODE>LOCATE()</CODE> and <CODE>INSTR()</CODE> are now case-sensitive if either
argument is a binary string.
<LI>

Changed <CODE>RAND()</CODE> initialisation so that <CODE>RAND(N)</CODE> and
<CODE>RAND(N+1)</CODE> are more distinct.
<LI>

Fixed core dump bug in <CODE>UPDATE ... ORDER BY</CODE>.
<LI>

Changed <CODE>INSERT INTO ... SELECT</CODE> to stop on errors by default.
<LI>

Ignore <CODE>DATA DIRECTORY</CODE> and <CODE>INDEX DIRECTORY</CODE> directives on Windows.
<LI>

Added boolean full-text search code. It should be considered early alpha.
<LI>

Extended <CODE>MODIFY</CODE> and <CODE>CHANGE</CODE> in <CODE>ALTER TABLE</CODE> to accept
the <CODE>FIRST</CODE> and <CODE>AFTER</CODE> keywords.
<LI>

Indexes are now used with <CODE>ORDER BY</CODE> on a whole <CODE>InnoDB</CODE> table.
</UL>



<H3><A NAME="News-4.0.0" HREF="manual_toc.html#News-4.0.0">D.3.14  Changes in release 4.0.0 (Oct 2001: Alpha)</A></H3>


<UL>
<LI>

Added <CODE>--xml</CODE> option to <CODE>mysql</CODE> for producing XML output.
<LI>

Added full-text variables <CODE>ft_min_word_len</CODE>, <CODE>ft_max_word_len</CODE>, and
<CODE>ft_max_word_len_for_sort</CODE>.
<LI>

Added documentation for <CODE>libmysqld</CODE>, the embedded MySQL server
library.  Also added example programs (a <CODE>mysql</CODE> client and
<CODE>mysqltest</CODE> test program) which use <CODE>libmysqld</CODE>.
<LI>

Removed all Gemini hooks from MySQL server.
<LI>

Removed <CODE>my_thread_init()</CODE> and <CODE>my_thread_end()</CODE>
from <TT>`mysql_com.h'</TT>, and added <CODE>mysql_thread_init()</CODE> and
<CODE>mysql_thread_end()</CODE> to <TT>`mysql.h'</TT>.
<LI>

Support for communication packets &#62; 16M.  In 4.0.1 we will extend
<CODE>MyISAM</CODE> to be able to handle these.
<LI>

Secure connections (with SSL).
<LI>

Unsigned <CODE>BIGINT</CODE> constants now work. <CODE>MIN()</CODE> and <CODE>MAX()</CODE>
now handle signed and unsigned <CODE>BIGINT</CODE> numbers correctly.
<LI>

New character set <CODE>latin1_de</CODE> which provides correct German sorting.
<LI>

<CODE>STRCMP()</CODE> now uses the current character set when doing comparisons,
which means that the default comparison behaviour now is case-insensitive.
<LI>

<CODE>TRUNCATE TABLE</CODE> and <CODE>DELETE FROM tbl_name</CODE> are now separate
functions. One bonus is that <CODE>DELETE FROM tbl_name</CODE> now returns
the number of deleted rows, rather than zero.
<LI>

<CODE>DROP DATABASE</CODE> now executes a <CODE>DROP TABLE</CODE> on all tables in
the database, which fixes a problem with <CODE>InnoDB</CODE> tables.
<LI>

Added support for <CODE>UNION</CODE>.
<LI>

Added support for multi-table <CODE>DELETE</CODE> operations.
<LI>

A new <CODE>HANDLER</CODE> interface to <CODE>MyISAM</CODE> tables.
<LI>

Added support for <CODE>INSERT</CODE> on <CODE>MERGE</CODE> tables. Patch from
Benjamin Pflugmann.
<LI>

Changed <CODE>WEEK(#,0)</CODE> to match the calendar in the USA.
<LI>

<CODE>COUNT(DISTINCT)</CODE> is about 30% faster.
<LI>

Speed up all internal list handling.
<LI>

Speed up <CODE>IS NULL</CODE>, <CODE>ISNULL()</CODE> and some other internal primitives.
<LI>

Full-text index creation now is much faster.
<LI>

Tree-like cache to speed up bulk inserts and
<CODE>myisam_bulk_insert_tree_size</CODE> variable.
<LI>

Searching on packed (<CODE>CHAR</CODE>/<CODE>VARCHAR</CODE>) keys is now much faster.
<LI>

Optimised queries of type:
<CODE>SELECT DISTINCT * from tbl_name ORDER by key_part1 LIMIT #</CODE>.
<LI>

<CODE>SHOW CREATE TABLE</CODE> now shows all table attributes.
<LI>

<CODE>ORDER BY ... DESC</CODE> can now use keys.
<LI>

<CODE>LOAD DATA FROM MASTER</CODE> ``automatically'' sets up a slave.
<LI>

Renamed <CODE>safe_mysqld</CODE> to <CODE>mysqld_safe</CODE> to make this name more
in line with other MySQL scripts/commands.
<LI>

Added support for symbolic links to <CODE>MyISAM</CODE> tables. Symlink handling is
now enabled by default for Windows.
<LI>

Added <CODE>SQL_CALC_FOUND_ROWS</CODE> and <CODE>FOUND_ROWS()</CODE>. This makes it
possible to know how many rows a query would have returned
without a <CODE>LIMIT</CODE> clause.
<LI>

Changed output format of <CODE>SHOW OPEN TABLES</CODE>.
<LI>

Allow <CODE>SELECT expression LIMIT ...</CODE>.
<LI>

Added <CODE>IDENTITY</CODE> as a synonym for <CODE>AUTO_INCREMENT</CODE> (like Sybase).
<LI>

Added <CODE>ORDER BY</CODE> syntax to <CODE>UPDATE</CODE> and <CODE>DELETE</CODE>.
<LI>

<CODE>SHOW INDEXES</CODE> is now a synonym for <CODE>SHOW INDEX</CODE>.
<LI>

Added <CODE>ALTER TABLE tbl_name DISABLE KEYS</CODE> and
<CODE>ALTER TABLE tbl_name ENABLE KEYS</CODE> commands.
<LI>

Allow use of <CODE>IN</CODE> as a synonym for <CODE>FROM</CODE> in <CODE>SHOW</CODE> commands.
<LI>

Implemented ``repair by sort'' for <CODE>FULLTEXT</CODE> indexes.
<CODE>REPAIR TABLE</CODE>, <CODE>ALTER TABLE</CODE>, and <CODE>OPTIMIZE TABLE</CODE>
for tables with <CODE>FULLTEXT</CODE> indexes are now up to 100 times faster.
<LI>

Allow ANSI SQL syntax <CODE>X'hexadecimal-number'</CODE>.
<LI>

Cleaned up global lock handling for <CODE>FLUSH TABLES WITH READ LOCK</CODE>.
<LI>

Fixed problem with <CODE>DATETIME = constant</CODE> in <CODE>WHERE</CODE> optimisation.
<LI>

Added <CODE>--master-data</CODE> and <CODE>--no-autocommit</CODE> options to
<CODE>mysqldump</CODE>. (Thanks to Brian Aker for this.)
<LI>

Added script <CODE>mysql_explain_log.sh</CODE> to distribution.
(Thanks to mobile.de).
</UL>



<H2><A NAME="News-3.23.x" HREF="manual_toc.html#News-3.23.x">D.4  Changes in release 3.23.x (Recent; still supported)</A></H2>

<P>
<A NAME="IDX1883"></A>

</P>
<P>
Please note that since release 4.0 is now production level, only critical
fixes are done in the 3.23 release series. You are recommended to upgrade
when possible, to take advantage of all speed and feature improvements in
4.0. See section <A HREF="manual.html#Upgrading-from-3.23">2.5.3  Upgrading From Version 3.23 to 4.0</A>.

</P>
<P>
The 3.23 release has several major features that are not
present in previous versions.  We have added three new
table types:

</P>
<DL COMPACT>

<DT><CODE>MyISAM</CODE>
<DD>
A new ISAM library which is tuned for SQL and supports large files.
<DT><CODE>InnoDB</CODE>
<DD>
A transaction-safe storage engine that supports row level locking, and many
Oracle-like features.
<DT><CODE>BerkeleyDB</CODE> or <CODE>BDB</CODE>
<DD>
Uses the Berkeley DB library from Sleepycat Software to implement
transaction-safe tables.
</DL>

<P>
Note that only <CODE>MyISAM</CODE> is available in the standard binary distribution.

</P>
<P>
The 3.23 release also includes support for database replication between
a master and many slaves, full-text indexing, and much more.

</P>
<P>
All new features are being developed in the 4.x version.  Only
bug fixes and minor enhancements to existing features will be
added to 3.23.

</P>
<P>
The replication code and BerkeleyDB code is still not as tested and as
the rest of the code, so we will probably need to do a couple of future
releases of 3.23 with small fixes for this part of the code. As long as
you don't use these features, you should be quite safe with
MySQL 3.23!

</P>
<P>
Note that the above doesn't mean that replication or Berkeley DB don't
work.  We have done a lot of testing of all code, including replication
and <CODE>BDB</CODE> without finding any problems.  It only means that not as many
users use this code as the rest of the code and because of this we are
not yet 100% confident in this code.

</P>



<H3><A NAME="News-3.23.57" HREF="manual_toc.html#News-3.23.57">D.4.1  Changes in release 3.23.57 (not released yet)</A></H3>

<UL>
<LI>

Fixed 64 bit bug that affected at least AMD hammer systems.
<LI>

Fixed a bug when doing <CODE>LOAD DATA INFILE IGNORE</CODE> : when reading
the binary log, <CODE>mysqlbinlog</CODE> and the replication code read <CODE>REPLACE</CODE>
instead of <CODE>IGNORE</CODE>. This could make the slave's table
become different from the master's table. Bug #218.
<LI>

Fixed a bug in <CODE>MyISAM</CODE> when a row is inserted into a table with a 
large number of <CODE>NULL</CODE> columns. Bug was caused by wrong calculation
of the record length, as the space required for storage of <CODE>NULL</CODE>
bits was not added to the total record length.
<LI>

Binary log was not locked during a <CODE>TRUNCATE table_name</CODE> or
<CODE>DELETE FROM table_name</CODE> which could cause an <CODE>INSERT</CODE> to
<CODE>table_name</CODE> to be written to the binary log before the
<CODE>TRUNCATE</CODE>/ <CODE>DELETE</CODE> command.
<LI>

Fixed rare bug in <CODE>UPDATE</CODE> of InnoDB tables where one row could be
updated multiple times.
<LI>

Give an error for empty table and column names.
<LI>

Changed <CODE>PROCEDURE ANALYSE()</CODE> to report <CODE>DATE</CODE> instead of
<CODE>NEWDATE</CODE>.
<LI>

Changed <CODE>PROCEDURE ANALYSE(#)</CODE> to restrict number of values in
enum to <CODE>#</CODE> also for string values.
<LI>

<CODE>mysqldump</CODE> does not silently delete the binlogs when called with
<CODE>--master-data</CODE> or <CODE>--first-slave</CODE> anymore; 
while this behaviour was convenient for some
users, others may suffer from it. Now one has to explicitely ask for
this deletion with the new <CODE>--delete-master-logs</CODE> option.
<LI>

Fixed a bug in <CODE>mysqldump</CODE> when it was called with
<CODE>--master-data</CODE>: the <CODE>CHANGE MASTER TO</CODE> commands appended to
the SQL dump had wrong coordinates (bug #159).
</UL>



<H3><A NAME="News-3.23.56" HREF="manual_toc.html#News-3.23.56">D.4.2  Changes in release 3.23.56 (13 Mar 2003)</A></H3>

<UL>
<LI>

Fixed <TT>`mysqld'</TT> crash on extremely small values of
<CODE>sort_buffer</CODE> variable.
<LI>

Fixed a bug in privilege system for <CODE>GRANT UPDATE</CODE> on column level.
<LI>

Fixed a rare bug when using a date in <CODE>HAVING</CODE> with <CODE>GROUP BY</CODE>.
<LI>

Fixed checking of random part of <CODE>WHERE</CODE> clause (Bug #142). 
<LI>

Fixed MySQL (and <TT>`myisamchk'</TT>) crash on artificially
corrupted <CODE>.MYI</CODE> files.
<LI>

Security enhancement:
<TT>`mysqld'</TT> no longer reads options from world-writeable config files.
<LI>

Security enhancement:
<TT>`mysqld'</TT> and <TT>`safe_mysqld'</TT> now only use the first <CODE>--user</CODE>
option specified on the command line. (Normally this comes from
<TT>`/etc/my.cnf'</TT>)
<LI>

Security enhancement:
Don't allow <CODE>BACKUP TABLE</CODE> to overwrite existing files.
<LI>

Fixed unlikely deadlock bug when one thread did a <CODE>LOCK TABLE</CODE> and
another thread did a <CODE>DROP TABLE</CODE>.  In this case one could do
a <CODE>KILL</CODE> on one of the threads to resolve the deadlock.
<LI>

<CODE>LOAD DATA INFILE</CODE> was not replicated by slave if
<CODE>replicate_*_table</CODE> was set on the slave.
<LI>

Fixed a bug in handling <CODE>CHAR(0)</CODE> columns that could cause wrong
results from the query.
<LI>

Fixed a bug in <CODE>SHOW VARIABLES</CODE> on 64-bit platforms. The bug was
caused by wrong declaration of variable <CODE>server_id</CODE>.
<LI>

The Comment column in <CODE>SHOW TABLE STATUS</CODE> now reports that it can
contain <CODE>NULL</CODE> values (which is the case for a crashed <TT>`.frm'</TT> file).
<LI>

Fixed the <CODE>rpl_rotate_logs</CODE> test to not fail on certain platforms (e.g.
Mac OS X) due to a too long file name (changed <CODE>slave-master-info.opt</CODE>
to <CODE>.slave-mi</CODE>).
<LI>

Fixed a problem with <CODE>BLOB NOT NULL</CODE> columns used with <CODE>IS NULL</CODE>.
<LI>

Fixed bug in <CODE>MAX()</CODE> optimization in <CODE>MERGE</CODE> tables.
<LI>

Better <CODE>RAND()</CODE> initialization for new connections.
<LI>

Fixed bug with connect timeout. This bug was manifested on OS's with 
<CODE>poll()</CODE> system call, which resulted in timeout the value specified as
it was executed in both <CODE>select()</CODE> and <CODE>poll()</CODE>.
<LI>

Fixed bug in
<CODE>SELECT * FROM table WHERE datetime1 IS NULL OR datetime2 IS NULL</CODE>.
<LI>

Fixed bug in using aggregate functions as argument for <CODE>INTERVAL</CODE>,
<CODE>CASE</CODE>, <CODE>FIELD</CODE>, <CODE>CONCAT_WS</CODE>, <CODE>ELT</CODE> and
<CODE>MAKE_SET</CODE> functions.
<LI>

When running with <CODE>--lower-case-table-names</CODE> (default on windows)
and you had tables or databases with mixed case on disk, then
executing <CODE>SHOW TABLE STATUS</CODE> followed with <CODE>DROP DATABASE</CODE>
or <CODE>DROP TABLE</CODE> could fail with <CODE>Errcode 13</CODE>.
<LI>

Fixed bug in logging to binary log (which affects replication) a query
that inserts a <CODE>NULL</CODE> in an <CODE>auto_increment</CODE> field and also
uses <CODE>LAST_INSERT_ID()</CODE>.
<LI>

Fixed bug in <CODE>mysqladmin --relative</CODE>.
<LI>

On some 64 bit systems, <CODE>show status</CODE> reported a strange number for
<CODE>Open_files</CODE> and <CODE>Open_streams</CODE>.
</UL>



<H3><A NAME="News-3.23.55" HREF="manual_toc.html#News-3.23.55">D.4.3  Changes in release 3.23.55 (23 Jan 2003)</A></H3>

<UL>
<LI>

Fixed double <CODE>free</CODE>'d pointer bug in <CODE>mysql_change_user()</CODE>
handling, that enabled a specially hacked version of MySQL client
to crash <CODE>mysqld</CODE>. <STRONG>Note</STRONG>, that one needs to login to the server
by using a valid user account to be able to exploit this bug.
<LI>

Fixed bug with the <CODE>--slow-log</CODE> when logging an administrator command
(like <CODE>FLUSH TABLES</CODE>).
<LI>

Fixed bug in <CODE>GROUP BY</CODE> when used on BLOB column with <CODE>NULL</CODE> values.
<LI>

Fixed a bug in handling <CODE>NULL</CODE>s in <CODE>CASE ... WHEN ...</CODE>.
<LI>

Bugfix for <CODE>--chroot</CODE> (see section <A HREF="manual.html#News-3.23.54">D.4.4  Changes in release 3.23.54 (05 Dec 2002)</A>)
is reverted. Unfortunately, there is no way to make it to work, without
introducing backward-incompatible changes in <TT>`my.cnf'</TT>.
Those who need <CODE>--chroot</CODE> functionality, should upgrade to MySQL 4.0.
(The fix in the 4.0 branch did not break backward-compatibility).
<LI>

Make <CODE>--lower-case-table-names</CODE> default on Mac OS X as the file system
is case insensitive.
<LI>

Fixed a bug in <TT>`scripts/mysqld_safe.sh'</TT> in <CODE>NOHUP_NICENESS</CODE>
testing.
<LI>

Transactions in <CODE>AUTOCOMMIT=0</CODE> mode didn't rotate binary log.
<LI>

Fixed a bug in <CODE>scripts/make_binary_distribution</CODE> that resulted in
a remaining <CODE>@HOSTNAME@</CODE> variable instead of replacing it with the
correct path to the <CODE>hostname</CODE> binary.
<LI>

Fixed a very unlikely bug that could cause <CODE>SHOW PROCESSLIST</CODE> to core
dump in pthread_mutex_unlock() if a new thread was connecting.
<LI>

Forbid <CODE>SLAVE STOP</CODE> if the thread executing the query has locked
tables.  This removes a possible deadlock situation.
</UL>



<H3><A NAME="News-3.23.54" HREF="manual_toc.html#News-3.23.54">D.4.4  Changes in release 3.23.54 (05 Dec 2002)</A></H3>

<UL>
<LI>

Fixed a bug, that allowed to crash <CODE>mysqld</CODE>
with a specially crafted packet.
<LI>

Fixed a rare crash (double <CODE>free</CODE>'d pointer) when altering a
temporary table.
<LI>

Fixed buffer overrun in <CODE>libmysqlclient</CODE> library
that allowed malicious MySQL server to crash the client
application.
<LI>

Fixed security-related bug in <CODE>mysql_change_user()</CODE> handling.
All users are strongly recommended to upgrade to the version 3.23.54.
<LI>

Fixed bug that prevented <CODE>--chroot</CODE> command-line option of <CODE>mysqld</CODE>
from working.
<LI>

Fixed bug that made <CODE>OPTIMIZE TABLE</CODE> to corrupt the table
under some rare circumstances.
<LI>

Fixed <CODE>mysqlcheck</CODE> so it can deal with table names containing dashes.
<LI>

Fixed shutdown problem on Mac OS X.
<LI>

Fixed bug with comparing an indexed <CODE>NULL</CODE> field with <CODE>&#60;=&#62; NULL</CODE>.
<LI>

Fixed bug that caused <CODE>IGNORE INDEX</CODE> and <CODE>USE INDEX</CODE> sometimes
to be ignored.
<LI>

Fixed rare core dump problem in complicated <CODE>GROUP BY</CODE> queries that
didn't return any result.
<LI>

Fixed a bug where <CODE>MATCH ... AGAINST () &#62;=0</CODE> was treated as if it was
<CODE>&#62;</CODE>.
<LI>

Fixed core dump in <CODE>SHOW PROCESSLIST</CODE> when running with an
active slave (unlikely timing bug).
<LI>

Allow one to start multiple MySQL servers on windows (code backported
from 4.0.2).
<LI>

One can create <CODE>TEMPORARY</CODE> <CODE>MERGE</CODE> tables now.
<LI>

Fixed that <CODE>--core-file</CODE> works on Linux (at least on kernel 2.4.18).
<LI>

Fixed a problem with <CODE>BDB</CODE> and <CODE>ALTER TABLE</CODE>.
<LI>

Fixed reference to freed memory when doing complicated <CODE>GROUP BY
... ORDER BY</CODE> queries.  Symptom was that <CODE>mysqld</CODE> died in function
<CODE>send_fields</CODE>.
<LI>

Allocate heap rows in smaller blocks to get better memory usage.
<LI>

Fixed memory allocation bug when storing <CODE>BLOB</CODE> values in internal
temporary tables used for some (unlikely) <CODE>GROUP BY</CODE> queries.
<LI>

Fixed a bug in key optimizing handling where the expression
<CODE>WHERE column_name = key_column_name</CODE> was calculated as true
for <CODE>NULL</CODE> values.
<LI>

Fixed core dump bug when doing <CODE>LEFT JOIN ... WHERE key_column=NULL</CODE>.
<LI>

Fixed <CODE>MyISAM</CODE> crash when using dynamic-row tables with huge numbers of
packed fields.
<LI>

Updated source tree to be built using <CODE>automake 1.5</CODE> and 
<CODE>libtool 1.4</CODE>.
</UL>



<H3><A NAME="News-3.23.53" HREF="manual_toc.html#News-3.23.53">D.4.5  Changes in release 3.23.53 (09 Oct 2002)</A></H3>

<UL>
<LI>

Fixed crash when <CODE>SHOW INNODB STATUS</CODE> was used and <CODE>skip-innodb</CODE>
was defined.
<LI>

Fixed possible memory corruption bug in binary log file handling when
slave rotated the logs (only affected 3.23, not 4.0).
<LI>

Fixed problem in <CODE>LOCK TABLES</CODE> on windows when one connects to a
database that contains upper case letters.
<LI>

Fixed that <CODE>--skip-show-databases</CODE> doesn't reset the <CODE>--port</CODE> option.
<LI>

Small fix in <CODE>safe_mysqld</CODE> for some shells.
<LI>

Fixed that <CODE>FLUSH STATUS</CODE> doesn't reset <CODE>Delayed_insert_threads</CODE>.
<LI>

Fixed core dump bug when using the <CODE>BINARY</CODE> cast on a <CODE>NULL</CODE> value.
<LI>

Fixed race condition when someone did a <CODE>GRANT</CODE> at the same time a new
user logged in or did a <CODE>USE DATABASE</CODE>.
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> and <CODE>RENAME TABLE</CODE> when running with
<CODE>-O lower_case_table_names=1</CODE> (typically on windows) when giving the
table name in uppercase.
<LI>

Fixed that <CODE>-O lower_case_table_names=1</CODE> also converts database
names to lower case.
<LI>

Fixed unlikely core dump with <CODE>SELECT ... ORDER BY ... LIMIT</CODE>.
<LI>

Changed <CODE>AND/OR</CODE> to report that they can return NULL. This fixes a
bug in <CODE>GROUP BY</CODE> on <CODE>AND/OR</CODE> expressions that return
<CODE>NULL</CODE>.
<LI>

Fixed a bug that <CODE>OPTIMIZE</CODE> of locked and modified MyISAM table,
reported table corruption.
<LI>

Fixed a <CODE>BDB</CODE>-related <CODE>ALTER TABLE</CODE> bug with dropping a column
and shutting down immediately thereafter.
<LI>

Fixed problem with <CODE>configure ... --localstatedir=...</CODE>.
<LI>

Fixed problem with <CODE>UNSIGNED BIGINT</CODE> on AIX (again).
<LI>

Fixed bug in pthread_mutex_trylock() on HPUX 11.0.
<LI>

Multithreaded stress tests for InnoDB.
</UL>



<H3><A NAME="News-3.23.52" HREF="manual_toc.html#News-3.23.52">D.4.6  Changes in release 3.23.52 (14 Aug 2002)</A></H3>

<UL>
<LI>

Wrap <CODE>BEGIN</CODE>/<CODE>COMMIT</CODE> around transaction in the binary log.
This makes replication honour transactions.
<LI>

Fixed security bug when having an empty database name in the <CODE>user.db</CODE>
table.
<LI>

Changed initialisation of <CODE>RND()</CODE> to make it less predicatable.
<LI>

Fixed problem with <CODE>GROUP BY</CODE> on result with expression that created a
<CODE>BLOB</CODE> field.
<LI>

Fixed problem with <CODE>GROUP BY</CODE> on columns that have <CODE>NULL</CODE> values.
To solve this we now create an <CODE>MyISAM</CODE> temporary table when doing a
<CODE>GROUP BY</CODE> on a possible <CODE>NULL</CODE> item.
From MySQL 4.0.5 we can use in memory <CODE>HEAP</CODE> tables for this case.
<LI>

Fixed problem with privilege tables when downgrading from 4.0.2 to 3.23.
<LI>

Fixed thread bug in <CODE>SLAVE START</CODE>, <CODE>SLAVE STOP</CODE> and automatic repair
of MyISAM tables that could cause table cache to be corrupted.
<LI>

Fixed possible thread related key-cache-corruption problem with
<CODE>OPTIMIZE TABLE</CODE> and <CODE>REPAIR TABLE</CODE>.
<LI>

Added name of 'administrator command' logs.
<LI>

Fixed bug with creating an auto-increment value on second part of a
<CODE>UNIQUE()</CODE> key where first part could contain NULL values.
<LI>

Don't write slave-timeout reconnects to the error log.
<LI>

Fixed bug with slave net read timeouting
<LI>

Fixed a core-dump bug with <CODE>MERGE</CODE> tables and <CODE>MAX()</CODE> function.
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> with <CODE>BDB</CODE> tables.
<LI>

Fixed bug when logging <CODE>LOAD DATA INFILE</CODE> to binary log with no 
active database.
<LI>

Fixed a bug in range optimiser (causing crashes).
<LI>

Fixed possible problem in replication when doing <CODE>DROP DATABASE</CODE> on a
database with <CODE>InnoDB</CODE> tables.
<LI>

Fixed that <CODE>mysql_info()</CODE> returns 0 for 'Duplicates' when using
<CODE>INSERT DELAYED IGNORE</CODE>.
<LI>

Added <CODE>-DHAVE_BROKEN_REALPATH</CODE> to the Mac OS X (darwin) compile
options in <TT>`configure.in'</TT> to fix a failure under high load.
</UL>



<H3><A NAME="News-3.23.51" HREF="manual_toc.html#News-3.23.51">D.4.7  Changes in release 3.23.51 (31 May 2002)</A></H3>


<UL>
<LI>

Fix bug with closing tags missing slash for <CODE>mysqldump</CODE> XML output.
<LI>

Remove end space from <CODE>ENUM</CODE> values. (This fixed a problem with
<CODE>SHOW CREATE TABLE</CODE>.)
<LI>

Fixed bug in <CODE>CONCAT_WS()</CODE> that cut the result.
<LI>

Changed name of server variables <CODE>Com_show_master_stat</CODE> to
<CODE>Com_show_master_status</CODE> and <CODE>Com_show_slave_stat</CODE> to
<CODE>Com_show_slave_status</CODE>.
<LI>

Changed handling of <CODE>gethostbyname()</CODE> to make the client library
thread-safe even if <CODE>gethostbyname_r</CODE> doesn't exist.
<LI>

Fixed core-dump problem when giving a wrong password string to <CODE>GRANT</CODE>.
<LI>

Fixed bug in <CODE>DROP DATABASE</CODE> with symlinked directory.
<LI>

Fixed optimisation problem with <CODE>DATETIME</CODE> and value outside
<CODE>DATETIME</CODE> range.
<LI>

Removed Sleepycat's <CODE>BDB</CODE> doc files from the source tree, as they're not
needed (MySQL covers <CODE>BDB</CODE> in its own documentation).
<LI>

Fixed MIT-pthreads to compile with <CODE>glibc</CODE> 2.2 (needed for
<CODE>make dist</CODE>).
<LI>

Fixed the <CODE>FLOAT(X+1,X)</CODE> is not converted to <CODE>FLOAT(X+2,X)</CODE>.
(This also affected <CODE>DECIMAL</CODE>, <CODE>DOUBLE</CODE> and <CODE>REAL</CODE> types)
<LI>

Fixed the result from <CODE>IF()</CODE> is case in-sensitive if the second and
third arguments are case sensitive.
<LI>

Fixed core dump problem on OSF/1 in <CODE>gethostbyname_r</CODE>.
<LI>

Fixed that underflowed decimal fields are not zero filled.
<LI>

If we get an overflow when inserting <CODE>'+11111'</CODE> for
<CODE>DECIMAL(5,0) UNSIGNED</CODE> columns, we will just drop the sign.
<LI>

Fixed optimisation bug with <CODE>ISNULL(expression_which_cannot_be_null)</CODE> and
<CODE>ISNULL(constant_expression)</CODE>.
<LI>

Fixed host lookup bug in the <CODE>glibc</CODE> library that we used with the 3.23.50
Linux-x86 binaries.
</UL>



<H3><A NAME="News-3.23.50" HREF="manual_toc.html#News-3.23.50">D.4.8  Changes in release 3.23.50 (21 Apr 2002)</A></H3>


<UL>
<LI>

Fixed buffer overflow problem if someone specified a too long datadir
parameter to mysqld
<LI>

Add missing <CODE>&#60;row&#62;</CODE> tags for <CODE>mysqldump</CODE> XML output.
<LI>

Fixed problem with <CODE>crash-me</CODE> and <CODE>gcc</CODE> 3.0.4.
<LI>

Fixed that <CODE>@@unknown_variable</CODE> doesn't hang server.
<LI>

Added <CODE>@@VERSION</CODE> as a synonym for <CODE>VERSION()</CODE>.
<LI>

<CODE>SHOW VARIABLES LIKE 'xxx'</CODE> is now case-insensitive.
<LI>

Fixed timeout for <CODE>GET_LOCK()</CODE> on HP-UX with DCE threads.
<LI>

Fixed memory allocation bug in the glibc library used to build Linux
binaries, which caused mysqld to die in 'free()'.
<LI>

Fixed <CODE>SIGINT</CODE> and <CODE>SIGQUIT</CODE> problems in <CODE>mysql</CODE>.
<LI>

Fixed bug in character table converts when used with big ( &#62; 64K) strings.
<LI>

<CODE>InnoDB</CODE> now retains foreign key constraints through <CODE>ALTER TABLE</CODE>
and <CODE>CREATE/DROP INDEX</CODE>.
<LI>

<CODE>InnoDB</CODE> now allows foreign key constraints to be added through the
<CODE>ALTER TABLE</CODE> syntax.
<LI>

<CODE>InnoDB</CODE> tables can now be set to automatically grow in size (autoextend).
<LI>

Our Linux RPMS and binaries are now compiled with <CODE>gcc</CODE> 3.0.4, which
should make them a bit faster.
<LI>

Fixed some buffer overflow problems when reading startup parameters.
<LI>

Because of problems on shutdown we have now disabled named pipes on
windows by default.  One can enable named pipes by starting mysqld with
<CODE>--enable-named-pipe</CODE>.
<LI>

Fixed bug when using <CODE>WHERE key_column = 'J' or key_column='j'</CODE>.
<LI>

Fixed core-dump bug when using <CODE>--log-bin</CODE> with <CODE>LOAD DATA
INFILE</CODE> without an active database.
<LI>

Fixed bug in <CODE>RENAME TABLE</CODE> when used with
<CODE>lower_case_table_names=1</CODE> (default on Windows).
<LI>

Fixed unlikely core-dump bug when using <CODE>DROP TABLE</CODE> on a table
that was in use by a thread that also used queries on only temporary tables.
<LI>

Fixed problem with <CODE>SHOW CREATE TABLE</CODE> and <CODE>PRIMARY KEY</CODE> when using
32 indexes.
<LI>

Fixed that one can use <CODE>SET PASSWORD</CODE> for the anonymous user.
<LI>

Fixed core dump bug when reading client groups from option files using
<CODE>mysql_options()</CODE>.
<LI>

Memory leak (16 bytes per every <STRONG>corrupted</STRONG> table) closed.
<LI>

Fixed binary builds to use <CODE>--enable-local-infile</CODE>.
<LI>

Update source to work with new version of <CODE>bison</CODE>.
<LI>

Updated shell scripts to now agree with new POSIX standard.
<LI>

Fixed bug where <CODE>DATE_FORMAT()</CODE> returned empty string when used
with <CODE>GROUP BY</CODE>.
</UL>



<H3><A NAME="News-3.23.49" HREF="manual_toc.html#News-3.23.49">D.4.9  Changes in release 3.23.49</A></H3>


<UL>
<LI>

Don't give warning for a statement that is only a comment; this is needed for
<CODE>mysqldump --disable-keys</CODE> to work.
<LI>

Fixed unlikely caching bug when doing a join without keys. In this case
the last used field for a table always returned <CODE>NULL</CODE>.
<LI>

Added options to make <CODE>LOAD DATA LOCAL INFILE</CODE> more secure.
<LI>

MySQL binary release 3.23.48 for Linux contained a new <CODE>glibc</CODE> library,
which has serious problems under high load and RedHat 7.2.  The 3.23.49 binary
release doesn't have this problem.
<LI>

Fixed shutdown problem on NT.
</UL>



<H3><A NAME="News-3.23.48" HREF="manual_toc.html#News-3.23.48">D.4.10  Changes in release 3.23.48 (07 Feb 2002)</A></H3>


<UL>
<LI>

Added <CODE>--xml</CODE> option to <CODE>mysqldump</CODE> for producing XML output.
<LI>

Changed to use <CODE>autoconf</CODE> 2.52 (from <CODE>autoconf</CODE> 2.13)
<LI>

Fixed bug in complicated join with <CODE>const</CODE> tables.
<LI>

Added internal safety checks for <CODE>InnoDB</CODE>.
<LI>

Some <CODE>InnoDB</CODE> variables were always shown in <CODE>SHOW VARIABLES</CODE> as
<CODE>OFF</CODE> on high-byte-first systems (like SPARC).
<LI>

Fixed problem with one thread using an <CODE>InnoDB</CODE> table and another
thread doing an <CODE>ALTER TABLE</CODE> on the same table. Before that,
<CODE>mysqld</CODE> could crash with an assertion failure in <TT>`row0row.c'</TT>,
line 474.
<LI>

Tuned the <CODE>InnoDB</CODE> SQL optimiser to favor index searches more often
over table scans.
<LI>

Fixed a performance problem with <CODE>InnoDB</CODE> tables when several large
<CODE>SELECT</CODE> queries are run concurrently on a multiprocessor Linux
computer.  Large CPU-bound <CODE>SELECT</CODE> queries will now also generally
run faster on all platforms.
<LI>

If MySQL binlogging is used, <CODE>InnoDB</CODE> now prints after crash recovery the
latest MySQL binlog name and the offset <CODE>InnoDB</CODE> was able to recover
to. This is useful, for example, when resynchronising a master and a
slave database in replication.
<LI>

Added better error messages to help in installation problems of <CODE>InnoDB</CODE>
tables.
<LI>

It is now possible to recover MySQL temporary tables that have become
orphaned inside the <CODE>InnoDB</CODE> tablespace.
<LI>

<CODE>InnoDB</CODE> now prevents a <CODE>FOREIGN KEY</CODE> declaration where the
signedness is not the same in the referencing and referenced integer columns.
<LI>

Calling <CODE>SHOW CREATE TABLE</CODE> or <CODE>SHOW TABLE STATUS</CODE> could cause
memory corruption and make <CODE>mysqld</CODE> crash.  Especially at risk was
<CODE>mysqldump</CODE>, because it frequently calls <CODE>SHOW CREATE TABLE</CODE>.
<LI>

If inserts to several tables containing an <CODE>AUTO_INCREMENT</CODE> column were
wrapped inside one <CODE>LOCK TABLES</CODE>, <CODE>InnoDB</CODE> asserted in
<TT>`lock0lock.c'</TT>.
<LI>

In 3.23.47 we allowed several <CODE>NULL</CODE> values in a <CODE>UNIQUE</CODE> secondary
index for an <CODE>InnoDB</CODE> table.  But <CODE>CHECK TABLE</CODE> was not relaxed: it
reports the table as corrupt.  <CODE>CHECK TABLE</CODE> no longer complains in
this situation.
<LI>

<CODE>SHOW GRANTS</CODE> now shows <CODE>REFERENCES</CODE> instead of <CODE>REFERENCE</CODE>.
</UL>



<H3><A NAME="News-3.23.47" HREF="manual_toc.html#News-3.23.47">D.4.11  Changes in release 3.23.47 (27 Dec 2001)</A></H3>


<UL>
<LI>

Fixed bug when using the following construct:
<CODE>SELECT ... WHERE key=@var_name OR key=@var_name2</CODE>
<LI>

Restrict <CODE>InnoDB</CODE> keys to 500 bytes.
<LI>

<CODE>InnoDB</CODE> now supports <CODE>NULL</CODE> in keys.
<LI>

Fixed shutdown problem on HP-UX. (Introduced in 3.23.46)
<LI>

Fixed core dump bug in replication when using <CODE>SELECT RELEASE_LOCK()</CODE>.
<LI>

Added new command: <CODE>DO expression,[expression]</CODE>
<LI>

Added <CODE>slave-skip-errors</CODE> option.
<LI>

Added statistics variables for all MySQL commands. (<CODE>SHOW STATUS</CODE> is
now much longer.)
<LI>

Fixed default values for <CODE>InnoDB</CODE> tables.
<LI>

Fixed that <CODE>GROUP BY expr DESC</CODE> works.
<LI>

Fixed bug when using <CODE>t1 LEFT JOIN t2 ON t2.key=constant</CODE>.
<LI>

<CODE>mysql_config</CODE> now also works with binary (relocated) distributions.
</UL>



<H3><A NAME="News-3.23.46" HREF="manual_toc.html#News-3.23.46">D.4.12  Changes in release 3.23.46 (29 Nov 2001)</A></H3>


<UL>
<LI>

Fixed problem with aliased temporary table replication.
<LI>

<CODE>InnoDB</CODE> and <CODE>BDB</CODE> tables will now use index when doing an
<CODE>ORDER BY</CODE> on the whole table.
<LI>

Fixed bug where one got an empty set instead of a DEADLOCK error when using
<CODE>BDB</CODE> tables.
<LI>

One can now kill <CODE>ANALYZE</CODE>, <CODE>REPAIR</CODE>, and <CODE>OPTIMIZE TABLE</CODE> when
the thread is waiting to get a lock on the table.
<LI>

Fixed race condition in <CODE>ANALYZE TABLE</CODE>.
<LI>

Fixed bug when joining with caching (unlikely to happen).
<LI>

Fixed race condition when using the binary log and <CODE>INSERT DELAYED</CODE>
which could cause the binary log to have rows that were not yet written
to <CODE>MyISAM</CODE> tables.
<LI>

Changed caching of binary log to make replication slightly faster.
<LI>

Fixed bug in replication on Mac OS X.
</UL>



<H3><A NAME="News-3.23.45" HREF="manual_toc.html#News-3.23.45">D.4.13  Changes in release 3.23.45 (22 Nov 2001)</A></H3>


<UL>
<LI>

<CODE>(UPDATE|DELETE) ...WHERE MATCH</CODE> bugfix.
<LI>

shutdown should now work on Darwin (Mac OS X).
<LI>

Fixed core dump when repairing corrupted packed <CODE>MyISAM</CODE> files.
<LI>

<CODE>--core-file</CODE> now works on Solaris.
<LI>

Fix a bug which could cause <CODE>InnoDB</CODE> to complain if it cannot find
free blocks from the buffer cache during recovery.
<LI>

Fixed bug in <CODE>InnoDB</CODE> insert buffer B-tree handling that could cause
crashes.
<LI>

Fixed bug in <CODE>InnoDB</CODE> lock timeout handling.
<LI>

Fixed core dump bug in <CODE>ALTER TABLE</CODE> on a <CODE>TEMPORARY</CODE> <CODE>InnoDB</CODE>
table.
<LI>

Fixed bug in <CODE>OPTIMIZE TABLE</CODE> that reset index cardinality if it
was up to date.
<LI>

Fixed problem with <CODE>t1 LEFT_JOIN t2 ... WHERE t2.date_column IS NULL</CODE> when
date_column was declared as <CODE>NOT NULL</CODE>.
<LI>

Fixed bug with <CODE>BDB</CODE> tables and keys on <CODE>BLOB</CODE> columns.
<LI>

Fixed bug in <CODE>MERGE</CODE> tables on OS with 32-bit file pointers.
<LI>

Fixed bug in <CODE>TIME_TO_SEC()</CODE> when using negative values.
</UL>



<H3><A NAME="News-3.23.44" HREF="manual_toc.html#News-3.23.44">D.4.14  Changes in release 3.23.44 (31 Oct 2001)</A></H3>


<UL>
<LI>

Fixed <CODE>Rows_examined</CODE> count in slow query log.
<LI>

Fixed bug when using a reference to an <CODE>AVG()</CODE> column in <CODE>HAVING</CODE>.
<LI>

Fixed that date functions that require correct dates, like
<CODE>DAYOFYEAR(column)</CODE>, will return <CODE>NULL</CODE> for <CODE>0000-00-00</CODE> dates.
<LI>

Fixed bug in const-propagation when comparing columns of different
types. (<CODE>SELECT * FROM date_col="2001-01-01" and date_col=time_col</CODE>)
<LI>

Fixed bug that caused error message <CODE>Can't write, because of unique
constraint</CODE> with some <CODE>GROUP BY</CODE> queries.
<LI>

Fixed problem with <CODE>sjis</CODE> character strings used within quoted table
names.
<LI>

Fixed core dump when using <CODE>CREATE ... FULLTEXT</CODE> keys with other
storage engines than <CODE>MyISAM</CODE>.
<LI>

Don't use <CODE>signal()</CODE> on Windows because this appears to not be
100% reliable.
<LI>

Fixed bug when doing <CODE>WHERE col_name=NULL</CODE> on an indexed column
that had <CODE>NULL</CODE> values.
<LI>

Fixed bug when doing <CODE>LEFT JOIN ...  ON (col_name = constant) WHERE col_name = constant</CODE>.
<LI>

When using replications, aborted queries that contained <CODE>%</CODE> could cause
a core dump.
<LI>

<CODE>TCP_NODELAY</CODE> was not used on some systems. (Speed problem.)
<LI>

Applied portability fixes for OS/2. (Patch by Yuri Dario.)
</UL>

<P>
The following changes are for <CODE>InnoDB</CODE> tables:

</P>

<UL>
<LI>

Add missing <CODE>InnoDB</CODE> variables to <CODE>SHOW VARIABLES</CODE>.
<LI>

Foreign keys checking is now done for <CODE>InnoDB</CODE> tables.
<LI>

<CODE>DROP DATABASE</CODE> now works also for <CODE>InnoDB</CODE> tables.
<LI>

<CODE>InnoDB</CODE> now supports datafiles and raw disk partitions bigger
than 4 GB on those operating systems that have big files.
<LI>

<CODE>InnoDB</CODE> calculates better table cardinality estimates for the
MySQL optimiser.
<LI>

Accent characters in the default character set <CODE>latin1</CODE> are ordered
according to the MySQL ordering.

Note: if you are using <CODE>latin1</CODE> and have inserted characters whose
code is greater than 127 into an indexed <CODE>CHAR</CODE> column, you should
run <CODE>CHECK TABLE</CODE> on your table when you upgrade to 3.23.44, and
drop and reimport the table if <CODE>CHECK TABLE</CODE> reports an error!
<LI>

A new <TT>`my.cnf'</TT> parameter, <CODE>innodb_thread_concurrency</CODE>, helps in
performance tuning in heavily concurrent environments.
<LI>

A new <TT>`my.cnf'</TT> parameter, <CODE>innodb_fast_shutdown</CODE>, speeds up
server shutdown.
<LI>

A new <TT>`my.cnf'</TT> parameter, <CODE>innodb_force_recovery</CODE>, helps to save
your data in case the disk image of the database becomes corrupt.
<LI>

<CODE>innodb_monitor</CODE> has been improved and a new
<CODE>innodb_table_monitor</CODE> added.
<LI>

Increased maximum key length from 500 to 7000 bytes.
<LI>

Fixed a bug in replication of <CODE>AUTO_INCREMENT</CODE> columns with
multiple-line inserts.
<LI>

Fixed a bug when the case of letters changes in an update of an indexed
secondary column.
<LI>

Fixed a hang when there are &#62; 24 datafiles.
<LI>

Fixed a crash when <CODE>MAX(col)</CODE> is selected from an empty table, and
<CODE>col</CODE> is not the first column in a multi-column index.
<LI>

Fixed a bug in purge which could cause crashes.
</UL>



<H3><A NAME="News-3.23.43" HREF="manual_toc.html#News-3.23.43">D.4.15  Changes in release 3.23.43 (04 Oct 2001)</A></H3>


<UL>
<LI>

Fixed a bug in <CODE>INSERT DELAYED</CODE> and <CODE>FLUSH TABLES</CODE> introduced
in 3.23.42.
<LI>

Fixed unlikely bug, which returned non-matching rows, in <CODE>SELECT</CODE> with
many tables and multi-column indexes and 'range' type.
<LI>

Fixed an unlikely core dump bug when doing <CODE>EXPLAIN SELECT</CODE> when using
many tables and <CODE>ORDER BY</CODE>.
<LI>

Fixed bug in <CODE>LOAD DATA FROM MASTER</CODE> when using table with
<CODE>CHECKSUM=1</CODE>.
<LI>

Added unique error message when one gets a DEADLOCK during a transaction with
<CODE>BDB</CODE> tables.
<LI>

Fixed problem with <CODE>BDB</CODE> tables and <CODE>UNIQUE</CODE> columns defined
as <CODE>NULL</CODE>.
<LI>

Fixed problem with <CODE>myisampack</CODE> when using pre-space filled <CODE>CHAR</CODE>
columns.
<LI>

Applied patch from Yuri Dario for OS/2.
<LI>

Fixed bug in <CODE>--safe-user-create</CODE>.
</UL>



<H3><A NAME="News-3.23.42" HREF="manual_toc.html#News-3.23.42">D.4.16  Changes in release 3.23.42 (08 Sep 2001)</A></H3>


<UL>
<LI>

Fixed problem when using <CODE>LOCK TABLES</CODE> and <CODE>BDB</CODE> tables.
<LI>

Fixed problem with <CODE>REPAIR TABLE</CODE> on <CODE>MyISAM</CODE> tables with row
lengths in the range from 65517 to 65520 bytes.
<LI>

Fixed rare hang when doing <CODE>mysqladmin shutdown</CODE> when there was
a lot of activity in other threads.
<LI>

Fixed problem with <CODE>INSERT DELAYED</CODE> where delay thread could be
hanging on <CODE>upgrading locks</CODE> with no apparent reason.
<LI>

Fixed problem with <CODE>myisampack</CODE> and <CODE>BLOB</CODE>.
<LI>

Fixed problem when one edited <TT>`.MRG'</TT> tables by hand.
(Patch from Benjamin Pflugmann).
<LI>

Enforce that all tables in a <CODE>MERGE</CODE> table come from the same
database.
<LI>

Fixed bug with <CODE>LOAD DATA INFILE</CODE> and transactional tables.
<LI>

Fix bug when using <CODE>INSERT DELAYED</CODE> with wrong column definition.
<LI>

Fixed core dump during <CODE>REPAIR</CODE> of some particularly broken tables.
<LI>

Fixed bug in <CODE>InnoDB</CODE> and <CODE>AUTO_INCREMENT</CODE> columns.
<LI>

Fixed bug in <CODE>InnoDB</CODE> and <CODE>RENAME TABLE</CODE> columns.
<LI>

Fixed critical bug in <CODE>InnoDB</CODE> and <CODE>BLOB</CODE> columns.  If you have
used <CODE>BLOB</CODE> columns larger than 8000 bytes in an <CODE>InnoDB</CODE>
table, it is necessary to dump the table with <CODE>mysqldump</CODE>, drop it and
restore it from the dump.
<LI>

Applied large patch for OS/2 from Yuri Dario.
<LI>

Fixed problem with <CODE>InnoDB</CODE> when one could get the error <CODE>Can't
execute the given command...</CODE> even when no transaction was active.
<LI>

Applied some minor fixes that concern Gemini.
<LI>

Use real arithmetic operations even in integer context if not
all arguments are integers. (Fixes uncommon bug in some integer
contexts).
<LI>

Don't force everything to lowercase on Windows. (To fix problem
with Windows and <CODE>ALTER TABLE</CODE>).  Now <CODE>--lower_case_names</CODE>
also works on Unix.
<LI>

Fixed that automatic rollback is done when thread end doesn't lock
other threads.
</UL>



<H3><A NAME="News-3.23.41" HREF="manual_toc.html#News-3.23.41">D.4.17  Changes in release 3.23.41 (11 Aug 2001)</A></H3>


<UL>
<LI>

Added <CODE>--sql-mode=option[,option[,option]]</CODE> option to <CODE>mysqld</CODE>.
See section <A HREF="manual.html#Command-line_options">4.1.1  <CODE>mysqld</CODE> Command-line Options</A>.
<LI>

Fixed possible problem with <CODE>shutdown</CODE> on Solaris where the
<TT>`.pid'</TT> file wasn't deleted.
<LI>

<CODE>InnoDB</CODE> now supports &#60; 4 GB rows. The former limit was 8000 bytes.
<LI>

The <CODE>doublewrite</CODE> file flush method is used in <CODE>InnoDB</CODE>.
It reduces the need for Unix <CODE>fsync()</CODE> calls to a fraction and
improves performance on most Unix flavors.
<LI>

You can now use the <CODE>InnoDB</CODE> Monitor to print a lot of <CODE>InnoDB</CODE> state
information, including locks, to the standard output.  This is useful in
performance tuning.
<LI>

Several bugs which could cause hangs in <CODE>InnoDB</CODE> have been fixed.
<LI>

Split <CODE>record_buffer</CODE> to <CODE>record_buffer</CODE> and
<CODE>record_rnd_buffer</CODE>.  To make things compatible to previous MySQL
versions, if <CODE>record_rnd_buffer</CODE> is not set, then it takes the
value of <CODE>record_buffer</CODE>.
<LI>

Fixed optimising bug in <CODE>ORDER BY</CODE> where some <CODE>ORDER BY</CODE> parts
where wrongly removed.
<LI>

Fixed overflow bug with <CODE>ALTER TABLE</CODE> and <CODE>MERGE</CODE> tables.
<LI>

Added prototypes for <CODE>my_thread_init()</CODE> and <CODE>my_thread_end()</CODE> to
<TT>`mysql_com.h'</TT>
<LI>

Added <CODE>--safe-user-create</CODE> option to <CODE>mysqld</CODE>.
<LI>

Fixed bug in <CODE>SELECT DISTINCT ... HAVING</CODE> that caused error message
<CODE>Can't find record in #...</CODE>
</UL>



<H3><A NAME="News-3.23.40" HREF="manual_toc.html#News-3.23.40">D.4.18  Changes in release 3.23.40</A></H3>


<UL>
<LI>

Fixed problem with <CODE>--low-priority-updates</CODE> and <CODE>INSERT</CODE> statements.
<LI>

Fixed bug in slave thread when under some rare circumstances it could
get 22 bytes ahead on the offset in the master.
<LI>

Added <CODE>slave_net_timeout</CODE> for replication.
<LI>

Fixed problem with <CODE>UPDATE</CODE> and <CODE>BDB</CODE> tables.
<LI>

Fixed hard bug in <CODE>BDB</CODE> tables when using key parts.
<LI>

Fixed problem when using <CODE>GRANT FILE ON database.* ...</CODE>; previously
we added the <CODE>DROP</CODE> privilege for the database.
<LI>

Fixed <CODE>DELETE FROM tbl_name ... LIMIT 0</CODE> and
<CODE>UPDATE FROM tbl_name ... LIMIT 0</CODE>, which acted as though the
<CODE>LIMIT</CODE> clause was not present (they deleted or updated all selected
rows).
<LI>

<CODE>CHECK TABLE</CODE> now checks if an <CODE>AUTO_INCREMENT</CODE> column contains
the value 0.
<LI>

Sending a <CODE>SIGHUP</CODE> to <CODE>mysqld</CODE> will now only flush the logs,
not reset the replication.
<LI>

Fixed parser to allow floats of type <CODE>1.0e1</CODE> (no sign after <CODE>e</CODE>).
<LI>

Option <CODE>--force</CODE> to <CODE>myisamchk</CODE> now also updates states.
<LI>

Added option <CODE>--warnings</CODE> to <CODE>mysqld</CODE>. Now <CODE>mysqld</CODE>
prints the error <CODE>Aborted connection</CODE> only if this option is used.
<LI>

Fixed problem with <CODE>SHOW CREATE TABLE</CODE> when you didn't have a
<CODE>PRIMARY KEY</CODE>.
<LI>

Properly fixed the rename of <CODE>innodb_unix_file_flush_method</CODE> variable to
<CODE>innodb_flush_method</CODE>.
<LI>

Fixed bug when converting <CODE>BIGINT UNSIGNED</CODE> to <CODE>DOUBLE</CODE>. This caused
a problem when doing comparisons with <CODE>BIGINT</CODE> values outside of the
signed range.
<LI>

Fixed bug in <CODE>BDB</CODE> tables when querying empty tables.
<LI>

Fixed a bug when using <CODE>COUNT(DISTINCT)</CODE> with <CODE>LEFT JOIN</CODE> and
there weren't any matching rows.
<LI>

Removed all documentation referring to the <CODE>GEMINI</CODE> table
type. <CODE>GEMINI</CODE> is not released under an <CODE>Open Source</CODE> license.
</UL>



<H3><A NAME="News-3.23.39" HREF="manual_toc.html#News-3.23.39">D.4.19  Changes in release 3.23.39 (12 Jun 2001)</A></H3>


<UL>
<LI>

The <CODE>AUTO_INCREMENT</CODE> sequence wasn't reset when dropping
and adding an <CODE>AUTO_INCREMENT</CODE> column.
<LI>

<CODE>CREATE ... SELECT</CODE> now creates non-unique indexes delayed.
<LI>

Fixed problem where <CODE>LOCK TABLES tbl_name READ</CODE> followed by
<CODE>FLUSH TABLES</CODE> put an exclusive lock on the table.
<LI>

<CODE>REAL @variable</CODE> values were represented with only 2 digits when
converted to strings.
<LI>

Fixed problem that client ``hung'' when <CODE>LOAD TABLE FROM MASTER</CODE> failed.
<LI>

<CODE>myisamchk --fast --force</CODE> will no longer repair tables
that only had the open count wrong.
<LI>

Added functions to handle symbolic links to make life easier in 4.0.
<LI>

We are now using the <CODE>-lcma</CODE> thread library on HP-UX 10.20 so
that MySQL will be more stable on HP-UX.
<LI>

Fixed problem with <CODE>IF()</CODE> and number of decimals in the result.
<LI>

Fixed date-part extraction functions to work with dates where day
and/or month is 0.
<LI>

Extended argument length in option files from 256 to 512 chars.
<LI>

Fixed problem with shutdown when <CODE>INSERT DELAYED</CODE> was waiting for
a <CODE>LOCK TABLE</CODE>.
<LI>

Fixed core dump bug in <CODE>InnoDB</CODE> when tablespace was full.
<LI>

Fixed problem with <CODE>MERGE</CODE> tables and big tables (&#62; 4G) when using
<CODE>ORDER BY</CODE>.
</UL>



<H3><A NAME="News-3.23.38" HREF="manual_toc.html#News-3.23.38">D.4.20  Changes in release 3.23.38 (09 May 2001)</A></H3>


<UL>
<LI>

Fixed a bug when <CODE>SELECT</CODE> from <CODE>MERGE</CODE> table
sometimes results in incorrectly ordered rows.
<LI>

Fixed a bug in <CODE>REPLACE()</CODE> when using the <CODE>ujis</CODE> character set.
<LI>

Applied Sleepycat <CODE>BDB</CODE> patches 3.2.9.1 and 3.2.9.2.
<LI>

Added <CODE>--skip-stack-trace</CODE> option to <CODE>mysqld</CODE>.
<LI>

<CODE>CREATE TEMPORARY</CODE> now works with <CODE>InnoDB</CODE> tables.
<LI>

<CODE>InnoDB</CODE> now promotes sub keys to whole keys.
<LI>

Added option <CODE>CONCURRENT</CODE> to <CODE>LOAD DATA</CODE>.
<LI>

Better error message when slave <CODE>max_allowed_packet</CODE> is too low to
read a very long log event from the master.
<LI>

Fixed bug when too many rows where removed when using
<CODE>SELECT DISTINCT ... HAVING</CODE>.
<LI>

<CODE>SHOW CREATE TABLE</CODE> now returns <CODE>TEMPORARY</CODE> for temporary tables.
<LI>

Added <CODE>Rows_examined</CODE> to slow query log.
<LI>

Fixed problems with function returning empty string when used together with
a group function and a <CODE>WHERE</CODE> that didn't match any rows.
<LI>

New program <CODE>mysqlcheck</CODE>.
<LI>

Added database name to output for administrative commands like <CODE>CHECK</CODE>,
<CODE>REPAIR</CODE>, <CODE>OPTIMIZE</CODE>.
<LI>

Lots of portability fixes for <CODE>InnoDB</CODE>.
<LI>

Changed optimiser so that queries like
<CODE>SELECT * FROM tbl_name,tbl_name2 ... ORDER BY key_part1 LIMIT #</CODE>
will use index on <CODE>key_part1</CODE> instead of <CODE>filesort</CODE>.
<LI>

Fixed bug when doing
<CODE>LOCK TABLE to_table WRITE,...; INSERT INTO to_table... SELECT ...</CODE>
when <CODE>to_table</CODE> was empty.
<LI>

Fixed bug with <CODE>LOCK TABLE</CODE> and <CODE>BDB</CODE> tables.
</UL>



<H3><A NAME="News-3.23.37" HREF="manual_toc.html#News-3.23.37">D.4.21  Changes in release 3.23.37 (17 Apr 2001)</A></H3>


<UL>
<LI>

Fixed a bug when using <CODE>MATCH()</CODE> in <CODE>HAVING</CODE> clause.
<LI>

Fixed a bug when using <CODE>HEAP</CODE> tables with <CODE>LIKE</CODE>.
<LI>

Added <CODE>--mysql-version</CODE> option to <CODE>safe_mysqld</CODE>
<LI>

Changed <CODE>INNOBASE</CODE> to <CODE>InnoDB</CODE> (because the <CODE>INNOBASE</CODE>
name was already used). All <CODE>configure</CODE> options and <CODE>mysqld</CODE>
start options now use <CODE>innodb</CODE> instead of <CODE>innobase</CODE>. This
means that before upgrading to this version, you have to change any
configuration files where you have used <CODE>innobase</CODE> options!
<LI>

Fixed bug when using indexes on <CODE>CHAR(255) NULL</CODE> columns.
<LI>

Slave thread will now be started even if <CODE>master-host</CODE> is not set, as
long as <CODE>server-id</CODE> is set and valid <TT>`master.info'</TT> is present.
<LI>

Partial updates (terminated with kill) are now logged with a special error
code to the binary log. Slave will refuse to execute them if the error code
indicates the update was terminated abnormally, and will have to be recovered
with <CODE>SET SQL_SLAVE_SKIP_COUNTER=1; SLAVE START</CODE> after a manual sanity
check/correction of data integrity.
<LI>

Fixed bug that erroneously logged a drop of internal temporary table
on thread termination to the binary log -- this bug affected replication.
<LI>

Fixed a bug in <CODE>REGEXP</CODE> on 64-bit machines.
<LI>

<CODE>UPDATE</CODE> and <CODE>DELETE</CODE> with <CODE>WHERE unique_key_part IS NULL</CODE>
didn't update/delete all rows.
<LI>

Disabled <CODE>INSERT DELAYED</CODE> for tables that support transactions.
<LI>

Fixed bug when using date functions on <CODE>TEXT</CODE>/<CODE>BLOB</CODE> column
with wrong date format.
<LI>

UDFs now also work on Windows. (Patch by Ralph Mason.)
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> and <CODE>LOAD DATA INFILE</CODE> that disabled
key-sorting. These commands should now be faster in most cases.
<LI>

Fixed performance bug where reopened tables (tables that had been
waiting for <CODE>FLUSH</CODE> or <CODE>REPAIR</CODE>) would not use indexes for the
next query.
<LI>

Fixed problem with <CODE>ALTER TABLE</CODE> to <CODE>InnoDB</CODE> tables on FreeBSD.
<LI>

Added <CODE>mysqld</CODE> variables <CODE>myisam_max_sort_file_size</CODE> and
<CODE>myisam_max_extra_sort_file_size</CODE>.
<LI>

Initialise signals early to avoid problem with signals in <CODE>InnoDB</CODE>.
<LI>

Applied patch for the <CODE>tis620</CODE> character set to make comparisons
case-independent and to fix a bug in <CODE>LIKE</CODE> for this character set.
<STRONG>Note</STRONG>: All tables that uses the <CODE>tis620</CODE> character set must be
fixed with  <CODE>myisamchk -r</CODE> or <CODE>REPAIR TABLE</CODE> !
<LI>

Added <CODE>--skip-safemalloc</CODE> option to <CODE>mysqld</CODE>.
</UL>



<H3><A NAME="News-3.23.36" HREF="manual_toc.html#News-3.23.36">D.4.22  Changes in release 3.23.36 (27 Mar 2001)</A></H3>


<UL>
<LI>

Fixed a bug that allowed use of database names containing a <SAMP>`.'</SAMP>
character.  This fixes a serious security issue when <CODE>mysqld</CODE> is run
as root.
<LI>

Fixed bug when thread creation failed (could happen when doing a <STRONG>lot</STRONG>
of connections in a short time).
<LI>

Fixed some problems with <CODE>FLUSH TABLES</CODE> and <CODE>TEMPORARY</CODE> tables.
(Problem with freeing the key cache and error <CODE>Can't reopen table...</CODE>.)
<LI>

Fixed a problem in <CODE>InnoDB</CODE> with other character sets than <CODE>latin1</CODE>
and another problem when using many columns.
<LI>

Fixed bug that caused a core dump when using a very complex query involving
<CODE>DISTINCT</CODE> and summary functions.
<LI>

Added <CODE>SET TRANSACTION ISOLATION LEVEL ...</CODE>
<LI>

Added <CODE>SELECT ... FOR UPDATE</CODE>.
<LI>

Fixed bug where the number of affected rows was not returned when MySQL
was compiled without transaction support.
<LI>

Fixed a bug in <CODE>UPDATE</CODE> where keys weren't always used to find the
rows to be updated.
<LI>

Fixed a bug in <CODE>CONCAT_WS()</CODE> where it returned incorrect results.
<LI>

Changed <CODE>CREATE ... SELECT</CODE> and <CODE>INSERT ... SELECT</CODE> to not
allow concurrent inserts as this could make the binary log hard to repeat.
(Concurrent inserts are enabled if you are not using the binary or update log.)
<LI>

Changed some macros to be able to use fast mutex with <CODE>glibc</CODE> 2.2.
</UL>



<H3><A NAME="News-3.23.35" HREF="manual_toc.html#News-3.23.35">D.4.23  Changes in release 3.23.35 (15 Mar 2001)</A></H3>


<UL>
<LI>

Fixed newly introduced bug in <CODE>ORDER BY</CODE>.
<LI>

Fixed wrong define <CODE>CLIENT_TRANSACTIONS</CODE>.
<LI>

Fixed bug in <CODE>SHOW VARIABLES</CODE> when using <CODE>INNOBASE</CODE> tables.
<LI>

Setting and using user variables in <CODE>SELECT DISTINCT</CODE> didn't work.
<LI>

Tuned <CODE>SHOW ANALYZE</CODE> for small tables.
<LI>

Fixed handling of arguments in the benchmark script <CODE>run-all-tests</CODE>.
</UL>



<H3><A NAME="News-3.23.34a" HREF="manual_toc.html#News-3.23.34a">D.4.24  Changes in release 3.23.34a</A></H3>


<UL>
<LI>

Added extra files to the distribution to allow <CODE>INNOBASE</CODE> support
to be compiled.
</UL>



<H3><A NAME="News-3.23.34" HREF="manual_toc.html#News-3.23.34">D.4.25  Changes in release 3.23.34 (10 Mar 2001)</A></H3>


<UL>
<LI>

Added the <CODE>INNOBASE</CODE> storage engine and the <CODE>BDB</CODE> storage engine
to the MySQL source distribution.
<LI>

Updated the documentation about <CODE>GEMINI</CODE> tables.
<LI>

Fixed a bug in <CODE>INSERT DELAYED</CODE> that caused threads to hang when
inserting <CODE>NULL</CODE> into an <CODE>AUTO_INCREMENT</CODE> column.
<LI>

Fixed a bug in <CODE>CHECK TABLE</CODE> / <CODE>REPAIR TABLE</CODE> that could cause
a thread to hang.
<LI>

<CODE>REPLACE</CODE> will not replace a row that conflicts with an
<CODE>AUTO_INCREMENT</CODE> generated key.
<LI>

<CODE>mysqld</CODE> now only sets <CODE>CLIENT_TRANSACTIONS</CODE> in
<CODE>mysql-&#62;server_capabilities</CODE> if the server supports a
transaction-safe storage engine.
<LI>

Fixed <CODE>LOAD DATA INFILE</CODE> to allow numeric values to be read into
<CODE>ENUM</CODE> and <CODE>SET</CODE> columns.
<LI>

Improved error diagnostic for slave thread exit.
<LI>

Fixed bug in <CODE>ALTER TABLE ... ORDER BY</CODE>.
<LI>

Added <CODE>max_user_connections</CODE> variable to <CODE>mysqld</CODE>.
<LI>

Limit query length for replication by <CODE>max_allowed_packet</CODE>, not the
arbitrary limit of 4 MB.
<LI>

Allow space around <CODE>=</CODE> in argument to <CODE>--set-variable</CODE>.
<LI>

Fixed problem in automatic repair that could leave some threads in state
<CODE>Waiting for table</CODE>.
<LI>

<CODE>SHOW CREATE TABLE</CODE> now displays the <CODE>UNION()</CODE> for <CODE>MERGE</CODE>
tables.
<LI>

<CODE>ALTER TABLE</CODE> now remembers the old <CODE>UNION()</CODE> definition.
<LI>

Fixed bug when replicating timestamps.
<LI>

Fixed bug in bidirectional replication.
<LI>

Fixed bug in the <CODE>BDB</CODE> storage engine that occurred when using an index
on multi-part key where a key part may be <CODE>NULL</CODE>.
<LI>

Fixed <CODE>MAX()</CODE> optimisation on sub-key for <CODE>BDB</CODE> tables.
<LI>

Fixed problem where garbage results were returned when using <CODE>BDB</CODE>
tables and <CODE>BLOB</CODE> or <CODE>TEXT</CODE> fields when joining many tables.
<LI>

Fixed a problem with <CODE>BDB</CODE> tables and <CODE>TEXT</CODE> columns.
<LI>

Fixed bug when using a <CODE>BLOB</CODE> key where a const row wasn't found.
<LI>

Fixed that <CODE>mysqlbinlog</CODE> writes the timestamp value for each query.
This ensures that one gets same values for date functions like <CODE>NOW()</CODE>
when using <CODE>mysqlbinlog</CODE> to pipe the queries to another server.
<LI>

Allow <CODE>--skip-gemini</CODE>, <CODE>--skip-bdb</CODE>, and <CODE>--skip-innodb</CODE>
options to be specified when invoking <CODE>mysqld</CODE>, even if these storage
engines are not compiled in to <CODE>mysqld</CODE>.
<LI>

One can now do <CODE>GROUP BY ... DESC</CODE>.
<LI>

Fixed a deadlock in the <CODE>SET</CODE> code, when one ran <CODE>SET @foo=bar</CODE>,
where <CODE>bar</CODE> is a column reference, an error was not properly generated.
</UL>



<H3><A NAME="News-3.23.33" HREF="manual_toc.html#News-3.23.33">D.4.26  Changes in release 3.23.33 (09 Feb 2001)</A></H3>


<UL>
<LI>

Fixed DNS lookups not to use the same mutex as the hostname
cache.  This will enable known hosts to be quickly resolved even if a
DNS lookup takes a long time.
<LI>

Added <CODE>--character-sets-dir</CODE> option to <CODE>myisampack</CODE>.
<LI>

Removed warnings when running <CODE>REPAIR TABLE ... EXTENDED</CODE>.
<LI>

Fixed a bug that caused a core dump when using <CODE>GROUP BY</CODE> on an alias,
where the alias was the same as an existing column name.
<LI>

Added <CODE>SEQUENCE()</CODE> as an example UDF function.
<LI>

Changed <CODE>mysql_install_db</CODE> to use <CODE>BINARY</CODE> for <CODE>CHAR</CODE>
columns in the privilege tables.
<LI>

Changed <CODE>TRUNCATE tbl_name</CODE> to <CODE>TRUNCATE TABLE tbl_name</CODE>
to use the same syntax as Oracle.  Until 4.0 we will also allow
<CODE>TRUNCATE tbl_name</CODE> to not crash old code.
<LI>

Fixed ``no found rows'' bug in <CODE>MyISAM</CODE> tables when a <CODE>BLOB</CODE> was
first part of a multi-part key.
<LI>

Fixed bug where <CODE>CASE</CODE> didn't work with <CODE>GROUP BY</CODE>.
<LI>

Added <CODE>--sort-recover</CODE> option to <CODE>myisamchk</CODE>.
<LI>

<CODE>myisamchk -S</CODE> and <CODE>OPTIMIZE TABLE</CODE> now work on Windows.
<LI>

Fixed bug when using <CODE>DISTINCT</CODE> on results from functions that referred
to a group function, like:

<PRE>
SELECT a, DISTINCT SEC_TO_TIME(SUM(a))
FROM tbl_name GROUP BY a, b;
</PRE>

<LI>

Fixed buffer overrun in <CODE>libmysqlclient</CODE> library.
Fixed bug in handling <CODE>STOP</CODE> event after <CODE>ROTATE</CODE> event in
replication.
<LI>

Fixed another buffer overrun in <CODE>DROP DATABASE</CODE>.
<LI>

Added <CODE>Table_locks_immediate</CODE> and <CODE>Table_locks_waited</CODE> status
variables.
<LI>

Fixed bug in replication that broke slave server start with existing
<TT>`master.info'</TT>. This fixes a bug introduced in 3.23.32.
<LI>

Added <CODE>SET SQL_SLAVE_SKIP_COUNTER=n</CODE> command to recover from
replication glitches without a full database copy.
<LI>

Added <CODE>max_binlog_size</CODE> variable; the binary log will be rotated
automatically when the size crosses the limit.
<LI>

Added <CODE>Last_error</CODE>, <CODE>Last_errno</CODE>, and <CODE>Slave_skip_counter</CODE>
variables to <CODE>SHOW SLAVE STATUS</CODE>.
<LI>

Fixed bug in <CODE>MASTER_POS_WAIT()</CODE> function.
<LI>

Execute core dump handler on <CODE>SIGILL</CODE>, and <CODE>SIGBUS</CODE> in addition to
<CODE>SIGSEGV</CODE>.
<LI>

On x86 Linux, print the current query and thread (connection) id, if
available, in the core dump handler.
<LI>

Fixed several timing bugs in the test suite.
<LI>

Extended <CODE>mysqltest</CODE> to take care of the timing issues in the test
suite.
<LI>

<CODE>ALTER TABLE</CODE> can now be used to change the definition for a
<CODE>MERGE</CODE> table.
<LI>

Fixed creation of <CODE>MERGE</CODE> tables on Windows.
<LI>

Portability fixes for OpenBSD and OS/2.
<LI>

Added <CODE>--temp-pool</CODE> option to <CODE>mysqld</CODE>.  Using this option
will cause most temporary files created to use a small set of names,
rather than a unique name for each new file.  This is to work around a
problem in the Linux kernel dealing with creating a bunch of new files
with different names.  With the old behaviour, Linux seems to "leak"
memory, as it's being allocated to the directory entry cache instead of
the disk cache.
</UL>



<H3><A NAME="News-3.23.32" HREF="manual_toc.html#News-3.23.32">D.4.27  Changes in release 3.23.32 (22 Jan 2001: Production)</A></H3>


<UL>
<LI>

Changed code to get around compiler bug in Compaq C++ on OSF/1, that broke
<CODE>BACKUP</CODE>, <CODE>RESTORE</CODE>, <CODE>CHECK</CODE>, <CODE>REPAIR</CODE>, and
<CODE>ANALYZE TABLE</CODE>.
<LI>

Added option <CODE>FULL</CODE> to <CODE>SHOW COLUMNS</CODE>. Now we show the
privilege list for the columns only if this option is given.
<LI>

Fixed bug in <CODE>SHOW LOGS</CODE> when there weren't any <CODE>BDB</CODE> logs.
<LI>

Fixed a timing problem in replication that could delay sending an update
to the client until a new update was done.
<LI>

Don't convert field names when using <CODE>mysql_list_fields()</CODE>.  This is
to keep this code compatible with <CODE>SHOW FIELDS</CODE>.
<LI>

<CODE>MERGE</CODE> tables didn't work on Windows.
<LI>

Fixed problem with <CODE>SET PASSWORD=...</CODE> on Windows.
<LI>

Added missing <TT>`my_config.h'</TT> to RPM distribution.
<LI>

<CODE>TRIM("foo" from "foo")</CODE> didn't return an empty string.
<LI>

Added <CODE>--with-version-suffix</CODE> option to <CODE>configure</CODE>.
<LI>

Fixed core dump when client aborted connection without <CODE>mysql_close()</CODE>.
<LI>

Fixed a bug in <CODE>RESTORE TABLE</CODE> when trying to restore from a non-existent
directory.
<LI>

Fixed a bug which caused a core dump on the slave when replicating
<CODE>SET PASSWORD</CODE>.
<LI>

Added <CODE>MASTER_POS_WAIT()</CODE>.
</UL>



<H3><A NAME="News-3.23.31" HREF="manual_toc.html#News-3.23.31">D.4.28  Changes in release 3.23.31 (17 Jan 2001)</A></H3>


<UL>
<LI>

The test suite now tests all reachable <CODE>BDB</CODE> interface code.  During
testing we found and fixed many errors in the interface code.
<LI>

Using <CODE>HAVING</CODE> on an empty table could produce one result row when
it shouldn't.
<LI>

Fixed the MySQL RPM not to depend on Perl5 anymore.
<LI>

Fixed some problems with <CODE>HEAP</CODE> tables on Windows.
<LI>

<CODE>SHOW TABLE STATUS</CODE> didn't show correct average row length for tables
larger than 4G.
<LI>

<CODE>CHECK TABLE ... EXTENDED</CODE> didn't check row links for fixed size tables.
<LI>

Added option <CODE>MEDIUM</CODE> to <CODE>CHECK TABLE</CODE>.
<LI>

Fixed problem when using <CODE>DECIMAL()</CODE> keys on negative numbers.
<LI>

<CODE>HOUR()</CODE> (and some other <CODE>TIME</CODE> functions) on a <CODE>CHAR</CODE> column
always returned <CODE>NULL</CODE>.
<LI>

Fixed security bug in something (please upgrade if you are using an earlier
MySQL 3.23 version).
<LI>

Fixed buffer overflow bug when writing a certain error message.
<LI>

Added usage of <CODE>setrlimit()</CODE> on Linux to get
<CODE>-O --open-files-limit=#</CODE> to work on Linux.
<LI>

Added <CODE>bdb_version</CODE> variable to <CODE>mysqld</CODE>.
<LI>

Fixed bug when using expression of type:

<PRE>
SELECT ... FROM t1 LEFT JOIN t2 ON (t1.a=t2.a) WHERE t1.a=t2.a
</PRE>

In this case the test in the <CODE>WHERE</CODE> clause was wrongly optimised away.
<LI>

Fixed bug in <CODE>MyISAM</CODE> when deleting keys with possible <CODE>NULL</CODE>
values, but the first key-column was not a prefix-compressed text column.
<LI>

Fixed <CODE>mysql.server</CODE> to read the <CODE>[mysql.server]</CODE> option file group
rather than the <CODE>[mysql_server]</CODE> group.
<LI>

Fixed <CODE>safe_mysqld</CODE> and <CODE>mysql.server</CODE> to also read the
<CODE>server</CODE> option section.
<LI>

Added <CODE>Threads_created</CODE> status variable to <CODE>mysqld</CODE>.
</UL>



<H3><A NAME="News-3.23.30" HREF="manual_toc.html#News-3.23.30">D.4.29  Changes in release 3.23.30 (04 Jan 2001)</A></H3>


<UL>
<LI>

Added <CODE>SHOW OPEN TABLES</CODE> command.
<LI>

Fixed that <CODE>myisamdump</CODE> works against old <CODE>mysqld</CODE> servers.
<LI>

Fixed <CODE>myisamchk -k#</CODE> so that it works again.
<LI>

Fixed a problem with replication when the binary log file went over 2G
on 32-bit systems.
<LI>

<CODE>LOCK TABLES</CODE> will now automatically start a new transaction.
<LI>

Changed <CODE>BDB</CODE> tables to not use internal subtransactions and reuse
open files to get more speed.
<LI>

Added <CODE>--mysqld=#</CODE> option to <CODE>safe_mysqld</CODE>.
<LI>

Allow hex constants in the <CODE>--fields-*-by</CODE> and
<CODE>--lines-terminated-by</CODE> options to <CODE>mysqldump</CODE> and
<CODE>mysqlimport</CODE>. By Paul DuBois.
<LI>

Added <CODE>--safe-show-database</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added <CODE>have_bdb</CODE>, <CODE>have_gemini</CODE>, <CODE>have_innobase</CODE>,
<CODE>have_raid</CODE> and <CODE>have_openssl</CODE> to <CODE>SHOW VARIABLES</CODE> to make it
easy to test for supported extensions.
<LI>

Added <CODE>--open-files-limit</CODE> option to <CODE>mysqld</CODE>.
<LI>

Changed <CODE>--open-files</CODE> option to <CODE>--open-files-limit</CODE> in
<CODE>safe_mysqld</CODE>.
<LI>

Fixed a bug where some rows were not found with <CODE>HEAP</CODE> tables
that had many keys.
<LI>

Fixed that <CODE>--bdb-no-sync</CODE> works.
<LI>

Changed <CODE>--bdb-recover</CODE> to <CODE>--bdb-no-recover</CODE> as recover should
be on by default.
<LI>

Changed the default number of <CODE>BDB</CODE> locks to 10000.
<LI>

Fixed a bug from 3.23.29 when allocating the shared structure needed
for <CODE>BDB</CODE> tables.
<LI>

Changed <CODE>mysqld_multi.sh</CODE> to use configure variables. Patch by
Christopher McCrory.
<LI>

Added fixing of include files for Solaris 2.8.
<LI>

Fixed bug with <CODE>--skip-networking</CODE> on Debian Linux.
<LI>

Fixed problem that some temporary files where reported as having the
name <CODE>UNOPENED</CODE> in error messages.
<LI>

Fixed bug when running two simultaneous <CODE>SHOW LOGS</CODE> queries.
</UL>



<H3><A NAME="News-3.23.29" HREF="manual_toc.html#News-3.23.29">D.4.30  Changes in release 3.23.29 (16 Dec 2000)</A></H3>


<UL>
<LI>

Configure updates for Tru64, large file support, and better TCP wrapper
support. By Albert Chin-A-Young.
<LI>

Fixed bug in <CODE>&#60;=&#62;</CODE> operator.
<LI>

Fixed bug in <CODE>REPLACE</CODE> with <CODE>BDB</CODE> tables.
<LI>

<CODE>LPAD()</CODE> and <CODE>RPAD()</CODE> will shorten the result string if it's longer
than the length argument.
<LI>

Added <CODE>SHOW LOGS</CODE> command.
<LI>

Remove unused <CODE>BDB</CODE> logs on shutdown.
<LI>

When creating a table, put <CODE>PRIMARY</CODE> keys first, followed by
<CODE>UNIQUE</CODE> keys.
<LI>

Fixed a bug in <CODE>UPDATE</CODE> involving multi-part keys where one
specified all key parts both in the update and the <CODE>WHERE</CODE> part. In
this case MySQL could try to update a record that didn't match
the whole <CODE>WHERE</CODE> part.
<LI>

Changed drop table to first drop the tables and then the <TT>`.frm'</TT> file.
<LI>

Fixed a bug in the hostname cache which caused <CODE>mysqld</CODE> to report the
hostname as <CODE>''</CODE> in some error messages.
<LI>

Fixed a bug with <CODE>HEAP</CODE> type tables; the variable
<CODE>max_heap_table_size</CODE> wasn't used. Now either <CODE>MAX_ROWS</CODE> or
<CODE>max_heap_table_size</CODE> can be used to limit the size of a <CODE>HEAP</CODE>
type table.
<LI>

Changed the default server-id to 1 for masters and 2 for slaves
to make it easier to use the binary log.
<LI>

Renamed <CODE>bdb_lock_max</CODE> variable to <CODE>bdb_max_lock</CODE>.
<LI>

Added support for <CODE>AUTO_INCREMENT</CODE> on sub-fields for <CODE>BDB</CODE> tables.
<LI>

Added <CODE>ANALYZE</CODE> of <CODE>BDB</CODE> tables.
<LI>

In <CODE>BDB</CODE> tables, we now store the number of rows; this helps to optimise
queries when we need an approximation of the number of rows.
<LI>

If we get an error in a multi-row statement, we now only roll back the
last statement, not the entire transaction.
<LI>

If you do a <CODE>ROLLBACK</CODE> when you have updated a non-transactional table
you will get an error as a warning.
<LI>

Added <CODE>--bdb-shared-data</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added <CODE>Slave_open_temp_tables</CODE> status variable to <CODE>mysqld</CODE>
<LI>

Added <CODE>binlog_cache_size</CODE> and <CODE>max_binlog_cache_size</CODE> variables to
<CODE>mysqld</CODE>.
<LI>

<CODE>DROP TABLE</CODE>, <CODE>RENAME TABLE</CODE>, <CODE>CREATE INDEX</CODE> and
<CODE>DROP INDEX</CODE> are now transaction endpoints.
<LI>

If you do a <CODE>DROP DATABASE</CODE> on a symbolically linked database, both
the link and the original database is deleted.
<LI>

Fixed <CODE>DROP DATABASE</CODE> to work on OS/2.
<LI>

Fixed bug when doing a <CODE>SELECT DISTINCT ... table1 LEFT JOIN
table2 ...</CODE> when <CODE>table2</CODE> was empty.
<LI>

Added <CODE>--abort-slave-event-count</CODE> and
<CODE>--disconnect-slave-event-count</CODE> options to <CODE>mysqld</CODE> for
debugging and testing of replication.
<LI>

Fixed replication of temporary tables. Handles everything except
slave server restart.
<LI>

<CODE>SHOW KEYS</CODE> now shows whether key is <CODE>FULLTEXT</CODE>.
<LI>

New script <CODE>mysqld_multi</CODE>. See section <A HREF="manual.html#mysqld_multi">4.7.3  <CODE>mysqld_multi</CODE>, A Program for Managing Multiple MySQL Servers</A>.
<LI>

Added new script, <CODE>mysql-multi.server.sh</CODE>.  Thanks to
Tim Bunce <a HREF="mailto:Tim.Bunce@ig.co.uk">Tim.Bunce@ig.co.uk</a> for modifying <CODE>mysql.server</CODE> to
easily handle hosts running many <CODE>mysqld</CODE> processes.
<LI>

<CODE>safe_mysqld</CODE>, <CODE>mysql.server</CODE>, and <CODE>mysql_install_db</CODE> have
been modified to use <CODE>mysql_print_defaults</CODE> instead of various hacks
to read the <TT>`my.cnf'</TT> files.  In addition, the handling of various
paths has been made more consistent with how <CODE>mysqld</CODE> handles them
by default.
<LI>

Automatically remove Berkeley DB transaction logs that no longer are in
use.
<LI>

Fixed bug with several <CODE>FULLTEXT</CODE> indexes in one table.
<LI>

Added a warning if number of rows changes on <CODE>REPAIR</CODE>/<CODE>OPTIMIZE</CODE>.
<LI>

Applied patches for OS/2 by <CODE>Yuri Dario</CODE>.
<LI>

<CODE>FLUSH TABLES tbl_name</CODE> didn't always flush the index tree
to disk properly.
<LI>

<CODE>--bootstrap</CODE> is now run in a separate thread. This fixes a problem
that caused <CODE>mysql_install_db</CODE> to core dump on some Linux machines.
<LI>

Changed <CODE>mi_create()</CODE> to use less stack space.
<LI>

Fixed bug with optimiser trying to over-optimise <CODE>MATCH()</CODE> when used
with <CODE>UNIQUE</CODE> key.
<LI>

Changed <CODE>crash-me</CODE> and the MySQL benchmarks to also work
with FrontBase.
<LI>

Allow <CODE>RESTRICT</CODE> and <CODE>CASCADE</CODE> after <CODE>DROP TABLE</CODE> to make
porting easier.
<LI>

Reset status variable which could cause problem if one used <CODE>--slow-log</CODE>.
<LI>

Added <CODE>connect_timeout</CODE> variable to <CODE>mysql</CODE> and <CODE>mysqladmin</CODE>.
<LI>

Added <CODE>connect-timeout</CODE> as an alias for <CODE>timeout</CODE> for option files
read by <CODE>mysql_options()</CODE>.
</UL>



<H3><A NAME="News-3.23.28" HREF="manual_toc.html#News-3.23.28">D.4.31  Changes in release 3.23.28 (22 Nov 2000: Gamma)</A></H3>


<UL>
<LI>

Added new options <CODE>--pager[=...]</CODE>, <CODE>--no-pager</CODE>,
<CODE>--tee=...</CODE> and <CODE>--no-tee</CODE> to the <CODE>mysql</CODE> client.  The
new corresponding interactive commands are <CODE>pager</CODE>, <CODE>nopager</CODE>,
<CODE>tee</CODE> and <CODE>notee</CODE>. See section <A HREF="manual.html#mysql">4.8.2  <CODE>mysql</CODE>, The Command-line Tool</A>, <CODE>mysql --help</CODE>
and the interactive help for more information.
<LI>

Fixed crash when automatic repair of <CODE>MyISAM</CODE> table failed.
<LI>

Fixed a major performance bug in the table locking code when one
constantly had a lot of <CODE>SELECT</CODE>, <CODE>UPDATE</CODE> and <CODE>INSERT</CODE>
statements running. The symptom was that the <CODE>UPDATE</CODE> and
<CODE>INSERT</CODE> queries were locked for a long time while new <CODE>SELECT</CODE>
statements were executed before the updates.
<LI>

When reading <CODE>options_files</CODE> with <CODE>mysql_options()</CODE> the
<CODE>return-found-rows</CODE> option was ignored.
<LI>

One can now specify <CODE>interactive-timeout</CODE> in the option file that
is read by <CODE>mysql_options()</CODE>. This makes it possible to force
programs that run for a long time (like <CODE>mysqlhotcopy</CODE>) to use the
<CODE>interactive_timeout</CODE> time instead of the <CODE>wait_timeout</CODE> time.
<LI>

Added to the slow query log the time and the user name for each logged
query. If you are using <CODE>--log-long-format</CODE> then also queries that
do not use an index are logged, even if the query takes less than
<CODE>long_query_time</CODE> seconds.
<LI>

Fixed a problem in <CODE>LEFT JOIN</CODE> which caused all columns in a reference
table to be <CODE>NULL</CODE>.
<LI>

Fixed a problem when using <CODE>NATURAL JOIN</CODE> without keys.
<LI>

Fixed a bug when using a multi-part keys where the first part was of type
<CODE>TEXT</CODE> or <CODE>BLOB</CODE>.
<LI>

<CODE>DROP</CODE> of temporary tables wasn't stored in the update/binary log.
<LI>

Fixed a bug where <CODE>SELECT DISTINCT * ... LIMIT #</CODE> only returned one row.
<LI>

Fixed a bug in the assembler code in <CODE>strstr()</CODE> for SPARC and cleaned up
the <TT>`global.h'</TT> header file to avoid a problem with bad aliasing with
the compiler submitted with RedHat 7.0. (Reported by Trond Eivind Glomsrd)
<LI>

The <CODE>--skip-networking</CODE> option now works properly on NT.
<LI>

Fixed a long outstanding bug in the <CODE>ISAM</CODE> tables when a row with a length
of more than 65K was shortened by a single byte.
<LI>

Fixed a bug in <CODE>MyISAM</CODE> when running multiple updating processes on
the same table.
<LI>

Allow one to use <CODE>FLUSH TABLE tbl_name</CODE>.
<LI>

Added <CODE>--replicate-ignore-table</CODE>, <CODE>--replicate-do-table</CODE>,
<CODE>--replicate-wild-ignore-table</CODE>, and <CODE>--replicate-wild-do-table</CODE>
options to <CODE>mysqld</CODE>.
<LI>

Changed all log files to use our own <CODE>IO_CACHE</CODE> mechanism instead of
<CODE>FILE</CODE> to avoid OS problems when there are many files open.
<LI>

Added <CODE>--open-files</CODE> and <CODE>--timezone</CODE> options to <CODE>safe_mysqld</CODE>.
<LI>

Fixed a fatal bug in <CODE>CREATE TEMPORARY TABLE ... SELECT ...</CODE>.
<LI>

Fixed a problem with <CODE>CREATE TABLE ... SELECT NULL</CODE>.
<LI>

Added variables <CODE>large_file_support</CODE>,<CODE>net_read_timeout</CODE>,
<CODE>net_write_timeout</CODE> and <CODE>query_buffer_size</CODE> to <CODE>SHOW VARIABLES</CODE>.
<LI>

Added status variables <CODE>created_tmp_files</CODE> and <CODE>sort_merge_passes</CODE>
to <CODE>SHOW STATUS</CODE>.
<LI>

Fixed a bug where we didn't allow an index name after the
<CODE>FOREIGN KEY</CODE> definition.
<LI>

Added <CODE>TRUNCATE table_name</CODE> as a synonym for
<CODE>DELETE FROM table_name</CODE>.
<LI>

Fixed a bug in a <CODE>BDB</CODE> key compare function when comparing part keys.
<LI>

Added <CODE>bdb_lock_max</CODE> variable to <CODE>mysqld</CODE>.
<LI>

Added more tests to the benchmark suite.
<LI>

Fixed an overflow bug in the client code when using overly long database names.
<LI>

<CODE>mysql_connect()</CODE> now aborts on Linux if the server doesn't answer in
<CODE>timeout</CODE> seconds.
<LI>

<CODE>SLAVE START</CODE> did not work if you started with
<CODE>--skip-slave-start</CODE> and had not explicitly run <CODE>CHANGE MASTER TO</CODE>.
<LI>

Fixed the output of <CODE>SHOW MASTER STATUS</CODE> to be consistent with
<CODE>SHOW SLAVE STATUS</CODE>. (It now has no directory in the log name.)
<LI>

Added <CODE>PURGE MASTER LOGS TO</CODE>.
<LI>

Added <CODE>SHOW MASTER LOGS</CODE>.
<LI>

Added <CODE>--safemalloc-mem-limit</CODE> option to <CODE>mysqld</CODE> to simulate memory
shortage when compiled with the <CODE>--with-debug=full</CODE> option.
<LI>

Fixed several core dumps in out-of-memory conditions.
<LI>

<CODE>SHOW SLAVE STATUS</CODE> was using an uninitialised mutex if the slave had
not been started yet.
<LI>

Fixed bug in <CODE>ELT()</CODE> and <CODE>MAKE_SET()</CODE> when the query used
a temporary table.
<LI>

<CODE>CHANGE MASTER TO</CODE> without specifying <CODE>MASTER_LOG_POS</CODE> would
set it to 0 instead of 4 and hit the magic number in the master binlog.
<LI>

<CODE>ALTER TABLE ... ORDER BY ...</CODE> syntax added.  This will create the
new table with the rows in a specific order.
</UL>



<H3><A NAME="News-3.23.27" HREF="manual_toc.html#News-3.23.27">D.4.32  Changes in release 3.23.27 (24 Oct 2000)</A></H3>


<UL>
<LI>

Fixed a bug where the automatic repair of <CODE>MyISAM</CODE> tables sometimes failed
when the datafile was corrupt.
<LI>

Fixed a bug in <CODE>SHOW CREATE</CODE> when using <CODE>AUTO_INCREMENT</CODE> columns.
<LI>

Changed <CODE>BDB</CODE> tables to use new compare function in Berkeley DB 3.2.3.
<LI>

You can now use Unix sockets with MIT-pthreads.
<LI>

Added the <CODE>latin5</CODE> (turkish) character set.
<LI>

Small portability fixes.
</UL>



<H3><A NAME="News-3.23.26" HREF="manual_toc.html#News-3.23.26">D.4.33  Changes in release 3.23.26 (18 Oct 2000)</A></H3>


<UL>
<LI>

Renamed <CODE>FLUSH MASTER</CODE> and <CODE>FLUSH SLAVE</CODE> to <CODE>RESET MASTER</CODE>
and <CODE>RESET SLAVE</CODE>.
<LI>

Fixed <CODE>&#60;&#62;</CODE> to work properly with <CODE>NULL</CODE>.
<LI>

Fixed a problem with <CODE>SUBSTRING_INDEX()</CODE> and <CODE>REPLACE()</CODE>.
(Patch by Alexander Igonitchev)
<LI>

Fix <CODE>CREATE TEMPORARY TABLE IF NOT EXISTS</CODE> not to produce an error
if the table exists.
<LI>

If you don't create a <CODE>PRIMARY KEY</CODE> in a <CODE>BDB</CODE> table, a hidden
<CODE>PRIMARY KEY</CODE> will be created.
<LI>

Added read-only-key optimisation to <CODE>BDB</CODE> tables.
<LI>

<CODE>LEFT JOIN</CODE> in some cases preferred a full table scan when there was
no <CODE>WHERE</CODE> clause.
<LI>

When using <CODE>--log-slow-queries</CODE>, don't count the time waiting for a lock.
<LI>

Fixed bug in lock code on Windows which could cause the key cache
to report that the key file was crashed even if it was okay.
<LI>

Automatic repair of <CODE>MyISAM</CODE> tables if you start <CODE>mysqld</CODE> with
<CODE>--myisam-recover</CODE>.
<LI>

Removed the <CODE>TYPE=</CODE> keyword from <CODE>CHECK</CODE> and
<CODE>REPAIR</CODE>. Allow <CODE>CHECK</CODE> options to be combined. (You can still
use <CODE>TYPE=</CODE>, but this usage is deprecated.)
<LI>

Fixed mutex bug in the binary replication log -- long update queries could
be read only in part by the slave if it did it at the wrong time, which
was not fatal, but resulted in a performance-degrading reconnect and
a scary message in the error log.
<LI>

Changed the format of the binary log -- added magic number, server
version, binlog version. Added server id and query error code for each
query event.
<LI>

Replication thread from the slave now will kill all the stale threads
from the same server.
<LI>

Long replication user names were not being handled properly.
<LI>

Added <CODE>--replicate-rewrite-db</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added <CODE>--skip-slave-start</CODE> option to <CODE>mysqld</CODE>.
<LI>

Updates that generated an error code (such as <CODE>INSERT INTO foo(some_key)
values (1),(1)</CODE>) erroneously terminated the slave thread.
<LI>

Added optimisation of queries where <CODE>DISTINCT</CODE> is only used on columns
from some of the tables.
<LI>

Allow floating-point numbers where there is no sign after the exponent
(like <CODE>1e1</CODE>).
<LI>

<CODE>SHOW GRANTS</CODE> didn't always show all column grants.
<LI>

Added <CODE>--default-extra-file=#</CODE> option to all MySQL clients.
<LI>

Columns referenced in <CODE>INSERT</CODE> statements now are initialised properly.
<LI>

<CODE>UPDATE</CODE> didn't always work when used with a range on a timestamp that
was part of the key that was used to find rows.
<LI>

Fixed a bug in <CODE>FULLTEXT</CODE> index when inserting a <CODE>NULL</CODE> column.
<LI>

Changed to use <CODE>mkstemp()</CODE> instead of <CODE>tempnam()</CODE>. Based
on a patch from John Jones.
</UL>



<H3><A NAME="News-3.23.25" HREF="manual_toc.html#News-3.23.25">D.4.34  Changes in release 3.23.25 (29 Sep 2000)</A></H3>


<UL>
<LI>

Fixed that <CODE>databasename</CODE> works as second argument to <CODE>mysqlhotcopy</CODE>.
<LI>

The values for the <CODE>UMASK</CODE> and <CODE>UMASK_DIR</CODE> environment variables
now can be specified in octal by beginning the value with a zero.
<LI>

Added <CODE>RIGHT JOIN</CODE>. This makes <CODE>RIGHT</CODE> a reserved word.
<LI>

Added <CODE>@@IDENTITY</CODE> as a synonym for <CODE>LAST_INSERT_ID()</CODE>.
(This is for MSSQL compatibility.)
<LI>

Fixed a bug in <CODE>myisamchk</CODE> and <CODE>REPAIR</CODE> when using <CODE>FULLTEXT</CODE>
index.
<LI>

<CODE>LOAD DATA INFILE</CODE> now works with FIFOs.
(Patch by Toni L. Harbaugh-Blackford.)
<LI>

<CODE>FLUSH LOGS</CODE> broke replication if you specified a log name with an
explicit extension as the value of the <CODE>log-bin</CODE> option.
<LI>

Fixed a bug in <CODE>MyISAM</CODE> with packed multi-part keys.
<LI>

Fixed crash when using <CODE>CHECK TABLE</CODE> on Windows.
<LI>

Fixed a bug where <CODE>FULLTEXT</CODE> index always used the <CODE>koi8_ukr</CODE>
character set.
<LI>

Fixed privilege checking for <CODE>CHECK TABLE</CODE>.
<LI>

The <CODE>MyISAM</CODE> repair/reindex code didn't use the <CODE>--tmpdir</CODE>
option for its temporary files.
<LI>

Added <CODE>BACKUP TABLE</CODE> and <CODE>RESTORE TABLE</CODE>.
<LI>

Fixed core dump on <CODE>CHANGE MASTER TO</CODE> when the slave did not have
the master to start with.
<LI>

Fixed incorrect <CODE>Time</CODE> in the processlist for <CODE>Connect</CODE> of
the slave thread.
<LI>

The slave now logs when it connects to the master.
<LI>

Fixed a core dump bug when doing <CODE>FLUSH MASTER</CODE> if you didn't specify
a filename argument to <CODE>--log-bin</CODE>.
<LI>

Added missing <TT>`ha_berkeley.x'</TT> files to the MySQL Windows distribution.
<LI>

Fixed some mutex bugs in the log code that could cause thread blocks if new
log files couldn't be created.
<LI>

Added lock time and number of selected processed rows to slow query log.
<LI>

Added <CODE>--memlock</CODE> option to <CODE>mysqld</CODE> to lock <CODE>mysqld</CODE>
in memory on systems with the <CODE>mlockall()</CODE> call (like in Solaris).
<LI>

<CODE>HEAP</CODE> tables didn't use keys properly. (Bug from 3.23.23.)
<LI>

Added better support for <CODE>MERGE</CODE> tables (keys, mapping, creation,
documentation...). See section <A HREF="manual.html#MERGE">7.2  <CODE>MERGE</CODE> Tables</A>.
<LI>

Fixed bug in <CODE>mysqldump</CODE> from 3.23 which caused some <CODE>CHAR</CODE> columns
not to be quoted.
<LI>

Merged <CODE>analyze</CODE>, <CODE>check</CODE>, <CODE>optimize</CODE> and repair code.
<LI>

<CODE>OPTIMIZE TABLE</CODE> is now mapped to <CODE>REPAIR</CODE> with statistics and
sorting of the index tree.  This means that for the moment it only
works on <CODE>MyISAM</CODE> tables.
<LI>

Added a pre-alloced block to root_malloc to get fewer mallocs.
<LI>

Added a lot of new statistics variables.
<LI>

Fixed <CODE>ORDER BY</CODE> bug with <CODE>BDB</CODE> tables.
<LI>

Removed warning that <CODE>mysqld</CODE> couldn't remove the <TT>`.pid'</TT> file
under Windows.
<LI>

Changed <CODE>--log-isam</CODE> to log <CODE>MyISAM</CODE> tables instead of isam
tables.
<LI>

Fixed <CODE>CHECK TABLE</CODE> to work on Windows.
<LI>

Added file mutexes to make <CODE>pwrite()</CODE> safe on Windows.
</UL>



<H3><A NAME="News-3.23.24" HREF="manual_toc.html#News-3.23.24">D.4.35  Changes in release 3.23.24 (08 Sep 2000)</A></H3>


<UL>
<LI>

Added <CODE>created_tmp_disk_tables</CODE> variable to <CODE>mysqld</CODE>.
<LI>

To make it possible to reliably dump and restore tables with
<CODE>TIMESTAMP(X)</CODE> columns, MySQL now reports columns with <CODE>X</CODE>
other than 14 or 8 to be strings.
<LI>

Changed sort order for <CODE>latin1</CODE> as it was before MySQL Version 3.23.23.
Any table that was created or modified with 3.23.22 must be repaired if it has
<CODE>CHAR</CODE> columns that may contain characters with ASCII values greater than
128!
<LI>

Fixed small memory leak introduced from 3.23.22 when creating a
temporary table.
<LI>

Fixed problem with <CODE>BDB</CODE> tables and reading on a unique (not primary) key.
<LI>

Restored the <CODE>win1251</CODE> character set (it's now only marked deprecated).
</UL>



<H3><A NAME="News-3.23.23" HREF="manual_toc.html#News-3.23.23">D.4.36  Changes in release 3.23.23 (01 Sep 2000)</A></H3>


<UL>
<LI>

Changed sort order for 'German'; all tables created with 'German' sortorder
must be repaired with <CODE>REPAIR TABLE</CODE> or <CODE>myisamchk</CODE> before use!
<LI>

Added <CODE>--core-file</CODE> option to <CODE>mysqld</CODE> to get a core file on
Linux if <CODE>mysqld</CODE> dies on the <CODE>SIGSEGV</CODE> signal.
<LI>

MySQL client <CODE>mysql</CODE> now starts with option
<CODE>--no-named-commands</CODE> (<CODE>-g</CODE>) by default. This option can be
disabled with <CODE>--enable-named-commands</CODE> (<CODE>-G</CODE>). This may cause
incompatibility problems in some cases, for example, in SQL scripts that
use named commands without a semicolon, etc. !  Long format commands
still work from the first line.
<LI>

Fixed a problem when using many pending <CODE>DROP TABLE</CODE> statements at
the same time.
<LI>

Optimiser didn't use keys properly when using <CODE>LEFT JOIN</CODE> on an
empty table.
<LI>

Added shorter help text when invoking <CODE>mysqld</CODE> with incorrect options.
<LI>

Fixed non-fatal <CODE>free()</CODE> bug in <CODE>mysqlimport</CODE>.
<LI>

Fixed bug in <CODE>MyISAM</CODE> index handling of
<CODE>DECIMAL</CODE>/<CODE>NUMERIC</CODE> keys.
<LI>

Fixed a bug in concurrent insert in <CODE>MyISAM</CODE> tables.  In some contexts,
usage of <CODE>MIN(key_part)</CODE> or <CODE>MAX(key_part)</CODE> returned an empty set.
<LI>

Updated <CODE>mysqlhotcopy</CODE> to use the new <CODE>FLUSH TABLES table_list</CODE>
syntax. Only tables which are being backed up are flushed now.
<LI>

Changed behaviour of <CODE>--enable-thread-safe-client</CODE> so
that both non-threaded (<CODE>-lmysqlclient</CODE>) and threaded
(<CODE>-lmysqlclient_r</CODE>) libraries are built.  Users who linked
against a threaded <CODE>-lmysqlclient</CODE> will need to link against
<CODE>-lmysqlclient_r</CODE> now.
<LI>

Added atomic <CODE>RENAME TABLE</CODE> command.
<LI>

Don't count <CODE>NULL</CODE> values in <CODE>COUNT(DISTINCT ...)</CODE>.
<LI>

Changed <CODE>ALTER TABLE</CODE>, <CODE>LOAD DATA INFILE</CODE> on empty tables and
<CODE>INSERT ... SELECT ...</CODE> on empty tables to create non-unique indexes
in a separate batch with sorting. This will make the above calls much
faster when you have many indexes.
<LI>

<CODE>ALTER TABLE</CODE> now logs the first used insert_id correctly.
<LI>

Fixed crash when adding a default value to a <CODE>BLOB</CODE> column.
<LI>

Fixed a bug with <CODE>DATE_ADD/DATE_SUB</CODE> where it returned a datetime instead
of a date.
<LI>

Fixed a problem with the thread cache which made some threads show up as
<CODE>***DEAD***</CODE> in <CODE>SHOW PROCESSLIST</CODE>.
<LI>

Fixed a lock in our thr_rwlock code, which could make selects that run
at the same time as concurrent inserts crash. This only affects systems
that don't have the <CODE>pthread_rwlock_rdlock</CODE> code.
<LI>

When deleting rows with a non-unique key in a <CODE>HEAP</CODE> table, all rows
weren't always deleted.
<LI>

Fixed bug in range optimiser for <CODE>HEAP</CODE> tables for searches on a part
index.
<LI>

Fixed <CODE>SELECT</CODE> on part keys to work with <CODE>BDB</CODE> tables.
<LI>

Fixed <CODE>INSERT INTO bdb_table ... SELECT</CODE> to work with <CODE>BDB</CODE> tables.
<LI>

<CODE>CHECK TABLE</CODE> now updates key statistics for the table.
<LI>

<CODE>ANALYZE TABLE</CODE> will now only update tables that have been changed
since the last <CODE>ANALYZE</CODE>. Note that this is a new feature and tables
will not be marked to be analysed until they are updated in any way with
3.23.23 or newer.  For older tables, you have to do <CODE>CHECK TABLE</CODE>
to update the key distribution.
<LI>

Fixed some minor privilege problems with <CODE>CHECK</CODE>, <CODE>ANALYZE</CODE>,
<CODE>REPAIR</CODE> and <CODE>SHOW CREATE</CODE> commands.
<LI>

Added <CODE>CHANGE MASTER TO</CODE> statement.
<LI>

Added <CODE>FAST</CODE>, <CODE>QUICK</CODE> <CODE>EXTENDED</CODE> check types to
<CODE>CHECK TABLES</CODE>.
<LI>

Changed <CODE>myisamchk</CODE> so that <CODE>--fast</CODE> and
<CODE>--check-only-changed</CODE> are also honored with <CODE>--sort-index</CODE> and
<CODE>--analyze</CODE>.
<LI>

Fixed fatal bug in <CODE>LOAD TABLE FROM MASTER</CODE> that did not lock the
table during index re-build.
<LI>

<CODE>LOAD DATA INFILE</CODE> broke replication if the database was excluded
from replication.
<LI>

More variables in <CODE>SHOW SLAVE STATUS</CODE> and <CODE>SHOW MASTER STATUS</CODE>.
<LI>

<CODE>SLAVE STOP</CODE> now will not return until the slave thread actually exits.
<LI>

Full-text search via the <CODE>MATCH()</CODE> function and <CODE>FULLTEXT</CODE> index type
(for <CODE>MyISAM</CODE> files).  This makes <CODE>FULLTEXT</CODE> a reserved word.
</UL>



<H3><A NAME="News-3.23.22" HREF="manual_toc.html#News-3.23.22">D.4.37  Changes in release 3.23.22 (31 Jul 2000)</A></H3>


<UL>
<LI>

Fixed that <CODE>lex_hash.h</CODE> is created properly for each MySQL
distribution.
<LI>

Fixed that <CODE>MASTER</CODE> and <CODE>COLLECTION</CODE> are not reserved words.
<LI>

The log generated by <CODE>--slow-query-log</CODE> didn't contain the whole queries.
<LI>

Fixed that open transactions in <CODE>BDB</CODE> tables are rolled back if the
connection is closed unexpectedly.
<LI>

Added workaround for a bug in <CODE>gcc</CODE> 2.96 (intel) and <CODE>gcc</CODE> 2.9
(IA64) in <CODE>gen_lex_hash.c</CODE>.
<LI>

Fixed memory leak in the client library when using <CODE>host=</CODE> in the
<TT>`my.cnf'</TT> file.
<LI>

Optimised functions that manipulate the hours/minutes/seconds.
<LI>

Fixed bug when comparing the result of <CODE>DATE_ADD()</CODE>/<CODE>DATE_SUB()</CODE>
against a number.
<LI>

Changed the meaning of <CODE>-F, --fast</CODE> for <CODE>myisamchk</CODE>. Added
<CODE>-C, --check-only-changed</CODE> option to <CODE>myisamchk</CODE>.
<LI>

Added <CODE>ANALYZE tbl_name</CODE> to update key statistics for tables.
<LI>

Changed binary items <CODE>0x...</CODE> to be regarded as integers by default.
<LI>

Fix for SCO and <CODE>SHOW PROCESSLIST</CODE>.
<LI>

Added <CODE>auto-rehash</CODE> on reconnect for the <CODE>mysql</CODE> client.
<LI>

Fixed a newly introduced bug in <CODE>MyISAM</CODE>, where the index file couldn't
get bigger than 64M.
<LI>

Added <CODE>SHOW MASTER STATUS</CODE> and <CODE>SHOW SLAVE STATUS</CODE>.
</UL>



<H3><A NAME="News-3.23.21" HREF="manual_toc.html#News-3.23.21">D.4.38  Changes in release 3.23.21</A></H3>


<UL>
<LI>

Added <CODE>mysql_character_set_name()</CODE> function to the
MySQL C API.
<LI>

Made the update log ASCII 0 safe.
<LI>

Added the <CODE>mysql_config</CODE> script.
<LI>

Fixed problem when using <CODE>&#60;</CODE> or <CODE>&#62;</CODE> with a char column that was only
partly indexed.
<LI>

One would get a core dump if the log file was not readable by the MySQL user.
<LI>

Changed <CODE>mysqladmin</CODE> to use <CODE>CREATE DATABASE</CODE> and <CODE>DROP
DATABASE</CODE> statements instead of the old deprecated API calls.
<LI>

Fixed <CODE>chown</CODE> warning in <CODE>safe_mysqld</CODE>.
<LI>

Fixed a bug in <CODE>ORDER BY</CODE> that was introduced in 3.23.19.
<LI>

Only optimise the <CODE>DELETE FROM tbl_name</CODE> to do a drop+create of
the table if we are in <CODE>AUTOCOMMIT</CODE> mode (needed for <CODE>BDB</CODE> tables).
<LI>

Added extra checks to avoid index corruption when the <CODE>ISAM</CODE>/<CODE>MyISAM</CODE>
index files get full during an <CODE>INSERT</CODE>/<CODE>UPDATE</CODE>.
<LI>

<CODE>myisamchk</CODE> didn't correctly update row checksum when used with
<CODE>-ro</CODE> (this only gave a warning in subsequent runs).
<LI>

Fixed bug in <CODE>REPAIR TABLE</CODE> so that it works with tables without indexes.
<LI>

Fixed buffer overrun in <CODE>DROP DATABASE</CODE>.
<LI>

<CODE>LOAD TABLE FROM MASTER</CODE> is sufficiently bug-free to announce it as
a feature.
<LI>

<CODE>MATCH</CODE> and <CODE>AGAINST</CODE> are now reserved words.
</UL>



<H3><A NAME="News-3.23.20" HREF="manual_toc.html#News-3.23.20">D.4.39  Changes in release 3.23.20</A></H3>


<UL>
<LI>

Fixed bug in 3.23.19; <CODE>DELETE FROM tbl_name</CODE> removed the <TT>`.frm'</TT> file.
<LI>

Added <CODE>SHOW CREATE TABLE</CODE>.
</UL>



<H3><A NAME="News-3.23.19" HREF="manual_toc.html#News-3.23.19">D.4.40  Changes in release 3.23.19</A></H3>


<UL>
<LI>

Changed copyright for all files to GPL for the server code and utilities and
to LGPL for the client libraries.
<LI>

Fixed bug where all rows matching weren't updated on a <CODE>MyISAM</CODE> table
when doing update based on key on a table with many keys and some key changed
values.
<LI>

The Linux MySQL RPM's and binaries are now statically linked with
a linuxthread version that has faster mutex handling when used with
MySQL.
<LI>

<CODE>ORDER BY</CODE> can now use <CODE>REF</CODE> keys to find subsets of the rows
that need to be sorted.
<LI>

Changed name of <CODE>print_defaults</CODE> program to <CODE>my_print_defaults</CODE>
to avoid name confusion.
<LI>

Fixed <CODE>NULLIF()</CODE> to work according to ANSI SQL99.
<LI>

Added <CODE>net_read_timeout</CODE> and <CODE>net_write_timeout</CODE> as startup
parameters to <CODE>mysqld</CODE>.
<LI>

Fixed bug that destroyed index when doing <CODE>myisamchk --sort-records</CODE>
on a table with prefix compressed index.
<LI>

Added <CODE>pack_isam</CODE> and <CODE>myisampack</CODE> to the standard MySQL
distribution.
<LI>

Added the syntax <CODE>BEGIN WORK</CODE> (the same as <CODE>BEGIN</CODE>).
<LI>

Fixed core dump bug when using <CODE>ORDER BY</CODE> on a <CODE>CONV()</CODE> expression.
<LI>

Added <CODE>LOAD TABLE FROM MASTER</CODE>.
<LI>

Added <CODE>FLUSH MASTER</CODE> and <CODE>FLUSH SLAVE</CODE>.
<LI>

Fixed big/little endian problem in the replication.
</UL>



<H3><A NAME="News-3.23.18" HREF="manual_toc.html#News-3.23.18">D.4.41  Changes in release 3.23.18</A></H3>


<UL>
<LI>

Fixed a problem from 3.23.17 when choosing character set on the client side.
<LI>

Added <CODE>FLUSH TABLES WITH READ LOCK</CODE> to make a global lock suitable for
making a copy of MySQL datafiles.
<LI>

<CODE>CREATE TABLE ... SELECT ... PROCEDURE</CODE> now works.
<LI>

Internal temporary tables will now use compressed index when using
<CODE>GROUP BY</CODE> on <CODE>VARCHAR/CHAR</CODE> columns.
<LI>

Fixed a problem when locking the same table with both a <CODE>READ</CODE> and a
<CODE>WRITE</CODE> lock.
<LI>

Fixed problem with <CODE>myisamchk</CODE> and <CODE>RAID</CODE> tables.
</UL>



<H3><A NAME="News-3.23.17" HREF="manual_toc.html#News-3.23.17">D.4.42  Changes in release 3.23.17</A></H3>


<UL>
<LI>

Fixed a bug in <CODE>FIND_IN_SET()</CODE> when the first argument was <CODE>NULL</CODE>.
<LI>

Added table locks to Berkeley DB.
<LI>

Fixed a bug with <CODE>LEFT JOIN</CODE> and <CODE>ORDER BY</CODE> where the first
table had only one matching row.
<LI>

Added 4 sample <TT>`my.cnf'</TT> example files in the <TT>`support-files'</TT>
directory.
<LI>

Fixed <CODE>duplicated key</CODE> problem when doing big <CODE>GROUP BY</CODE> operations.
(This bug was probably introduced in 3.23.15.)
<LI>

Changed syntax for <CODE>INNER JOIN</CODE> to match ANSI SQL.
<LI>

Added <CODE>NATURAL JOIN</CODE> syntax.
<LI>

A lot of fixes in the <CODE>BDB</CODE> interface.
<LI>

Added handling of <CODE>--no-defaults</CODE> and <CODE>--defaults-file</CODE> to
<CODE>safe_mysqld.sh</CODE> and <CODE>mysql_install_db.sh</CODE>.
<LI>

Fixed bug in reading compressed tables with many threads.
<LI>

Fixed that <CODE>USE INDEX</CODE> works with <CODE>PRIMARY</CODE> keys.
<LI>

Added <CODE>BEGIN</CODE> statement to start a transaction in <CODE>AUTOCOMMIT</CODE> mode.
<LI>

Added support for symbolic links for Windows.
<LI>

Changed protocol to let client know if the server is in <CODE>AUTOCOMMIT</CODE> mode
and if there is a pending transaction.  If there is a pending transaction,
the client library will give an error before reconnecting to the server to
let the client know that the server did a rollback.
The protocol is still backward-compatible with old clients.
<LI>

<CODE>KILL</CODE> now works on a thread that is locked on a 'write' to a dead client.
<LI>

Fixed memory leak in the replication slave thread.
<LI>

Added new <CODE>log-slave-updates</CODE> option to <CODE>mysqld</CODE>, to allow
daisy-chaining the slaves.
<LI>

Fixed compile error on FreeBSD and other systems where <CODE>pthread_t</CODE>
is not the same as <CODE>int</CODE>.
<LI>

Fixed master shutdown aborting the slave thread.
<LI>

Fixed a race condition in <CODE>INSERT DELAYED</CODE> code when doing
<CODE>ALTER TABLE</CODE>.
<LI>

Added deadlock detection sanity checks to <CODE>INSERT DELAYED</CODE>.
</UL>



<H3><A NAME="News-3.23.16" HREF="manual_toc.html#News-3.23.16">D.4.43  Changes in release 3.23.16</A></H3>


<UL>
<LI>

Added <CODE>SLAVE START</CODE> and <CODE>SLAVE STOP</CODE> statements.
<LI>

Added <CODE>TYPE=QUICK</CODE> option to <CODE>CHECK</CODE> and to <CODE>REPAIR</CODE>.
<LI>

Fixed bug in <CODE>REPAIR TABLE</CODE> when the table was in use by other threads.
<LI>

Added a thread cache to make it possible to debug MySQL with
<CODE>gdb</CODE> when one does a lot of reconnects. This will also improve
systems where you can't use persistent connections.
<LI>

Lots of fixes in the Berkeley DB interface.
<LI>

<CODE>UPDATE IGNORE</CODE> will not abort if an update results in a
<CODE>DUPLICATE_KEY</CODE> error.
<LI>

Put <CODE>CREATE TEMPORARY TABLE</CODE> commands in the update log.
<LI>

Fixed bug in handling of masked IP numbers in the privilege tables.
<LI>

Fixed bug with <CODE>delay_key_write</CODE> tables and <CODE>CHECK TABLE</CODE>.
<LI>

Added <CODE>replicate-do-db</CODE> and <CODE>replicate-ignore-db</CODE> options to
<CODE>mysqld</CODE>, to restrict which databases get replicated.
<LI>

Added <CODE>SQL_LOG_BIN</CODE> option.
</UL>



<H3><A NAME="News-3.23.15" HREF="manual_toc.html#News-3.23.15">D.4.44  Changes in release 3.23.15 (May 2000: Beta)</A></H3>


<UL>
<LI>

To start <CODE>mysqld</CODE> as <CODE>root</CODE>, you must now use the <CODE>--user=root</CODE> option.
<LI>

Added interface to Berkeley DB. (This is not yet functional; play with it at
your own risk!)
<LI>

Replication between master and slaves.
<LI>

Fixed bug that other threads could steal a lock when a thread had
a lock on a table and did a <CODE>FLUSH TABLES</CODE> command.
<LI>

Added the <CODE>slow_launch_time</CODE> variable and the <CODE>Slow_launch_threads</CODE>
status variable to <CODE>mysqld</CODE>.  These can be examined with
<CODE>mysqladmin variables</CODE> and <CODE>mysqladmin extended-status</CODE>.
<LI>

Added functions <CODE>INET_NTOA()</CODE> and <CODE>INET_ATON()</CODE>.
<LI>

The default type of <CODE>IF()</CODE> now depends on the second and
third arguments and not only on the second argument.
<LI>

Fixed case when <CODE>myisamchk</CODE> could go into a loop when trying to
repair a crashed table.
<LI>

Don't write <CODE>INSERT DELAYED</CODE> to update log if <CODE>SQL_LOG_UPDATE=0</CODE>.
<LI>

Fixed problem with <CODE>REPLACE</CODE> on <CODE>HEAP</CODE> tables.
<LI>

Added possible character sets and time zone to <CODE>SHOW VARIABLES</CODE> output.
<LI>

Fixed bug in locking code that could result in locking problems with
concurrent inserts under high load.
<LI>

Fixed a problem with <CODE>DELETE</CODE> of many rows on a table with
compressed keys where MySQL scanned the index to find the rows.
<LI>

Fixed problem with <CODE>CHECK</CODE> on table with deleted keyblocks.
<LI>

Fixed a bug in reconnect (at the client side) where it didn't free memory
properly in some contexts.
<LI>

Fixed problems in update log when using <CODE>LAST_INSERT_ID()</CODE> to update
a table with an <CODE>AUTO_INCREMENT</CODE> key.
<LI>

Added <CODE>NULLIF()</CODE> function.
<LI>

Fixed bug when using <CODE>LOAD DATA INFILE</CODE> on a table with
<CODE>BLOB/TEXT</CODE> columns.
<LI>

Optimised <CODE>MyISAM</CODE> to be faster when inserting keys in sorted order.
<LI>

<CODE>EXPLAIN SELECT ...</CODE> now also prints out whether MySQL needs to
create a temporary table or use file sorting when resolving the <CODE>SELECT</CODE>.
<LI>

Added optimisation to skip <CODE>ORDER BY</CODE> parts where the part is a
constant expression in the <CODE>WHERE</CODE> part.  Indexes can now be used
even if the <CODE>ORDER BY</CODE> doesn't match the index exactly, as long as
all the unused index parts and all the extra <CODE>ORDER BY</CODE>
columns are constants in the <CODE>WHERE</CODE> clause.  See section <A HREF="manual.html#MySQL_indexes">5.4.3  How MySQL Uses Indexes</A>.
<LI>

<CODE>UPDATE</CODE> and <CODE>DELETE</CODE> on a whole unique key in the <CODE>WHERE</CODE> part
are now faster than before.
<LI>

Changed <CODE>RAID_CHUNKSIZE</CODE> to be in 1024-byte increments.
<LI>

Fixed core dump in <CODE>LOAD_FILE(NULL)</CODE>.
</UL>



<H3><A NAME="News-3.23.14" HREF="manual_toc.html#News-3.23.14">D.4.45  Changes in release 3.23.14</A></H3>


<UL>
<LI>

Added <CODE>mysql_real_escape_string()</CODE> function to the MySQL C API.
<LI>

Fixed a bug in <CODE>CONCAT()</CODE> where one of the arguments was a function
that returned a modified argument.
<LI>

Fixed a critical bug in <CODE>myisamchk</CODE>, where it updated the header in
the index file when one only checked the table.  This confused the
<CODE>mysqld</CODE> daemon if it updated the same table at the same time. Now
the status in the index file is only updated if one uses
<CODE>--update-state</CODE>.  With older <CODE>myisamchk</CODE> versions you should
use <CODE>--read-only</CODE> when only checking tables, if there is the
slightest chance that the <CODE>mysqld</CODE> server is working on the table at the
same time!
<LI>

Fixed that <CODE>DROP TABLE</CODE> is logged in the update log.
<LI>

Fixed problem when searching on <CODE>DECIMAL()</CODE> key field
where the column data contained leading zeros.
<LI>

Fix bug in <CODE>myisamchk</CODE> when the <CODE>AUTO_INCREMENT</CODE> column isn't
the first key.
<LI>

Allow <CODE>DATETIME</CODE> in ISO8601 format: 2000-03-12T12:00:00
<LI>

Dynamic character sets.  A <CODE>mysqld</CODE> binary can now handle many different
character sets (you can choose which when starting <CODE>mysqld</CODE>).
<LI>

Added command <CODE>REPAIR TABLE</CODE>.
<LI>

Added <CODE>mysql_thread_safe()</CODE> function to the MySQL C API.
<LI>

Added the <CODE>UMASK_DIR</CODE> environment variable.
<LI>

Added <CODE>CONNECTION_ID()</CODE> function to return the client connection thread
ID.
<LI>

When using <CODE>=</CODE> on <CODE>BLOB</CODE> or <CODE>VARCHAR BINARY</CODE> keys, where
only a part of the column was indexed, the whole column of the result
row wasn't compared.
<LI>

Fix for <CODE>sjis</CODE> character set and <CODE>ORDER BY</CODE>.
<LI>

When running in ANSI mode, don't allow columns to be used that aren't in
the <CODE>GROUP BY</CODE> part.
</UL>



<H3><A NAME="News-3.23.13" HREF="manual_toc.html#News-3.23.13">D.4.46  Changes in release 3.23.13</A></H3>


<UL>
<LI>

Fixed problem when doing locks on the same table more than 2 times in
the same <CODE>LOCK TABLE</CODE> command; this fixed the problem one got when running
the test-ATIS test with <CODE>--fast</CODE> or <CODE>--check-only-changed</CODE>.
<LI>

Added <CODE>SQL_BUFFER_RESULT</CODE> option to <CODE>SELECT</CODE>.
<LI>

Removed end space from double/float numbers in results from temporary
tables.
<LI>

Added <CODE>CHECK TABLE</CODE> command.
<LI>

Added changes for <CODE>MyISAM</CODE> in 3.23.12 that didn't get into the source
distribution because of CVS problems.
<LI>

Fixed bug so that <CODE>mysqladmin shutdown</CODE> will wait for the local server
to close down.
<LI>

Fixed a possible endless loop when calculating timestamp.
<LI>

Added <CODE>print_defaults</CODE> program to the <TT>`.rpm'</TT> files. Removed
<CODE>mysqlbug</CODE> from the client <TT>`.rpm'</TT> file.
</UL>



<H3><A NAME="News-3.23.12" HREF="manual_toc.html#News-3.23.12">D.4.47  Changes in release 3.23.12 (07 Mar 2000)</A></H3>


<UL>
<LI>

Fixed bug in <CODE>MyISAM</CODE> involving <CODE>REPLACE ... SELECT ...</CODE> which could
give a corrupted table.
<LI>

Fixed bug in <CODE>myisamchk</CODE> where it incorrectly reset the
<CODE>AUTO_INCREMENT</CODE> value.
<LI>

LOTS of patches for Linux Alpha. MySQL now appears to be relatively
stable on Alpha.
<LI>

Changed <CODE>DISTINCT</CODE> on <CODE>HEAP</CODE> temporary tables to use hashed
keys to quickly find duplicated rows. This mostly concerns queries of
type <CODE>SELECT DISTINCT ... GROUP BY ...</CODE>.  This fixes a problem where
not all duplicates were removed in queries of the above type.  In
addition, the new code is MUCH faster.
<LI>

Added patches to make MySQL compile on Mac OS X.
<LI>

Added <CODE>IF NOT EXISTS</CODE> clause to <CODE>CREATE DATABASE</CODE>.
<LI>

Added <CODE>--all-databases</CODE> and <CODE>--databases</CODE> options to <CODE>mysqldump</CODE>
to allow dumping of many databases at the same time.
<LI>

Fixed bug in compressed <CODE>DECIMAL()</CODE> index in <CODE>MyISAM</CODE> tables.
<LI>

Fixed bug when storing 0 into a timestamp.
<LI>

When doing <CODE>mysqladmin shutdown</CODE> on a local connection, <CODE>mysqladmin</CODE>
now waits until the PID file is gone before terminating.
<LI>

Fixed core dump with some <CODE>COUNT(DISTINCT ...)</CODE> queries.
<LI>

Fixed that <CODE>myisamchk</CODE> works properly with RAID tables.
<LI>

Fixed problem with <CODE>LEFT JOIN</CODE> and <CODE>key_field IS NULL</CODE>.
<LI>

Fixed bug in <CODE>net_clear()</CODE> which could give the error <CODE>Aborted
connection</CODE> in the MySQL clients.
<LI>

Added options <CODE>USE INDEX (key_list)</CODE> and <CODE>IGNORE INDEX (key_list)</CODE> as
parameters in <CODE>SELECT</CODE>.
<LI>

<CODE>DELETE</CODE> and <CODE>RENAME</CODE> should now work on <CODE>RAID</CODE> tables.
</UL>



<H3><A NAME="News-3.23.11" HREF="manual_toc.html#News-3.23.11">D.4.48  Changes in release 3.23.11</A></H3>


<UL>
<LI>

Allow the <CODE>ALTER TABLE tbl_name ADD (field_list)</CODE> syntax.
<LI>

Fixed problem with optimiser that could sometimes use incorrect keys.
<LI>

Fixed that <CODE>GRANT/REVOKE ALL PRIVILEGES</CODE> doesn't affect
<CODE>GRANT OPTION</CODE>.
<LI>

Removed extra <SAMP>`)'</SAMP> from the output of <CODE>SHOW GRANTS</CODE>.
<LI>

Fixed problem when storing numbers in timestamps.
<LI>

Fix problem with timezones that have half hour offsets.
<LI>

Allow the syntax <CODE>UNIQUE INDEX</CODE> in <CODE>CREATE</CODE> statements.
<LI>

<CODE>mysqlhotcopy</CODE> - fast online hot-backup utility for local
MySQL databases. By Tim Bunce.
<LI>

New more secure <CODE>mysqlaccess</CODE>. Thanks to Steve Harvey for this.
<LI>

Added <CODE>--i-am-a-dummy</CODE> and <CODE>--safe-updates</CODE> options to <CODE>mysql</CODE>.
<LI>

Added <CODE>select_limit</CODE> and <CODE>max_join_size</CODE> variables to <CODE>mysql</CODE>.
<LI>

Added <CODE>SQL_MAX_JOIN_SIZE</CODE> and <CODE>SQL_SAFE_UPDATES</CODE> options.
<LI>

Added <CODE>READ LOCAL</CODE> lock that doesn't lock the table for concurrent
inserts. (This is used by <CODE>mysqldump</CODE>.)
<LI>

Changed that <CODE>LOCK TABLES ... READ</CODE> doesn't anymore allow concurrent
inserts.
<LI>

Added <CODE>--skip-delay-key-write</CODE> option to <CODE>mysqld</CODE>.
<LI>

Fixed security problem in the protocol regarding password checking.
<LI>

<CODE>_rowid</CODE> can now be used as an alias for an integer type unique indexed
column.
<LI>

Added back blocking of <CODE>SIGPIPE</CODE> when compiling with <CODE>--thread-safe-clients</CODE>
to make things safe for old clients.
</UL>



<H3><A NAME="News-3.23.10" HREF="manual_toc.html#News-3.23.10">D.4.49  Changes in release 3.23.10</A></H3>


<UL>
<LI>

Fixed bug in 3.23.9 where memory wasn't properly freed when using
<CODE>LOCK TABLES</CODE>.
</UL>



<H3><A NAME="News-3.23.9" HREF="manual_toc.html#News-3.23.9">D.4.50  Changes in release 3.23.9</A></H3>


<UL>
<LI>

Fixed problem that affected queries that did arithmetic on group functions.
<LI>

Fixed problem with timestamps and <CODE>INSERT DELAYED</CODE>.
<LI>

Fixed that <CODE>date_col BETWEEN const_date AND const_date</CODE> works.
<LI>

Fixed problem when only changing a 0 to <CODE>NULL</CODE> in a table with
<CODE>BLOB/TEXT</CODE> columns.
<LI>

Fixed bug in range optimiser when using many key parts and or on the middle
key parts:  <CODE>WHERE K1=1 and K3=2 and (K2=2 and K4=4 or K2=3 and K4=5)</CODE>
<LI>

Added <CODE>source</CODE> command to <CODE>mysql</CODE> to allow reading of batch files
inside the <CODE>mysql</CODE> client.  Original patch by Matthew Vanecek.
<LI>

Fixed critical problem with the <CODE>WITH GRANT OPTION</CODE> option.
<LI>

Don't give an unnecessary <CODE>GRANT</CODE> error when using tables from many
databases in the same query.
<LI>

Added VIO wrapper (needed for SSL support; by Andrei Errapart and
Tnu Samuel).
<LI>

Fixed optimiser problem on <CODE>SELECT</CODE> when using many overlapping indexes.
MySQL should now be able to choose keys even better when there
are many keys to choose from.
<LI>

Changed optimiser to prefer a range key instead of a ref key when the
range key can uses more columns than the ref key (which only can use
columns with <CODE>=</CODE>).  For example, the following type of queries should now
be faster: <CODE>SELECT * from key_part_1=const and key_part_2 &#62; const2</CODE>
<LI>

Fixed bug that a change of all <CODE>VARCHAR</CODE> columns to <CODE>CHAR</CODE> columns
didn't change row type from dynamic to fixed.
<LI>

Disabled floating-point exceptions for FreeBSD to fix core dump when
doing <CODE>SELECT FLOOR(POW(2,63))</CODE>.
<LI>

Renamed <CODE>mysqld</CODE> startup option from <CODE>--delay-key-write</CODE> to
<CODE>--delay-key-write-for-all-tables</CODE>.
<LI>

Added <CODE>read-next-on-key</CODE> to <CODE>HEAP</CODE> tables.  This should fix all
problems with <CODE>HEAP</CODE> tables when using non-<CODE>UNIQUE</CODE> keys.
<LI>

Added option to print default arguments to all clients.
<LI>

Added <CODE>--log-slow-queries</CODE> option to <CODE>mysqld</CODE> to log all queries
that take a long time to a separate log file with a time indicating how
long the query took.
<LI>

Fixed core dump when doing <CODE>WHERE key_col=RAND(...)</CODE>.
<LI>

Fixed optimisation bug in <CODE>SELECT ... LEFT JOIN ... key_col IS NULL</CODE>,
when <CODE>key_col</CODE> could contain <CODE>NULL</CODE> values.
<LI>

Fixed problem with 8-bit characters as separators in <CODE>LOAD DATA INFILE</CODE>.
</UL>



<H3><A NAME="News-3.23.8" HREF="manual_toc.html#News-3.23.8">D.4.51  Changes in release 3.23.8 (02 Jan 2000)</A></H3>


<UL>
<LI>

Fixed problem when handling indexfiles larger than 8G.
<LI>

Added latest patches to MIT-pthreads for NetBSD.
<LI>

Fixed problem with timezones that are &#60; GMT - 11.
<LI>

Fixed a bug when deleting packed keys in <CODE>NISAM</CODE>.
<LI>

Fixed problem with <CODE>ISAM</CODE> when doing some <CODE>ORDER BY ... DESC</CODE> queries.
<LI>

Fixed bug when doing a join on a text key which didn't cover the whole key.
<LI>

Option <CODE>--delay-key-write</CODE> didn't enable delayed key writing.
<LI>

Fixed update of <CODE>TEXT</CODE> column which involved only case changes.
<LI>

Fixed that <CODE>INSERT DELAYED</CODE> doesn't update timestamps that are given.
<LI>

Added function <CODE>YEARWEEK()</CODE> and options <CODE>x</CODE>, <CODE>X</CODE>, <CODE>v</CODE> and
<CODE>V</CODE> to <CODE>DATE_FORMAT()</CODE>.
<LI>

Fixed problem with <CODE>MAX(indexed_column)</CODE> and <CODE>HEAP</CODE> tables.
<LI>

Fixed problem with <CODE>BLOB NULL</CODE> keys and <CODE>LIKE "prefix%"</CODE>.
<LI>

Fixed problem with <CODE>MyISAM</CODE> and fixed-length rows &#60; 5 bytes.
<LI>

Fixed problem that could cause MySQL to touch freed memory when
doing very complicated <CODE>GROUP BY</CODE> queries.
<LI>

Fixed core dump if you got a crashed table where an <CODE>ENUM</CODE> field value
was too big.
</UL>



<H3><A NAME="News-3.23.7" HREF="manual_toc.html#News-3.23.7">D.4.52  Changes in release 3.23.7 (10 Dec 1999)</A></H3>


<UL>
<LI>

Fixed workaround under Linux to avoid problems with <CODE>pthread_mutex_timedwait</CODE>,
which is used with <CODE>INSERT DELAYED</CODE>. See section <A HREF="manual.html#Linux">2.6.1  Linux Notes (All Linux Versions)</A>.
<LI>

Fixed that one will get a 'disk full' error message if one gets disk full
when doing sorting (instead of waiting until we got more disk space).
<LI>

Fixed a bug in <CODE>MyISAM</CODE> with keys &#62; 250 characters.
<LI>

In <CODE>MyISAM</CODE> one can now do an <CODE>INSERT</CODE> at the same time as other
threads are reading from the table.
<LI>

Added <CODE>max_write_lock_count</CODE> variable to <CODE>mysqld</CODE> to force a
<CODE>READ</CODE> lock after a certain number of <CODE>WRITE</CODE> locks.
<LI>

Inverted flag <CODE>delay_key_write</CODE> on <CODE>show variables</CODE>.
<LI>

Renamed <CODE>concurrency</CODE> variable to <CODE>thread_concurrency</CODE>.
<LI>

The following functions are now multi-byte-safe:
<CODE>LOCATE(substr,str)</CODE>, <CODE>POSITION(substr IN str)</CODE>,
<CODE>LOCATE(substr,str,pos)</CODE>, <CODE>INSTR(str,substr)</CODE>,
<CODE>LEFT(str,len)</CODE>, <CODE>RIGHT(str,len)</CODE>,
<CODE>SUBSTRING(str,pos,len)</CODE>, <CODE>SUBSTRING(str FROM pos FOR len)</CODE>,
<CODE>MID(str,pos,len)</CODE>, <CODE>SUBSTRING(str,pos)</CODE>, <CODE>SUBSTRING(str
FROM pos)</CODE>, <CODE>SUBSTRING_INDEX(str,delim,count)</CODE>, <CODE>RTRIM(str)</CODE>,
<CODE>TRIM([[BOTH | TRAILING] [remstr] FROM] str)</CODE>,
<CODE>REPLACE(str,from_str,to_str)</CODE>, <CODE>REVERSE(str)</CODE>,
<CODE>INSERT(str,pos,len,newstr)</CODE>, <CODE>LCASE(str)</CODE>, <CODE>LOWER(str)</CODE>,
<CODE>UCASE(str)</CODE> and <CODE>UPPER(str)</CODE>; patch by Wei He.
<LI>

Fix core dump when releasing a lock from a non-existent table.
<LI>

Remove locks on tables before starting to remove duplicates.
<LI>

Added option <CODE>FULL</CODE> to <CODE>SHOW PROCESSLIST</CODE>.
<LI>

Added option <CODE>--verbose</CODE> to <CODE>mysqladmin</CODE>.
<LI>

Fixed problem when automatically converting <CODE>HEAP</CODE> to <CODE>MyISAM</CODE>.
<LI>

Fixed bug in <CODE>HEAP</CODE> tables when doing insert + delete + insert + scan the
table.
<LI>

Fixed bugs on Alpha with <CODE>REPLACE()</CODE> and <CODE>LOAD DATA INFILE</CODE>.
<LI>

Added <CODE>interactive_timeout</CODE> variable to <CODE>mysqld</CODE>.
<LI>

Changed the argument to <CODE>mysql_data_seek()</CODE> from <CODE>ulong</CODE> to
<CODE>ulonglong</CODE>.
</UL>



<H3><A NAME="News-3.23.6" HREF="manual_toc.html#News-3.23.6">D.4.53  Changes in release 3.23.6</A></H3>


<UL>
<LI>

Added <CODE>-O lower_case_table_names={0|1}</CODE> option to <CODE>mysqld</CODE> to allow
users to force table names to lowercase.
<LI>

Added <CODE>SELECT ... INTO DUMPFILE</CODE>.
<LI>

Added <CODE>--ansi</CODE> option to <CODE>mysqld</CODE> to make some functions
ANSI SQL compatible.
<LI>

Temporary table names now start with <CODE>#sql</CODE>.
<LI>

Added quoting of identifiers with <CODE>`</CODE> (<CODE>"</CODE> in <CODE>--ansi</CODE> mode).
<LI>

Changed to use <CODE>snprintf()</CODE> when printing floats to avoid some buffer
overflows on FreeBSD.
<LI>

Made <CODE>FLOOR()</CODE> overflow safe on FreeBSD.
<LI>

Added <CODE>--quote-names</CODE> option to <CODE>mysqldump</CODE>.
<LI>

Fixed bug that one could make a part of a <CODE>PRIMARY KEY NOT NULL</CODE>.
<LI>

Fixed <CODE>encrypt()</CODE> to be thread-safe and not reuse buffer.
<LI>

Added <CODE>mysql_odbc_escape_string()</CODE> function to support big5 characters in
MyODBC.
<LI>

Rewrote the storage engine to use classes.  This introduces a lot of new code,
but will make table handling faster and better.
<LI>

Added patch by Sasha for user-defined variables.
<LI>

Changed that <CODE>FLOAT</CODE> and <CODE>DOUBLE</CODE> (without any length modifiers)
no longer are fixed decimal point numbers.
<LI>

Changed the meaning of <CODE>FLOAT(X)</CODE>: Now this is the same as <CODE>FLOAT</CODE> if
<CODE>X</CODE> &#60;= 24 and a <CODE>DOUBLE</CODE> if 24 &#60; <CODE>X</CODE> &#60;= 53.
<LI>

<CODE>DECIMAL(X)</CODE> is now an alias for <CODE>DECIMAL(X,0)</CODE> and <CODE>DECIMAL</CODE>
is now an alias for <CODE>DECIMAL(10,0)</CODE>.  The same goes for <CODE>NUMERIC</CODE>.
<LI>

Added option <CODE>ROW_FORMAT={default | dynamic | fixed | compressed}</CODE> to
<CODE>CREATE_TABLE</CODE>.
<LI>

<CODE>DELETE FROM table_name</CODE> didn't work on temporary tables.
<LI>

Changed function <CODE>CHAR_LENGTH()</CODE> to be multi-byte character safe.
<LI>

Added function <CODE>ORD(string)</CODE>.
</UL>



<H3><A NAME="News-3.23.5" HREF="manual_toc.html#News-3.23.5">D.4.54  Changes in release 3.23.5 (20 Oct 1999)</A></H3>


<UL>
<LI>

Fixed some Y2K problems in the new date handling in 3.23.
<LI>

Fixed problem with <CODE>SELECT DISTINCT ... ORDER BY RAND()</CODE>.
<LI>

Added patches by Sergei A. Golubchik for text searching on the <CODE>MyISAM</CODE>
level.
<LI>

Fixed cache overflow problem when using full joins without keys.
<LI>

Fixed some configure issues.
<LI>

Some small changes to make parsing faster.
<LI>

Adding a column after the last field with <CODE>ALTER TABLE</CODE> didn't work.
<LI>

Fixed problem when using an <CODE>AUTO_INCREMENT</CODE> column in two keys
<LI>

With <CODE>MyISAM</CODE>, you now can have an <CODE>AUTO_INCREMENT</CODE> column as a key
sub part:
<CODE>CREATE TABLE foo (a INT NOT NULL AUTO_INCREMENT, b CHAR(5), PRIMARY KEY (b,a))</CODE>
<LI>

Fixed bug in <CODE>MyISAM</CODE> with packed char keys that could be <CODE>NULL</CODE>.
<LI>

<CODE>AS</CODE> on field name with <CODE>CREATE TABLE table_name SELECT ...</CODE> didn't
work.
<LI>

Allow use of <CODE>NATIONAL</CODE> and <CODE>NCHAR</CODE> when defining character columns.
This is the same as not using <CODE>BINARY</CODE>.
<LI>

Don't allow <CODE>NULL</CODE> columns in a <CODE>PRIMARY KEY</CODE> (only in <CODE>UNIQUE</CODE>
keys).
<LI>

Clear <CODE>LAST_INSERT_ID()</CODE> if one uses this in ODBC:
<CODE>WHERE auto_increment_column IS NULL</CODE>.  This seems to fix some problems
with Access.
<LI>

<CODE>SET SQL_AUTO_IS_NULL=0|1</CODE> now turns on/off the handling of
searching after the last inserted row with <CODE>WHERE
auto_increment_column IS NULL</CODE>.
<LI>

Added new variable <CODE>concurrency</CODE> to <CODE>mysqld</CODE> for Solaris.
<LI>

Added <CODE>--relative</CODE> option to <CODE>mysqladmin</CODE> to make
<CODE>extended-status</CODE> more useful to monitor changes.
<LI>

Fixed bug when using <CODE>COUNT(DISTINCT ...)</CODE> on an empty table.
<LI>

Added support for the Chinese character set GBK.
<LI>

Fixed problem with <CODE>LOAD DATA INFILE</CODE> and <CODE>BLOB</CODE> columns.
<LI>

Added bit operator <CODE>~</CODE> (negation).
<LI>

Fixed problem with <CODE>UDF</CODE> functions.
</UL>



<H3><A NAME="News-3.23.4" HREF="manual_toc.html#News-3.23.4">D.4.55  Changes in release 3.23.4 (28 Sep 1999)</A></H3>


<UL>
<LI>

Inserting a <CODE>DATETIME</CODE> into a <CODE>TIME</CODE> column no longer will
try to store 'days' in it.
<LI>

Fixed problem with storage of float/double on little endian machines.
(This affected <CODE>SUM()</CODE>.)
<LI>

Added connect timeout on TCP/IP connections.
<LI>

Fixed problem with <CODE>LIKE "%"</CODE> on an index that may have <CODE>NULL</CODE> values.
<LI>

<CODE>REVOKE ALL PRIVILEGES</CODE> didn't revoke all privileges.
<LI>

Allow creation of temporary tables with same name as the original table.
<LI>

When granting a user a <CODE>GRANT</CODE> option for a database, he couldn't grant
privileges to other users.
<LI>

New command: <CODE>SHOW GRANTS FOR user</CODE> (by Sinisa).
<LI>

New <CODE>date_add</CODE> syntax:  <CODE>date/datetime + INTERVAL # interval_type</CODE>.
By Joshua Chamas.
<LI>

Fixed privilege check for <CODE>LOAD DATA REPLACE</CODE>.
<LI>

Automatic fixing of broken include files on Solaris 2.7
<LI>

Some configure issues to fix problems with big filesystem detection.
<LI>

<CODE>REGEXP</CODE> is now case-insensitive if you use non-binary strings.
</UL>



<H3><A NAME="News-3.23.3" HREF="manual_toc.html#News-3.23.3">D.4.56  Changes in release 3.23.3</A></H3>


<UL>
<LI>

Added patches for MIT-pthreads on NetBSD.
<LI>

Fixed range bug in <CODE>MyISAM</CODE>.
<LI>

<CODE>ASC</CODE> is now the default again for <CODE>ORDER BY</CODE>.
<LI>

Added <CODE>LIMIT</CODE> to <CODE>UPDATE</CODE>.
<LI>

Added <CODE>mysql_change_user()</CODE> function to the MySQL C API.
<LI>

Added character set to <CODE>SHOW VARIABLES</CODE>.
<LI>

Added support of <CODE>--[whitespace]</CODE> comments.
<LI>

Allow <CODE>INSERT into tbl_name VALUES ()</CODE>, that is, you may now specify
an empty value list to insert a row in which each column is set to its
default value.
<LI>

Changed <CODE>SUBSTRING(text FROM pos)</CODE> to conform to ANSI SQL. (Before this
construct returned the rightmost <CODE>pos</CODE> characters.)
<LI>

<CODE>SUM()</CODE> with <CODE>GROUP BY</CODE> returned 0 on some systems.
<LI>

Changed output for <CODE>SHOW TABLE STATUS</CODE>.
<LI>

Added <CODE>DELAY_KEY_WRITE</CODE> option to <CODE>CREATE TABLE</CODE>.
<LI>

Allow <CODE>AUTO_INCREMENT</CODE> on any key part.
<LI>

Fixed problem with <CODE>YEAR(NOW())</CODE> and <CODE>YEAR(CURDATE())</CODE>.
<LI>

Added <CODE>CASE</CODE> construct.
<LI>

New function <CODE>COALESCE()</CODE>.
</UL>



<H3><A NAME="News-3.23.2" HREF="manual_toc.html#News-3.23.2">D.4.57  Changes in release 3.23.2 (09 Aug 1999)</A></H3>


<UL>
<LI>

Fixed range optimiser bug: <CODE>SELECT * FROM table_name WHERE
key_part1 &#62;= const AND (key_part2 = const OR key_part2 = const)</CODE>.  The
bug was that some rows could be duplicated in the result.
<LI>

Running <CODE>myisamchk</CODE> without <CODE>-a</CODE> updated the index
distribution incorrectly.
<LI>

<CODE>SET SQL_LOW_PRIORITY_UPDATES=1</CODE> was causing a parse error.
<LI>

You can now update index columns that are used in the <CODE>WHERE</CODE> clause.
<CODE>UPDATE tbl_name SET KEY=KEY+1 WHERE KEY &#62; 100</CODE>
<LI>

Date handling should now be a bit faster.
<LI>

Added handling of fuzzy dates (dates where day or month is 0), such as
<CODE>'1999-01-00'</CODE>.
<LI>

Fixed optimisation of <CODE>SELECT ... WHERE key_part1=const1 AND
key_part_2=const2 AND key_part1=const4 AND key_part2=const4</CODE>; indextype
should be <CODE>range</CODE> instead of <CODE>ref</CODE>.
<LI>

Fixed <CODE>egcs</CODE> 1.1.2 optimiser bug (when using <CODE>BLOB</CODE>s) on Linux Alpha.
<LI>

Fixed problem with <CODE>LOCK TABLES</CODE> combined with <CODE>DELETE FROM table</CODE>.
<LI>

<CODE>MyISAM</CODE> tables now allow keys on <CODE>NULL</CODE> and <CODE>BLOB/TEXT</CODE> columns.
<LI>

The following join is now much faster:
<CODE>SELECT ... FROM t1 LEFT JOIN t2 ON ... WHERE t2.not_null_column IS NULL</CODE>.
<LI>

<CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> can be done on functions.
<LI>

Changed handling of 'const_item' to allow handling of <CODE>ORDER BY RAND()</CODE>.
<LI>

Indexes are now used for <CODE>WHERE key_column = function</CODE>.
<LI>

Indexes are now used for <CODE>WHERE key_column = col_name</CODE> even if
the columns are not identically packed.
<LI>

Indexes are now used for <CODE>WHERE col_name IS NULL</CODE>.
<LI>

Changed heap tables to be stored in low_byte_first order (to make it easy
to convert to <CODE>MyISAM</CODE> tables)
<LI>

Automatic change of <CODE>HEAP</CODE> temporary tables to <CODE>MyISAM</CODE> tables
in case of 'table is full' errors.
<LI>

Added <CODE>--init-file=file_name</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added <CODE>COUNT(DISTINCT value, [value, ...])</CODE>.
<LI>

<CODE>CREATE TEMPORARY TABLE</CODE> now creates a temporary table, in its own
namespace, that is automatically deleted if connection is dropped.
<LI>

New reserved words (required for <CODE>CASE</CODE>):  <CODE>CASE, THEN, WHEN, ELSE and END</CODE>.
<LI>

New functions <CODE>EXPORT_SET()</CODE> and <CODE>MD5()</CODE>.
<LI>

Support for the GB2312 Chinese character set.
</UL>



<H3><A NAME="News-3.23.1" HREF="manual_toc.html#News-3.23.1">D.4.58  Changes in release 3.23.1</A></H3>


<UL>
<LI>

Fixed some compilation problems.
</UL>



<H3><A NAME="News-3.23.0" HREF="manual_toc.html#News-3.23.0">D.4.59  Changes in release 3.23.0 (05 Aug 1999: Alpha)</A></H3>


<UL>
<LI>

A new storage engine library (<CODE>MyISAM</CODE>) with a lot of new features.
See section <A HREF="manual.html#MyISAM">7.1  <CODE>MyISAM</CODE> Tables</A>.
<LI>

You can create in-memory <CODE>HEAP</CODE> tables which are extremely fast for
lookups.
<LI>

Support for big files (63-bit) on OSes that support big files.
<LI>

New function <CODE>LOAD_FILE(filename)</CODE> to get the contents of a file as a
string value.
<LI>

New operator <CODE>&#60;=&#62;</CODE> which will act as <CODE>=</CODE> but will return TRUE
if both arguments are <CODE>NULL</CODE>.  This is useful for comparing changes
between tables.
<LI>

Added the ODBC 3.0 <CODE>EXTRACT(interval FROM datetime)</CODE> function.
<LI>

Columns defined as <CODE>FLOAT(X)</CODE> are not rounded on storage and may be
in scientific notation (1.0 E+10) when retrieved.
<LI>

<CODE>REPLACE</CODE> is now faster than before.
<LI>

Changed <CODE>LIKE</CODE> character comparison to behave as <CODE>=</CODE>;
This means that <CODE>'e' LIKE ''e'</CODE> is now true.  (If the line doesn't
display correctly, the latter 'e' is a French 'e' with a dot above.)
<LI>

<CODE>SHOW TABLE STATUS</CODE> returns a lot of information about the tables.
<LI>

Added <CODE>LIKE</CODE> to the <CODE>SHOW STATUS</CODE> command.
<LI>

Added <CODE>Privileges</CODE> column to <CODE>SHOW COLUMNS</CODE>.
<LI>

Added <CODE>Packed</CODE> and <CODE>Comment</CODE> columns to <CODE>SHOW INDEX</CODE>.
<LI>

Added comments to tables (with <CODE>CREATE TABLE ... COMMENT "xxx"</CODE>).
<LI>

Added <CODE>UNIQUE</CODE>, as in
<CODE>CREATE TABLE table_name (col int not null UNIQUE)</CODE>
<LI>

New create syntax: <CODE>CREATE TABLE table_name SELECT ...</CODE>
<LI>

New create syntax: <CODE>CREATE TABLE IF NOT EXISTS ...</CODE>
<LI>

Allow creation of <CODE>CHAR(0)</CODE> columns.
<LI>

<CODE>DATE_FORMAT()</CODE> now requires <SAMP>`%'</SAMP> before any format character.
<LI>

<CODE>DELAYED</CODE> is now a reserved word (sorry about that :( ).
<LI>

An example procedure is added: <CODE>analyse</CODE>, file: <TT>`sql_analyse.c'</TT>.
This will describe the data in your query.  Try the following:

<PRE>
SELECT ... FROM ...
WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</PRE>

This procedure is extremely useful when you want to check the data in your
table!
<LI>

<CODE>BINARY</CODE> cast to force a string to be compared in case-sensitive fashion.
<LI>

Added <CODE>--skip-show-database</CODE> option to <CODE>mysqld</CODE>.
<LI>

Check whether a row has changed in an <CODE>UPDATE</CODE> now also works
with <CODE>BLOB</CODE>/<CODE>TEXT</CODE> columns.
<LI>

Added the <CODE>INNER</CODE> join syntax.  <STRONG>NOTE</STRONG>:  This made <CODE>INNER</CODE>
a reserved word!
<LI>

Added support for netmasks to the hostname in the MySQL grant tables.
You can specify a netmask using the <CODE>IP/NETMASK</CODE> syntax.
<LI>

If you compare a <CODE>NOT NULL DATE/DATETIME</CODE> column with <CODE>IS
NULL</CODE>, this is changed to a compare against <CODE>0</CODE> to satisfy some ODBC
applications.  (By <a HREF="mailto:shreeve@uci.edu">shreeve@uci.edu</a>.)
<LI>

<CODE>NULL IN (...)</CODE> now returns <CODE>NULL</CODE> instead of <CODE>0</CODE>.  This will
ensure that <CODE>null_column NOT IN (...)</CODE> doesn't match
<CODE>NULL</CODE> values.
<LI>

Fix storage of floating-point values in <CODE>TIME</CODE> columns.
<LI>

Changed parsing of <CODE>TIME</CODE> strings to be more strict.  Now the
fractional second part is detected (and currently skipped). The
following formats are supported:

<UL>
<LI>[[DAYS] [H]H:]MM:]SS[.fraction]

<LI>[[[[[H]H]H]H]MM]SS[.fraction]

</UL>

<LI>

Detect (and ignore) fractional second part from <CODE>DATETIME</CODE>.
<LI>

Added the <CODE>LOW_PRIORITY</CODE> attribute to <CODE>LOAD DATA INFILE</CODE>.
<LI>

The default index name now uses the same case as the column name on which the
index name is based.
<LI>

Changed default number of connections to 100.
<LI>

Use bigger buffers when using <CODE>LOAD DATA INFILE</CODE>.
<LI>

<CODE>DECIMAL(x,y)</CODE> now works according to ANSI SQL.
<LI>

Added aggregate UDF functions. Thanks to Andreas F. Bobak
(<a HREF="mailto:bobak@relog.ch">bobak@relog.ch</a>) for this!
<LI>

<CODE>LAST_INSERT_ID()</CODE> is now updated for <CODE>INSERT INTO ... SELECT</CODE>.
<LI>

Some small changes to the join table optimiser to make some joins faster.
<LI>

<CODE>SELECT DISTINCT</CODE> is much faster; it uses the new <CODE>UNIQUE</CODE>
functionality in <CODE>MyISAM</CODE>. One difference compared to MySQL Version 3.22
is that the output of <CODE>DISTINCT</CODE> is not sorted anymore.
<LI>

All C client API macros are now functions to make shared libraries more
reliable. Because of this, you can no longer call <CODE>mysql_num_fields()</CODE> on
a <CODE>MYSQL</CODE> object, you must use <CODE>mysql_field_count()</CODE> instead.
<LI>

Added use of <CODE>LIBWRAP</CODE>; patch by Henning P. Schmiedehausen.
<LI>

Don't allow <CODE>AUTO_INCREMENT</CODE> for other than numerical columns.
<LI>

Using <CODE>AUTO_INCREMENT</CODE> will now automatically make the column
<CODE>NOT NULL</CODE>.
<LI>

Show <CODE>NULL</CODE> as the default value for <CODE>AUTO_INCREMENT</CODE> columns.
<LI>

Added <CODE>SQL_BIG_RESULT</CODE>; <CODE>SQL_SMALL_RESULT</CODE> is now default.
<LI>

Added a shared library RPM. This enhancement was contributed by David
Fox (<a HREF="mailto:dsfox@cogsci.ucsd.edu">dsfox@cogsci.ucsd.edu</a>).
<LI>

Added  <CODE>--enable-large-files</CODE> and <CODE>--disable-large-files</CODE> switches
to <CODE>configure</CODE>. See <TT>`configure.in'</TT> for some systems where this is
automatically turned off because of broken implementations.
<LI>

Upgraded <CODE>readline</CODE> to 4.0.
<LI>

New <CODE>CREATE TABLE</CODE> options: <CODE>PACK_KEYS</CODE> and <CODE>CHECKSUM</CODE>.
<LI>

Added <CODE>--default-table-type</CODE> option to <CODE>mysqld</CODE>.
</UL>



<H2><A NAME="News-3.22.x" HREF="manual_toc.html#News-3.22.x">D.5  Changes in release 3.22.x (Old; discontinued)</A></H2>

<P>
<A NAME="IDX1884"></A>

</P>
<P>
The 3.22 version has faster and safer connect code than version 3.21, as well
as a lot of new nice enhancements.
As there aren't really any major changes, upgrading from 3.21 to 3.22 should
be very easy and painless.  See section <A HREF="manual.html#Upgrading-from-3.21">2.5.5  Upgrading from Version 3.21 to 3.22</A>.

</P>



<H3><A NAME="News-3.22.35" HREF="manual_toc.html#News-3.22.35">D.5.1  Changes in release 3.22.35</A></H3>


<UL>
<LI>

Fixed problem with <CODE>STD()</CODE>.
<LI>

Merged changes from the newest <CODE>ISAM</CODE> library from 3.23.
<LI>

Fixed problem with <CODE>INSERT DELAYED</CODE>.
<LI>

Fixed a bug core dump when using a <CODE>LEFT JOIN</CODE>/<CODE>STRAIGHT_JOIN</CODE>
on a table with only one row.
</UL>



<H3><A NAME="News-3.22.34" HREF="manual_toc.html#News-3.22.34">D.5.2  Changes in release 3.22.34</A></H3>


<UL>
<LI>

Fixed problem with <CODE>GROUP BY</CODE> on <CODE>TINYBLOB</CODE> columns; this
caused bugzilla to not show rows in some queries.
<LI>

Had to do total recompile of the Windows binary version as VC++ didn't
compile all relevant files for 3.22.33 :(
</UL>



<H3><A NAME="News-3.22.33" HREF="manual_toc.html#News-3.22.33">D.5.3  Changes in release 3.22.33</A></H3>


<UL>
<LI>

Fixed problems in Windows when locking tables with <CODE>LOCK TABLE</CODE>.
<LI>

Quicker kill of <CODE>SELECT DISTINCT</CODE> queries.
</UL>



<H3><A NAME="News-3.22.32" HREF="manual_toc.html#News-3.22.32">D.5.4  Changes in release 3.22.32 (14 Feb 2000)</A></H3>


<UL>
<LI>

Fixed problem when storing numbers in timestamps.
<LI>

Fix problem with timezones that have half hour offsets.
<LI>

Added <CODE>mysqlhotcopy</CODE>, a fast online hot-backup utility for local MySQL
databases. By Tim Bunce.
<LI>

New more secure <CODE>mysqlaccess</CODE>. Thanks to Steve Harvey for this.
<LI>

Fixed security problem in the protocol regarding password checking.
<LI>

Fixed problem that affected queries that did arithmetic on <CODE>GROUP</CODE> functions.
<LI>

Fixed a bug in the <CODE>ISAM</CODE> code when deleting rows on tables with
packed indexes.
</UL>



<H3><A NAME="News-3.22.31" HREF="manual_toc.html#News-3.22.31">D.5.5  Changes in release 3.22.31</A></H3>


<UL>
<LI>

A few small fixes for the Windows version.
</UL>



<H3><A NAME="News-3.22.30" HREF="manual_toc.html#News-3.22.30">D.5.6  Changes in release 3.22.30</A></H3>


<UL>
<LI>

Fixed optimiser problem on <CODE>SELECT</CODE> when using many overlapping indexes.
<LI>

Disabled floating-point exceptions for FreeBSD to fix core dump when
doing <CODE>SELECT FLOOR(POW(2,63))</CODE>.
<LI>

Added print of default arguments options to all clients.
<LI>

Fixed critical problem with the <CODE>WITH GRANT OPTION</CODE> option.
<LI>

Fixed non-critical Y2K problem when writing short date to log files.
</UL>



<H3><A NAME="News-3.22.29" HREF="manual_toc.html#News-3.22.29">D.5.7  Changes in release 3.22.29 (02 Jan 2000)</A></H3>


<UL>
<LI>

Upgraded the configure and include files to match the latest 3.23 version.
This should increase portability and make it easier to build shared libraries.
<LI>

Added latest patches to MIT-pthreads for NetBSD.
<LI>

Fixed problem with timezones that are &#60; GMT -11.
<LI>

Fixed a bug when deleting packed keys in NISAM.
<LI>

Fixed problem that could cause MySQL to touch freed memory when
doing very complicated <CODE>GROUP BY</CODE> queries.
<LI>

Fixed core dump if you got a crashed table where an <CODE>ENUM</CODE> field value
was too big.
<LI>

Added <CODE>mysqlshutdown.exe</CODE> and <CODE>mysqlwatch.exe</CODE> to the Windows
distribution.
<LI>

Fixed problem when doing <CODE>ORDER BY</CODE> on a reference key.
<LI>

Fixed that <CODE>INSERT DELAYED</CODE> doesn't update timestamps that are given.
</UL>



<H3><A NAME="News-3.22.28" HREF="manual_toc.html#News-3.22.28">D.5.8  Changes in release 3.22.28 (20 Oct 1999)</A></H3>


<UL>
<LI>

Fixed problem with <CODE>LEFT JOIN</CODE> and <CODE>COUNT()</CODE> on a column which
was declared <CODE>NULL</CODE> + and it had a <CODE>DEFAULT</CODE> value.
<LI>

Fixed core dump problem when using <CODE>CONCAT()</CODE> in a <CODE>WHERE</CODE> clause.
<LI>

Fixed problem with <CODE>AVG()</CODE> and <CODE>STD()</CODE> with <CODE>NULL</CODE> values.
</UL>



<H3><A NAME="News-3.22.27" HREF="manual_toc.html#News-3.22.27">D.5.9  Changes in release 3.22.27</A></H3>


<UL>
<LI>

Fixed prototype in <TT>`my_ctype.h'</TT> when using other character sets.
<LI>

Some configure issues to fix problems with big filesystem detection.
<LI>

Fixed problem when sorting on big <CODE>BLOB</CODE> columns.
<LI>

<CODE>ROUND()</CODE> will now work on Windows.
</UL>



<H3><A NAME="News-3.22.26" HREF="manual_toc.html#News-3.22.26">D.5.10  Changes in release 3.22.26 (16 Sep 1999)</A></H3>


<UL>
<LI>

Fixed core dump with empty <CODE>BLOB/TEXT</CODE> column argument to
<CODE>REVERSE()</CODE>.
<LI>

Extended <CODE>/*! */</CODE> with version numbers.
<LI>

Changed <CODE>SUBSTRING(text FROM pos)</CODE> to conform to ANSI SQL. (Before this
construct returned the rightmost 'pos' characters.)
<LI>

Fixed problem with <CODE>LOCK TABLES</CODE> combined with <CODE>DELETE FROM table</CODE>
<LI>

Fixed problem that <CODE>INSERT ... SELECT</CODE> didn't use <CODE>BIG_TABLES</CODE>.
<LI>

<CODE>SET SQL_LOW_PRIORITY_UPDATES=#</CODE> didn't work.
<LI>

Password wasn't updated correctly if privileges didn't change on:
<CODE>GRANT ... IDENTIFIED BY</CODE>
<LI>

Fixed range optimiser bug in
<CODE>SELECT * FROM table_name WHERE key_part1 &#62;= const AND (key_part2 = const
OR key_part2 = const)</CODE>.
<LI>

Fixed bug in compression key handling in <CODE>ISAM</CODE>.
</UL>



<H3><A NAME="News-3.22.25" HREF="manual_toc.html#News-3.22.25">D.5.11  Changes in release 3.22.25</A></H3>


<UL>
<LI>

Fixed some small problems with the installation.
</UL>



<H3><A NAME="News-3.22.24" HREF="manual_toc.html#News-3.22.24">D.5.12  Changes in release 3.22.24 (05 Jul 1999)</A></H3>


<UL>
<LI>

<CODE>DATA</CODE> is not a reserved word anymore.
<LI>

Fixed optimiser bug with tables with only one row.
<LI>

Fixed bug when using <CODE>LOCK TABLES table_name READ; FLUSH TABLES;</CODE>
<LI>

Applied some patches for HP-UX.
<LI>

<CODE>isamchk</CODE> should now work on Windows.
<LI>

Changed <TT>`configure'</TT> to not use big file handling on Linux as this
crashes some RedHat 6.0 systems
</UL>



<H3><A NAME="News-3.22.23" HREF="manual_toc.html#News-3.22.23">D.5.13  Changes in release 3.22.23 (08 Jun 1999)</A></H3>


<UL>
<LI>

Upgraded to use Autoconf 2.13, Automake 1.4 and <CODE>libtool</CODE> 1.3.2.
<LI>

Better support for SCO in <CODE>configure</CODE>.
<LI>

Added option <CODE>--defaults-file=###</CODE> to option file handling to force use
of only one specific option file.
<LI>

Extended <CODE>CREATE</CODE> syntax to ignore MySQL Version 3.23 keywords.
<LI>

Fixed deadlock problem when using <CODE>INSERT DELAYED</CODE> on a table locked with
<CODE>LOCK TABLES</CODE>.
<LI>

Fixed deadlock problem when using <CODE>DROP TABLE</CODE> on a table that was
locked by another thread.
<LI>

Add logging of <CODE>GRANT/REVOKE</CODE> commands in the update log.
<LI>

Fixed <CODE>isamchk</CODE> to detect a new error condition.
<LI>

Fixed bug in <CODE>NATURAL LEFT JOIN</CODE>.
</UL>



<H3><A NAME="News-3.22.22" HREF="manual_toc.html#News-3.22.22">D.5.14  Changes in release 3.22.22 (30 Apr 1999)</A></H3>


<UL>
<LI>

Fixed problem in the C API when you called <CODE>mysql_close()</CODE> directly after
<CODE>mysql_init()</CODE>.
<LI>

Better client error message when you can't open socket.
<LI>

Fixed <CODE>delayed_insert_thread</CODE> counting when you couldn't create a new
delayed_insert thread.
<LI>

Fixed bug in <CODE>CONCAT()</CODE> with many arguments.
<LI>

Added patches for DEC 3.2 and SCO.
<LI>

Fixed path-bug when installing MySQL as a service on NT.
<LI>

The MySQL-Windows version is now compiled with VC++ 6.0 instead of
with VC++ 5.0.
<LI>

New installation setup for MySQL-Windows.
</UL>



<H3><A NAME="News-3.22.21" HREF="manual_toc.html#News-3.22.21">D.5.15  Changes in release 3.22.21</A></H3>


<UL>
<LI>

Fixed problem with <CODE>DELETE FROM TABLE</CODE> when table was locked by
another thread.
<LI>

Fixed bug in <CODE>LEFT JOIN</CODE> involving empty tables.
<LI>

Changed the <CODE>mysql.db</CODE> column from <CODE>CHAR(32)</CODE> to <CODE>CHAR(60)</CODE>.
<LI>

<CODE>MODIFY</CODE> and <CODE>DELAYED</CODE> are not reserved words anymore.
<LI>

Fixed a bug when storing days in a <CODE>TIME</CODE> column.
<LI>

Fixed a problem with <CODE>Host '...' is not allowed to connect to this MySQL
server</CODE> after one had inserted a new MySQL user with a <CODE>GRANT</CODE>
command.
<LI>

Changed to use <CODE>TCP_NODELAY</CODE> also on Linux (should give faster TCP/IP
connections).
</UL>



<H3><A NAME="News-3.22.20" HREF="manual_toc.html#News-3.22.20">D.5.16  Changes in release 3.22.20 (18 Mar 1999)</A></H3>


<UL>
<LI>

Fixed <CODE>STD()</CODE> for big tables when result should be 0.
<LI>

The update log didn't have newlines on some operating systems.
<LI>

<CODE>INSERT DELAYED</CODE> had some garbage at end in the update log.
</UL>



<H3><A NAME="News-3.22.19" HREF="manual_toc.html#News-3.22.19">D.5.17  Changes in release 3.22.19 (Mar 1999: Production)</A></H3>


<UL>
<LI>

Fixed bug in <CODE>mysql_install_db</CODE> (from 3.22.17).
<LI>

Changed default key cache size to 8M.
<LI>

Fixed problem with queries that needed temporary tables with <CODE>BLOB</CODE>
columns.
</UL>



<H3><A NAME="News-3.22.18" HREF="manual_toc.html#News-3.22.18">D.5.18  Changes in release 3.22.18</A></H3>


<UL>
<LI>

Fixes a fatal problem in 3.22.17 on Linux; after <CODE>shutdown</CODE>
not all threads died properly.
<LI>

Added option <CODE>-O flush_time=#</CODE> to <CODE>mysqld</CODE>.  This is mostly
useful on Windows and tells how often MySQL should close all
unused tables and flush all updated tables to disk.
<LI>

Fixed problem that a <CODE>VARCHAR</CODE> column compared with <CODE>CHAR</CODE> column
didn't use keys efficiently.
</UL>



<H3><A NAME="News-3.22.17" HREF="manual_toc.html#News-3.22.17">D.5.19  Changes in release 3.22.17</A></H3>


<UL>
<LI>

Fixed a core dump problem when using <CODE>--log-update</CODE> and connecting
without a default database.
<LI>

Fixed some <CODE>configure</CODE> and portability problems.
<LI>

Using <CODE>LEFT JOIN</CODE> on tables that had circular dependencies caused
<CODE>mysqld</CODE> to hang forever.
</UL>



<H3><A NAME="News-3.22.16" HREF="manual_toc.html#News-3.22.16">D.5.20  Changes in release 3.22.16 (Feb 1999: Gamma)</A></H3>


<UL>
<LI>

<CODE>mysqladmin processlist</CODE> could kill the server if a new user logged in.
<LI>

<CODE>DELETE FROM tbl_name WHERE key_column=col_name</CODE> didn't find any matching
rows.  Fixed.
<LI>

<CODE>DATE_ADD(column, ...)</CODE> didn't work.
<LI>

<CODE>INSERT DELAYED</CODE> could deadlock with status 'upgrading lock'
<LI>

Extended <CODE>ENCRYPT()</CODE> to take longer salt strings than 2 characters.
<LI>

<CODE>longlong2str</CODE> is now much faster than before.  For <CODE>Intel x86</CODE>
platforms, this function is written in optimised assembler.
<LI>

Added the <CODE>MODIFY</CODE> keyword to <CODE>ALTER TABLE</CODE>.
</UL>



<H3><A NAME="News-3.22.15" HREF="manual_toc.html#News-3.22.15">D.5.21  Changes in release 3.22.15</A></H3>


<UL>
<LI>

<CODE>GRANT</CODE> used with <CODE>IDENTIFIED BY</CODE> didn't take effect until privileges
were flushed.
<LI>

Name change of some variables in <CODE>SHOW STATUS</CODE>.
<LI>

Fixed problem with <CODE>ORDER BY</CODE> with 'only index' optimisation when there
were multiple key definitions for a used column.
<LI>

<CODE>DATE</CODE> and <CODE>DATETIME</CODE> columns are now up to 5 times faster than
before.
<LI>

<CODE>INSERT DELAYED</CODE> can be used to let the client do other things while the
server inserts rows into a table.
<LI>

<CODE>LEFT JOIN USING (col1,col2)</CODE> didn't work if one used it with tables
from 2 different databases.
<LI>

<CODE>LOAD DATA LOCAL INFILE</CODE> didn't work in the Unix version because of
a missing file.
<LI>

Fixed problems with <CODE>VARCHAR</CODE>/<CODE>BLOB</CODE> on very short rows (&#60; 4 bytes);
error 127 could occur when deleting rows.
<LI>

Updating <CODE>BLOB/TEXT</CODE> through formulas didn't work for short (&#60; 256 char)
strings.
<LI>

When you did a <CODE>GRANT</CODE> on a new host, <CODE>mysqld</CODE> could die on the first
connect from this host.
<LI>

Fixed bug when one used <CODE>ORDER BY</CODE> on column name that was the same
name as an alias.
<LI>

Added <CODE>BENCHMARK(loop_count,expression)</CODE> function to time expressions.
</UL>



<H3><A NAME="News-3.22.14" HREF="manual_toc.html#News-3.22.14">D.5.22  Changes in release 3.22.14</A></H3>


<UL>
<LI>

Allow empty arguments to <CODE>mysqld</CODE> to make it easier to start from shell
scripts.
<LI>

Setting a <CODE>TIMESTAMP</CODE> column to <CODE>NULL</CODE> didn't record the timestamp
value in the update log.
<LI>

Fixed lock handler bug when one did
<CODE>INSERT INTO TABLE ... SELECT ... GROUP BY</CODE>.
<LI>

Added a patch for <CODE>localtime_r()</CODE> on Windows so that it will not crash
anymore if your date is &#62; 2039, but instead will return a time of all zero.
<LI>

Names for
user-defined functions are no longer case-sensitive.
<LI>

Added escape of <CODE>^Z</CODE> (ASCII 26) to <CODE>\Z</CODE> as <CODE>^Z</CODE> doesn't
work with pipes on Windows.
<LI>

<CODE>mysql_fix_privileges</CODE> adds a new column to the <CODE>mysql.func</CODE> to
support aggregate UDF functions in future MySQL releases.
</UL>



<H3><A NAME="News-3.22.13" HREF="manual_toc.html#News-3.22.13">D.5.23  Changes in release 3.22.13</A></H3>


<UL>
<LI>

Saving <CODE>NOW()</CODE>, <CODE>CURDATE()</CODE> or <CODE>CURTIME()</CODE> directly in a
column didn't work.
<LI>

<CODE>SELECT COUNT(*) ... LEFT JOIN ...</CODE> didn't work with no <CODE>WHERE</CODE> part.
<LI>

Updated <TT>`config.guess'</TT> to allow MySQL to configure on
UnixWare 7.0.x.
<LI>

Changed the implementation of <CODE>pthread_cond()</CODE> on the Windows version.
<CODE>get_lock()</CODE> now correctly times out on Windows!
</UL>



<H3><A NAME="News-3.22.12" HREF="manual_toc.html#News-3.22.12">D.5.24  Changes in release 3.22.12</A></H3>


<UL>
<LI>

Fixed problem when using <CODE>DATE_ADD()</CODE> and <CODE>DATE_SUB()</CODE> in a
<CODE>WHERE</CODE> clause.
<LI>

You can now set the password for a user with the <CODE>GRANT ... TO user
IDENTIFIED BY 'password'</CODE> syntax.
<LI>

Fixed bug in <CODE>GRANT</CODE> checking with <CODE>SELECT</CODE> on many tables.
<LI>

Added missing file <CODE>mysql_fix_privilege_tables</CODE> to the RPM
distribution. This is not run by default because it relies on the client
package.
<LI>

Added option <CODE>SQL_SMALL_RESULT</CODE> to <CODE>SELECT</CODE> to force use of
fast temporary tables when you know that the result set will be small.
<LI>

Allow use of negative real numbers without a decimal point.
<LI>

Day number is now adjusted to maximum days in month if the resulting month
after <CODE>DATE_ADD</CODE>/<CODE>DATE_SUB()</CODE> doesn't have enough days.
<LI>

Fix that <CODE>GRANT</CODE> compares columns in case-insensitive fashion.
<LI>

Fixed a bug in <TT>`sql_list.h'</TT> that made <CODE>ALTER TABLE</CODE> dump core in
some contexts.
<LI>

The hostname in <CODE>user@hostname</CODE> can now include <SAMP>`.'</SAMP> and <SAMP>`-'</SAMP>
without quotes in the context of the <CODE>GRANT</CODE>, <CODE>REVOKE</CODE> and
<CODE>SET PASSWORD FOR ...</CODE> statements.
<LI>

Fix for <CODE>isamchk</CODE> for tables which need big temporary files.
</UL>



<H3><A NAME="News-3.22.11" HREF="manual_toc.html#News-3.22.11">D.5.25  Changes in release 3.22.11</A></H3>


<UL>
<LI>

<STRONG>Important</STRONG>: You must run the <CODE>mysql_fix_privilege_tables</CODE> script
when you upgrade to this version!  This is needed because of the new
<CODE>GRANT</CODE> system. If you don't do this, you will get <CODE>Access
denied</CODE> when you try to use <CODE>ALTER TABLE</CODE>, <CODE>CREATE INDEX</CODE>, or
<CODE>DROP INDEX</CODE>.
<LI>

<CODE>GRANT</CODE> to allow/deny users table and column access.
<LI>

Changed <CODE>USER()</CODE> to return a value in <CODE>user@host</CODE> format.
Formerly it returned only <CODE>user</CODE>.
<LI>

Changed the syntax for how to set <CODE>PASSWORD</CODE> for another user.
<LI>

New command <CODE>FLUSH STATUS</CODE> that resets most status variables to zero.
<LI>

New status variables: <CODE>aborted_threads</CODE>, <CODE>aborted_connects</CODE>.
<LI>

New option variable: <CODE>connection_timeout</CODE>.
<LI>

Added support for Thai sorting (by Pruet Boonma
<a HREF="mailto:pruet@ds90.intanon.nectec.or.th">pruet@ds90.intanon.nectec.or.th</a>).
<LI>

Slovak and japanese error messages.
<LI>

Configuration and portability fixes.
<LI>

Added option <CODE>SET SQL_WARNINGS=1</CODE> to get a warning count also for simple
inserts.
<LI>

MySQL now uses <CODE>SIGTERM</CODE> instead of <CODE>SIGQUIT</CODE> with
shutdown to work better on FreeBSD.
<LI>

Added option <CODE>\G</CODE> (print vertically) to <CODE>mysql</CODE>.
<LI>

<CODE>SELECT HIGH_PRIORITY ...</CODE> killed <CODE>mysqld</CODE>.
<LI>

<CODE>IS NULL</CODE> on a <CODE>AUTO_INCREMENT</CODE> column in a <CODE>LEFT JOIN</CODE> didn't
work as expected.
<LI>

New function <CODE>MAKE_SET()</CODE>.
</UL>



<H3><A NAME="News-3.22.10" HREF="manual_toc.html#News-3.22.10">D.5.26  Changes in release 3.22.10</A></H3>


<UL>
<LI>

<CODE>mysql_install_db</CODE> no longer starts the MySQL server!  You
should start <CODE>mysqld</CODE> with <CODE>safe_mysqld</CODE> after installing it!  The
MySQL RPM will, however, start the server as before.
<LI>

Added <CODE>--bootstrap</CODE> option to <CODE>mysqld</CODE> and recoded
<CODE>mysql_install_db</CODE> to use it.  This will make it easier to install
MySQL with RPMs.
<LI>

Changed <CODE>+</CODE>, <CODE>-</CODE> (sign and minus), <CODE>*</CODE>, <CODE>/</CODE>, <CODE>%</CODE>,
<CODE>ABS()</CODE> and <CODE>MOD()</CODE> to be <CODE>BIGINT</CODE> aware (64-bit safe).
<LI>

Fixed a bug in <CODE>ALTER TABLE</CODE> that caused <CODE>mysqld</CODE> to crash.
<LI>

MySQL now always reports the conflicting key values when a
duplicate key entry occurs. (Before this was only reported for <CODE>INSERT</CODE>.)
<LI>

New syntax: <CODE>INSERT INTO tbl_name SET col_name=value, col_name=value, ...</CODE>
<LI>

Most errors in the <TT>`.err'</TT> log are now prefixed with a time stamp.
<LI>

Added option <CODE>MYSQL_INIT_COMMAND</CODE> to <CODE>mysql_options()</CODE> to make
a query on connect or reconnect.
<LI>

Added option <CODE>MYSQL_READ_DEFAULT_FILE</CODE> and
<CODE>MYSQL_READ_DEFAULT_GROUP</CODE> to <CODE>mysql_options()</CODE> to read the
following parameters from the MySQL option files: <CODE>port</CODE>,
<CODE>socket</CODE>, <CODE>compress</CODE>, <CODE>password</CODE>, <CODE>pipe</CODE>, <CODE>timeout</CODE>,
<CODE>user</CODE>, <CODE>init-command</CODE>, <CODE>host</CODE> and <CODE>database</CODE>.
<LI>

Added <CODE>maybe_null</CODE> to the UDF structure.
<LI>

Added option <CODE>IGNORE</CODE> to <CODE>INSERT</CODE> statements with many rows.
<LI>

Fixed some problems with sorting of the <CODE>koi8</CODE> character sets; users of
<CODE>koi8</CODE> <STRONG>must</STRONG> run <CODE>isamchk -rq</CODE> on each table that has an
index on a <CODE>CHAR</CODE> or <CODE>VARCHAR</CODE> column.
<LI>

New script <CODE>mysql_setpermission</CODE>, by Luuk de Boer.  It allows easy
creation of new users with permissions for specific databases.
<LI>

Allow use of hexadecimal strings (0x...) when specifying a constant string
(like in the column separators with <CODE>LOAD DATA INFILE</CODE>).
<LI>

Ported to OS/2 (thanks to Antony T. Curtis <a HREF="mailto:antony.curtis@olcs.net">antony.curtis@olcs.net</a>).
<LI>

Added more variables to <CODE>SHOW STATUS</CODE> and changed format of output to
be like <CODE>SHOW VARIABLES</CODE>.
<LI>

Added <CODE>extended-status</CODE> command to <CODE>mysqladmin</CODE> which will show the
new status variables.
</UL>



<H3><A NAME="News-3.22.9" HREF="manual_toc.html#News-3.22.9">D.5.27  Changes in release 3.22.9</A></H3>


<UL>
<LI>

<CODE>SET SQL_LOG_UPDATE=0</CODE> caused a lockup of the server.
<LI>

New SQL command:  <CODE>FLUSH [ TABLES | HOSTS | LOGS | PRIVILEGES ] [, ...]</CODE>
<LI>

New SQL command:  <CODE>KILL</CODE> <CODE>thread_id</CODE>.
<LI>

Added casts and changed include files to make MySQL easier to
compile on AIX and DEC OSF/1 4.x
<LI>

Fixed conversion problem when using <CODE>ALTER TABLE</CODE> from a <CODE>INT</CODE>
to a short <CODE>CHAR()</CODE> column.
<LI>

Added <CODE>SELECT HIGH_PRIORITY</CODE>; this will get a lock for the
<CODE>SELECT</CODE> even if there is a thread waiting for another
<CODE>SELECT</CODE> to get a <CODE>WRITE LOCK</CODE>.
<LI>

Moved <CODE>wild_compare()</CODE> to string class to be able to use <CODE>LIKE</CODE> on
<CODE>BLOB</CODE>/<CODE>TEXT</CODE> columns with <CODE>\0</CODE>.
<LI>

Added <CODE>ESCAPE</CODE> option to <CODE>LIKE</CODE>.
<LI>

Added a lot more output to <CODE>mysqladmin debug</CODE>.
<LI>

You can now start <CODE>mysqld</CODE> on Windows with the <CODE>--flush</CODE> option.
This will flush all tables to disk after each update.  This makes things
much safer on the Windows platforms but also <STRONG>much</STRONG> slower.
</UL>



<H3><A NAME="News-3.22.8" HREF="manual_toc.html#News-3.22.8">D.5.28  Changes in release 3.22.8</A></H3>


<UL>
<LI>

Czech character sets should now work much better.  You must also install
<a HREF="http://www.mysql.com/Downloads/Patches/czech-3.22.8-patch">http://www.mysql.com/Downloads/Patches/czech-3.22.8-patch</a>.
This patch should also be installed if you are using a character set which
uses <CODE>my_strcoll()</CODE>!  The patch should always be safe to install (for any
system), but as this patch changes <CODE>ISAM</CODE> internals it's not yet in the
default distribution.
<LI>

<CODE>DATE_ADD()</CODE> and <CODE>DATE_SUB()</CODE> didn't work with group functions.
<LI>

<CODE>mysql</CODE> will now also try to reconnect on <CODE>USE DATABASE</CODE> commands.
<LI>

Fix problem with <CODE>ORDER BY</CODE> and <CODE>LEFT JOIN</CODE> and <CODE>const</CODE> tables.
<LI>

Fixed problem with <CODE>ORDER BY</CODE> if the first <CODE>ORDER BY</CODE> column
was a key and the rest of the <CODE>ORDER BY</CODE> columns wasn't part of the key.
<LI>

Fixed a big problem with <CODE>OPTIMIZE TABLE</CODE>.
<LI>

MySQL clients on NT will now by default first try to connect with
named pipes and after this with TCP/IP.
<LI>

Fixed a problem with <CODE>DROP TABLE</CODE> and <CODE>mysqladmin shutdown</CODE> on Windows
(a fatal bug from 3.22.6).
<LI>

Fixed problems with <CODE>TIME columns</CODE> and negative strings.
<LI>

Added an extra thread signal loop on shutdown to avoid some error messages
from the client.
<LI>

MySQL now uses the next available number as extension for the update
log file.
<LI>

Added patches for UNIXWARE 7.
</UL>



<H3><A NAME="News-3.22.7" HREF="manual_toc.html#News-3.22.7">D.5.29  Changes in release 3.22.7 (Sep 1998: Beta)</A></H3>


<UL>
<LI>

Added <CODE>LIMIT</CODE> clause for the <CODE>DELETE</CODE> statement.
<LI>

You can now use the <CODE>/*! ... */</CODE> syntax to hide MySQL-specific
keywords when you write portable code.  MySQL will parse the code
inside the comments as if the surrounding <CODE>/*!</CODE> and <CODE>*/</CODE> comment
characters didn't exist.
<LI>

<CODE>OPTIMIZE TABLE tbl_name</CODE> can now be used to reclaim disk space
after many deletes.  Currently, this uses <CODE>ALTER TABLE</CODE> to
regenerate the table, but in the future it will use an integrated
<CODE>isamchk</CODE> for more speed.
<LI>

Upgraded <CODE>libtool</CODE> to get the configure more portable.
<LI>

Fixed slow <CODE>UPDATE</CODE> and <CODE>DELETE</CODE> operations when using
<CODE>DATETIME</CODE> or <CODE>DATE</CODE> keys.
<LI>

Changed optimiser to make it better at deciding when to do a full join
and when using keys.
<LI>

You can now use <CODE>mysqladmin proc</CODE> to display information about your own
threads. Only users with the <CODE>PROCESS</CODE> privilege can get
information about all threads.
(In 4.0.2 one needs the <CODE>SUPER</CODE> privilege for this.)
<LI>

Added handling of formats <CODE>YYMMDD</CODE>, <CODE>YYYYMMDD</CODE>,
<CODE>YYMMDDHHMMSS</CODE> for numbers when using <CODE>DATETIME</CODE> and
<CODE>TIMESTAMP</CODE> types. (Formerly these formats only worked with strings.)
<LI>

Added connect option <CODE>CLIENT_IGNORE_SPACE</CODE> to allow use of spaces
after function names and before <SAMP>`('</SAMP> (Powerbuilder requires this).
This will make all function names reserved words.
<LI>

Added the <CODE>--log-long-format</CODE> option to <CODE>mysqld</CODE> to enable timestamps
and INSERT_ID's in the update log.
<LI>

Added <CODE>--where</CODE> option to <CODE>mysqldump</CODE> (patch by Jim Faucette).
<LI>

The lexical analyser now uses ``perfect hashing'' for faster parsing of SQL
statements.
</UL>



<H3><A NAME="News-3.22.6" HREF="manual_toc.html#News-3.22.6">D.5.30  Changes in release 3.22.6</A></H3>


<UL>
<LI>

Faster <CODE>mysqldump</CODE>.
<LI>

For the <CODE>LOAD DATA INFILE</CODE> statement, you can now use the new <CODE>LOCAL</CODE>
keyword to read the file from the client.  <CODE>mysqlimport</CODE> will
automatically use <CODE>LOCAL</CODE> when importing with the TCP/IP protocol.
<LI>

Fixed small optimise problem when updating keys.
<LI>

Changed makefiles to support shared libraries.
<LI>

MySQL-NT can now use named pipes, which means that you can now use
MySQL-NT without having to install TCP/IP.
</UL>



<H3><A NAME="News-3.22.5" HREF="manual_toc.html#News-3.22.5">D.5.31  Changes in release 3.22.5</A></H3>


<UL>
<LI>

All table lock handing is changed to avoid some very subtle
deadlocks when using <CODE>DROP TABLE</CODE>, <CODE>ALTER TABLE</CODE>, <CODE>DELETE FROM
TABLE</CODE> and <CODE>mysqladmin flush-tables</CODE> under heavy usage.
Changed locking code to get better handling of locks of different types.
<LI>

Updated <CODE>DBI</CODE> to 1.00 and <CODE>DBD</CODE> to 1.2.0.
<LI>

Added a check that the error message file contains error messages suitable for
the current version of <CODE>mysqld</CODE>. (To avoid errors if you accidentally
try to use an old error message file.)
<LI>

All count structures in the client (<CODE>affected_rows()</CODE>,
<CODE>insert_id()</CODE>, ...) are now of type <CODE>BIGINT</CODE> to allow 64-bit values
to be used.
This required a minor change in the MySQL protocol which should affect
only old clients when using tables with <CODE>AUTO_INCREMENT</CODE> values &#62; 16M.
<LI>

The return type of <CODE>mysql_fetch_lengths()</CODE> has changed from <CODE>uint *</CODE>
to <CODE>ulong *</CODE>. This may give a warning for old clients but should work
on most machines.
<LI>

Change <CODE>mysys</CODE> and <CODE>dbug</CODE> libraries to allocate all thread variables
in one struct.  This makes it easier to make a threaded <TT>`libmysql.dll'</TT>
library.
<LI>

Use the result from <CODE>gethostname()</CODE> (instead of <CODE>uname()</CODE>) when
constructing <TT>`.pid'</TT> file names.
<LI>

New better compressed server/client protocol.
<LI>

<CODE>COUNT()</CODE>, <CODE>STD()</CODE> and <CODE>AVG()</CODE> are extended to handle more than
4G rows.
<LI>

You can now store values in the range <CODE>-838:59:59</CODE> &#60;= x &#60;=
<CODE>838:59:59</CODE> in a <CODE>TIME</CODE> column.
<LI>

<STRONG>Warning: incompatible change!!</STRONG>
If you set a <CODE>TIME</CODE> column to too short a value, MySQL now
assumes the value is given as: <CODE>[[[D ]HH:]MM:]SS</CODE> instead of
<CODE>HH[:MM[:SS]]</CODE>.
<LI>

<CODE>TIME_TO_SEC()</CODE> and <CODE>SEC_TO_TIME()</CODE> can now handle negative times
and hours up to 32767.
<LI>

Added new option
<CODE>SET SQL_LOG_UPDATE={0|1}</CODE> to allow users with
the <CODE>PROCESS</CODE> privilege to bypass the update log.
(Modified patch from Sergey A Mukhin <a HREF="mailto:violet@rosnet.net">violet@rosnet.net</a>.)
<LI>

Fixed fatal bug in <CODE>LPAD()</CODE>.
<LI>

Initialise line buffer in <TT>`mysql.cc'</TT> to make <CODE>BLOB</CODE> reading from
pipes safer.
<LI>

Added <CODE>-O max_connect_errors=#</CODE> option to <CODE>mysqld</CODE>.
Connect errors are now reset for each correct connection.
<LI>

Increased the default value of <CODE>max_allowed_packet</CODE> to <CODE>1M</CODE> in
<CODE>mysqld</CODE>.
<LI>

Added <CODE>--low-priority-updates</CODE> option to <CODE>mysqld</CODE>, to give
table-modifying operations (<CODE>INSERT</CODE>, <CODE>REPLACE</CODE>, <CODE>UPDATE</CODE>,
<CODE>DELETE</CODE>) lower priority than retrievals.  You can now use
<CODE>{INSERT | REPLACE | UPDATE | DELETE} LOW_PRIORITY ...</CODE> You can
also use <CODE>SET SQL_LOW_PRIORITY_UPDATES={0|1}</CODE> to change
the priority for one thread.  One side effect is that <CODE>LOW_PRIORITY</CODE>
is now a reserved word. :(
<LI>

Add support for <CODE>INSERT INTO table ... VALUES(...),(...),(...)</CODE>,
to allow inserting multiple rows with a single statement.
<LI>

<CODE>INSERT INTO tbl_name</CODE> is now also cached when used with <CODE>LOCK TABLES</CODE>.
(Previously only <CODE>INSERT ... SELECT</CODE> and <CODE>LOAD DATA INFILE</CODE> were
cached.)
<LI>

Allow <CODE>GROUP BY</CODE> functions with <CODE>HAVING</CODE>:

<PRE>
mysql&#62; SELECT col FROM table GROUP BY col HAVING COUNT(*)&#62;0;
</PRE>

<LI>

<CODE>mysqld</CODE> will now ignore trailing <SAMP>`;'</SAMP> characters in queries. This
is to make it easier to migrate from some other SQL servers that require the
trailing <SAMP>`;'</SAMP>.
<LI>

Fix for corrupted fixed-format output generated by <CODE>SELECT INTO OUTFILE</CODE>.
<LI>

<STRONG>Warning: incompatible change!</STRONG>
Added Oracle <CODE>GREATEST()</CODE> and <CODE>LEAST()</CODE> functions.  You must now use
these instead of the <CODE>MAX()</CODE> and <CODE>MIN()</CODE> functions to get the
largest/smallest value from a list of values. These can now handle <CODE>REAL</CODE>,
<CODE>BIGINT</CODE> and string (<CODE>CHAR</CODE> or <CODE>VARCHAR</CODE>) values.
<LI>

<STRONG>Warning: incompatible change!</STRONG>
<CODE>DAYOFWEEK()</CODE> had offset 0 for Sunday. Changed the offset to 1.
<LI>

Give an error for queries that mix <CODE>GROUP BY</CODE> columns and fields when
there is no <CODE>GROUP BY</CODE> specification.
<LI>

Added <CODE>--vertical</CODE> option to <CODE>mysql</CODE>, for printing results in
vertical mode.
<LI>

Index-only optimisation; some queries are now resolved using
only indexes.  Until MySQL 4.0, this works only for numeric columns.
See section <A HREF="manual.html#MySQL_indexes">5.4.3  How MySQL Uses Indexes</A>.
<LI>

Lots of new benchmarks.
<LI>

A new C API chapter and lots of other improvements in the manual.
</UL>



<H3><A NAME="News-3.22.4" HREF="manual_toc.html#News-3.22.4">D.5.32  Changes in release 3.22.4</A></H3>


<UL>
<LI>

Added <CODE>--tmpdir</CODE> option to <CODE>mysqld</CODE>, for specifying the location
of the temporary file directory.
<LI>

MySQL now automatically changes a query from an ODBC client:

<PRE>
SELECT ... FROM table WHERE auto_increment_column IS NULL
</PRE>

to:

<PRE>
SELECT ... FROM table WHERE auto_increment_column == LAST_INSERT_ID()
</PRE>

This allows some ODBC programs (Delphi, Access) to retrieve the newly
inserted row to fetch the <CODE>AUTO_INCREMENT</CODE> id.
<LI>

<CODE>DROP TABLE</CODE> now waits for all users to free a table before deleting it.
<LI>

Fixed small memory leak in the new connect protocol.
<LI>

New functions <CODE>BIN()</CODE>, <CODE>OCT()</CODE>, <CODE>HEX()</CODE> and <CODE>CONV()</CODE> for
converting between different number bases.
<LI>

Added function <CODE>SUBSTRING()</CODE> with 2 arguments.
<LI>

If you created a table with a record length smaller than 5, you couldn't
delete rows from the table.
<LI>

Added optimisation to remove const reference tables from <CODE>ORDER BY</CODE> and
<CODE>GROUP BY</CODE>.
<LI>

<CODE>mysqld</CODE> now automatically disables system locking on Linux and Windows,
and for systems that use MIT-pthreads.  You can force the use of locking
with the <CODE>--enable-external-locking</CODE> option.
<LI>

Added <CODE>--console</CODE> option to <CODE>mysqld</CODE>, to force a console window
(for error messages) when using Windows.
<LI>

Fixed table locks for Windows.
<LI>

Allow <SAMP>`$'</SAMP> in identifiers.
<LI>

Changed name of user-specific configuration file from <TT>`my.cnf'</TT> to
<TT>`.my.cnf'</TT> (Unix only).
<LI>

Added <CODE>DATE_ADD()</CODE> and <CODE>DATE_SUB()</CODE> functions.
</UL>



<H3><A NAME="News-3.22.3" HREF="manual_toc.html#News-3.22.3">D.5.33  Changes in release 3.22.3</A></H3>


<UL>
<LI>

Fixed a lock problem (bug in MySQL Version 3.22.1) when closing temporary tables.
<LI>

Added missing <CODE>mysql_ping()</CODE> to the client library.
<LI>

Added <CODE>--compress</CODE> option to all MySQL clients.
<LI>

Changed <CODE>byte</CODE> to <CODE>char</CODE> in <TT>`mysql.h'</TT> and <TT>`mysql_com.h'</TT>.
</UL>



<H3><A NAME="News-3.22.2" HREF="manual_toc.html#News-3.22.2">D.5.34  Changes in release 3.22.2</A></H3>


<UL>
<LI>

Searching on multiple constant keys that matched more than 30% of the rows
didn't always use the best possible key.
<LI>

New functions <CODE>&#60;&#60;</CODE>, <CODE>&#62;&#62;</CODE>, <CODE>RPAD()</CODE> and <CODE>LPAD()</CODE>.
<LI>

You can now save default options (like passwords) in a configuration file
(<TT>`my.cnf'</TT>).
<LI>

Lots of small changes to get <CODE>ORDER BY</CODE> to work when no records are found
when using fields that are not in <CODE>GROUP BY</CODE> (MySQL extension).
<LI>

Added <CODE>--chroot</CODE> option to <CODE>mysqld</CODE>, to start <CODE>mysqld</CODE> in
a chroot environment (by Nikki Chumakov <a HREF="mailto:nikkic@cityline.ru">nikkic@cityline.ru</a>).
<LI>

Trailing spaces are now ignored when comparing case-sensitive strings;
this should fix some problems with ODBC and flag 512!
<LI>

Fixed a core dump bug in the range optimiser.
<LI>

Added <CODE>--one-thread</CODE> option to <CODE>mysqld</CODE>, for debugging with
LinuxThreads (or <CODE>glibc</CODE>).  (This replaces the <CODE>-T32</CODE> flag)
<LI>

Added <CODE>DROP TABLE IF EXISTS</CODE> to prevent an error from occurring if the
table doesn't exist.
<LI>

<CODE>IF</CODE> and <CODE>EXISTS</CODE> are now reserved words (they would have to
be sooner or later).
<LI>

Added lots of new options to <CODE>mysqldump</CODE>.
<LI>

Server error messages are now in <TT>`mysqld_error.h'</TT>.
<LI>

The server/client protocol now supports compression.
<LI>

All bug fixes from MySQL Version 3.21.32.
</UL>



<H3><A NAME="News-3.22.1" HREF="manual_toc.html#News-3.22.1">D.5.35  Changes in release 3.22.1 (Jun 1998: Alpha)</A></H3>


<UL>
<LI>

Added new C API function <CODE>mysql_ping()</CODE>.
<LI>

Added new API functions <CODE>mysql_init()</CODE> and <CODE>mysql_options()</CODE>.
You now MUST call <CODE>mysql_init()</CODE> before you call
<CODE>mysql_real_connect()</CODE>.
You don't have to call <CODE>mysql_init()</CODE> if you only use
<CODE>mysql_connect()</CODE>.
<LI>

Added <CODE>mysql_options(...,MYSQL_OPT_CONNECT_TIMEOUT,...)</CODE> so you can set a
timeout for connecting to a server.
<LI>

Added <CODE>--timeout</CODE> option to <CODE>mysqladmin</CODE>, as a test of
<CODE>mysql_options()</CODE>.
<LI>

Added <CODE>AFTER column</CODE> and <CODE>FIRST</CODE> options to
<CODE>ALTER TABLE ... ADD columns</CODE>.
This makes it possible to add a new column at some specific location
within a row in an existing table.
<LI>

<CODE>WEEK()</CODE> now takes an optional argument to allow handling of weeks when
the week starts on Monday (some European countries).  By default,
<CODE>WEEK()</CODE> assumes the week starts on Sunday.
<LI>

<CODE>TIME</CODE> columns weren't stored properly (bug in MySQL Version 3.22.0).
<LI>

<CODE>UPDATE</CODE> now returns information about how many rows were
matched and updated, and how many ``warnings'' occurred when doing the update.
<LI>

Fixed incorrect result from <CODE>FORMAT(-100,2)</CODE>.
<LI>

<CODE>ENUM</CODE> and <CODE>SET</CODE> columns were compared in binary (case-sensitive)
fashion; changed to be case-insensitive.
</UL>



<H3><A NAME="News-3.22.0" HREF="manual_toc.html#News-3.22.0">D.5.36  Changes in release 3.22.0</A></H3>


<UL>
<LI>

New (backward-compatible) connect protocol that allows you to
specify the database to use when connecting, to get much faster
connections to a specific database.

The <CODE>mysql_real_connect()</CODE> call is changed to:


<PRE>
mysql_real_connect(MYSQL *mysql, const char *host, const char *user,
                   const char *passwd, const char *db, uint port,
                   const char *unix_socket, uint client_flag)
</PRE>

<LI>

Each connection is handled by its own thread, rather than by the
master <CODE>accept()</CODE> thread.  This fixes permanently the telnet bug
that was a topic on the mail list some time ago.
<LI>

All TCP/IP connections are now checked with backward-resolution of
the hostname to get better security. <CODE>mysqld</CODE> now has a local hostname
resolver cache so connections should actually be faster than before,
even with this feature.
<LI>

A site automatically will be blocked from future connections if someone
repeatedly connects with an ``improper header'' (like when one uses telnet).
<LI>

You can now refer to tables in different databases with references of the form
<CODE>tbl_name@db_name</CODE> or <CODE>db_name.tbl_name</CODE>.  This makes it possible to
give a user read access to some tables and write access to others simply by
keeping them in different databases!
<LI>

Added <CODE>--user</CODE> option to <CODE>mysqld</CODE>, to allow it to run
as another Unix user (if it is started as the Unix <CODE>root</CODE> user).
<LI>

Added caching of users and access rights (for faster access rights checking)
<LI>

Normal users (not anonymous ones) can change their password with
<CODE>mysqladmin password 'new_password'</CODE>.  This uses encrypted passwords
that are not logged in the normal MySQL log!
<LI>

All important string functions are now coded in assembler for x86 Linux
machines.  This gives a speedup of 10% in many cases.
<LI>

For tables that have many columns, the column names are now hashed for
much faster column name lookup (this will speed up some benchmark
tests a lot!)
<LI>

Some benchmarks are changed to get better individual timing.
(Some loops were so short that a specific test took &#60; 2 seconds. The
loops have been changed to take about 20 seconds to make it easier
to compare different databases. A test that took 1-2 seconds before
now takes 11-24 seconds, which is much better)
<LI>

Re-arranged <CODE>SELECT</CODE> code to handle some very specific queries
involving group functions (like <CODE>COUNT(*)</CODE>) without a <CODE>GROUP BY</CODE> but
with <CODE>HAVING</CODE>. The following now works:

<PRE>
mysql&#62; SELECT COUNT(*) as C FROM table HAVING C &#62; 1;
</PRE>

<LI>

Changed the protocol for field functions to be faster and avoid some
calls to <CODE>malloc()</CODE>.
<LI>

Added <CODE>-T32</CODE> option to <CODE>mysqld</CODE>, for running all queries under the
main thread.  This makes it possible to debug <CODE>mysqld</CODE> under Linux with
<CODE>gdb</CODE>!
<LI>

Added optimisation of <CODE>not_null_column IS NULL</CODE> (needed for some Access
queries).
<LI>

Allow <CODE>STRAIGHT_JOIN</CODE> to be used between two tables to force the optimiser
to join them in a specific order.
<LI>

String functions now return <CODE>VARCHAR</CODE> rather than <CODE>CHAR</CODE> and
the column type is now <CODE>VARCHAR</CODE> for fields saved as <CODE>VARCHAR</CODE>.
This should make the <CODE>MyODBC</CODE> driver better, but may break some old
MySQL clients that don't handle <CODE>FIELD_TYPE_VARCHAR</CODE> the same
way as <CODE>FIELD_TYPE_CHAR</CODE>.
<LI>

<CODE>CREATE INDEX</CODE> and <CODE>DROP INDEX</CODE> are now implemented through
<CODE>ALTER TABLE</CODE>.
<CODE>CREATE TABLE</CODE> is still the recommended (fast) way to create indexes.
<LI>

Added <CODE>--set-variable</CODE> option <CODE>wait_timeout</CODE> to <CODE>mysqld</CODE>.
<LI>

Added time column to <CODE>mysqladmin processlist</CODE> to show how long a query
has taken or how long a thread has slept.
<LI>

Added lots of new variables to <CODE>show variables</CODE> and some new to
<CODE>show status</CODE>.
<LI>

Added new type <CODE>YEAR</CODE>. <CODE>YEAR</CODE> is stored in 1 byte with allowable
values of 0, and 1901 to 2155.
<LI>

Added new <CODE>DATE</CODE> type that is stored in 3 bytes rather than 4 bytes.
All new tables are created with the new date type if you don't use the
<CODE>--old-protocol</CODE> option to <CODE>mysqld</CODE>.
<LI>

Fixed bug in record caches; for some queries, you could get
<CODE>Error from table handler: #</CODE> on some operating systems.
<LI>

Added <CODE>--enable-assembler</CODE> option to <CODE>configure</CODE>, for x86 machines
(tested on Linux + <CODE>gcc</CODE>).  This will enable assembler functions for the
most important string functions for more speed!
</UL>



<H2><A NAME="News-3.21.x" HREF="manual_toc.html#News-3.21.x">D.6  Changes in release 3.21.x</A></H2>

<P>
<A NAME="IDX1885"></A>

</P>
<P>
Version 3.21 is quite old now, and should be avoided if possible.  This
information is kept here for historical purposes only.

</P>



<H3><A NAME="News-3.21.33" HREF="manual_toc.html#News-3.21.33">D.6.1  Changes in release 3.21.33</A></H3>


<UL>
<LI>

Fixed problem when sending <CODE>SIGHUP</CODE> to <CODE>mysqld</CODE>;
<CODE>mysqld</CODE> core dumped when starting from boot on some systems.
<LI>

Fixed problem with losing a little memory for some connections.
<LI>

<CODE>DELETE FROM tbl_name</CODE> without a <CODE>WHERE</CODE> condition is now done the
long way when you use <CODE>LOCK TABLES</CODE> or if the table is in use, to
avoid race conditions.
<LI>

<CODE>INSERT INTO TABLE (timestamp_column) VALUES (NULL);</CODE> didn't set timestamp.
</UL>



<H3><A NAME="News-3.21.32" HREF="manual_toc.html#News-3.21.32">D.6.2  Changes in release 3.21.32</A></H3>


<UL>
<LI>

Fixed some possible race conditions when doing many reopen/close on the same
tables under heavy load!  This can happen if you execute <CODE>mysqladmin
refresh</CODE> often. This could in some very rare cases corrupt the header of the
index file and cause error 126 or 138.

<LI>

Fixed fatal bug in <CODE>refresh()</CODE> when running with the
<CODE>--skip-external-locking</CODE> option.  There was a ``very small'' time gap after
a <CODE>mysqladmin refresh</CODE> when a table could be corrupted if one
thread updated a table while another thread did <CODE>mysqladmin
refresh</CODE> and another thread started a new update ont the same table
before the first thread had finished.  A refresh (or
<CODE>--flush-tables</CODE>) will now not return until all used tables are
closed!
<LI>

<CODE>SELECT DISTINCT</CODE> with a <CODE>WHERE</CODE> clause that didn't match any rows
returned a row in some contexts (bug only in 3.21.31).
<LI>

<CODE>GROUP BY</CODE> + <CODE>ORDER BY</CODE> returned one empty row when no rows where
found.
<LI>

Fixed a bug in the range optimiser that wrote
<CODE>Use_count: Wrong count for ...</CODE> in the error log file.
</UL>



<H3><A NAME="News-3.21.31" HREF="manual_toc.html#News-3.21.31">D.6.3  Changes in release 3.21.31</A></H3>


<UL>
<LI>

Fixed a sign extension problem for the <CODE>TINYINT</CODE> type on Irix.
<LI>

Fixed problem with <CODE>LEFT("constant_string",function)</CODE>.
<LI>

Fixed problem with <CODE>FIND_IN_SET()</CODE>.
<LI>

<CODE>LEFT JOIN</CODE> core dumped if the second table is used with a constant
<CODE>WHERE/ON</CODE> expression that uniquely identifies one record.
<LI>

Fixed problems with <CODE>DATE_FORMAT()</CODE> and incorrect dates.
<CODE>DATE_FORMAT()</CODE> now ignores <CODE>'%'</CODE> to make it possible to extend
it more easily in the future.
</UL>



<H3><A NAME="News-3.21.30" HREF="manual_toc.html#News-3.21.30">D.6.4  Changes in release 3.21.30</A></H3>


<UL>
<LI>

<CODE>mysql</CODE> now returns an exit code &#62; 0 if the query returned an error.
<LI>

Saving of command-line history to file in <CODE>mysql</CODE> client.
By Tommy Larsen <a HREF="mailto:tommy@mix.hive.no">tommy@mix.hive.no</a>.
<LI>

Fixed problem with empty lines that were ignored in <TT>`mysql.cc'</TT>.
<LI>

Save the pid of the signal handler thread in the pid file instead
of the pid of the main thread.
<LI>

Added patch by <a HREF="mailto:tommy@valley.ne.jp">tommy@valley.ne.jp</a> to support Japanese characters
SJIS and UJIS.
<LI>

Changed <CODE>safe_mysqld</CODE> to redirect startup messages to
<CODE>'hostname'.err</CODE> instead
of <CODE>'hostname'.log</CODE> to reclaim file space on <CODE>mysqladmin refresh</CODE>.
<LI>

<CODE>ENUM</CODE> always had the first entry as default value.
<LI>

<CODE>ALTER TABLE</CODE> wrote two entries to the update log.
<LI>

<CODE>sql_acc()</CODE> now closes the <CODE>mysql</CODE> grant tables after a reload to
save table space and memory.
<LI>

Changed <CODE>LOAD DATA</CODE> to use less memory with tables and <CODE>BLOB</CODE>
columns.
<LI>

Sorting on a function which made a division / 0 produced a wrong set
in some cases.
<LI>

Fixed <CODE>SELECT</CODE> problem with <CODE>LEFT()</CODE> when using the <CODE>czech</CODE>
character set.
<LI>

Fixed problem in <CODE>isamchk</CODE>; it couldn't repair a packed table in a very
unusual case.
<LI>

<CODE>SELECT</CODE> statements with <CODE>&#38;</CODE> or <CODE>|</CODE> (bit functions) failed on
columns with <CODE>NULL</CODE> values.
<LI>

When comparing a field = field, where one of the fields was a part key,
only the length of the part key was compared.
</UL>



<H3><A NAME="News-3.21.29" HREF="manual_toc.html#News-3.21.29">D.6.5  Changes in release 3.21.29</A></H3>


<UL>
<LI>

<CODE>LOCK TABLES</CODE> + <CODE>DELETE from tbl_name</CODE> never removed locks properly.
<LI>

Fixed problem when grouping on an <CODE>OR</CODE> function.
<LI>

Fixed permission problem with <CODE>umask()</CODE> and creating new databases.
<LI>

Fixed permission problem on result file with <CODE>SELECT ... INTO OUTFILE ...</CODE>
<LI>

Fixed problem in range optimiser (core dump) for a very complex query.
<LI>

Fixed problem when using <CODE>MIN(integer)</CODE> or <CODE>MAX(integer)</CODE> in
<CODE>GROUP BY</CODE>.
<LI>

Fixed bug on Alpha when using integer keys. (Other keys worked on Alpha.)
<LI>

Fixed bug in <CODE>WEEK("XXXX-xx-01")</CODE>.
</UL>



<H3><A NAME="News-3.21.28" HREF="manual_toc.html#News-3.21.28">D.6.6  Changes in release 3.21.28</A></H3>


<UL>
<LI>

Fixed socket permission (clients couldn't connect to Unix socket on Linux).
<LI>

Fixed bug in record caches; for some queries, you could get
<CODE>Error from table handler: #</CODE> on some operating systems.
</UL>



<H3><A NAME="News-3.21.27" HREF="manual_toc.html#News-3.21.27">D.6.7  Changes in release 3.21.27</A></H3>


<UL>
<LI>

Added user level lock functions <CODE>GET_LOCK(string,timeout)</CODE>,
<CODE>RELEASE_LOCK(string)</CODE>.
<LI>

Added <CODE>Opened_tables</CODE> to <CODE>show status</CODE>.
<LI>

Changed connect timeout to 3 seconds to make it somewhat harder
for crackers to kill <CODE>mysqld</CODE> through telnet + TCP/IP.
<LI>

Fixed bug in range optimiser when using
<CODE>WHERE key_part_1 &#62;= something AND key_part_2 &#60;= something_else</CODE>.
<LI>

Changed <CODE>configure</CODE> for detection of FreeBSD 3.0 9803xx and above
<LI>

<CODE>WHERE</CODE> with <CODE>string_col_key = constant_string</CODE> didn't always
find all rows if the column had many values differing only with
characters of the same sort value (like e and 'e).
<LI>

Strings keys looked up with 'ref' were not compared in case-sensitive fashion.
<LI>

Added <CODE>umask()</CODE> to make log files non-readable for normal users.
<LI>

Ignore users with old (8-byte) password on startup if not using
<CODE>--old-protocol</CODE> option to <CODE>mysqld</CODE>.
<LI>

<CODE>SELECT</CODE> which matched all key fields returned the values in the
case of the matched values, not of the found values. (Minor problem.)
</UL>



<H3><A NAME="News-3.21.26" HREF="manual_toc.html#News-3.21.26">D.6.8  Changes in release 3.21.26</A></H3>


<UL>
<LI>

<CODE>FROM_DAYS(0)</CODE> now returns "0000-00-00".
<LI>

In <CODE>DATE_FORMAT()</CODE>, PM and AM were swapped for hours 00 and 12.
<LI>

Extended the default maximum key size to 256.
<LI>

Fixed bug when using <CODE>BLOB</CODE>/<CODE>TEXT</CODE> in <CODE>GROUP BY</CODE> with many
tables.
<LI>

An <CODE>ENUM</CODE> field that is not declared <CODE>NOT NULL</CODE> has <CODE>NULL</CODE> as
the default value.
(Previously, the default value was the first enumeration value.)
<LI>

Fixed bug in the join optimiser code when using many part keys
on the same key:  <CODE>INDEX (Organisation,Surname(35),Initials(35))</CODE>.
<LI>

Added some tests to the table order optimiser to get some cases with
<CODE>SELECT ... FROM many_tables</CODE> much faster.
<LI>

Added a retry loop around <CODE>accept()</CODE> to possibly fix some problems on some
Linux machines.
</UL>



<H3><A NAME="News-3.21.25" HREF="manual_toc.html#News-3.21.25">D.6.9  Changes in release 3.21.25</A></H3>


<UL>
<LI>

Changed <CODE>typedef 'string'</CODE> to <CODE>typedef 'my_string'</CODE> for better
portability.
<LI>

You can now kill threads that are waiting on a disk-full condition.
<LI>

Fixed some problems with UDF functions.
<LI>

Added long options to <CODE>isamchk</CODE>. Try <CODE>isamchk --help</CODE>.
<LI>

Fixed a bug when using 8 bytes long (alpha); <CODE>filesort()</CODE> didn't work.
Affects <CODE>DISTINCT</CODE>, <CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> on 64-bit
processors.
</UL>



<H3><A NAME="News-3.21.24" HREF="manual_toc.html#News-3.21.24">D.6.10  Changes in release 3.21.24</A></H3>


<UL>
<LI>

Dynamic loadable functions. Based on source from Alexis Mikhailov.
<LI>

You couldn't delete from a table if no one had done a <CODE>SELECT</CODE> on the
table.
<LI>

Fixed problem with range optimiser with many <CODE>OR</CODE> operators on key parts
inside each other.
<LI>

Recoded <CODE>MIN()</CODE> and <CODE>MAX()</CODE> to work properly with strings and
<CODE>HAVING</CODE>.
<LI>

Changed default umask value for new files from <CODE>0664</CODE> to <CODE>0660</CODE>.
<LI>

Fixed problem with <CODE>LEFT JOIN</CODE> and constant expressions in the <CODE>ON</CODE>
part.
<LI>

Added Italian error messages from <a HREF="mailto:brenno@dewinter.com">brenno@dewinter.com</a>.
<LI>

<CODE>configure</CODE> now works better on OSF/1 (tested on 4.0D).
<LI>

Added hooks to allow <CODE>LIKE</CODE> optimisation with international character
support.
<LI>

Upgraded <CODE>DBI</CODE> to 0.93.
</UL>



<H3><A NAME="News-3.21.23" HREF="manual_toc.html#News-3.21.23">D.6.11  Changes in release 3.21.23</A></H3>


<UL>
<LI>

The following symbols are now reserved words:
<CODE>TIME</CODE>, <CODE>DATE</CODE>, <CODE>TIMESTAMP</CODE>, <CODE>TEXT</CODE>, <CODE>BIT</CODE>,
<CODE>ENUM</CODE>, <CODE>NO</CODE>, <CODE>ACTION</CODE>, <CODE>CHECK</CODE>, <CODE>YEAR</CODE>,
<CODE>MONTH</CODE>, <CODE>DAY</CODE>, <CODE>HOUR</CODE>, <CODE>MINUTE</CODE>, <CODE>SECOND</CODE>,
<CODE>STATUS</CODE>, <CODE>VARIABLES</CODE>.
<LI>

Setting a <CODE>TIMESTAMP</CODE> to <CODE>NULL</CODE> in <CODE>LOAD DATA INFILE ...</CODE> didn't
set the current time for the <CODE>TIMESTAMP</CODE>.
<LI>

Fix <CODE>BETWEEN</CODE> to recognise binary strings. Now <CODE>BETWEEN</CODE> is
case-sensitive.
<LI>

Added <CODE>--skip-thread-priority</CODE> option to <CODE>mysqld</CODE>, for systems
where <CODE>mysqld</CODE>'s thread scheduling doesn't work properly (BSDI 3.1).
<LI>

Added ODBC functions <CODE>DAYNAME()</CODE> and <CODE>MONTHNAME()</CODE>.
<LI>

Added function <CODE>TIME_FORMAT()</CODE>.  This works like <CODE>DATE_FORMAT()</CODE>,
but takes a time string (<CODE>'HH:MM:DD'</CODE>) as argument.
<LI>

Fixed unlikely(?) key optimiser bug when using <CODE>OR</CODE>s of key parts
inside <CODE>AND</CODE>s.
<LI>

Added <CODE>variables</CODE> command to <CODE>mysqladmin</CODE>.
<LI>

A lot of small changes to the binary releases.
<LI>

Fixed a bug in the new protocol from MySQL Version 3.21.20.
<LI>

Changed <CODE>ALTER TABLE</CODE> to work with Windows (Windows can't rename
open files).  Also fixed a couple of small bugs in the Windows version.
<LI>

All standard MySQL clients are now ported to MySQL-Windows.
<LI>

MySQL can now be started as a service on NT.
</UL>



<H3><A NAME="News-3.21.22" HREF="manual_toc.html#News-3.21.22">D.6.12  Changes in release 3.21.22</A></H3>


<UL>
<LI>

Starting with this version, all MySQL distributions will be
configured, compiled and tested with <CODE>crash-me</CODE> and the benchmarks on
the following platforms: SunOS 5.6 sun4u, SunOS 5.5.1 sun4u, SunOS 4.14 sun4c,
SunOS 5.6 i86pc, Irix 6.3 mips5k, HP-UX 10.20 hppa, AIX 4.2.1 ppc,
OSF/1 V4.0 alpha, FreeBSD 2.2.2 i86pc and BSDI 3.1 i386.
<LI>

Fix <CODE>COUNT(*)</CODE> problems when the <CODE>WHERE</CODE> clause didn't match any
records.  (Bug from 3.21.17.)
<LI>

Removed that <CODE>NULL = NULL</CODE> is true.  Now you must use <CODE>IS NULL</CODE>
or <CODE>IS NOT NULL</CODE> to test whether a value is <CODE>NULL</CODE>.
(This is according to ANSI SQL but may break
old applications that are ported from <CODE>mSQL</CODE>.)
You can get the old behaviour by compiling with <CODE>-DmSQL_COMPLIANT</CODE>.
<LI>

Fixed bug that core dumped when using many <CODE>LEFT OUTER JOIN</CODE> clauses.
<LI>

Fixed bug in <CODE>ORDER BY</CODE> on string formula with possible <CODE>NULL</CODE> values.
<LI>

Fixed problem in range optimiser when using <CODE>&#60;=</CODE> on sub index.
<LI>

Added functions <CODE>DAYOFYEAR()</CODE>, <CODE>DAYOFMONTH()</CODE>, <CODE>MONTH()</CODE>,
<CODE>YEAR()</CODE>, <CODE>WEEK()</CODE>, <CODE>QUARTER()</CODE>, <CODE>HOUR()</CODE>, <CODE>MINUTE()</CODE>,
<CODE>SECOND()</CODE> and <CODE>FIND_IN_SET()</CODE>.
<LI>

Added <CODE>SHOW VARIABLES</CODE> command.
<LI>

Added support of ``long constant strings'' from ANSI SQL:

<PRE>
mysql&#62; SELECT 'first ' 'second';       -&#62; 'first second'
</PRE>

<LI>

Upgraded Msql-Mysql-modules to 1.1825.
<LI>

Upgraded <CODE>mysqlaccess</CODE> to 2.02.
<LI>

Fixed problem with Russian character set and <CODE>LIKE</CODE>.
<LI>

Ported to OpenBSD 2.1.
<LI>

New Dutch error messages.
</UL>



<H3><A NAME="News-3.21.21a" HREF="manual_toc.html#News-3.21.21a">D.6.13  Changes in release 3.21.21a</A></H3>


<UL>
<LI>

Configure changes for some operating systems.
</UL>



<H3><A NAME="News-3.21.21" HREF="manual_toc.html#News-3.21.21">D.6.14  Changes in release 3.21.21</A></H3>


<UL>
<LI>

Fixed optimiser bug when using
<CODE>WHERE data_field = date_field2 AND date_field2 = constant</CODE>.
<LI>

Added <CODE>SHOW STATUS</CODE> command.
<LI>

Removed <TT>`manual.ps'</TT> from the source distribution to make it smaller.
</UL>



<H3><A NAME="News-3.21.20" HREF="manual_toc.html#News-3.21.20">D.6.15  Changes in release 3.21.20</A></H3>


<UL>
<LI>

Changed the maximum table name and column name lengths from 32 to 64.
<LI>

Aliases can now be of ``any'' length.
<LI>

Fixed <CODE>mysqladmin stat</CODE> to return the right number of queries.
<LI>

Changed protocol (downward compatible) to mark if a column has the
<CODE>AUTO_INCREMENT</CODE> attribute or is a <CODE>TIMESTAMP</CODE>. This is needed for
the new Java driver.
<LI>

Added Hebrew sorting order by Zeev Suraski.
<LI>

Solaris 2.6: Fixed <CODE>configure</CODE> bugs and increased maximum table size
from 2G to 4G.
</UL>



<H3><A NAME="News-3.21.19" HREF="manual_toc.html#News-3.21.19">D.6.16  Changes in release 3.21.19</A></H3>


<UL>
<LI>

Upgraded <CODE>DBD</CODE> to 1.1823. This version implements <CODE>mysql_use_result</CODE>
in <CODE>DBD-Mysql</CODE>.
<LI>

Benchmarks updated for empress (by Luuk).
<LI>

Fixed a case of slow range searching.
<LI>

Configure fixes (<TT>`Docs'</TT> directory).
<LI>

Added function <CODE>REVERSE()</CODE> (by Zeev Suraski).
</UL>



<H3><A NAME="News-3.21.18" HREF="manual_toc.html#News-3.21.18">D.6.17  Changes in release 3.21.18</A></H3>


<UL>
<LI>

Issue error message if client C functions are called in wrong order.
<LI>

Added automatic reconnect to the <TT>`libmysql.c'</TT> library. If a write command
fails, an automatic reconnect is done.
<LI>

Small sort sets no longer use temporary files.
<LI>

Upgraded <CODE>DBI</CODE> to 0.91.
<LI>

Fixed a couple of problems with <CODE>LEFT OUTER JOIN</CODE>.
<LI>

Added <CODE>CROSS JOIN</CODE> syntax. <CODE>CROSS</CODE> is now a reserved word.
<LI>

Recoded <CODE>yacc</CODE>/<CODE>bison</CODE> stack allocation to be even safer and to allow
MySQL to handle even bigger expressions.
<LI>

Fixed a couple of problems with the update log.
<LI>

<CODE>ORDER BY</CODE> was slow when used with key ranges.
</UL>



<H3><A NAME="News-3.21.17" HREF="manual_toc.html#News-3.21.17">D.6.18  Changes in release 3.21.17</A></H3>


<UL>
<LI>

Changed documentation string of <CODE>--with-unix-socket-path</CODE> to avoid
confusion.
<LI>

Added ODBC and ANSI SQL style <CODE>LEFT OUTER JOIN</CODE>.
<LI>

The following are new reserved words: <CODE>LEFT</CODE>, <CODE>NATURAL</CODE>,
<CODE>USING</CODE>.
<LI>

The client library now uses the value of the environment variable
<CODE>MYSQL_HOST</CODE> as the default host if it's defined.
<LI>

<CODE>SELECT col_name, SUM(expr)</CODE> now returns <CODE>NULL</CODE> for <CODE>col_name</CODE>
when there are matching rows.
<LI>

Fixed problem with comparing binary strings and <CODE>BLOB</CODE>s with ASCII
characters over 127.
<LI>

Fixed lock problem: when freeing a read lock on a table with multiple
read locks, a thread waiting for a write lock would have been given the lock.
This shouldn't affect data integrity, but could possibly make <CODE>mysqld</CODE>
restart if one thread was reading data that another thread modified.
<LI>

<CODE>LIMIT offset,count</CODE> didn't work in <CODE>INSERT ... SELECT</CODE>.
<LI>

Optimised key block caching. This will be quicker than the old algorithm when
using bigger key caches.
</UL>



<H3><A NAME="News-3.21.16" HREF="manual_toc.html#News-3.21.16">D.6.19  Changes in release 3.21.16</A></H3>


<UL>
<LI>

Added ODBC 2.0 &#38; 3.0 functions <CODE>POWER()</CODE>, <CODE>SPACE()</CODE>,
<CODE>COT()</CODE>, <CODE>DEGREES()</CODE>, <CODE>RADIANS()</CODE>, <CODE>ROUND(2 arg)</CODE>
and <CODE>TRUNCATE()</CODE>.
<LI>

<STRONG>Warning: Incompatible change!</STRONG> <CODE>LOCATE()</CODE> parameters were
swapped according to ODBC standard. Fixed.
<LI>

Added function <CODE>TIME_TO_SEC()</CODE>.
<LI>

In some cases, default values were not used for <CODE>NOT NULL</CODE> fields.
<LI>

Timestamp wasn't always updated properly in <CODE>UPDATE SET ...</CODE> statements.
<LI>

Allow empty strings as default values for <CODE>BLOB</CODE> and <CODE>TEXT</CODE>, to
be compatible with <CODE>mysqldump</CODE>.
</UL>



<H3><A NAME="News-3.21.15" HREF="manual_toc.html#News-3.21.15">D.6.20  Changes in release 3.21.15</A></H3>


<UL>
<LI>

<STRONG>Warning: Incompatible change!</STRONG> <CODE>mysqlperl</CODE> is now from
Msql-Mysql-modules. This means that <CODE>connect()</CODE> now takes
<CODE>host</CODE>, <CODE>database</CODE>, <CODE>user</CODE>, <CODE>password</CODE> arguments! The old
version took <CODE>host</CODE>, <CODE>database</CODE>, <CODE>password</CODE>, <CODE>user</CODE>.
<LI>

Allow <CODE>DATE '1997-01-01'</CODE>, <CODE>TIME '12:10:10'</CODE> and
<CODE>TIMESTAMP '1997-01-01 12:10:10'</CODE> formats required by ANSI SQL.
<STRONG>Warning: Incompatible change!</STRONG> This has the unfortunate
side-effect that you no longer can have columns named <CODE>DATE</CODE>, <CODE>TIME</CODE>
or <CODE>TIMESTAMP</CODE>. :( Old columns can still be accessed through
<CODE>tablename.columnname</CODE>!)
<LI>

Changed Makefiles to hopefully work better with BSD systems. Also,
<TT>`manual.dvi'</TT> is now included in the distribution to avoid having stupid
<CODE>make</CODE> programs trying to rebuild it.
<LI>

<CODE>readline</CODE> library upgraded to version 2.1.
<LI>

A new sortorder german-1. That is a normal ISO-Latin1 with a german sort
order.
<LI>

Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> is now included in the distribution. <CODE>DBI</CODE>
is now the recommended way to connect to MySQL from Perl.
<LI>

New portable benchmark suite with <CODE>DBD</CODE>, with test results from
<CODE>mSQL</CODE> 2.0.3, MySQL, PostgreSQL 6.2.1 and Solid server 2.2.
<LI>

<CODE>crash-me</CODE> is now included with the benchmarks; this is a Perl program
designed to find as many limits as possible in a SQL server. Tested with
<CODE>mSQL</CODE>, PostgreSQL, Solid and MySQL.
<LI>

Fixed bug in range-optimiser that crashed MySQL on some queries.
<LI>

Table and column name completion for <CODE>mysql</CODE> command-line tool, by Zeev
Suraski and Andi Gutmans.
<LI>

Added new command <CODE>REPLACE</CODE> that works like <CODE>INSERT</CODE> but
replaces conflicting records with the new record. <CODE>REPLACE INTO
TABLE ... SELECT ...</CODE> works also.
<LI>

Added new commands <CODE>CREATE DATABASE db_name</CODE> and <CODE>DROP
DATABASE db_name</CODE>.
<LI>

Added <CODE>RENAME</CODE> option to <CODE>ALTER TABLE</CODE>: <CODE>ALTER TABLE name
RENAME TO new_name</CODE>.
<LI>

<CODE>make_binary_distribution</CODE> now includes <TT>`libgcc.a'</TT> in
<TT>`libmysqlclient.a'</TT>. This should make linking work for people who don't
have <CODE>gcc</CODE>.
<LI>

Changed <CODE>net_write()</CODE> to <CODE>my_net_write()</CODE> because of a name
conflict with Sybase.
<LI>

<A NAME="IDX1886"></A>
<A NAME="IDX1887"></A>
New function <CODE>DAYOFWEEK()</CODE> compatible with ODBC.
<LI>

Stack checking and <CODE>bison</CODE> memory overrun checking to make MySQL
safer with weird queries.
</UL>



<H3><A NAME="News-3.21.14b" HREF="manual_toc.html#News-3.21.14b">D.6.21  Changes in release 3.21.14b</A></H3>


<UL>
<LI>

Fixed a couple of small <CODE>configure</CODE> problems on some platforms.
</UL>



<H3><A NAME="News-3.21.14a" HREF="manual_toc.html#News-3.21.14a">D.6.22  Changes in release 3.21.14a</A></H3>


<UL>
<LI>

Ported to SCO Openserver 5.0.4  with FSU Pthreads.
<LI>

HP-UX 10.20 should work.
<LI>

Added new function <CODE>DATE_FORMAT()</CODE>.
<LI>

Added <CODE>NOT IN</CODE>.
<LI>

Added automatic removal of 'ODBC function conversions': <CODE>{fn now() }</CODE>
<LI>

Handle ODBC 2.50.3 option flags.
<LI>

Fixed comparison of <CODE>DATE</CODE> and <CODE>TIME</CODE> values with <CODE>NULL</CODE>.
<LI>

Changed language name from germany to german to be consistent with
the other language names.
<LI>

Fixed sorting problem on functions returning a <CODE>FLOAT</CODE>. Previously, the
values were converted to <CODE>INT</CODE>s before sorting.
<LI>

Fixed slow sorting when sorting on key field when using
<CODE>key_column=constant</CODE>.
<LI>

Sorting on calculated <CODE>DOUBLE</CODE> values sorted on integer results instead.
<LI>

<CODE>mysql</CODE> no longer requires a database argument.
<LI>

Changed the place where <CODE>HAVING</CODE> should be. According to ANSI, it should
be after <CODE>GROUP BY</CODE> but before <CODE>ORDER BY</CODE>. MySQL Version 3.20
incorrectly had it last.
<LI>

Added Sybase command <CODE>USE DATABASE</CODE> to start using another database.
<LI>

Added automatic adjusting of number of connections and table cache size
if the maximum number of files that can be opened is less than needed.
This should fix that <CODE>mysqld</CODE> doesn't crash even if you haven't done a
<CODE>ulimit -n 256</CODE> before starting <CODE>mysqld</CODE>.
<LI>

Added lots of limit checks to make it safer when running with too little
memory or when doing weird queries.
</UL>



<H3><A NAME="News-3.21.13" HREF="manual_toc.html#News-3.21.13">D.6.23  Changes in release 3.21.13</A></H3>


<UL>
<LI>

Added retry of interrupted reads and clearing of <CODE>errno</CODE>.
This makes Linux systems much safer!
<LI>

Fixed locking bug when using many aliases on the same table in the same
<CODE>SELECT</CODE>.
<LI>

Fixed bug with <CODE>LIKE</CODE> on number key.
<LI>

New error message so you can check whether the connection was lost while
the command was running or whether the connection was down from the start.
<LI>

Added <CODE>--table</CODE> option to <CODE>mysql</CODE> to print in table format.
Moved time and row information after query result.
Added automatic reconnect of lost connections.
<LI>

Added <CODE>!=</CODE> as a synonym for <CODE>&#60;&#62;</CODE>.
<LI>

Added function <CODE>VERSION()</CODE> to make easier logs.
<LI>

New multi-user test <TT>`tests/fork_test.pl'</TT> to put some strain on the
thread library.
</UL>



<H3><A NAME="News-3.21.12" HREF="manual_toc.html#News-3.21.12">D.6.24  Changes in release 3.21.12</A></H3>


<UL>
<LI>

Fixed <CODE>ftruncate()</CODE> call in MIT-pthreads. This made <CODE>isamchk</CODE>
destroy the <TT>`.ISM'</TT> files on (Free)BSD 2.x systems.
<LI>

Fixed broken <CODE>__P_</CODE> patch in MIT-pthreads.
<LI>

Many memory overrun checks. All string functions now return <CODE>NULL</CODE>
if the returned string should be longer than <CODE>max_allowed_packet</CODE> bytes.
<LI>

Changed the name of the <CODE>INTERVAL</CODE> type to <CODE>ENUM</CODE>, because
<CODE>INTERVAL</CODE> is used in ANSI SQL.
<LI>

In some cases, doing a <CODE>JOIN</CODE> + <CODE>GROUP</CODE> + <CODE>INTO OUTFILE</CODE>,
the result wasn't grouped.
<LI>

<CODE>LIKE</CODE> with <CODE>'_'</CODE> as last character didn't work. Fixed.
<LI>

Added extended ANSI SQL <CODE>TRIM()</CODE> function.
<LI>

Added <CODE>CURTIME()</CODE>.
<LI>

Added <CODE>ENCRYPT()</CODE> function by Zeev Suraski.
<LI>

Fixed better <CODE>FOREIGN KEY</CODE> syntax skipping. New reserved words:
<CODE>MATCH</CODE>, <CODE>FULL</CODE>, <CODE>PARTIAL</CODE>.
<LI>

<CODE>mysqld</CODE> now allows IP number and hostname for the <CODE>--bind-address</CODE>
option.
<LI>

Added <CODE>SET CHARACTER SET cp1251_koi8</CODE> to enable conversions of
data to and from the <CODE>cp1251_koi8</CODE> character set.
<LI>

Lots of changes for Windows 95 port. In theory, this version should now be
easily portable to Windows 95.
<LI>

Changed the <CODE>CREATE COLUMN</CODE> syntax of <CODE>NOT NULL</CODE> columns to be after
the <CODE>DEFAULT</CODE> value, as specified in the ANSI SQL standard. This will
make <CODE>mysqldump</CODE> with <CODE>NOT NULL</CODE> and default values incompatible with
MySQL Version 3.20.
<LI>

Added many function name aliases so the functions can be used with
ODBC or ANSI SQL92 syntax.
<LI>

Fixed syntax of <CODE>ALTER TABLE tbl_name ALTER COLUMN col_name SET DEFAULT
NULL</CODE>.
<LI>

Added <CODE>CHAR</CODE> and <CODE>BIT</CODE> as synonyms for <CODE>CHAR(1)</CODE>.
<LI>

Fixed core dump when updating as a user who has only <CODE>SELECT</CODE> privilege.
<LI>

<CODE>INSERT ... SELECT ... GROUP BY</CODE> didn't work in some cases. An
<CODE>Invalid use of group function</CODE> error occurred.
<LI>

When using <CODE>LIMIT</CODE>, <CODE>SELECT</CODE> now always uses keys instead of record
scan.  This will give better performance on <CODE>SELECT</CODE> and a <CODE>WHERE</CODE>
that matches many rows.
<LI>

Added Russian error messages.
</UL>



<H3><A NAME="News-3.21.11" HREF="manual_toc.html#News-3.21.11">D.6.25  Changes in release 3.21.11</A></H3>


<UL>
<LI>

Configure changes.
<LI>

MySQL now works with the new thread library on BSD/OS 3.0.
<LI>

Added new group functions <CODE>BIT_OR()</CODE> and <CODE>BIT_AND()</CODE>.
<LI>

Added compatibility functions <CODE>CHECK</CODE> and <CODE>REFERENCES</CODE>.
<CODE>CHECK</CODE> is now a reserved word.
<LI>

Added <CODE>ALL</CODE> option to <CODE>GRANT</CODE> for better compatibility. (<CODE>GRANT</CODE>
is still a dummy function.)
<LI>

Added partly-translated Dutch error messages.
<LI>

Fixed bug in <CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> with <CODE>NULL</CODE> columns.
<LI>

Added function <CODE>LAST_INSERT_ID()</CODE> SQL function to retrieve last
<CODE>AUTO_INCREMENT</CODE>
value.  This is intended for clients to ODBC that can't use the
<CODE>mysql_insert_id()</CODE> API function, but can be used by any client.
<LI>

Added <CODE>--flush-logs</CODE> option to <CODE>mysqladmin</CODE>.
<LI>

Added command <CODE>STATUS</CODE> to <CODE>mysql</CODE>.
<LI>

Fixed problem with <CODE>ORDER BY</CODE>/<CODE>GROUP BY</CODE> because of bug in <CODE>gcc</CODE>.
<LI>

Fixed problem with <CODE>INSERT ... SELECT ... GROUP BY</CODE>.
</UL>



<H3><A NAME="News-3.21.10" HREF="manual_toc.html#News-3.21.10">D.6.26  Changes in release 3.21.10</A></H3>


<UL>
<LI>

New <CODE>mysqlaccess</CODE>.
<LI>

<CODE>CREATE</CODE> now supports all ODBC types and the <CODE>mSQL</CODE> <CODE>TEXT</CODE> type.
All ODBC 2.5 functions are also supported (added <CODE>REPEAT</CODE>). This provides
better portability.
<LI>

Added text types <CODE>TINYTEXT</CODE>, <CODE>TEXT</CODE>, <CODE>MEDIUMTEXT</CODE> and
<CODE>LONGTEXT</CODE>.  These are actually <CODE>BLOB</CODE>types, but all searching is
done in case-insensitive fashion.
<LI>

All old <CODE>BLOB</CODE> fields are now <CODE>TEXT</CODE> fields.  This only
changes that all searching on strings is done in case-sensitive fashion.
You must do an <CODE>ALTER TABLE</CODE> and change the field type to <CODE>BLOB</CODE>
if you want to have tests done in case-sensitive fashion.
<LI>

Fixed some <CODE>configure</CODE> issues.
<LI>

Made the locking code a bit safer. Fixed very unlikely
deadlock situation.
<LI>

Fixed a couple of bugs in the range optimiser. Now the new range benchmark
<CODE>test-select</CODE> works.
</UL>



<H3><A NAME="News-3.21.9" HREF="manual_toc.html#News-3.21.9">D.6.27  Changes in release 3.21.9</A></H3>


<UL>
<LI>

Added <CODE>--enable-unix-socket=pathname</CODE> option to <CODE>configure</CODE>.
<LI>

Fixed a couple of portability problems with include files.
<LI>

Fixed bug in range calculation that could return empty
set when searching on multiple key with only one entry (very rare).
<LI>

Most things ported to FSU Pthreads, which should allow MySQL to
run on Caldera (SCO). See section <A HREF="manual.html#Caldera">2.6.6.9  Caldera (SCO) Notes</A>.
</UL>



<H3><A NAME="News-3.21.8" HREF="manual_toc.html#News-3.21.8">D.6.28  Changes in release 3.21.8</A></H3>


<UL>
<LI>

Works now in Solaris 2.6.
<LI>

Added handling of calculation of <CODE>SUM()</CODE> functions.
For example, you can now use <CODE>SUM(column)/COUNT(column)</CODE>.
<LI>

Added handling of trigometric functions:
<CODE>PI()</CODE>, <CODE>ACOS()</CODE>, <CODE>ASIN()</CODE>, <CODE>ATAN()</CODE>, <CODE>COS()</CODE>,
<CODE>SIN()</CODE> and <CODE>TAN()</CODE>.
<LI>

New languages: norwegian, norwegian-ny and portuguese.
<LI>

Fixed parameter bug in <CODE>net_print()</CODE> in <TT>`procedure.cc'</TT>.
<LI>

Fixed a couple of memory leaks.
<LI>

Now allow also the old <CODE>SELECT ... INTO OUTFILE</CODE> syntax.
<LI>

Fixed bug with <CODE>GROUP BY</CODE> and <CODE>SELECT</CODE> on key with many values.
<LI>

<CODE>mysql_fetch_lengths()</CODE> sometimes returned incorrect lengths when you used
<CODE>mysql_use_result()</CODE>. This affected at least some cases of
<CODE>mysqldump --quick</CODE>.
<LI>

Fixed bug in optimisation of <CODE>WHERE const op field</CODE>.
<LI>

Fixed problem when sorting on <CODE>NULL</CODE> fields.
<LI>

Fixed a couple of 64-bit (Alpha) problems.
<LI>

Added <CODE>--pid-file=#</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added date formatting to <CODE>FROM_UNIXTIME()</CODE>, originally by Zeev Suraski.
<LI>

Fixed bug in <CODE>BETWEEN</CODE> in range optimiser (did only test = of the first
argument).
<LI>

Added machine-dependent files for MIT-pthreads i386-SCO. There is probably
more to do to get this to work on SCO 3.5.
</UL>



<H3><A NAME="News-3.21.7" HREF="manual_toc.html#News-3.21.7">D.6.29  Changes in release 3.21.7</A></H3>


<UL>
<LI>

Changed <TT>`Makefile.am'</TT> to take advantage of Automake 1.2.
<LI>

Added the beginnings of a benchmark suite.
<LI>

Added more secure password handling.
<LI>

Added new client function <CODE>mysql_errno()</CODE>, to get the error number of
the error message. This makes error checking in the client much easier.
This makes the new server incompatible with the 3.20.x server when running
without <CODE>--old-protocol</CODE>.  The client code is backward-compatible.
More information can be found in the <TT>`README'</TT> file!
<LI>

Fixed some problems when using very long, illegal names.
</UL>



<H3><A NAME="News-3.21.6" HREF="manual_toc.html#News-3.21.6">D.6.30  Changes in release 3.21.6</A></H3>


<UL>
<LI>

Fixed more portability issues (incorrect <CODE>sigwait</CODE> and <CODE>sigset</CODE>
defines).
<LI>

<CODE>configure</CODE> should now be able to detect the last argument to
<CODE>accept()</CODE>.
</UL>



<H3><A NAME="News-3.21.5" HREF="manual_toc.html#News-3.21.5">D.6.31  Changes in release 3.21.5</A></H3>


<UL>
<LI>

Should now work with FreeBSD 3.0 if used with
<TT>`FreeBSD-3.0-libc_r-1.0.diff'</TT>,
which can be found at <a HREF="http://www.mysql.com/downloads/patches.html">http://www.mysql.com/downloads/patches.html</a>.
<LI>

Added new <CODE>-O tmp_table_size=#</CODE> option to <CODE>mysqld</CODE>.
<LI>

New function <CODE>FROM_UNIXTIME(timestamp)</CODE> which returns a date string in
<CODE>'YYYY-MM-DD HH:MM:DD'</CODE> format.
<LI>

New function <CODE>SEC_TO_TIME(seconds)</CODE> which returns a string in
<CODE>'HH:MM:SS'</CODE> format.
<LI>

New function <CODE>SUBSTRING_INDEX()</CODE>, originally by Zeev Suraski.
</UL>



<H3><A NAME="News-3.21.4" HREF="manual_toc.html#News-3.21.4">D.6.32  Changes in release 3.21.4</A></H3>


<UL>
<LI>

Should now configure and compile on OSF/1 4.0 with the DEC compiler.
<LI>

Configuration and compilation on BSD/OS 3.0 works, but due to some bugs in
BSD/OS 3.0, <CODE>mysqld</CODE> doesn't work on it yet.
<LI>

Configuration and compilation on FreeBSD 3.0 works, but I couldn't get
<CODE>pthread_create</CODE> to work.
</UL>



<H3><A NAME="News-3.21.3" HREF="manual_toc.html#News-3.21.3">D.6.33  Changes in release 3.21.3</A></H3>


<UL>
<LI>

Added reverse check lookup of hostnames to get better security.
<LI>

Fixed some possible buffer overflows if filenames that are too long are used.
<LI>

<CODE>mysqld</CODE> doesn't accept hostnames that start with digits followed by a
<CODE>'.'</CODE>, because the hostname may look like an IP number.
<LI>

Added <CODE>--skip-networking</CODE> option to <CODE>mysqld</CODE>, to allow only socket
connections.  (This will not work with MIT-pthreads!)
<LI>

Added check of too long table names for alias.
<LI>

Added check if database name is okay.
<LI>

Added check if too long table names.
<LI>

Removed incorrect <CODE>free()</CODE> that killed the server on
<CODE>CREATE DATABASE</CODE> or <CODE>DROP DATABASE</CODE>.
<LI>

Changed some <CODE>mysqld</CODE> <CODE>-O</CODE> options to better names.
<LI>

Added <CODE>-O join_cache_size=#</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added <CODE>-O max_join_size=#</CODE> option to <CODE>mysqld</CODE>, to be able to set a
limit how big queries (in this case big = slow) one should be able to handle
without specifying <CODE>SET SQL_BIG_SELECTS=1</CODE>.  A # = is about 10
examined records. The default is ``unlimited''.
<LI>

When comparing a <CODE>TIME</CODE>, <CODE>DATE</CODE>, <CODE>DATETIME</CODE> or <CODE>TIMESTAMP</CODE>
column to a constant, the constant is converted to a time value before
performing the comparison.
This will make it easier to get ODBC (particularly Access97) to work with
the above types. It should also make dates easier to use and the comparisons
should be quicker than before.
<LI>

Applied patch from Jochen Wiedmann that allows <CODE>query()</CODE> in
<CODE>mysqlperl</CODE> to take a query with <CODE>\0</CODE> in it.
<LI>

Storing a timestamp with a 2-digit year (<CODE>YYMMDD</CODE>) didn't work.
<LI>

Fix that timestamp wasn't automatically updated if set in an <CODE>UPDATE</CODE>
clause.
<LI>

Now the automatic timestamp field is the FIRST timestamp field.
<LI>

<CODE>SELECT * INTO OUTFILE</CODE>, which didn't correctly if the outfile already
existed.
<LI>

<CODE>mysql</CODE> now shows the thread ID when starting or doing a reconnect.
<LI>

Changed the default sort buffer size from 2M to 1M.
</UL>



<H3><A NAME="News-3.21.2" HREF="manual_toc.html#News-3.21.2">D.6.34  Changes in release 3.21.2</A></H3>


<UL>
<LI>

The range optimiser is coded, but only 85% tested. It can be enabled with
<CODE>--new</CODE>, but it crashes core a lot yet...
<LI>

More portable. Should compile on AIX and alpha-digital.
At least the <CODE>isam</CODE> library should be relatively 64-bit clean.
<LI>

New <CODE>isamchk</CODE> which can detect and fix more problems.
<LI>

New options for <CODE>isamlog</CODE>.
<LI>

Using new version of Automake.
<LI>

Many small portability changes (from the AIX and alpha-digital port)
Better checking of pthread(s) library.
<LI>

czech error messages by <a HREF="mailto:snajdr@pvt.net">snajdr@pvt.net</a>.
<LI>

Decreased size of some buffers to get fewer problems on systems with little
memory.  Also added more checks to handle ``out of memory'' problems.
<LI>

<CODE>mysqladmin</CODE>: you can now do <CODE>mysqladmin kill 5,6,7,8</CODE> to kill
multiple threads.
<LI>

When the maximum connection limit is reached, one extra connection by a user
with the <STRONG>process_acl</STRONG> privilege is granted.
<LI>

Added <CODE>-O backlog=#</CODE> option to <CODE>mysqld</CODE>.
<LI>

Increased maximum packet size from 512K to 1024K for client.
<LI>

Almost all of the function code is now tested in the internal test suite.
<LI>

<CODE>ALTER TABLE</CODE> now returns warnings from field conversions.
<LI>

Port changed to 3306 (got it reserved from ISI).
<LI>

Added a fix for Visual FoxBase so that any schema name from a table
specification is automatically removed.
<LI>

New function <CODE>ASCII()</CODE>.
<LI>

Removed function <CODE>BETWEEN(a,b,c)</CODE>. Use the standard ANSI
syntax instead: <CODE>expr BETWEEN expr AND expr</CODE>.
<LI>

MySQL no longer has to use an extra temporary table when sorting
on functions or <CODE>SUM()</CODE> functions.
<LI>

Fixed bug that you couldn't use <CODE>tbl_name.field_name</CODE> in <CODE>UPDATE</CODE>.
<LI>

Fixed <CODE>SELECT DISTINCT</CODE> when using 'hidden group'. For example:

<PRE>
mysql&#62; SELECT DISTINCT MOD(some_field,10) FROM test
    -&#62;        GROUP BY some_field;
</PRE>

Note: <CODE>some_field</CODE> is normally in the <CODE>SELECT</CODE> part. ANSI SQL should
require it.
</UL>



<H3><A NAME="News-3.21.0" HREF="manual_toc.html#News-3.21.0">D.6.35  Changes in release 3.21.0</A></H3>


<UL>
<LI>

New reserved words used: <CODE>INTERVAL</CODE>, <CODE>EXPLAIN</CODE>, <CODE>READ</CODE>,
<CODE>WRITE</CODE>, <CODE>BINARY</CODE>.
<LI>

Added ODBC function <CODE>CHAR(num,...)</CODE>.
<LI>

New operator <CODE>IN</CODE>. This uses a binary search to find a match.
<LI>

New command <CODE>LOCK TABLES tbl_name [AS alias] {READ|WRITE} ...</CODE>
<LI>

Added <CODE>--log-update</CODE> option to <CODE>mysqld</CODE>, to get a log suitable for
incremental updates.
<LI>

New command <CODE>EXPLAIN SELECT ...</CODE> to get information about how the
optimiser will do the join.
<LI>

For easier client code, the client should no longer use
<CODE>FIELD_TYPE_TINY_BLOB</CODE>, <CODE>FIELD_TYPE_MEDIUM_BLOB</CODE>,
<CODE>FIELD_TYPE_LONG_BLOB</CODE> or <CODE>FIELD_TYPE_VAR_STRING</CODE> (as
previously returned by <CODE>mysql_list_fields</CODE>).  You should instead only use
<CODE>FIELD_TYPE_BLOB</CODE> or <CODE>FIELD_TYPE_STRING</CODE>.  If you want exact
types, you should use the command <CODE>SHOW FIELDS</CODE>.
<LI>

Added varbinary syntax: <CODE>0x######</CODE> which can be used as a string
(default) or a number.
<LI>

<CODE>FIELD_TYPE_CHAR</CODE> is renamed to <CODE>FIELD_TYPE_TINY</CODE>.
<LI>

Changed all fields to C++ classes.
<LI>

Removed FORM struct.
<LI>

Fields with <CODE>DEFAULT</CODE> values no longer need to be <CODE>NOT NULL</CODE>.
<LI>

New field types:
<DL COMPACT>

<DT><CODE>ENUM</CODE>
<DD>
A string which can take only a couple of defined values. The value is
stored as a 1-3 byte number that is mapped automatically to a string.
This is sorted according to string positions!
<DT><CODE>SET</CODE>
<DD>
A string which may have one or many string values separated with ','.
The string is stored as a 1-, 2-, 3-, 4- or 8-byte number where each bit stands
for a specific set member.  This is sorted according to the unsigned value
of the stored packed number.
</DL>
<LI>

Now all function calculation is done with <CODE>double</CODE> or <CODE>long long</CODE>.
This will provide the full 64-bit range with bit functions and fix some
conversions that previously could result in precision losses.  One should
avoid using <CODE>unsigned long long</CODE> columns with full 64-bit range
(numbers bigger than 9223372036854775807) because calculations are done
with <CODE>signed long long</CODE>.
<LI>

<CODE>ORDER BY</CODE> will now put <CODE>NULL</CODE> field values first. <CODE>GROUP BY</CODE>
will also work with <CODE>NULL</CODE> values.
<LI>

Full <CODE>WHERE</CODE> with expressions.
<LI>

New range optimiser that can resolve ranges when some keypart prefix is
constant. Example:

<PRE>
mysql&#62; SELECT * FROM tbl_name
    -&#62;          WHERE key_part_1="customer"
    -&#62;          AND key_part_2&#62;=10 AND key_part_2&#60;=10;
</PRE>

</UL>



<H2><A NAME="News-3.20.x" HREF="manual_toc.html#News-3.20.x">D.7  Changes in release 3.20.x</A></H2>

<P>
<A NAME="IDX1888"></A>

</P>
<P>
Version 3.20 is quite old now, and should be avoided if possible.  This
information is kept here for historical purposes only.

</P>
<P>
Changes from 3.20.18 to 3.20.32b are not documented here because the
3.21 release branched here. And the relevant changes are also
documented as changes to the 3.21 version.

</P>



<H3><A NAME="News-3.20.18" HREF="manual_toc.html#News-3.20.18">D.7.1  Changes in release 3.20.18</A></H3>


<UL>
<LI>

Added <CODE>-p#</CODE> (remove <CODE>#</CODE> directories from path) to <CODE>isamlog</CODE>.
All files are written with a relative path from the database directory
Now <CODE>mysqld</CODE> shouldn't crash on shutdown when using the
<CODE>--log-isam</CODE> option.
<LI>

New <CODE>mysqlperl</CODE> version. It is now compatible with <CODE>msqlperl-0.63</CODE>.
<LI>

New <CODE>DBD</CODE> module available.
<LI>

Added group function <CODE>STD()</CODE> (standard deviation).
<LI>

The <CODE>mysqld</CODE> server is now compiled by default without debugging
information.  This will make the daemon smaller and faster.
<LI>

Now one usually only has to specify the <CODE>--basedir</CODE> option to
<CODE>mysqld</CODE>. All other paths are relative in a normal installation.
<LI>

<CODE>BLOB</CODE> columns sometimes contained garbage when used with a <CODE>SELECT</CODE>
on more than one table and <CODE>ORDER BY</CODE>.
<LI>

Fixed that calculations that are not in <CODE>GROUP BY</CODE> work as expected
(ANSI SQL extension).
Example:

<PRE>
mysql&#62; SELECT id,id+1 FROM table GROUP BY id;
</PRE>

<LI>

The test of using <CODE>MYSQL_PWD</CODE> was reversed. Now <CODE>MYSQL_PWD</CODE> is
enabled as default in the default release.
<LI>

Fixed conversion bug which caused <CODE>mysqld</CODE> to core dump with
Arithmetic error on SPARC-386.
<LI>

Added <CODE>--unbuffered</CODE> option to <CODE>mysql</CODE>, for new <CODE>mysqlaccess</CODE>.
<LI>

When using overlapping (unnecessary) keys and join over many tables,
the optimiser could get confused and return 0 records.
</UL>



<H3><A NAME="News-3.20.17" HREF="manual_toc.html#News-3.20.17">D.7.2  Changes in release 3.20.17</A></H3>


<UL>
<LI>

You can now use <CODE>BLOB</CODE> columns and the functions <CODE>IS NULL</CODE> and
<CODE>IS NOT NULL</CODE> in the <CODE>WHERE</CODE> clause.
<LI>

All communication packets and row buffers are now allocated dynamically
on demand. The default value of <CODE>max_allowed_packet</CODE> is now 64K for
the server and 512K for the client. This is mainly used to catch
incorrect packets that could trash all memory. The server limit may be
changed when it is started.
<LI>

Changed stack usage to use less memory.
<LI>

Changed <CODE>safe_mysqld</CODE> to check for running daemon.
<LI>

The <CODE>ELT()</CODE> function is renamed to <CODE>FIELD()</CODE>.  The new
<CODE>ELT()</CODE> function returns a value based on an index: <CODE>FIELD()</CODE>
is the inverse of <CODE>ELT()</CODE> Example: <CODE>ELT(2,"A","B","C")</CODE> returns
<CODE>"B"</CODE>. <CODE>FIELD("B","A","B","C")</CODE> returns <CODE>2</CODE>.
<LI>

<CODE>COUNT(field)</CODE>, where <CODE>field</CODE> could have a <CODE>NULL</CODE> value, now
works.
<LI>

A couple of bugs fixed in <CODE>SELECT ... GROUP BY</CODE>.
<LI>

Fixed memory overrun bug in <CODE>WHERE</CODE> with many unoptimisable brace levels.
<LI>

Fixed some small bugs in the grant code.
<LI>

If hostname isn't found by <CODE>get_hostname</CODE>, only the IP is checked.
Previously, you got <CODE>Access denied</CODE>.
<LI>

Inserts of timestamps with values didn't always work.
<LI>

<CODE>INSERT INTO ... SELECT ... WHERE</CODE> could give the error
<CODE>Duplicated field</CODE>.
<LI>

Added some tests to <CODE>safe_mysqld</CODE> to make it ``safer''.
<LI>

<CODE>LIKE</CODE> was case-sensitive in some places and case-insensitive in others.
Now <CODE>LIKE</CODE> is always case-insensitive.
<LI>

<TT>`mysql.cc'</TT>: Allow <CODE>'#'</CODE> anywhere on the line.
<LI>

New command <CODE>SET SQL_SELECT_LIMIT=#</CODE>. See the FAQ for more details.
<LI>

New version of the <CODE>mysqlaccess</CODE> script.
<LI>

Change <CODE>FROM_DAYS()</CODE> and <CODE>WEEKDAY()</CODE> to also take a full
<CODE>TIMESTAMP</CODE> or <CODE>DATETIME</CODE> as argument. Before they only took a
number of type <CODE>YYYYMMDD</CODE> or <CODE>YYMMDD</CODE>.
<LI>

Added new function <CODE>UNIX_TIMESTAMP(timestamp_column)</CODE>.
</UL>



<H3><A NAME="News-3.20.16" HREF="manual_toc.html#News-3.20.16">D.7.3  Changes in release 3.20.16</A></H3>


<UL>
<LI>

More changes in MIT-pthreads to get them safer. Fixed also some link
bugs at least in SunOS.
<LI>

Changed <CODE>mysqld</CODE> to work around a bug in MIT-pthreads. This makes multiple
small <CODE>SELECT</CODE> operations 20 times faster. Now <CODE>lock_test.pl</CODE> should
work.
<LI>

Added <CODE>mysql_FetchHash(handle)</CODE> to <CODE>mysqlperl</CODE>.
<LI>

The <CODE>mysqlbug</CODE> script is now distributed built to allow for reporting
bugs that appear during the build with it.
<LI>

Changed <TT>`libmysql.c'</TT> to prefer <CODE>getpwuid()</CODE> instead of
<CODE>cuserid()</CODE>.
<LI>

Fixed bug in <CODE>SELECT</CODE> optimiser when using many tables with the same
column used as key to different tables.
<LI>

Added new <CODE>latin2</CODE> and Russian <CODE>KOI8</CODE> character tables.
<LI>

Added support for a dummy <CODE>GRANT</CODE> command to satisfy Powerbuilder.
</UL>



<H3><A NAME="News-3.20.15" HREF="manual_toc.html#News-3.20.15">D.7.4  Changes in release 3.20.15</A></H3>


<UL>
<LI>

Fixed fatal bug <CODE>packets out of order</CODE> when using MIT-pthreads.
<LI>

Removed possible loop when a thread waits for command from client
and <CODE>fcntl()</CODE> fails. Thanks to Mike Bretz for finding this bug.
<LI>

Changed alarm loop in <TT>`mysqld.cc'</TT> because shutdown didn't always
succeed in Linux.
<LI>

Removed use of <CODE>termbits</CODE> from <TT>`mysql.cc'</TT>.  This conflicted with
<CODE>glibc</CODE> 2.0.
<LI>

Fixed some syntax errors for at least BSD and Linux.
<LI>

Fixed bug when doing a <CODE>SELECT</CODE> as superuser without a database.
<LI>

Fixed bug when doing <CODE>SELECT</CODE> with group calculation to outfile.
</UL>



<H3><A NAME="News-3.20.14" HREF="manual_toc.html#News-3.20.14">D.7.5  Changes in release 3.20.14</A></H3>


<UL>
<LI>

If one gives <CODE>-p</CODE> or <CODE>--password</CODE> option to <CODE>mysql</CODE> without
an argument, the user is solicited for the password from the tty.
<LI>

Added default password from <CODE>MYSQL_PWD</CODE> (by Elmar Haneke).
<LI>

Added command <CODE>kill</CODE> to <CODE>mysqladmin</CODE> to kill a specific
MySQL thread.
<LI>

Sometimes when doing a reconnect on a down connection this succeeded
first on second try.
<LI>

Fixed adding an <CODE>AUTO_INCREMENT</CODE> key with <CODE>ALTER_TABLE</CODE>.
<LI>

<CODE>AVG()</CODE> gave too small value on some <CODE>SELECT</CODE>s with
<CODE>GROUP BY</CODE> and <CODE>ORDER BY</CODE>.
<LI>

Added new <CODE>DATETIME</CODE> type (by Giovanni Maruzzelli
<a HREF="mailto:maruzz@matrice.it">maruzz@matrice.it</a>).
<LI>

Fixed that defining <CODE>DONT_USE_DEFAULT_FIELDS</CODE> works.
<LI>

Changed to use a thread to handle alarms instead of signals on Solaris to
avoid race conditions.
<LI>

Fixed default length of signed numbers. (George Harvey
<a HREF="mailto:georgeh@pinacl.co.uk">georgeh@pinacl.co.uk</a>.)
<LI>

Allow anything for <CODE>CREATE INDEX</CODE>.
<LI>

Add prezeros when packing numbers to <CODE>DATE</CODE>, <CODE>TIME</CODE> and
<CODE>TIMESTAMP</CODE>.
<LI>

Fixed a bug in <CODE>OR</CODE> of multiple tables (gave empty set).
<LI>

Added many patches to MIT-pthreads. This fixes at least one lookup bug.
</UL>



<H3><A NAME="News-3.20.13" HREF="manual_toc.html#News-3.20.13">D.7.6  Changes in release 3.20.13</A></H3>


<UL>
<LI>

Added ANSI SQL94 <CODE>DATE</CODE> and <CODE>TIME</CODE> types.
<LI>

Fixed bug in <CODE>SELECT</CODE> with <CODE>AND</CODE>-<CODE>OR</CODE> levels.
<LI>

Added support for Slovenian characters. The <TT>`Contrib'</TT> directory contains
source and instructions for adding other character sets.
<LI>

Fixed bug with <CODE>LIMIT</CODE> and <CODE>ORDER BY</CODE>.
<LI>

Allow <CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> on items that aren't in the
<CODE>SELECT</CODE> list.
(Thanks to Wim Bonis <a HREF="mailto:bonis@kiss.de">bonis@kiss.de</a>, for pointing this out.)
<LI>

Allow setting of timestamp values in <CODE>INSERT</CODE>.
<LI>

Fixed bug with <CODE>SELECT ... WHERE ... = NULL</CODE>.
<LI>

Added changes for <CODE>glibc</CODE> 2.0. To get <CODE>glibc</CODE> to work, you should
add the <TT>`gibc-2.0-sigwait-patch'</TT> before compiling <CODE>glibc</CODE>.
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> when changing a <CODE>NOT NULL</CODE> field to
allow <CODE>NULL</CODE> values.
<LI>

Added some ANSI92 synonyms as field types to <CODE>CREATE TABLE</CODE>.
<CODE>CREATE TABLE</CODE> now allows <CODE>FLOAT(4)</CODE> and <CODE>FLOAT(8)</CODE> to mean
<CODE>FLOAT</CODE> and <CODE>DOUBLE</CODE>.
<LI>

New utility program <CODE>mysqlaccess</CODE> by <a HREF="mailto:Yves.Carlier@rug.ac.be">Yves.Carlier@rug.ac.be</a>.
This program shows the access rights for a specific user and the grant
rows that determine this grant.
<LI>

Added <CODE>WHERE const op field</CODE> (by <a HREF="mailto:bonis@kiss.de">bonis@kiss.de</a>).
</UL>



<H3><A NAME="News-3.20.11" HREF="manual_toc.html#News-3.20.11">D.7.7  Changes in release 3.20.11</A></H3>


<UL>
<LI>

When using <CODE>SELECT ... INTO OUTFILE</CODE>, all temporary tables are ISAM
instead of HEAP to allow big dumps.
<LI>

Changed date functions to be string functions. This fixed some ``funny''
side effects when sorting on dates.
<LI>

Extended <CODE>ALTER TABLE</CODE> according to SQL92.
<LI>

Some minor compatibility changes.
<LI>

Added <CODE>--port</CODE> and <CODE>--socket</CODE> options to all utility programs and
<CODE>mysqld</CODE>.
<LI>

Fixed MIT-pthreads <CODE>readdir_r()</CODE>. Now <CODE>mysqladmin create database</CODE>
and <CODE>mysqladmin drop database</CODE> should work.
<LI>

Changed MIT-pthreads to use our <CODE>tempnam()</CODE>. This should fix the ``sort
aborted'' bug.
<LI>

Added sync of records count in <CODE>sql_update</CODE>. This fixed slow updates
on first connection. (Thanks to Vaclav Bittner for the test.)
</UL>



<H3><A NAME="News-3.20.10" HREF="manual_toc.html#News-3.20.10">D.7.8  Changes in release 3.20.10</A></H3>


<UL>
<LI>

New insert type: <CODE>INSERT INTO ... SELECT ...</CODE>
<LI>

<CODE>MEDIUMBLOB</CODE> fixed.
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> and <CODE>BLOB</CODE>s.
<LI>

<CODE>SELECT ... INTO OUTFILE</CODE> now creates the file in the current
database directory.
<LI>

<CODE>DROP TABLE</CODE> now can take a list of tables.
<LI>

Oracle synonym <CODE>DESCRIBE</CODE> (<CODE>DESC</CODE>).
<LI>

Changes to <CODE>make_binary_distribution</CODE>.
<LI>

Added some comments to installation instructions about <CODE>configure</CODE>'s
C++ link test.
<LI>

Added <CODE>--without-perl</CODE> option to <CODE>configure</CODE>.
<LI>

Lots of small portability changes.
</UL>



<H3><A NAME="News-3.20.9" HREF="manual_toc.html#News-3.20.9">D.7.9  Changes in release 3.20.9</A></H3>


<UL>
<LI>

<CODE>ALTER TABLE</CODE> didn't copy null bit. As a result, fields that were allowed
to have <CODE>NULL</CODE> values were always <CODE>NULL</CODE>.
<LI>

<CODE>CREATE</CODE> didn't take numbers as <CODE>DEFAULT</CODE>.
<LI>

Some compatibility changes for SunOS.
<LI>

Removed <TT>`config.cache'</TT> from old distribution.
</UL>



<H3><A NAME="News-3.20.8" HREF="manual_toc.html#News-3.20.8">D.7.10  Changes in release 3.20.8</A></H3>


<UL>
<LI>

Fixed bug with <CODE>ALTER TABLE</CODE> and multi-part keys.
</UL>



<H3><A NAME="News-3.20.7" HREF="manual_toc.html#News-3.20.7">D.7.11  Changes in release 3.20.7</A></H3>


<UL>
<LI>

New commands: <CODE>ALTER TABLE</CODE>, <CODE>SELECT ... INTO OUTFILE</CODE> and
<CODE>LOAD DATA INFILE</CODE>.
<LI>

New function: <CODE>NOW()</CODE>.
<LI>

Added new field <CODE>File_priv</CODE> to <CODE>mysql/user</CODE> table.
<LI>

New script <CODE>add_file_priv</CODE> which adds the new field <CODE>File_priv</CODE>
to the <CODE>user</CODE> table. This script must be executed if you want to
use the new <CODE>SELECT ... INTO</CODE> and <CODE>LOAD DATA INFILE ...</CODE> commands
with a version of MySQL earlier than 3.20.7.
<LI>

Fixed bug in locking code, which made <CODE>lock_test.pl</CODE> test fail.
<LI>

New files <TT>`NEW'</TT> and <TT>`BUGS'</TT>.
<LI>

Changed <TT>`select_test.c'</TT> and <TT>`insert_test.c'</TT> to include
<TT>`config.h'</TT>.
<LI>

Added <CODE>status</CODE> command to <CODE>mysqladmin</CODE> for short logging.
<LI>

Increased maximum number of keys to 16 and maximum number of key parts to 15.
<LI>

Use of sub keys. A key may now be a prefix of a string field.
<LI>

Added <CODE>-k</CODE> option to <CODE>mysqlshow</CODE>, to get key information for a table.
<LI>

Added long options to <CODE>mysqldump</CODE>.
</UL>



<H3><A NAME="News-3.20.6" HREF="manual_toc.html#News-3.20.6">D.7.12  Changes in release 3.20.6</A></H3>


<UL>
<LI>

Portable to more systems because of MIT-pthreads, which will
be used automatically if <CODE>configure</CODE> cannot find a <CODE>-lpthreads</CODE>
library.
<LI>

Added GNU-style long options to almost all programs. Test with
<CODE><KBD>program</KBD> --help</CODE>.
<LI>

Some shared library support for Linux.
<LI>

The FAQ is now in <TT>`.texi'</TT> format and is available in <TT>`.html'</TT>,
<TT>`.txt'</TT> and <TT>`.ps'</TT> formats.
<LI>

Added new SQL function <CODE>RAND([init])</CODE>.
<LI>

Changed <CODE>sql_lex</CODE> to handle <CODE>\0</CODE> unquoted, but the client can't send
the query through the C API, because it takes a str pointer.
You must use <CODE>mysql_real_query()</CODE> to send the query.
<LI>

Added API function <CODE>mysql_get_client_info()</CODE>.
<LI>

<CODE>mysqld</CODE> now uses the <CODE>N_MAX_KEY_LENGTH</CODE> from <TT>`nisam.h'</TT> as
the maximum allowable key length.
<LI>

The following now works:

<PRE>
mysql&#62; SELECT filter_nr,filter_nr FROM filter ORDER BY filter_nr;
</PRE>

Previously, this resulted in the error:
<CODE>Column: 'filter_nr' in order clause is ambiguous</CODE>.
<LI>

<CODE>mysql</CODE> now outputs <CODE>'\0'</CODE>, <CODE>'\t'</CODE>, <CODE>'\n'</CODE> and <CODE>'\\'</CODE>
when encountering ASCII 0, tab, newline or <CODE>'\'</CODE> while writing
tab-separated output.
This is to allow printing of binary data in a portable format.
To get the old behaviour, use <CODE>-r</CODE> (or <CODE>--raw</CODE>).
<LI>

Added german error messages (60 of 80 error messages translated).
<LI>

Added new API function <CODE>mysql_fetch_lengths(MYSQL_RES *)</CODE>, which
returns an array of column lengths (of type <CODE>uint</CODE>).
<LI>

Fixed bug with <CODE>IS NULL</CODE> in <CODE>WHERE</CODE> clause.
<LI>

Changed the optimiser a little to get better results when searching on a key
part.
<LI>

Added <CODE>SELECT</CODE> option <CODE>STRAIGHT_JOIN</CODE> to tell the optimiser that
it should join tables in the given order.
<LI>

Added support for comments starting with <CODE>'--'</CODE> in <TT>`mysql.cc'</TT>
(Postgres syntax).
<LI>

You can have <CODE>SELECT</CODE> expressions and table columns in a <CODE>SELECT</CODE>
which are not used in the group part. This makes it efficient to implement
lookups.  The column that is used should be a constant for each group because
the value is calculated only once for the first row that is found for a group.

<PRE>
mysql&#62; SELECT id,lookup.text,SUM(*) FROM test,lookup
    -&#62;        WHERE test.id=lookup.id GROUP BY id;
</PRE>

<LI>

Fixed bug in <CODE>SUM(function)</CODE> (could cause a core dump).
<LI>

Changed <CODE>AUTO_INCREMENT</CODE> placement in the SQL query:

<PRE>
INSERT INTO table (auto_field) VALUES (0);
</PRE>

inserted 0, but it should insert an <CODE>AUTO_INCREMENT</CODE> value.
<LI>

<TT>`mysqlshow.c'</TT>: Added number of records in table. Had to change the
client code a little to fix this.
<LI>

<CODE>mysql</CODE> now allows doubled <CODE>''</CODE> or <CODE>""</CODE> within strings for
embedded <CODE>'</CODE> or <CODE>"</CODE>.
<LI>

New math functions:
<CODE>EXP()</CODE>, <CODE>LOG()</CODE>, <CODE>SQRT()</CODE>, <CODE>ROUND()</CODE>, <CODE>CEILING()</CODE>.
</UL>



<H3><A NAME="News-3.20.3" HREF="manual_toc.html#News-3.20.3">D.7.13  Changes in release 3.20.3</A></H3>


<UL>
<LI>

The <CODE>configure</CODE> source now compiles a thread-free client library
<CODE>-lmysqlclient</CODE>. This is the only library that needs to be linked
with client applications.  When using the binary releases, you must
link with <CODE>-lmysql -lmysys -ldbug -lmystrings</CODE> as before.
<LI>

New <CODE>readline</CODE> library from <CODE>bash-2.0</CODE>.
<LI>

LOTS of small changes to <CODE>configure</CODE> and makefiles (and related source).
<LI>

It should now be possible to compile in another directory using
<CODE>VPATH</CODE>. Tested with GNU Make 3.75.
<LI>

<CODE>safe_mysqld</CODE> and <CODE>mysql.server</CODE> changed to be more compatible
between the source and the binary releases.
<LI>

<CODE>LIMIT</CODE> now takes one or two numeric arguments.
If one argument is given, it indicates the maximum number of rows in
a result. If two arguments are given, the first argument indicates the offset
of the first row to return, the second is the maximum number of rows.
With this it's easy to do a poor man's next page/previous page WWW
application.
<LI>

Changed name of SQL function <CODE>FIELDS()</CODE> to <CODE>ELT()</CODE>.
Changed SQL function <CODE>INTERVALL()</CODE> to <CODE>INTERVAL()</CODE>.
<LI>

Made <CODE>SHOW COLUMNS</CODE> a synonym for <CODE>SHOW FIELDS</CODE>.
Added compatibility syntax <CODE>FRIEND KEY</CODE> to <CODE>CREATE TABLE</CODE>. In
MySQL, this creates a non-unique key on the given columns.
<LI>

Added <CODE>CREATE INDEX</CODE> and <CODE>DROP INDEX</CODE> as compatibility functions.
In MySQL, <CODE>CREATE INDEX</CODE> only checks if the index exists and
issues an error if it doesn't exist. <CODE>DROP INDEX</CODE> always succeeds.
<LI>

<TT>`mysqladmin.c'</TT>: added client version to version information.
<LI>

Fixed core dump bug in <CODE>sql_acl</CODE> (core on new connection).
<LI>

Removed <CODE>host</CODE>, <CODE>user</CODE> and <CODE>db</CODE> tables from database <CODE>test</CODE>
in the distribution.
<LI>

<CODE>FIELD_TYPE_CHAR</CODE> can now be signed (-128 to 127) or unsigned (0 to 255)
Previously, it was always unsigned.
<LI>

Bug fixes in <CODE>CONCAT()</CODE> and <CODE>WEEKDAY()</CODE>.
<LI>

Changed a lot of source to get <CODE>mysqld</CODE> to be compiled with SunPro
compiler.
<LI>

SQL functions must now have a <CODE>'('</CODE> immediately after the function name
(no intervening space).
For example, <CODE>'USER('</CODE> is regarded as beginning a function call, and
<CODE>'USER ('</CODE> is regarded as an identifier <CODE>USER</CODE> followed by a
<CODE>'('</CODE>, not as a function call.
</UL>



<H3><A NAME="News-3.20.0" HREF="manual_toc.html#News-3.20.0">D.7.14  Changes in release 3.20.0</A></H3>


<UL>
<LI>

The source distribution is done with <CODE>configure</CODE> and Automake.
It will make porting much easier.  The <CODE>readline</CODE> library is included
in the distribution.
<LI>

Separate client compilation:
the client code should be very easy to compile on systems which
don't have threads.
<LI>

The old Perl interface code is automatically compiled and installed.
Automatic compiling of <CODE>DBD</CODE> will follow when the new <CODE>DBD</CODE> code
is ported.
<LI>

Dynamic language support: <CODE>mysqld</CODE> can now be started with Swedish
or English (default) error messages.
<LI>

New functions: <CODE>INSERT()</CODE>, <CODE>RTRIM()</CODE>, <CODE>LTRIM()</CODE> and
<CODE>FORMAT()</CODE>.
<LI>

<CODE>mysqldump</CODE> now works correctly for all field types (even
<CODE>AUTO_INCREMENT</CODE>). The format for <CODE>SHOW FIELDS FROM tbl_name</CODE>
is changed so the <CODE>Type</CODE> column contains information suitable for
<CODE>CREATE TABLE</CODE>.  In previous releases, some <CODE>CREATE TABLE</CODE>
information had to be patched when re-creating tables.
<LI>

Some parser bugs from 3.19.5 (<CODE>BLOB</CODE> and <CODE>TIMESTAMP</CODE>) are corrected.
<CODE>TIMESTAMP</CODE> now returns different date information depending on its
create length.
<LI>

Changed parser to allow a database, table or field name to
start with a number or <CODE>'_'</CODE>.
<LI>

All old C code from Unireg changed to C++ and cleaned up. This makes
the daemon a little smaller and easier to understand.
<LI>

A lot of small bug fixes done.
<LI>

New <TT>`INSTALL'</TT> files (not final version) and some information regarding porting.
</UL>



<H2><A NAME="News-3.19.x" HREF="manual_toc.html#News-3.19.x">D.8  Changes in release 3.19.x</A></H2>

<P>
<A NAME="IDX1889"></A>

</P>
<P>
Version 3.19 is quite old now, and should be avoided if possible.  This
information is kept here for historical purposes only.

</P>



<H3><A NAME="News-3.19.5" HREF="manual_toc.html#News-3.19.5">D.8.1  Changes in release 3.19.5</A></H3>


<UL>
<LI>

Some new functions, some more optimisation on joins.
<LI>

Should now compile clean on Linux (2.0.x).
<LI>

Added functions <CODE>DATABASE()</CODE>, <CODE>USER()</CODE>, <CODE>POW()</CODE>,
<CODE>LOG10()</CODE> (needed for ODBC).
<LI>

In a <CODE>WHERE</CODE> with an <CODE>ORDER BY</CODE> on fields from only one table,
the table is now preferred as first table in a multi-join.
<LI>

<CODE>HAVING</CODE> and <CODE>IS NULL</CODE> or <CODE>IS NOT NULL</CODE> now works.
<LI>

A group on one column and a sort on a group function (<CODE>SUM()</CODE>,
<CODE>AVG()</CODE>...) didn't work together. Fixed.
<LI>

<CODE>mysqldump</CODE>: Didn't send password to server.
</UL>



<H3><A NAME="News-3.19.4" HREF="manual_toc.html#News-3.19.4">D.8.2  Changes in release 3.19.4</A></H3>


<UL>
<LI>

Fixed horrible locking bug when inserting in one thread and reading
in another thread.
<LI>

Fixed one-off decimal bug.  1.00 was output as 1.0.
<LI>

Added attribute <CODE>'Locked'</CODE> to process list as info if a query is
locked by another query.
<LI>

Fixed full magic timestamp. Timestamp length may now be 14, 12, 10, 8, 6, 4
or 2 bytes.
<LI>

Sort on some numeric functions could sort incorrectly on last number.
<LI>

<CODE>IF(arg,syntax_error,syntax_error)</CODE> crashed.
<LI>

Added functions <CODE>CEILING()</CODE>, <CODE>ROUND()</CODE>, <CODE>EXP()</CODE>, <CODE>LOG()</CODE> and <CODE>SQRT()</CODE>.
<LI>

Enhanced <CODE>BETWEEN</CODE> to handle strings.
</UL>



<H3><A NAME="News-3.19.3" HREF="manual_toc.html#News-3.19.3">D.8.3  Changes in release 3.19.3</A></H3>


<UL>
<LI>

Fixed <CODE>SELECT</CODE> with grouping on <CODE>BLOB</CODE> columns not to return
incorrect <CODE>BLOB</CODE> info. Grouping, sorting and distinct on <CODE>BLOB</CODE>
columns will not yet work as
expected (probably it will group/sort by the first 7 characters in the
<CODE>BLOB</CODE>). Grouping on formulas with a fixed string size (use <CODE>MID()</CODE>
on a <CODE>BLOB</CODE>) should work.
<LI>

When doing a full join (no direct keys) on multiple tables with <CODE>BLOB</CODE>
fields, the <CODE>BLOB</CODE> was garbage on output.
<LI>

Fixed <CODE>DISTINCT</CODE> with calculated columns.
</UL>



<H1><A NAME="Porting" HREF="manual_toc.html#Porting">E  Porting to Other Systems</A></H1>

<P>
<A NAME="IDX1890"></A>

</P>
<P>
This appendix will help you port MySQL to other operationg systems.
Do check the list of currently supported operating systems first.
See section <A HREF="manual.html#Which_OS">2.2.5  Operating Systems Supported by MySQL</A>.
If you have created a new port of MySQL, please let us know so that
we can list it here and on our web site (<a HREF="http://www.mysql.com/">http://www.mysql.com/</a>),
recommending it to other users.

</P>
<P>
Note: If you create a new port of MySQL, you are free to copy and
distribute it under the GPL license, but it does not make you a
copyright holder of MySQL.

</P>
<P>
A working Posix thread library is needed for the server. On Solaris 2.5
we use Sun PThreads (the native thread support in 2.4 and earlier
versions are not good enough) and on Linux we use LinuxThreads by Xavier
Leroy, <a HREF="mailto:Xavier.Leroy@inria.fr">Xavier.Leroy@inria.fr</a>.

</P>
<P>
The hard part of porting to a new Unix variant without good native
thread support is probably to port MIT-pthreads. See
<TT>`mit-pthreads/README'</TT> and Programming POSIX Threads
(<a HREF="http://www.humanfactor.com/pthreads/">http://www.humanfactor.com/pthreads/</a>).

</P>
<P>
The MySQL distribution includes a patched version of
Provenzano's Pthreads from MIT (see the MIT Pthreads web page at
<a HREF="http://www.mit.edu:8001/people/proven/pthreads.html">http://www.mit.edu:8001/people/proven/pthreads.html</a>).
This can be used for some operating systems that do not
have POSIX threads.

</P>
<P>
It is also possible to use another user level thread package named
FSU Pthreads (see
<a HREF="http://www.informatik.hu-berlin.de/~mueller/pthreads.html"> FSU Pthreads
home page</a>). This implementation is being used for the SCO port.

</P>
<P>
See the <TT>`thr_lock.c'</TT> and <TT>`thr_alarm.c'</TT> programs in the <TT>`mysys'</TT>
directory for some tests/examples of these problems.

</P>
<P>
Both the server and the client need a working C++ compiler (we use <CODE>gcc</CODE>
and have tried SPARCworks). Another compiler that is known to work is the
Irix <CODE>cc</CODE>.

</P>
<P>
To compile only the client use <CODE>./configure --without-server</CODE>.

</P>
<P>
There is currently no support for only compiling the server, nor is it
likly to be added unless someone has a good reason for it.

</P>
<P>
If you want/need to change any <TT>`Makefile'</TT> or the configure script you must
get Automake and Autoconf. We have used the <CODE>automake-1.2</CODE> and
<CODE>autoconf-2.12</CODE> distributions.

</P>
<P>
All steps needed to remake everything from the most basic files.

</P>

<PRE>
/bin/rm */.deps/*.P
/bin/rm -f config.cache
aclocal
autoheader
aclocal
automake
autoconf
./configure --with-debug=full --prefix='your installation directory'

# The makefiles generated above need GNU make 3.75 or newer.
# (called gmake below)
gmake clean all install init-db
</PRE>

<P>
If you run into problems with a new port, you may have to do some debugging
of MySQL!
See section <A HREF="manual.html#Debugging_server">E.1  Debugging a MySQL server</A>.

</P>
<P>
<STRONG>Note</STRONG>: before you start debugging <CODE>mysqld</CODE>, first get the test
programs <CODE>mysys/thr_alarm</CODE> and <CODE>mysys/thr_lock</CODE> to work.  This
will ensure that your thread installation has even a remote chance to work!

</P>



<H2><A NAME="Debugging_server" HREF="manual_toc.html#Debugging_server">E.1  Debugging a MySQL server</A></H2>

<P>
<A NAME="IDX1891"></A>
<A NAME="IDX1892"></A>
<A NAME="IDX1893"></A>

</P>
<P>
If you are using some functionality that is very new in MySQL,
you can try to run <CODE>mysqld</CODE> with the <CODE>--skip-new</CODE> (which will disable all
new, potentially unsafe functionality) or with <CODE>--safe-mode</CODE> which
disables a lot of optimisation that may cause problems.
See section <A HREF="manual.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</A>.

</P>
<P>
If <CODE>mysqld</CODE> doesn't want to start, you should check that you don't have
any <TT>`my.cnf'</TT> files that interfere with your setup!
You can check your <TT>`my.cnf'</TT> arguments with <CODE>mysqld --print-defaults</CODE>
and avoid using them by starting with <CODE>mysqld --no-defaults ...</CODE>.

</P>
<P>
If <CODE>mysqld</CODE> starts to eat up CPU or memory or if it ``hangs'', you
can use <CODE>mysqladmin processlist status</CODE> to find out if someone is
executing a query that takes a long time.  It may be a good idea to
run <CODE>mysqladmin -i10 processlist status</CODE> in some window if you are
experiencing performance problems or problems when new clients can't connect.

</P>
<P>
The command <CODE>mysqladmin debug</CODE> will dump some information about
locks in use, used memory and query usage to the mysql log file. This
may help solve some problems.  This command also provides some useful
information even if you haven't compiled MySQL for debugging!

</P>
<P>
If the problem is that some tables are getting slower and slower you
should try to optimise the table with <CODE>OPTIMIZE TABLE</CODE> or
<CODE>myisamchk</CODE>.  See section <A HREF="manual.html#MySQL_Database_Administration">4  Database Administration</A>. You should also
check the slow queries with <CODE>EXPLAIN</CODE>.

</P>
<P>
You should also read the OS-specific section in this manual for
problems that may be unique to your environment.
See section <A HREF="manual.html#Operating_System_Specific_Notes">2.6  Operating System Specific Notes</A>.

</P>



<H3><A NAME="Compiling_for_debugging" HREF="manual_toc.html#Compiling_for_debugging">E.1.1  Compiling MYSQL for Debugging</A></H3>

<P>
If you have some very specific problem, you can always try to debug
MySQL.  To do this you must configure MySQL with the
<CODE>--with-debug</CODE> or the <CODE>--with-debug=full</CODE> option.  You can check
whether MySQL was compiled with debugging by doing:
<CODE>mysqld --help</CODE>.  If the <CODE>--debug</CODE> flag is listed with the
options then you have debugging enabled.  <CODE>mysqladmin ver</CODE> also
lists the <CODE>mysqld</CODE> version as <CODE>mysql ... --debug</CODE> in this case.

</P>
<P>
If you are using gcc or egcs, the recommended configure line is:

</P>

<PRE>
CC=gcc CFLAGS="-O2" CXX=gcc CXXFLAGS="-O2 -felide-constructors \
   -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql \
   --with-debug --with-extra-charsets=complex
</PRE>

<P>
This will avoid problems with the <CODE>libstdc++</CODE> library and with C++
exceptions (many compilers have problems with C++ exceptions in threaded
code) and compile a MySQL version with support for all character sets.

</P>
<P>
If you suspect a memory overrun error, you can configure MySQL
with <CODE>--with-debug=full</CODE>, which will install a memory allocation
(<CODE>SAFEMALLOC</CODE>) checker. Running with <CODE>SAFEMALLOC</CODE> is however
quite slow, so if you get performance problems you should start
<CODE>mysqld</CODE> with the <CODE>--skip-safemalloc</CODE> option. This will
disable the memory overrun checks for each call to <CODE>malloc</CODE> and
<CODE>free</CODE>.

</P>
<P>
If <CODE>mysqld</CODE> stops crashing when you compile it with
<CODE>--with-debug</CODE>, you have probably found a compiler bug or a timing
bug within MySQL.  In this case you can try to add <CODE>-g</CODE> to
the <CODE>CFLAGS</CODE> and <CODE>CXXFLAGS</CODE> variables above and not use
<CODE>--with-debug</CODE>. If <CODE>mysqld</CODE> now dies, you can at least attach
to it with <CODE>gdb</CODE> or use <CODE>gdb</CODE> on the core file to find out
what happened.

</P>
<P>
When you configure MySQL for debugging you automatically enable a
lot of extra safety check functions that monitor the health of <CODE>mysqld</CODE>.
If they find something ``unexpected,'' an entry will be written to
<CODE>stderr</CODE>, which <CODE>safe_mysqld</CODE> directs to the error log!  This also
means that if you are having some unexpected problems with MySQL and
are using a source distribution, the first thing you should do is to
configure MySQL for debugging!  (The second thing, of course, is to
send mail to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> and ask for help.  Please use the
<CODE>mysqlbug</CODE> script for all bug reports or questions regarding the
MySQL version you are using!

</P>
<P>
In the Windows MySQL distribution, <CODE>mysqld.exe</CODE> is by
default compiled with support for trace files.

</P>



<H3><A NAME="Making_trace_files" HREF="manual_toc.html#Making_trace_files">E.1.2  Creating Trace Files</A></H3>

<P>
If the <CODE>mysqld</CODE> server doesn't start or if you can cause the
<CODE>mysqld</CODE> server to crash quickly, you can try to create a trace
file to find the problem.

</P>
<P>
To do this you have to have a <CODE>mysqld</CODE> that is compiled for debugging.
You can check this by executing <CODE>mysqld -V</CODE>.  If the version number
ends with <CODE>-debug</CODE>, it's compiled with support for trace files.

</P>
<P>
Start the <CODE>mysqld</CODE> server with a trace log in <TT>`/tmp/mysqld.trace'</TT>
(or <TT>`C:\mysqld.trace'</TT> on Windows):

</P>
<P>
<CODE>mysqld --debug</CODE>

</P>
<P>
On Windows you should also use the <CODE>--standalone</CODE> flag to not start
<CODE>mysqld</CODE> as a service:

</P>
<P>
In a DOS window do:

</P>

<PRE>
mysqld --debug --standalone
</PRE>

<P>
After this you can use the <CODE>mysql.exe</CODE> command-line tool in a
second DOS window to reproduce the problem. You can take down the above
<CODE>mysqld</CODE> server with <CODE>mysqladmin shutdown</CODE>.

</P>
<P>
Note that the trace file will get <STRONG>very big</STRONG>!
If you want to have a smaller trace file, you can use something like:

</P>
<P>
<CODE>mysqld --debug=d,info,error,query,general,where:O,/tmp/mysqld.trace</CODE>

</P>
<P>
which only prints information with the most interesting tags in
<TT>`/tmp/mysqld.trace'</TT>.

</P>
<P>
If you make a bug report about this, please only send the lines from the
trace file to the appropriate mailing list where something seems to go
wrong! If you can't locate the wrong place, you can ftp the trace file,
together with a full bug report, to
<a HREF="ftp://support.mysql.com/pub/mysql/secret/">ftp://support.mysql.com/pub/mysql/secret/</a> so that a MySQL
developer can take a look a this.

</P>
<P>
The trace file is made with the <STRONG>DBUG</STRONG> package by Fred Fish.
See section <A HREF="manual.html#The_DBUG_package">E.3  The DBUG Package</A>.

</P>



<H3><A NAME="Using_gdb_on_mysqld" HREF="manual_toc.html#Using_gdb_on_mysqld">E.1.3  Debugging mysqld under gdb</A></H3>

<P>
<A NAME="IDX1894"></A>

</P>
<P>
On most systems you can also start <CODE>mysqld</CODE> from <CODE>gdb</CODE> to get
more information if <CODE>mysqld</CODE> crashes.

</P>
<P>
With some older <CODE>gdb</CODE> versions on Linux you must use <CODE>run
--one-thread</CODE> if you want to be able to debug <CODE>mysqld</CODE> threads.  In
this case you can only have one thread active at a time.  We recommend you
to upgrade to gdb 5.1 ASAP as thread debugging works much better with this
version!

</P>
<P>
When running <CODE>mysqld</CODE> under gdb, you should disable the stack trace
with <CODE>--skip-stack-trace</CODE> to be able to catch segfaults within gdb.

</P>
<P>
It's very hard to debug MySQL under <CODE>gdb</CODE> if you do a lot of
new connections the whole time as <CODE>gdb</CODE> doesn't free the memory for
old threads.  You can avoid this problem by starting <CODE>mysqld</CODE> with
<CODE>-O thread_cache_size= 'max_connections +1'</CODE>.  In most cases just
using <CODE>-O thread_cache_size=5'</CODE> will help a lot!

</P>
<P>
If you want to get a core dump on Linux if <CODE>mysqld</CODE> dies with a
SIGSEGV signal, you can start <CODE>mysqld</CODE> with the <CODE>--core-file</CODE> option.
This core file can be used to make a backtrace that may help you
find out why <CODE>mysqld</CODE> died:

</P>

<PRE>
shell&#62; gdb mysqld core
gdb&#62;   backtrace full
gdb&#62;   exit
</PRE>

<P>
See section <A HREF="manual.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</A>.

</P>
<P>
If you are using gdb 4.17.x or above on Linux, you should install a
<TT>`.gdb'</TT> file, with the following information, in your current
directory:

</P>

<PRE>
set print sevenbit off
handle SIGUSR1 nostop noprint
handle SIGUSR2 nostop noprint
handle SIGWAITING nostop noprint
handle SIGLWP nostop noprint
handle SIGPIPE nostop
handle SIGALRM nostop
handle SIGHUP nostop
handle SIGTERM nostop noprint
</PRE>

<P>
If you have problems debugging threads with gdb, you should download
gdb 5.x and try this instead. The new gdb version has very improved
thread handling!

</P>
<P>
Here is an example how to debug mysqld:

</P>

<PRE>
shell&#62; gdb /usr/local/libexec/mysqld
gdb&#62; run
...
backtrace full # Do this when mysqld crashes
</PRE>

<P>
Include the above output in a mail generated with <CODE>mysqlbug</CODE> and
mail this to <CODE>mysql@lists.mysql.com</CODE>.

</P>
<P>
If <CODE>mysqld</CODE> hangs you can try to use some system tools like
<CODE>strace</CODE> or <CODE>/usr/proc/bin/pstack</CODE> to examine where
<CODE>mysqld</CODE> has hung.

</P>

<PRE>
strace /tmp/log libexec/mysqld
</PRE>

<P>
<A NAME="IDX1895"></A>
<A NAME="IDX1896"></A>
<A NAME="IDX1897"></A>
<A NAME="IDX1898"></A>
If you are using the Perl <CODE>DBI</CODE> interface, you can turn on
debugging information by using the <CODE>trace</CODE> method or by
setting the <CODE>DBI_TRACE</CODE> environment variable.
See section <A HREF="manual.html#Perl_DBI_Class">8.5.2  The <CODE>DBI</CODE> Interface</A>.

</P>



<H3><A NAME="Using_stack_trace" HREF="manual_toc.html#Using_stack_trace">E.1.4  Using a Stack Trace</A></H3>

<P>
On some operating systems, the error log will contain a stack trace if
<CODE>mysqld</CODE> dies unexpectedly. You can use this to find out where (and
maybe why) <CODE>mysqld</CODE> died. See section <A HREF="manual.html#Error_log">4.9.1  The Error Log</A>.  To get a stack trace,
you must not compile <CODE>mysqld</CODE> with the <CODE>-fomit-frame-pointer</CODE>
option to gcc. See section <A HREF="manual.html#Compiling_for_debugging">E.1.1  Compiling MYSQL for Debugging</A>.

</P>
<P>
If the error file contains something like the following:

</P>

<PRE>
mysqld got signal 11;
The manual section 'Debugging a MySQL server' tells you how to use a
stack trace and/or the core file to produce a readable backtrace that may
help in finding out why mysqld died
Attemping backtrace. You can use the following information to find out
where mysqld died.  If you see no messages after this, something went
terribly wrong
stack range sanity check, ok, backtrace follows
0x40077552
0x81281a0
0x8128f47
0x8127be0
0x8127995
0x8104947
0x80ff28f
0x810131b
0x80ee4bc
0x80c3c91
0x80c6b43
0x80c1fd9
0x80c1686
</PRE>

<P>
you can find where <CODE>mysqld</CODE> died by doing the following:

</P>

<OL>
<LI>

Copy the above numbers to a file, for example <TT>`mysqld.stack'</TT>.

<LI>

Make a symbol file for the <CODE>mysqld</CODE> server:

<PRE>
nm -n libexec/mysqld &#62; /tmp/mysqld.sym
</PRE>

Note that many MySQL binary distributions comes with the above
file, named <CODE>mysqld.sym.gz</CODE>.  In this case you must unpack this by
doing:

<PRE>
gunzip &#60; bin/mysqld.sym.gz &#62; /tmp/mysqld.sym
</PRE>

<LI>

Execute <CODE>resolve_stack_dump -s /tmp/mysqld.sym -n mysqld.stack</CODE>.

This will print out where <CODE>mysqld</CODE> died. If this doesn't help you
find out why <CODE>mysqld</CODE> died, you should make a bug report and include
the output from the above command with the bug report.

Note however that in most cases it will not help us to just have a stack
trace to find the reason for the problem.  To be able to locate the bug
or provide a workaround, we would in most cases need to know the query
that killed <CODE>mysqld</CODE> and preferable a test case so that we can
repeat the problem!  See section <A HREF="manual.html#Bug_reports">1.7.1.3  How to Report Bugs or Problems</A>.
</OL>



<H3><A NAME="Using_log_files" HREF="manual_toc.html#Using_log_files">E.1.5  Using Log Files to Find Cause of Errors in mysqld</A></H3>

<P>
Note that before starting <CODE>mysqld</CODE> with <CODE>--log</CODE> you should
check all your tables with <CODE>myisamchk</CODE>.
See section <A HREF="manual.html#MySQL_Database_Administration">4  Database Administration</A>.

</P>
<P>
If <CODE>mysqld</CODE> dies or hangs, you should start <CODE>mysqld</CODE> with
<CODE>--log</CODE>.  When <CODE>mysqld</CODE> dies again, you can examine the end of
the log file for the query that killed <CODE>mysqld</CODE>.

</P>
<P>
If you are using <CODE>--log</CODE> without a file name, the log is stored in
the database directory as 'hostname'.log In most cases it's the last
query in the log file that killed <CODE>mysqld</CODE>, but if possible you
should verify this by restarting <CODE>mysqld</CODE> and executing the found
query from the <CODE>mysql</CODE> command-line tools. If this works, you
should also test all complicated queries that didn't complete.

</P>
<P>
You can also try the command <CODE>EXPLAIN</CODE> on all <CODE>SELECT</CODE>
statements that takes a long time to ensure that <CODE>mysqld</CODE> is using
indexes properly. See section <A HREF="manual.html#EXPLAIN">5.2.1  <CODE>EXPLAIN</CODE> Syntax (Get Information About a <CODE>SELECT</CODE>)</A>.

</P>
<P>
You can find the queries that take a long time to execute by starting
<CODE>mysqld</CODE> with <CODE>--log-slow-queries</CODE>. See section <A HREF="manual.html#Slow_query_log">4.9.5  The Slow Query Log</A>.

</P>
<P>
If you find the text <CODE>mysqld restarted</CODE> in the error log file
(normally named <TT>`hostname.err'</TT>) you have probably found a query
that causes <CODE>mysqld</CODE> to fail.  If this happens you should check all
your tables with <CODE>myisamchk</CODE> (see section <A HREF="manual.html#MySQL_Database_Administration">4  Database Administration</A>),
and test the queries in the MySQL log files to see if one doesn't
work.  If you find such a query, try first upgrading to the newest
MySQL version.  If this doesn't help and you can't find anything
in the <CODE>mysql</CODE> mail archive, you should report the bug to
<a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>.  Links to mail archives are available
online at <a HREF="http://lists.mysql.com/">http://lists.mysql.com/</a>.

</P>
<P>
If you have started <CODE>mysqld</CODE> with <CODE>myisam-recover</CODE>,
MySQL will automatically check and try to repair <CODE>MyISAM</CODE>
tables if they are marked as 'not closed properly' or 'crashed'.  If
this happens, MySQL will write an entry in the
<CODE>hostname.err</CODE> file <CODE>'Warning: Checking table ...'</CODE> which is
followed by <CODE>Warning: Repairing table</CODE> if the table needs to be
repaired.  If you get a lot of these errors, without <CODE>mysqld</CODE> having
died unexpectedly just before, then something is wrong and needs to
be investigated further. See section <A HREF="manual.html#Command-line_options">4.1.1  <CODE>mysqld</CODE> Command-line Options</A>.

</P>
<P>
It's of course not a good sign if <CODE>mysqld</CODE> did died unexpectedly,
but in this case one shouldn't investigate the <CODE>Checking table...</CODE>
messages but instead try to find out why <CODE>mysqld</CODE> died.

</P>



<H3><A NAME="Reproduceable_test_case" HREF="manual_toc.html#Reproduceable_test_case">E.1.6  Making a Test Case If You Experience Table Corruption</A></H3>

<P>
If you get corrupted tables or if <CODE>mysqld</CODE> always fails after some
update commands, you can test if this bug is reproducible by doing the
following:

</P>

<UL>
<LI>

Take down the MySQL daemon (with <CODE>mysqladmin shutdown</CODE>).
<LI>

Make a backup of the tables (to guard against the very unlikely case that
the repair will do something bad).
<LI>

Check all tables with <CODE>myisamchk -s database/*.MYI</CODE>.  Repair any
wrong tables with <CODE>myisamchk -r database/table.MYI</CODE>.
<LI>

Make a second backup of the tables.
<LI>

Remove (or move away) any old log files from the MySQL data
directory if you need more space.
<LI>

Start <CODE>mysqld</CODE> with <CODE>--log-bin</CODE>. See section <A HREF="manual.html#Binary_log">4.9.4  The Binary Log</A>.
If you want to find a query that crashes <CODE>mysqld</CODE>, you should use
<CODE>--log --log-bin</CODE>.
<LI>

When you have gotten a crashed table, stop the <CODE>mysqld server</CODE>.
<LI>

Restore the backup.
<LI>

Restart the <CODE>mysqld</CODE> server <STRONG>without</STRONG> <CODE>--log-bin</CODE>
<LI>

Re-execute the commands with <CODE>mysqlbinlog update-log-file | mysql</CODE>.
The update log is saved in the MySQL database directory with
the name <CODE>hostname-bin.#</CODE>.
<LI>

If the tables are corrupted again or you can get <CODE>mysqld</CODE> to die with the
above command, you have found reproducible bug that should be easy to
fix! FTP the tables and the binary log to
<a HREF="ftp://support.mysql.com/pub/mysql/secret/">ftp://support.mysql.com/pub/mysql/secret/</a> and enter it into
our bugs system at <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>.
If you are a support customer), you can also <a HREF="mailto:support@mysql.com">support@mysql.com</a> to
alert the MySQL team about the problem and have it fixed as soon as possible.
</UL>

<P>
You can also use the script <CODE>mysql_find_rows</CODE> to just execute some of the
update statements if you want to narrow down the problem.

</P>



<H2><A NAME="Debugging_client" HREF="manual_toc.html#Debugging_client">E.2  Debugging a MySQL client</A></H2>

<P>
<A NAME="IDX1899"></A>
<A NAME="IDX1900"></A>

</P>
<P>
To be able to debug a MySQL client with the integrated debug package,
you should configure MySQL with <CODE>--with-debug</CODE> or
<CODE>--with-debug=full</CODE>.  See section <A HREF="manual.html#configure_options">2.3.3  Typical <CODE>configure</CODE> Options</A>.

</P>
<P>
<A NAME="IDX1901"></A>
<A NAME="IDX1902"></A>
Before running a client, you should set the <CODE>MYSQL_DEBUG</CODE> environment
variable:

</P>

<PRE>
shell&#62; MYSQL_DEBUG=d:t:O,/tmp/client.trace
shell&#62; export MYSQL_DEBUG
</PRE>

<P>
This causes clients to generate a trace file in <TT>`/tmp/client.trace'</TT>.

</P>
<P>
If you have problems with your own client code, you should attempt to
connect to the server and run your query using a client that is known to
work.  Do this by running <CODE>mysql</CODE> in debugging mode (assuming you
have compiled MySQL with debugging on):

</P>

<PRE>
shell&#62; mysql --debug=d:t:O,/tmp/client.trace
</PRE>

<P>
This will provide useful information in case you mail a bug report.
See section <A HREF="manual.html#Bug_reports">1.7.1.3  How to Report Bugs or Problems</A>.

</P>
<P>
If your client crashes at some 'legal' looking code, you should check
that your <TT>`mysql.h'</TT> include file matches your mysql library file.
A very common mistake is to use an old <TT>`mysql.h'</TT> file from an old
MySQL installation with new MySQL library.

</P>



<H2><A NAME="The_DBUG_package" HREF="manual_toc.html#The_DBUG_package">E.3  The DBUG Package</A></H2>

<P>
<A NAME="IDX1903"></A>

</P>
<P>
The MySQL server and most MySQL clients are compiled
with the DBUG package originally made by Fred Fish.  When one has configured
MySQL for debugging, this package makes it possible to get a trace
file of what the program is debugging. See section <A HREF="manual.html#Making_trace_files">E.1.2  Creating Trace Files</A>.

</P>
<P>
One uses the debug package by invoking the program with the
<CODE>--debug="..."</CODE> or the <CODE>-#...</CODE> option.

</P>
<P>
Most MySQL programs has a default debug string that will be
used if you don't specify an option to <CODE>--debug</CODE>.  The default
trace file is usually <CODE>/tmp/programname.trace</CODE> on Unix and
<CODE>\programname.trace</CODE> on Windows.

</P>
<P>
The debug control string is a sequence of colon separated fields
as follows:

</P>

<PRE>
&#60;field_1&#62;:&#60;field_2&#62;:...:&#60;field_N&#62;
</PRE>

<P>
Each field consists of a mandatory flag character followed by
an optional "," and comma-separated list of modifiers:

</P>

<PRE>
flag[,modifier,modifier,...,modifier]
</PRE>

<P>
The currently recognised flag characters are:

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Flag</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD>d </TD><TD> Enable output from DBUG_&#60;N&#62; macros for the current state. May be followed by a list of keywords which selects output only for the DBUG macros with that keyword. An empty list of keywords implies output for all macros.
</TD></TR>
<TR><TD>D </TD><TD> Delay after each debugger output line. The argument is the number of tenths of seconds to delay, subject to machine capabilities. That is, <CODE>-#D,20</CODE> is delay two seconds.
</TD></TR>
<TR><TD>f </TD><TD> Limit debugging and/or tracing, and profiling to the list of named functions.  Note that a null list will disable all functions.	The appropriate "d" or "t" flags must still be given, this flag only limits their actions if they are enabled.
</TD></TR>
<TR><TD>F </TD><TD> Identify the source file name for each line of debug or trace output.
</TD></TR>
<TR><TD>i </TD><TD> Identify the process with the pid or thread id for each line of debug or trace output.
</TD></TR>
<TR><TD>g </TD><TD> Enable profiling.  Create a file called 'dbugmon.out' containing information that can be used to profile the program.  May be followed by a list of keywords that select profiling only for the functions in that list.  A null list implies that all functions are considered.
</TD></TR>
<TR><TD>L </TD><TD> Identify the source file line number for each line of debug or trace output.
</TD></TR>
<TR><TD>n </TD><TD> Print the current function nesting depth for each line of debug or trace output.
</TD></TR>
<TR><TD>N </TD><TD> Number each line of dbug output.
</TD></TR>
<TR><TD>o </TD><TD> Redirect the debugger output stream to the specified file.  The default output is stderr.
</TD></TR>
<TR><TD>O </TD><TD> As <CODE>o</CODE> but the file is really flushed between each write. When needed the file is closed and reopened between each write.
</TD></TR>
<TR><TD>p </TD><TD> Limit debugger actions to specified processes. A process must be identified with the DBUG_PROCESS macro and match one in the list for debugger actions to occur.
</TD></TR>
<TR><TD>P </TD><TD> Print the current process name for each line of debug or trace output.
</TD></TR>
<TR><TD>r </TD><TD> When pushing a new state, do not inherit the previous state's function nesting level. Useful when the output is to start at the left margin.
</TD></TR>
<TR><TD>S </TD><TD> Do function _sanity(_file_,_line_) at each debugged function until _sanity() returns something that differs from 0. (Mostly used with safemalloc to find memory leaks)
</TD></TR>
<TR><TD>t </TD><TD> Enable function call/exit trace lines. May be followed by a list (containing only one modifier) giving a numeric maximum trace level, beyond which no output will occur for either debugging or tracing macros.  The default is a compile time option.
</TD></TR>
</TABLE>

<P>
Some examples of debug control strings which might appear on a shell
command-line (the "-#" is typically used to introduce a control string
to an application program) are:

</P>

<PRE>
-#d:t
-#d:f,main,subr1:F:L:t,20
-#d,input,output,files:n
-#d:t:i:O,\\mysqld.trace
</PRE>

<P>
In MySQL, common tags to print (with the <CODE>d</CODE> option) are:
<CODE>enter</CODE>,<CODE>exit</CODE>,<CODE>error</CODE>,<CODE>warning</CODE>,<CODE>info</CODE> and
<CODE>loop</CODE>.

</P>



<H2><A NAME="Locking_methods" HREF="manual_toc.html#Locking_methods">E.4  Locking methods</A></H2>

<P>
<A NAME="IDX1904"></A>
<A NAME="IDX1905"></A>

</P>
<P>
Currently MySQL only supports table locking for
<CODE>ISAM</CODE>/<CODE>MyISAM</CODE> and <CODE>HEAP</CODE> tables,
page-level locking for <CODE>BDB</CODE> tables and
row-level locking for <CODE>InnoDB</CODE> tables.
See section <A HREF="manual.html#Internal_locking">5.3.1  How MySQL Locks Tables</A>.
With <CODE>MyISAM</CODE> tables one can freely mix <CODE>INSERT</CODE> and
<CODE>SELECT</CODE> without locks, if the <CODE>INSERT</CODE>s are non-conflicting
(i.e. whenever they append to the end of the table file rather than
filling freespace from deleted rows/data).

</P>
<P>
Starting in version 3.23.33, you can analyse the table lock contention
on your system by checking <CODE>Table_locks_waited</CODE> and
<CODE>Table_locks_immediate</CODE> environment variables.

</P>
<P>
To decide if you want to use a table type with row-level locking,
you will want to look at what the application does and what the
select/update pattern of the data is.

</P>
<P>
Pros for row locking:

</P>

<UL>
<LI>

Fewer lock conflicts when accessing different rows in many threads.
<LI>

Fewer changes for rollbacks.
<LI>

Makes it possible to lock a single row a long time.
</UL>

<P>
Cons:

</P>

<UL>
<LI>

Takes more memory than page level or table locks.
<LI>

Is slower than page level or table locks when used on a big part of the table,
because one has to do many more locks.
<LI>

Is definitely much worse than other locks if you do often do <CODE>GROUP
BY</CODE> on a large part of the data or if one has to often scan the whole table.
<LI>

With higher level locks one can also more easily support locks of
different types to tune the application as the lock overhead is less
notable as for row level locks.
</UL>

<P>
Table locks are superior to page level / row level locks in the
following cases:

</P>

<UL>
<LI>

Mostly reads
<LI>

Read and updates on strict keys; this is where one updates or deletes
a row that can be fetched with one key read:

<PRE>
UPDATE table_name SET column=value WHERE unique_key#
DELETE FROM table_name WHERE unique_key=#
</PRE>

<LI>

<CODE>SELECT</CODE> combined with <CODE>INSERT</CODE> (and very few <CODE>UPDATE</CODE>s
and <CODE>DELETE</CODE>s).
<LI>

Many scans / <CODE>GROUP BY</CODE> on the whole table without any writers.
</UL>

<P>
Other options than row / page level locking:

</P>
<P>
Versioning (like we use in MySQL for concurrent inserts) where
you can have one writer at the same time as many readers.  This means
that the database/table supports different views for the data depending
on when one started to access it. Other names for this are time travel,
copy on write or copy on demand.

</P>
<P>
Copy on demand is in many case much better than page or row level
locking; the worst case does, however, use much more memory than
when using normal locks.

</P>
<P>
Instead of using row level locks one can use application level locks
(like get_lock/release_lock in MySQL).  This works of course
only in well-behaved applications.

</P>
<P>
In many cases one can do an educated guess which locking type is best
for the application, but generally it's very hard to say that a given
lock type is better than another; everything depends on the application
and different part of the application may require different lock types.

</P>
<P>
Here are some tips about locking in MySQL:

</P>
<P>
Most web applications do lots of selects, very few
deletes, updates mainly on keys, and inserts in some specific tables.
The base MySQL setup is very well tuned for this.

</P>
<P>
Concurrent users are not a problem if one doesn't mix updates with selects
that need to examine many rows in the same table.

</P>
<P>
If one mixes inserts and deletes on the same table then <CODE>INSERT DELAYED</CODE>
may be of great help.

</P>
<P>
One can also use <CODE>LOCK TABLES</CODE> to speed up things (many updates within
a single lock is much faster than updates without locks).  Splitting
thing to different tables will also help.

</P>
<P>
If you get speed problems with the table locks in MySQL, you
may be able to solve these by converting some of your tables to <CODE>InnoDB</CODE>
or <CODE>BDB</CODE> tables.
See section <A HREF="manual.html#InnoDB">7.5  <CODE>InnoDB</CODE> Tables</A>. See section <A HREF="manual.html#BDB">7.6  <CODE>BDB</CODE> or <CODE>BerkeleyDB</CODE> Tables</A>.

</P>
<P>
The optimisation section in the manual covers a lot of different aspects of
how to tune applications. See section <A HREF="manual.html#Tips">5.2.12  Other Optimisation Tips</A>.

</P>



<H2><A NAME="RTS-threads" HREF="manual_toc.html#RTS-threads">E.5  Comments about RTS threads</A></H2>

<P>
<A NAME="IDX1906"></A>
<A NAME="IDX1907"></A>

</P>
<P>
I have tried to use the RTS thread packages with MySQL but
stumbled on the following problems:

</P>
<P>
They use an old version of a lot of POSIX calls and it is very tedious to
make wrappers for all functions. I am inclined to think that it would
be easier to change the thread libraries to the newest POSIX
specification.

</P>
<P>
Some wrappers are already written. See <TT>`mysys/my_pthread.c'</TT> for more info.

</P>
<P>
At least the following should be changed:

</P>
<P>
<CODE>pthread_get_specific</CODE> should use one argument.
<CODE>sigwait</CODE> should take two arguments.
A lot of functions (at least <CODE>pthread_cond_wait</CODE>,
<CODE>pthread_cond_timedwait</CODE>)
should return the error code on error. Now they return -1 and set <CODE>errno</CODE>.

</P>
<P>
Another problem is that user-level threads use the <CODE>ALRM</CODE> signal and this
aborts a lot of functions (<CODE>read</CODE>, <CODE>write</CODE>, <CODE>open</CODE>...).
MySQL should do a retry on interrupt on all of these but it is
not that easy to verify it.

</P>
<P>
The biggest unsolved problem is the following:

</P>
<P>
To get thread-level alarms I changed <TT>`mysys/thr_alarm.c'</TT> to wait between
alarms with <CODE>pthread_cond_timedwait()</CODE>, but this aborts with error
<CODE>EINTR</CODE>.  I tried to debug the thread library as to why this happens,
but couldn't find any easy solution.

</P>
<P>
If someone wants to try MySQL with RTS threads I suggest the
following:

</P>

<UL>
<LI>

Change functions MySQL uses from the thread library to POSIX.
This shouldn't take that long.
<LI>

Compile all libraries with the <CODE>-DHAVE_rts_threads</CODE>.
<LI>

Compile <CODE>thr_alarm</CODE>.
<LI>

If there are some small differences in the implementation, they may be fixed
by changing <TT>`my_pthread.h'</TT> and <TT>`my_pthread.c'</TT>.
<LI>

Run <CODE>thr_alarm</CODE>. If it runs without any ``warning'', ``error'' or aborted
messages, you are on the right track. Here is a successful run on
Solaris:

<PRE>
Main thread: 1
Thread 0 (5) started
Thread: 5  Waiting
process_alarm
Thread 1 (6) started
Thread: 6  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 1 (1) sec
Thread: 6  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 2 (2) sec
Thread: 6  Simulation of no alarm needed
Thread: 6  Slept for 0 (3) sec
Thread: 6  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 4 (4) sec
Thread: 6  Waiting
process_alarm
thread_alarm
Thread: 5  Slept for 10 (10) sec
Thread: 5  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 5 (5) sec
Thread: 6  Waiting
process_alarm
process_alarm

...
thread_alarm
Thread: 5  Slept for 0 (1) sec
end
</PRE>

</UL>



<H2><A NAME="Thread_packages" HREF="manual_toc.html#Thread_packages">E.6  Differences between different thread packages</A></H2>

<P>
<A NAME="IDX1908"></A>

</P>
<P>
MySQL is very dependent on the thread package used. So when
choosing a good platform for MySQL, the thread package is very
important.

</P>
<P>
There are at least three types of thread packages:

</P>

<UL>
<LI>

User threads in a single process. Thread switching is managed with
alarms and the threads library manages all non-thread-safe functions
with locks. Read, write and select operations are usually managed with a
thread-specific select that switches to another thread if the running
threads have to wait for data.  If the user thread packages are
integrated in the standard libs (FreeBSD and BSDI threads) the thread
package requires less overhead than thread packages that have to map all
unsafe calls (MIT-pthreads, FSU Pthreads and RTS threads).  In some
environments (for example, SCO), all system calls are thread-safe so the
mapping can be done very easily (FSU Pthreads on SCO).  Downside: All
mapped calls take a little time and it's quite tricky to be able to
handle all situations. There are usually also some system calls that are
not handled by the thread package (like MIT-pthreads and sockets). Thread
scheduling isn't always optimal.
<LI>

User threads in separate processes. Thread switching is done by the
kernel and all data are shared between threads.  The thread package
manages the standard thread calls to allow sharing data between threads.
LinuxThreads is using this method.  Downside: Lots of processes. Thread
creating is slow. If one thread dies the rest are usually left hanging
and you must kill them all before restarting. Thread switching is
somewhat expensive.
<LI>

Kernel threads. Thread switching is handled by the thread library or the
kernel and is very fast. Everything is done in one process, but on some
systems, <CODE>ps</CODE> may show the different threads. If one thread aborts, the
whole process aborts. Most system calls are thread-safe and should
require very little overhead.  Solaris, HP-UX, AIX and OSF/1 have kernel
threads.
</UL>

<P>
In some systems kernel threads are managed by integrating user
level threads in the system libraries. In such cases, the thread
switching can only be done by the thread library and the kernel isn't
really ``thread aware''.

</P>



<H1><A NAME="Environment_variables" HREF="manual_toc.html#Environment_variables">F  Environment Variables</A></H1>

<P>
<A NAME="IDX1909"></A>

</P>
<P>
Here is a list of all the environment variables that are used directly or
indirectly by MySQL. Most of these can also be found in other
places in this manual.

</P>
<P>
Note that any options on the command-line will take precedence over
values specified in configuration files and environment variables, and
values in configuration files take precedence over values in environment
variables.

</P>
<P>
In many cases it's preferable to use a configure file instead of environment
variables to modify the behaviour of MySQL. See section <A HREF="manual.html#Option_files">4.1.2  <TT>`my.cnf'</TT> Option Files</A>.

</P>
<P>
<A NAME="IDX1910"></A>
<A NAME="IDX1911"></A>
<A NAME="IDX1912"></A>
<A NAME="IDX1913"></A>
<A NAME="IDX1914"></A>
<A NAME="IDX1915"></A>
<A NAME="IDX1916"></A>
<A NAME="IDX1917"></A>
<A NAME="IDX1918"></A>
<A NAME="IDX1919"></A>
<A NAME="IDX1920"></A>
<A NAME="IDX1921"></A>
<A NAME="IDX1922"></A>
<A NAME="IDX1923"></A>
<A NAME="IDX1924"></A>
<A NAME="IDX1925"></A>
<A NAME="IDX1926"></A>
<A NAME="IDX1927"></A>
<A NAME="IDX1928"></A>
<A NAME="IDX1929"></A>
<A NAME="IDX1930"></A>
<A NAME="IDX1931"></A>
<A NAME="IDX1932"></A>
<A NAME="IDX1933"></A>
<A NAME="IDX1934"></A>
<A NAME="IDX1935"></A>
<A NAME="IDX1936"></A>
<A NAME="IDX1937"></A>
<A NAME="IDX1938"></A>
<A NAME="IDX1939"></A>
<A NAME="IDX1940"></A>
<A NAME="IDX1941"></A>
<A NAME="IDX1942"></A>
<A NAME="IDX1943"></A>
<A NAME="IDX1944"></A>
<A NAME="IDX1945"></A>
<A NAME="IDX1946"></A>
<A NAME="IDX1947"></A>
<A NAME="IDX1948"></A>
<A NAME="IDX1949"></A>
<A NAME="IDX1950"></A>
<A NAME="IDX1951"></A>

</P>
<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Variable</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TD></TR>
<TR><TD><CODE>CCX</CODE> </TD><TD> Set this to your C++ compiler when running configure.
</TD></TR>
<TR><TD><CODE>CC</CODE> </TD><TD> Set this to your C compiler when running configure.
</TD></TR>
<TR><TD><CODE>CFLAGS</CODE> </TD><TD> Flags for your C compiler when running configure.
</TD></TR>
<TR><TD><CODE>CXXFLAGS</CODE> </TD><TD> Flags for your C++ compiler when running configure.
</TD></TR>
<TR><TD><CODE>DBI_USER</CODE> </TD><TD> The default user name for Perl DBI.
</TD></TR>
<TR><TD><CODE>DBI_TRACE</CODE> </TD><TD> Used when tracing Perl DBI.
</TD></TR>
<TR><TD><CODE>HOME</CODE> </TD><TD> The default path for the <CODE>mysql</CODE> history file is <TT>`$HOME/.mysql_history'</TT>.
</TD></TR>
<TR><TD><CODE>LD_RUN_PATH</CODE> </TD><TD> Used to specify where your <TT>`libmysqlclient.so'</TT> is.
</TD></TR>
<TR><TD><CODE>MYSQL_DEBUG</CODE> </TD><TD> Debug-trace options when debugging.
</TD></TR>
<TR><TD><CODE>MYSQL_HISTFILE</CODE> </TD><TD> The path to the <CODE>mysql</CODE> history file.
</TD></TR>
<TR><TD><CODE>MYSQL_HOST</CODE> </TD><TD> Default host name used by the <CODE>mysql</CODE> command-line client.
</TD></TR>
<TR><TD><CODE>MYSQL_PS1</CODE> </TD><TD> Command prompt to use in the <CODE>mysql</CODE> command-line client. See section <A HREF="manual.html#mysql">4.8.2  <CODE>mysql</CODE>, The Command-line Tool</A>.
</TD></TR>
<TR><TD><CODE>MYSQL_PWD</CODE> </TD><TD> The default password when connecting to <CODE>mysqld</CODE>. Note that use of this is insecure!
</TD></TR>
<TR><TD><CODE>MYSQL_TCP_PORT</CODE> </TD><TD> The default TCP/IP port.
</TD></TR>
<TR><TD><CODE>MYSQL_UNIX_PORT</CODE> </TD><TD> The default socket; used for connections to <CODE>localhost</CODE>.
</TD></TR>
<TR><TD><CODE>PATH</CODE> </TD><TD> Used by the shell to finds the MySQL programs.
</TD></TR>
<TR><TD><CODE>TMPDIR</CODE> </TD><TD> The directory where temporary tables/files are created.
</TD></TR>
<TR><TD><CODE>TZ</CODE> </TD><TD> This should be set to your local time zone. See section <A HREF="manual.html#Timezone_problems">A.4.6  Time Zone Problems</A>.
</TD></TR>
<TR><TD><CODE>UMASK_DIR</CODE> </TD><TD> The user-directory creation mask when creating directories. Note that this is ANDed with <CODE>UMASK</CODE>!
</TD></TR>
<TR><TD><CODE>UMASK</CODE> </TD><TD> The user-file creation mask when creating files.
</TD></TR>
<TR><TD><CODE>USER</CODE> </TD><TD> The default user on Windows to use when connecting to <CODE>mysqld</CODE>.
</TD></TR>
</TABLE>



<H1><A NAME="Regexp" HREF="manual_toc.html#Regexp">G  MySQL Regular Expressions</A></H1>

<P>
<A NAME="IDX1952"></A>
<A NAME="IDX1953"></A>
<A NAME="IDX1954"></A>

</P>
<P>
A regular expression (regex) is a powerful way of specifying a complex search.

</P>
<P>
MySQL uses Henry Spencer's implementation of regular
expressions, which is aimed at conformance with POSIX
1003.2. MySQL uses the extended version.

</P>
<P>
This is a simplistic reference that skips the details. To get more exact
information, see Henry Spencer's <CODE>regex(7)</CODE> manual page that is
included in the source distribution. See section <A HREF="manual.html#Credits">C  Credits</A>.

</P>
<P>
A regular expression describes a set of strings. The simplest regexp is
one that has no special characters in it. For example, the regexp
<CODE>hello</CODE> matches <CODE>hello</CODE> and nothing else.

</P>
<P>
Non-trivial regular expressions use certain special constructs so that
they can match more than one string. For example, the regexp
<CODE>hello|word</CODE> matches either the string <CODE>hello</CODE> or the string
<CODE>word</CODE>.

</P>
<P>
As a more complex example, the regexp <CODE>B[an]*s</CODE> matches any of the
strings <CODE>Bananas</CODE>, <CODE>Baaaaas</CODE>, <CODE>Bs</CODE>, and any other string
starting with a <CODE>B</CODE>, ending with an <CODE>s</CODE>, and containing any
number of <CODE>a</CODE> or <CODE>n</CODE> characters in between.

</P>
<P>
A regular expression may use any of the following special
characters/constructs:
<DL COMPACT>

<DT><CODE>^</CODE>
<DD>
Match the beginning of a string.

<PRE>
mysql&#62; SELECT "fo\nfo" REGEXP "^fo$";           -&#62; 0
mysql&#62; SELECT "fofo" REGEXP "^fo";              -&#62; 1
</PRE>

<DT><CODE>$</CODE>
<DD>
Match the end of a string.

<PRE>
mysql&#62; SELECT "fo\no" REGEXP "^fo\no$";         -&#62; 1
mysql&#62; SELECT "fo\no" REGEXP "^fo$";            -&#62; 0
</PRE>

<DT><CODE>.</CODE>
<DD>
Match any character (including newline).

<PRE>
mysql&#62; SELECT "fofo" REGEXP "^f.*";             -&#62; 1
mysql&#62; SELECT "fo\nfo" REGEXP "^f.*";           -&#62; 1
</PRE>

<DT><CODE>a*</CODE>
<DD>
Match any sequence of zero or more <CODE>a</CODE> characters.

<PRE>
mysql&#62; SELECT "Ban" REGEXP "^Ba*n";             -&#62; 1
mysql&#62; SELECT "Baaan" REGEXP "^Ba*n";           -&#62; 1
mysql&#62; SELECT "Bn" REGEXP "^Ba*n";              -&#62; 1
</PRE>

<DT><CODE>a+</CODE>
<DD>
Match any sequence of one or more <CODE>a</CODE> characters.

<PRE>
mysql&#62; SELECT "Ban" REGEXP "^Ba+n";             -&#62; 1
mysql&#62; SELECT "Bn" REGEXP "^Ba+n";              -&#62; 0
</PRE>

<DT><CODE>a?</CODE>
<DD>
Match either zero or one <CODE>a</CODE> character.

<PRE>
mysql&#62; SELECT "Bn" REGEXP "^Ba?n";              -&#62; 1
mysql&#62; SELECT "Ban" REGEXP "^Ba?n";             -&#62; 1
mysql&#62; SELECT "Baan" REGEXP "^Ba?n";            -&#62; 0
</PRE>

<DT><CODE>de|abc</CODE>
<DD>
Match either of the sequences <CODE>de</CODE> or <CODE>abc</CODE>.

<PRE>
mysql&#62; SELECT "pi" REGEXP "pi|apa";             -&#62; 1
mysql&#62; SELECT "axe" REGEXP "pi|apa";            -&#62; 0
mysql&#62; SELECT "apa" REGEXP "pi|apa";            -&#62; 1
mysql&#62; SELECT "apa" REGEXP "^(pi|apa)$";        -&#62; 1
mysql&#62; SELECT "pi" REGEXP "^(pi|apa)$";         -&#62; 1
mysql&#62; SELECT "pix" REGEXP "^(pi|apa)$";        -&#62; 0
</PRE>

<DT><CODE>(abc)*</CODE>
<DD>
Match zero or more instances of the sequence <CODE>abc</CODE>.

<PRE>
mysql&#62; SELECT "pi" REGEXP "^(pi)*$";            -&#62; 1
mysql&#62; SELECT "pip" REGEXP "^(pi)*$";           -&#62; 0
mysql&#62; SELECT "pipi" REGEXP "^(pi)*$";          -&#62; 1
</PRE>

<DT><CODE>{1}</CODE>
<DD>
<DT><CODE>{2,3}</CODE>
<DD>
The is a more general way of writing regexps that match many
occurrences of the previous atom.
<DL COMPACT>

<DT><CODE>a*</CODE>
<DD>
Can be written as <CODE>a{0,}</CODE>.
<DT><CODE>a+</CODE>
<DD>
Can be written as <CODE>a{1,}</CODE>.
<DT><CODE>a?</CODE>
<DD>
Can be written as <CODE>a{0,1}</CODE>.
</DL>
To be more precise, an atom followed by a bound containing one integer
<CODE>i</CODE> and no comma matches a sequence of exactly <CODE>i</CODE> matches of
the atom. An atom followed by a bound containing one integer <CODE>i</CODE>
and a comma matches a sequence of <CODE>i</CODE> or more matches of the atom.
An atom followed by a bound containing two integers <CODE>i</CODE> and
<CODE>j</CODE> matches a sequence of <CODE>i</CODE> through <CODE>j</CODE> (inclusive)
matches of the atom.

Both arguments must be in the range from <CODE>0</CODE> to <CODE>RE_DUP_MAX</CODE>
(default 255), inclusive.  If there are two arguments, the second must be
greater than or equal to the first.
<DT><CODE>[a-dX]</CODE>
<DD>
<DT><CODE>[^a-dX]</CODE>
<DD>
Matches
any character which is (or is not, if ^ is used) either <CODE>a</CODE>, <CODE>b</CODE>,
<CODE>c</CODE>, <CODE>d</CODE> or <CODE>X</CODE>. To include a literal <CODE>]</CODE> character,
it must immediately follow the opening bracket <CODE>[</CODE>.  To include a
literal <CODE>-</CODE> character, it must be written first or last. So
<CODE>[0-9]</CODE> matches any decimal digit. Any character that does not have
a defined meaning inside a <CODE>[]</CODE> pair has no special meaning and
matches only itself.

<PRE>
mysql&#62; SELECT "aXbc" REGEXP "[a-dXYZ]";         -&#62; 1
mysql&#62; SELECT "aXbc" REGEXP "^[a-dXYZ]$";       -&#62; 0
mysql&#62; SELECT "aXbc" REGEXP "^[a-dXYZ]+$";      -&#62; 1
mysql&#62; SELECT "aXbc" REGEXP "^[^a-dXYZ]+$";     -&#62; 0
mysql&#62; SELECT "gheis" REGEXP "^[^a-dXYZ]+$";    -&#62; 1
mysql&#62; SELECT "gheisa" REGEXP "^[^a-dXYZ]+$";   -&#62; 0
</PRE>

<DT><CODE>[[.characters.]]</CODE>
<DD>
The sequence of characters of that collating element. The sequence is a
single element of the bracket expression's list. A bracket expression
containing a multi-character collating element can thus match more than
one character, for example, if the collating sequence includes a <CODE>ch</CODE>
collating element, then the regular expression <CODE>[[.ch.]]*c</CODE> matches the
first five characters of <CODE>chchcc</CODE>.

<DT><CODE>[=character_class=]</CODE>
<DD>
An equivalence class, standing for the sequences of characters of all
collating elements equivalent to that one, including itself.

For example, if <CODE>o</CODE> and <CODE>(+)</CODE> are the members of an
equivalence class, then <CODE>[[=o=]]</CODE>, <CODE>[[=(+)=]]</CODE>, and
<CODE>[o(+)]</CODE> are all synonymous. An equivalence class may not be an
endpoint of a range.

<DT><CODE>[:character_class:]</CODE>
<DD>
Within a bracket expression, the name of a character class enclosed in
<CODE>[:</CODE> and <CODE>:]</CODE> stands for the list of all characters belonging
to that class. Standard character class names are:

<TABLE BORDER WIDTH="100%">
<TR><TD><STRONG>Name</STRONG> </TD><TD> <STRONG>Name</STRONG> </TD><TD> <STRONG>Name</STRONG>
</TD></TR>
<TR><TD>alnum </TD><TD> digit </TD><TD> punct
</TD></TR>
<TR><TD>alpha </TD><TD> graph </TD><TD> space
</TD></TR>
<TR><TD>blank </TD><TD> lower </TD><TD> upper
</TD></TR>
<TR><TD>cntrl </TD><TD> print </TD><TD> xdigit
</TD></TR>
</TABLE>

These stand for the character classes defined in the <CODE>ctype(3)</CODE> manual
page. A locale may provide others. A character class may not be used as an
endpoint of a range.

<PRE>
mysql&#62; SELECT "justalnums" REGEXP "[[:alnum:]]+";       -&#62; 1
mysql&#62; SELECT "!!" REGEXP "[[:alnum:]]+";               -&#62; 0
</PRE>

<DT><CODE>[[:&#60;:]]</CODE>
<DD>
<DT><CODE>[[:&#62;:]]</CODE>
<DD>
These match the null string at the beginning and end of a word
respectively.  A word is defined as a sequence of word characters which
is neither preceded nor followed by word characters. A word character is
an alnum character (as defined by <CODE>ctype(3)</CODE>) or an underscore
(<CODE>_</CODE>).

<PRE>
mysql&#62; SELECT "a word a" REGEXP "[[:&#60;:]]word[[:&#62;:]]";      -&#62; 1
mysql&#62; SELECT "a xword a" REGEXP "[[:&#60;:]]word[[:&#62;:]]";     -&#62; 0
</PRE>

</DL>


<PRE>
mysql&#62; SELECT "weeknights" REGEXP "^(wee|week)(knights|nights)$"; -&#62; 1
</PRE>



<H1><A NAME="GPL_license" HREF="manual_toc.html#GPL_license">H  GNU General Public License</A></H1>

<P>
<A NAME="IDX1955"></A>
<A NAME="IDX1956"></A>

</P>
<P>
Version 2, June 1991

</P>

<PRE>
Copyright &copy; 1989, 1991 Free Software Foundation, Inc.
59 Temple Place - Suite 330, Boston, MA  02111-1307, USA

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</PRE>



<H2><A NAME="SEC915" HREF="manual_toc.html#SEC915">H.1  Preamble</A></H2>

<P>
  The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
License is intended to guarantee your freedom to share and change free
software--to make sure the software is free for all its users.  This
General Public License applies to most of the Free Software
Foundation's software and to any other program whose authors commit to
using it.  (Some other Free Software Foundation software is covered by
the GNU Library General Public License instead.)  You can apply it to
your programs, too.

</P>
<P>
  When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
this service if you wish), that you receive source code or can get it
if you want it, that you can change the software or use pieces of it
in new free programs; and that you know you can do these things.

</P>
<P>
  To protect your rights, we need to make restrictions that forbid
anyone to deny you these rights or to ask you to surrender the rights.
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.

</P>
<P>
  For example, if you distribute copies of such a program, whether
gratis or for a fee, you must give the recipients all the rights that
you have.  You must make sure that they, too, receive or can get the
source code.  And you must show them these terms so they know their
rights.

</P>
<P>
  We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.

</P>
<P>
  Also, for each author's protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors' reputations.

</P>
<P>
  Finally, any free program is threatened constantly by software
patents.  We wish to avoid the danger that redistributors of a free
program will individually obtain patent licenses, in effect making the
program proprietary.  To prevent this, we have made it clear that any
patent must be licensed for everyone's free use or not licensed at all.

</P>
<P>
  The precise terms and conditions for copying, distribution and
modification follow.

</P>


<H2><A NAME="SEC916" HREF="manual_toc.html#SEC916">H.2  TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</A></H2>


<OL>
<LI>

This License applies to any program or other work which contains
a notice placed by the copyright holder saying it may be distributed
under the terms of this General Public License.  The ``Program'', below,
refers to any such program or work, and a ``work based on the Program''
means either the Program or any derivative work under copyright law:
that is to say, a work containing the Program or a portion of it,
either verbatim or with modifications and/or translated into another
language.  (Hereinafter, translation is included without limitation in
the term ``modification''.)  Each licensee is addressed as ``you''.

Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running the Program is not restricted, and the output from the Program
is covered only if its contents constitute a work based on the
Program (independent of having been made by running the Program).
Whether that is true depends on what the Program does.

<LI>

You may copy and distribute verbatim copies of the Program's
source code as you receive it, in any medium, provided that you
conspicuously and appropriately publish on each copy an appropriate
copyright notice and disclaimer of warranty; keep intact all the
notices that refer to this License and to the absence of any warranty;
and give any other recipients of the Program a copy of this License
along with the Program.

You may charge a fee for the physical act of transferring a copy, and
you may at your option offer warranty protection in exchange for a fee.

<LI>

You may modify your copy or copies of the Program or any portion
of it, thus forming a work based on the Program, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:


<OL>
<LI>

You must cause the modified files to carry prominent notices
stating that you changed the files and the date of any change.

<LI>

You must cause any work that you distribute or publish, that in
whole or in part contains or is derived from the Program or any
part thereof, to be licensed as a whole at no charge to all third
parties under the terms of this License.

<LI>

If the modified program normally reads commands interactively
when run, you must cause it, when started running for such
interactive use in the most ordinary way, to print or display an
announcement including an appropriate copyright notice and a
notice that there is no warranty (or else, saying that you provide
a warranty) and that users may redistribute the program under
these conditions, and telling the user how to view a copy of this
License.  (Exception: if the Program itself is interactive but
does not normally print such an announcement, your work based on
the Program is not required to print an announcement.)
</OL>

These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Program,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Program, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote it.

Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Program.

In addition, mere aggregation of another work not based on the Program
with the Program (or with a work based on the Program) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

<LI>

You may copy and distribute the Program (or a work based on it,
under Section 2) in object code or executable form under the terms of
Sections 1 and 2 above provided that you also do one of the following:


<OL>
<LI>

Accompany it with the complete corresponding machine-readable
source code, which must be distributed under the terms of Sections
1 and 2 above on a medium customarily used for software interchange; or,

<LI>

Accompany it with a written offer, valid for at least three
years, to give any third-party, for a charge no more than your
cost of physically performing source distribution, a complete
machine-readable copy of the corresponding source code, to be
distributed under the terms of Sections 1 and 2 above on a medium
customarily used for software interchange; or,

<LI>

Accompany it with the information you received as to the offer
to distribute corresponding source code.  (This alternative is
allowed only for noncommercial distribution and only if you
received the program in object code or executable form with such
an offer, in accord with Subsection b above.)
</OL>

The source code for a work means the preferred form of the work for
making modifications to it.  For an executable work, complete source
code means all the source code for all modules it contains, plus any
associated interface definition files, plus the scripts used to
control compilation and installation of the executable.  However, as a
special exception, the source code distributed need not include
anything that is normally distributed (in either source or binary
form) with the major components (compiler, kernel, and so on) of the
operating system on which the executable runs, unless that component
itself accompanies the executable.

If distribution of executable or object code is made by offering
access to copy from a designated place, then offering equivalent
access to copy the source code from the same place counts as
distribution of the source code, even though third parties are not
compelled to copy the source along with the object code.

<LI>

You may not copy, modify, sublicense, or distribute the Program
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense or distribute the Program is
void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under
this License will not have their licenses terminated so long as such
parties remain in full compliance.

<LI>

You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Program or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Program (or any work based on the
Program), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Program or works based on it.

<LI>

Each time you redistribute the Program (or any work based on the
Program), the recipient automatically receives a license from the
original licensor to copy, distribute or modify the Program subject to
these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties to
this License.

<LI>

If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Program at all.  For example, if a patent
license would not permit royalty-free redistribution of the Program by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Program.

If any portion of this section is held invalid or unenforceable under
any particular circumstance, the balance of the section is intended to
apply and the section as a whole is intended to apply in other
circumstances.

It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system, which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

<LI>

If the distribution and/or use of the Program is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Program under this License
may add an explicit geographical distribution limitation excluding
those countries, so that distribution is permitted only in or among
countries not thus excluded.  In such case, this License incorporates
the limitation as if written in the body of this License.

<LI>

The Free Software Foundation may publish revised and/or new versions
of the General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

Each version is given a distinguishing version number.  If the Program
specifies a version number of this License which applies to it and ``any
later version'', you have the option of following the terms and conditions
either of that version or of any later version published by the Free
Software Foundation.  If the Program does not specify a version number of
this License, you may choose any version ever published by the Free Software
Foundation.

<LI>

If you wish to incorporate parts of the Program into other free
programs whose distribution conditions are different, write to the author
to ask for permission.  For software which is copyrighted by the Free
Software Foundation, write to the Free Software Foundation; we sometimes
make exceptions for this.  Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software and
of promoting the sharing and reuse of software generally.



<P><STRONG>9.4  NO WARRANTY</STRONG></P>

<LI>

BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM ``AS IS'' WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
REPAIR OR CORRECTION.

<LI>

IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.
</OL>


<H2>9.5  END OF TERMS AND CONDITIONS</H2>



<H2><A NAME="SEC917" HREF="manual_toc.html#SEC917">H.3  How to Apply These Terms to Your New Programs</A></H2>

<P>
  If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

</P>
<P>
  To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
convey the exclusion of warranty; and each file should have at least
the ``copyright'' line and a pointer to where the full notice is found.

</P>

<PRE>
<VAR>one line to give the program's name and a brief idea of what it does.</VAR>
Copyright (C) <VAR>yyyy</VAR>  <VAR>name of author</VAR>

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
</PRE>

<P>
Also add information on how to contact you by electronic and paper mail.

</P>
<P>
If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:

</P>

<PRE>
Gnomovision version 69, Copyright (C) 19<VAR>yy</VAR> <VAR>name of author</VAR>
Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
This is free software, and you are welcome to redistribute it
under certain conditions; type `show c' for details.
</PRE>

<P>
The hypothetical commands <SAMP>`show w'</SAMP> and <SAMP>`show c'</SAMP> should show
the appropriate parts of the General Public License.  Of course, the
commands you use may be called something other than <SAMP>`show w'</SAMP> and
<SAMP>`show c'</SAMP>; they could even be mouse-clicks or menu items--whatever
suits your program.

</P>
<P>
You should also get your employer (if you work as a programmer) or your
school, if any, to sign a ``copyright disclaimer'' for the program, if
necessary.  Here is a sample; alter the names:

</P>

<PRE>
Yoyodyne, Inc., hereby disclaims all copyright interest in the program
`Gnomovision' (which makes passes at compilers) written by James Hacker.

<VAR>signature of Ty Coon</VAR>, 1 April 1989
Ty Coon, President of Vice
</PRE>

<P>
This General Public License does not permit incorporating your program into
proprietary programs.  If your program is a subroutine library, you may
consider it more useful to permit linking proprietary applications with the
library.  If this is what you want to do, use the GNU Library General
Public License instead of this License.

</P>



<H1><A NAME="LGPL_license" HREF="manual_toc.html#LGPL_license">I  GNU Lesser General Public License</A></H1>

<P>
<A NAME="IDX1957"></A>
<A NAME="IDX1958"></A>
<A NAME="IDX1959"></A>
<A NAME="IDX1960"></A>

</P>
<P>
Version 2.1, February 1999

</P>

<PRE>
Copyright &copy; 1991, 1999 Free Software Foundation, Inc.
59 Temple Place -- Suite 330, Boston, MA 02111-1307, USA

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.

[This is the first released version of the Lesser GPL.  It also counts
as the successor of the GNU Library Public License, version 2, hence the
version number 2.1.]
</PRE>



<H2><A NAME="SEC919" HREF="manual_toc.html#SEC919">I.1  Preamble</A></H2>

<P>
  The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
Licenses are intended to guarantee your freedom to share and change
free software--to make sure the software is free for all its users.

</P>
<P>
  This license, the Lesser General Public License, applies to some
specially designated software--typically libraries--of the Free
Software Foundation and other authors who decide to use it.  You can use
it too, but we suggest you first think carefully about whether this
license or the ordinary General Public License is the better strategy to
use in any particular case, based on the explanations below.

</P>
<P>
  When we speak of free software, we are referring to freedom of use,
not price.  Our General Public Licenses are designed to make sure that
you have the freedom to distribute copies of free software (and charge
for this service if you wish); that you receive source code or can get
it if you want it; that you can change the software and use pieces of it
in new free programs; and that you are informed that you can do these
things.

</P>
<P>
  To protect your rights, we need to make restrictions that forbid
distributors to deny you these rights or to ask you to surrender these
rights.  These restrictions translate to certain responsibilities for
you if you distribute copies of the library or if you modify it.

</P>
<P>
  For example, if you distribute copies of the library, whether gratis
or for a fee, you must give the recipients all the rights that we gave
you.  You must make sure that they, too, receive or can get the source
code.  If you link other code with the library, you must provide
complete object files to the recipients, so that they can relink them
with the library after making changes to the library and recompiling
it.  And you must show them these terms so they know their rights.

</P>
<P>
  We protect your rights with a two-step method: (1) we copyright the
library, and (2) we offer you this license, which gives you legal
permission to copy, distribute and/or modify the library.

</P>
<P>
  To protect each distributor, we want to make it very clear that
there is no warranty for the free library.  Also, if the library is
modified by someone else and passed on, the recipients should know
that what they have is not the original version, so that the original
author's reputation will not be affected by problems that might be
introduced by others.

</P>
<P>
  Finally, software patents pose a constant threat to the existence of
any free program.  We wish to make sure that a company cannot
effectively restrict the users of a free program by obtaining a
restrictive license from a patent holder.  Therefore, we insist that
any patent license obtained for a version of the library must be
consistent with the full freedom of use specified in this license.

</P>
<P>
  Most GNU software, including some libraries, is covered by the
ordinary GNU General Public License.  This license, the GNU Lesser
General Public License, applies to certain designated libraries, and
is quite different from the ordinary General Public License.  We use
this license for certain libraries in order to permit linking those
libraries into non-free programs.

</P>
<P>
  When a program is linked with a library, whether statically or using
a shared library, the combination of the two is legally speaking a
combined work, a derivative of the original library.  The ordinary
General Public License therefore permits such linking only if the
entire combination fits its criteria of freedom.  The Lesser General
Public License permits more lax criteria for linking other code with
the library.

</P>
<P>
  We call this license the <STRONG>Lesser</STRONG> General Public License because it
does <EM>Less</EM> to protect the user's freedom than the ordinary General
Public License.  It also provides other free software developers Less
of an advantage over competing non-free programs.  These disadvantages
are the reason we use the ordinary General Public License for many
libraries.  However, the Lesser license provides advantages in certain
special circumstances.

</P>
<P>
  For example, on rare occasions, there may be a special need to
encourage the widest possible use of a certain library, so that it becomes
a de-facto standard.  To achieve this, non-free programs must be
allowed to use the library.  A more frequent case is that a free
library does the same job as widely used non-free libraries.  In this
case, there is little to gain by limiting the free library to free
software only, so we use the Lesser General Public License.

</P>
<P>
  In other cases, permission to use a particular library in non-free
programs enables a greater number of people to use a large body of
free software.  For example, permission to use the GNU C Library in
non-free programs enables many more people to use the whole GNU
operating system, as well as its variant, the GNU/Linux operating
system.

</P>
<P>
  Although the Lesser General Public License is Less protective of the
users' freedom, it does ensure that the user of a program that is
linked with the Library has the freedom and the wherewithal to run
that program using a modified version of the Library.

</P>
<P>
  The precise terms and conditions for copying, distribution and
modification follow.  Pay close attention to the difference between a
``work based on the library'' and a ``work that uses the library''.  The
former contains code derived from the library, whereas the latter must
be combined with the library in order to run.

</P>


<H2><A NAME="SEC920" HREF="manual_toc.html#SEC920">I.2  TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</A></H2>


<OL>
<LI>

This License Agreement applies to any software library or other program
which contains a notice placed by the copyright holder or other
authorized party saying it may be distributed under the terms of this
Lesser General Public License (also called ``this License'').  Each
licensee is addressed as ``you''.

  A ``library'' means a collection of software functions and/or data
prepared so as to be conveniently linked with application programs
(which use some of those functions and data) to form executables.

  The ``Library'', below, refers to any such software library or work
which has been distributed under these terms.  A ``work based on the
Library'' means either the Library or any derivative work under
copyright law: that is to say, a work containing the Library or a
portion of it, either verbatim or with modifications and/or translated
straightforwardly into another language.  (Hereinafter, translation is
included without limitation in the term ``modification''.)

  ``Source code'' for a work means the preferred form of the work for
making modifications to it.  For a library, complete source code means
all the source code for all modules it contains, plus any associated
interface definition files, plus the scripts used to control compilation
and installation of the library.

  Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running a program using the Library is not restricted, and output from
such a program is covered only if its contents constitute a work based
on the Library (independent of the use of the Library in a tool for
writing it).  Whether that is true depends on what the Library does
and what the program that uses the Library does.

<LI>

You may copy and distribute verbatim copies of the Library's
complete source code as you receive it, in any medium, provided that
you conspicuously and appropriately publish on each copy an
appropriate copyright notice and disclaimer of warranty; keep intact
all the notices that refer to this License and to the absence of any
warranty; and distribute a copy of this License along with the
Library.

  You may charge a fee for the physical act of transferring a copy,
and you may at your option offer warranty protection in exchange for a
fee.

<LI>

You may modify your copy or copies of the Library or any portion
of it, thus forming a work based on the Library, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:


<OL>
<LI>

The modified work must itself be a software library.

<LI>

You must cause the files modified to carry prominent notices
stating that you changed the files and the date of any change.

<LI>

You must cause the whole of the work to be licensed at no
charge to all third parties under the terms of this License.

<LI>

If a facility in the modified Library refers to a function or a
table of data to be supplied by an application program that uses
the facility, other than as an argument passed when the facility
is invoked, then you must make a good faith effort to ensure that,
in the event an application does not supply such function or
table, the facility still operates, and performs whatever part of
its purpose remains meaningful.

(For example, a function in a library to compute square roots has
a purpose that is entirely well-defined independent of the
application.  Therefore, Subsection 2d requires that any
application-supplied function or table used by this function must
be optional: if the application does not supply it, the square
root function must still compute square roots.)
</OL>

These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Library,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Library, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote
it.

Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Library.

In addition, mere aggregation of another work not based on the Library
with the Library (or with a work based on the Library) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

<LI>

You may opt to apply the terms of the ordinary GNU General Public
License instead of this License to a given copy of the Library.  To do
this, you must alter all the notices that refer to this License, so
that they refer to the ordinary GNU General Public License, version 2,
instead of to this License.  (If a newer version than version 2 of the
ordinary GNU General Public License has appeared, then you can specify
that version instead if you wish.)  Do not make any other change in
these notices.

  Once this change is made in a given copy, it is irreversible for
that copy, so the ordinary GNU General Public License applies to all
subsequent copies and derivative works made from that copy.

  This option is useful when you wish to copy part of the code of
the Library into a program that is not a library.

<LI>

You may copy and distribute the Library (or a portion or
derivative of it, under Section 2) in object code or executable form
under the terms of Sections 1 and 2 above provided that you accompany
it with the complete corresponding machine-readable source code, which
must be distributed under the terms of Sections 1 and 2 above on a
medium customarily used for software interchange.

  If distribution of object code is made by offering access to copy
from a designated place, then offering equivalent access to copy the
source code from the same place satisfies the requirement to
distribute the source code, even though third parties are not
compelled to copy the source along with the object code.

<LI>

A program that contains no derivative of any portion of the
Library, but is designed to work with the Library by being compiled or
linked with it, is called a ``work that uses the Library''.  Such a
work, in isolation, is not a derivative work of the Library, and
therefore falls outside the scope of this License.

  However, linking a ``work that uses the Library'' with the Library
creates an executable that is a derivative of the Library (because it
contains portions of the Library), rather than a ``work that uses the
library''.  The executable is therefore covered by this License.
Section 6 states terms for distribution of such executables.

  When a ``work that uses the Library'' uses material from a header file
that is part of the Library, the object code for the work may be a
derivative work of the Library even though the source code is not.
Whether this is true is especially significant if the work can be
linked without the Library, or if the work is itself a library.  The
threshold for this to be true is not precisely defined by law.

  If such an object file uses only numerical parameters, data
structure layouts and accessors, and small macros and small inline
functions (ten lines or less in length), then the use of the object
file is unrestricted, regardless of whether it is legally a derivative
work.  (Executables containing this object code plus portions of the
Library will still fall under Section 6.)

  Otherwise, if the work is a derivative of the Library, you may
distribute the object code for the work under the terms of Section 6.
Any executables containing that work also fall under Section 6,
whether they are linked directly with the Library itself.

<LI>

As an exception to the Sections above, you may also combine or
link a ``work that uses the Library'' with the Library to produce a
work containing portions of the Library, and distribute that work
under terms of your choice, provided that the terms permit
modification of the work for the customer's own use and reverse
engineering for debugging such modifications.

  You must give prominent notice with each copy of the work that the
Library is used in it and that the Library and its use are covered by
this License.  You must supply a copy of this License.  If the work
during execution displays copyright notices, you must include the
copyright notice for the Library among them, as well as a reference
directing the user to the copy of this License.  Also, you must do one
of these things:


<OL>
<LI>

Accompany the work with the complete corresponding
machine-readable source code for the Library including whatever
changes were used in the work (which must be distributed under
Sections 1 and 2 above); and, if the work is an executable linked
with the Library, with the complete machine-readable ``work that
uses the Library'', as object code and/or source code, so that the
user can modify the Library and then relink to produce a modified
executable containing the modified Library.  (It is understood
that the user who changes the contents of definitions files in the
Library will not necessarily be able to recompile the application
to use the modified definitions.)

<LI>

Use a suitable shared library mechanism for linking with the Library.  A
suitable mechanism is one that (1) uses at runtime a copy of the
library already present on the user's computer system, rather than
copying library functions into the executable, and (2) will operate
properly with a modified version of the library, if the user installs
one, as long as the modified version is interface-compatible with the
version that the work was made with.

<LI>

Accompany the work with a written offer, valid for at
least three years, to give the same user the materials
specified in Subsection 6a, above, for a charge no more
than the cost of performing this distribution.

<LI>

If distribution of the work is made by offering access to copy
from a designated place, offer equivalent access to copy the above
specified materials from the same place.

<LI>

Verify that the user has already received a copy of these
materials or that you have already sent this user a copy.
</OL>

  For an executable, the required form of the ``work that uses the
Library'' must include any data and utility programs needed for
reproducing the executable from it.  However, as a special exception,
the materials to be distributed need not include anything that is
normally distributed (in either source or binary form) with the major
components (compiler, kernel, and so on) of the operating system on
which the executable runs, unless that component itself accompanies the
executable.

  It may happen that this requirement contradicts the license
restrictions of other proprietary libraries that do not normally
accompany the operating system.  Such a contradiction means you cannot
use both them and the Library together in an executable that you
distribute.

<LI>

You may place library facilities that are a work based on the
Library side-by-side in a single library together with other library
facilities not covered by this License, and distribute such a combined
library, provided that the separate distribution of the work based on
the Library and of the other library facilities is otherwise
permitted, and provided that you do these two things:


<OL>
<LI>

Accompany the combined library with a copy of the same work
based on the Library, uncombined with any other library
facilities.  This must be distributed under the terms of the
Sections above.

<LI>

Give prominent notice with the combined library of the fact
that part of it is a work based on the Library, and explaining
where to find the accompanying uncombined form of the same work.
</OL>

<LI>

You may not copy, modify, sublicense, link with, or distribute
the Library except as expressly provided under this License.  Any
attempt otherwise to copy, modify, sublicense, link with, or
distribute the Library is void, and will automatically terminate your
rights under this License.  However, parties who have received copies,
or rights, from you under this License will not have their licenses
terminated so long as such parties remain in full compliance.

<LI>

You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Library or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Library (or any work based on the
Library), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Library or works based on it.

<LI>

Each time you redistribute the Library (or any work based on the
Library), the recipient automatically receives a license from the
original licensor to copy, distribute, link with or modify the Library
subject to these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties with
this License.

<LI>

If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Library at all.  For example, if a patent
license would not permit royalty-free redistribution of the Library by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Library.

If any portion of this section is held invalid or unenforceable under any
particular circumstance, the balance of the section is intended to apply,
and the section as a whole is intended to apply in other circumstances.

It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

<LI>

If the distribution and/or use of the Library is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Library under this License may add
an explicit geographical distribution limitation excluding those countries,
so that distribution is permitted only in or among countries not thus
excluded.  In such case, this License incorporates the limitation as if
written in the body of this License.

<LI>

The Free Software Foundation may publish revised and/or new
versions of the Lesser General Public License from time to time.
Such new versions will be similar in spirit to the present version,
but may differ in detail to address new problems or concerns.

Each version is given a distinguishing version number.  If the Library
specifies a version number of this License which applies to it and
``any later version'', you have the option of following the terms and
conditions either of that version or of any later version published by
the Free Software Foundation.  If the Library does not specify a
license version number, you may choose any version ever published by
the Free Software Foundation.

<LI>

If you wish to incorporate parts of the Library into other free
programs whose distribution conditions are incompatible with these,
write to the author to ask for permission.  For software which is
copyrighted by the Free Software Foundation, write to the Free
Software Foundation; we sometimes make exceptions for this.  Our
decision will be guided by the two goals of preserving the free status
of all derivatives of our free software and of promoting the sharing
and reuse of software generally.



<P><STRONG>9.6  NO WARRANTY</STRONG></P>

<LI>

BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
OTHER PARTIES PROVIDE THE LIBRARY ``AS IS'' WITHOUT WARRANTY OF ANY
KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

<LI>

IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
DAMAGES.
</OL>


<H2>9.7  END OF TERMS AND CONDITIONS</H2>



<H2><A NAME="SEC921" HREF="manual_toc.html#SEC921">I.3  How to Apply These Terms to Your New Libraries</A></H2>

<P>
  If you develop a new library, and you want it to be of the greatest
possible use to the public, we recommend making it free software that
everyone can redistribute and change.  You can do so by permitting
redistribution under these terms (or, alternatively, under the terms of the
ordinary General Public License).

</P>
<P>
  To apply these terms, attach the following notices to the library.  It is
safest to attach them to the start of each source file to most effectively
convey the exclusion of warranty; and each file should have at least the
``copyright'' line and a pointer to where the full notice is found.

</P>

<PRE>
<VAR>one line to give the library's name and an idea of what it does.</VAR>
Copyright (C) <VAR>year</VAR>  <VAR>name of author</VAR>

This library is free software; you can redistribute it and/or modify it
under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation; either version 2.1 of the License, or (at
your option) any later version.

This library is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307,
USA.
</PRE>

<P>
Also add information on how to contact you by electronic and paper mail.

</P>
<P>
You should also get your employer (if you work as a programmer) or your
school, if any, to sign a ``copyright disclaimer'' for the library, if
necessary.  Here is a sample; alter the names:

</P>

<PRE>
Yoyodyne, Inc., hereby disclaims all copyright interest in the library
`Frob' (a library for tweaking knobs) written by James Random Hacker.

<VAR>signature of Ty Coon</VAR>, 1 April 1990
Ty Coon, President of Vice
</PRE>

<P>
That's all there is to it!

</P>



<H1><A NAME="Function_Index" HREF="manual_toc.html#Function_Index">SQL command, type and function index</A></H1>

<P>
<H2> </H2>
<DIR>
<LI><A HREF="manual.html#IDX1147">! (logical NOT)</A>
<LI><A HREF="manual.html#IDX1119">!= (not equal)</A>
<LI><A HREF="manual.html#IDX990">"</A>
<LI><A HREF="manual.html#IDX1246">% (modulo)</A>
<LI><A HREF="manual.html#IDX963">% (wildcard character)</A>
<LI><A HREF="manual.html#IDX1321">&#38; (bitwise AND)</A>
<LI><A HREF="manual.html#IDX1149">&#38;& (logical AND)</A>
<LI><A HREF="manual.html#IDX1106">() (parentheses)</A>
<LI><A HREF="manual.html#IDX960">(Control-Z) \z</A>
<LI><A HREF="manual.html#IDX1234">* (multiplication)</A>
<LI><A HREF="manual.html#IDX1230">+ (addition)</A>
<LI><A HREF="manual.html#IDX1232">- (subtraction)</A>
<LI><A HREF="manual.html#IDX1240">- (unary minus)</A>
<LI><A HREF="manual.html#IDX545">-p option</A>
<LI><A HREF="manual.html#IDX546">-password option</A>
<LI><A HREF="manual.html#IDX341">.my.cnf file</A>, <A HREF="manual.html#IDX440">.my.cnf file</A>, <A HREF="manual.html#IDX442">.my.cnf file</A>, <A HREF="manual.html#IDX457">.my.cnf file</A>, <A HREF="manual.html#IDX476">.my.cnf file</A>, <A HREF="manual.html#IDX512">.my.cnf file</A>, <A HREF="manual.html#IDX547">.my.cnf file</A>
<LI><A HREF="manual.html#IDX698">.mysql_history file</A>
<LI><A HREF="manual.html#IDX582">.pid (process ID) file</A>
<LI><A HREF="manual.html#IDX1236">/ (division)</A>
<LI><A HREF="manual.html#IDX1400">/etc/passwd</A>
<LI><A HREF="manual.html#IDX465"><TT>`/etc/passwd'</TT></A>
<LI><A HREF="manual.html#IDX1123">&#60; (less than)</A>
<LI><A HREF="manual.html#IDX422">&#60;&#60;</A>
<LI><A HREF="manual.html#IDX1325">&#60;&#60; (left shift)</A>
<LI><A HREF="manual.html#IDX1121">&#60;= (less than or equal)</A>
<LI><A HREF="manual.html#IDX1130">&#60;=&#62; (Equal to)</A>
<LI><A HREF="manual.html#IDX1117">&#60;&#62; (not equal)</A>
<LI><A HREF="manual.html#IDX1115">= (equal)</A>
<LI><A HREF="manual.html#IDX1127">&#62; (greater than)</A>
<LI><A HREF="manual.html#IDX1125">&#62;= (greater than or equal)</A>
<LI><A HREF="manual.html#IDX1326">&#62;&#62; (right shift)</A>
<LI><A HREF="manual.html#IDX948">\" (double quote)</A>
<LI><A HREF="manual.html#IDX946">\' (single quote)</A>
<LI><A HREF="manual.html#IDX944">\0 (ASCII 0)</A>
<LI><A HREF="manual.html#IDX961">\\ (escape)</A>
<LI><A HREF="manual.html#IDX950">\b (backspace)</A>
<LI><A HREF="manual.html#IDX952">\n (newline)</A>
<LI><A HREF="manual.html#IDX954">\r (carriage return)</A>
<LI><A HREF="manual.html#IDX957">\t (tab)</A>
<LI><A HREF="manual.html#IDX959">\z (Control-Z) ASCII(26)</A>
<LI><A HREF="manual.html#IDX1323">^ (bitwise XOR)</A>
<LI><A HREF="manual.html#IDX965">_ (wildcard character)</A>
<LI><A HREF="manual.html#IDX989">`</A>
</DIR>
<H2>A</H2>
<DIR>
<LI><A HREF="manual.html#IDX1243">ABS()</A>
<LI><A HREF="manual.html#IDX1264">ACOS()</A>
<LI><A HREF="manual.html#IDX1295">ADDDATE()</A>
<LI><A HREF="manual.html#IDX1231">addition (+)</A>
<LI><A HREF="manual.html#IDX1346">AES_DECRYPT()</A>
<LI><A HREF="manual.html#IDX1345">AES_ENCRYPT()</A>
<LI><A HREF="manual.html#IDX1852">alias</A>
<LI><A HREF="manual.html#IDX1468">ALTER COLUMN</A>
<LI><A HREF="manual.html#IDX1465">ALTER TABLE</A>, <A HREF="manual.html#IDX1482">ALTER TABLE</A>, <A HREF="manual.html#IDX1858">ALTER TABLE</A>
<LI><A HREF="manual.html#IDX590">ANALYZE TABLE</A>
<LI><A HREF="manual.html#IDX1322">AND, bitwise</A>
<LI><A HREF="manual.html#IDX1148">AND, logical</A>
<LI><A HREF="manual.html#IDX1315">arithmetic functions</A>
<LI><A HREF="manual.html#IDX1390">AS</A>, <A HREF="manual.html#IDX1414">AS</A>
<LI><A HREF="manual.html#IDX1162">ASCII()</A>
<LI><A HREF="manual.html#IDX1265">ASIN()</A>
<LI><A HREF="manual.html#IDX1266">ATAN()</A>
<LI><A HREF="manual.html#IDX1267">ATAN2()</A>
<LI><A HREF="manual.html#IDX1733">AUTO_INCREMENT, using with DBI</A>
<LI><A HREF="manual.html#IDX1369">AVG()</A>
</DIR>
<H2>B</H2>
<DIR>
<LI><A HREF="manual.html#IDX951">backspace (\b)</A>
<LI><A HREF="manual.html#IDX559">BACKUP TABLE</A>
<LI><A HREF="manual.html#IDX1507">BEGIN</A>
<LI><A HREF="manual.html#IDX1358">BENCHMARK()</A>
<LI><A HREF="manual.html#IDX1136">BETWEEN ... AND</A>
<LI><A HREF="manual.html#IDX1024">BIGINT</A>
<LI><A HREF="manual.html#IDX1165">BIN()</A>
<LI><A HREF="manual.html#IDX1226">BINARY</A>
<LI><A HREF="manual.html#IDX1019">BIT</A>
<LI><A HREF="manual.html#IDX1316">bit functions</A>
<LI><A HREF="manual.html#IDX1379">BIT_AND()</A>
<LI><A HREF="manual.html#IDX421">BIT_COUNT</A>
<LI><A HREF="manual.html#IDX1328">BIT_COUNT()</A>
<LI><A HREF="manual.html#IDX1175">BIT_LENGTH()</A>
<LI><A HREF="manual.html#IDX420">BIT_OR</A>
<LI><A HREF="manual.html#IDX1378">BIT_OR()</A>
<LI><A HREF="manual.html#IDX1054">BLOB</A>, <A HREF="manual.html#IDX1079">BLOB</A>
<LI><A HREF="manual.html#IDX1018">BOOL</A>
</DIR>
<H2>C</H2>
<DIR>
<LI><A HREF="manual.html#IDX956">carriage return (\r)</A>
<LI><A HREF="manual.html#IDX1159">CASE</A>
<LI><A HREF="manual.html#IDX1313">CAST</A>
<LI><A HREF="manual.html#IDX1223">casts</A>
<LI><A HREF="manual.html#IDX273">CC environment variable</A>, <A HREF="manual.html#IDX1912">CC environment variable</A>
<LI><A HREF="manual.html#IDX229"><CODE>CC</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1910">CCX environment variable</A>
<LI><A HREF="manual.html#IDX1249">CEILING()</A>
<LI><A HREF="manual.html#IDX277">CFLAGS environment variable</A>, <A HREF="manual.html#IDX1914">CFLAGS environment variable</A>
<LI><A HREF="manual.html#IDX1047">CHAR</A>, <A HREF="manual.html#IDX1077">CHAR</A>
<LI><A HREF="manual.html#IDX1050">CHAR VARYING</A>
<LI><A HREF="manual.html#IDX1168">CHAR()</A>
<LI><A HREF="manual.html#IDX1173">CHAR_LENGTH()</A>
<LI><A HREF="manual.html#IDX1048">CHARACTER</A>
<LI><A HREF="manual.html#IDX1049">CHARACTER VARYING</A>
<LI><A HREF="manual.html#IDX1174">CHARACTER_LENGTH()</A>
<LI><A HREF="manual.html#IDX562">CHECK TABLE</A>
<LI><A HREF="manual.html#IDX1726">ChopBlanks DBI method</A>
<LI><A HREF="manual.html#IDX1142">COALESCE()</A>
<LI><A HREF="manual.html#IDX433">command-line options</A>
<LI><A HREF="manual.html#IDX1004">Comment syntax</A>
<LI><A HREF="manual.html#IDX132">COMMIT</A>, <A HREF="manual.html#IDX1508">COMMIT</A>
<LI><A HREF="manual.html#IDX1110">comparison operators</A>
<LI><A HREF="manual.html#IDX1169">CONCAT()</A>
<LI><A HREF="manual.html#IDX1170">CONCAT_WS()</A>
<LI><A HREF="manual.html#IDX243">configure option, --with-charset</A>
<LI><A HREF="manual.html#IDX244">configure option, --with-extra-charsets</A>
<LI><A HREF="manual.html#IDX1694">connect() DBI method</A>
<LI><A HREF="manual.html#IDX1353">CONNECTION_ID()</A>
<LI><A HREF="manual.html#IDX1153">control flow functions</A>
<LI><A HREF="manual.html#IDX1164">CONV()</A>
<LI><A HREF="manual.html#IDX1314">CONVERT</A>
<LI><A HREF="manual.html#IDX1261">COS()</A>
<LI><A HREF="manual.html#IDX1268">COT()</A>
<LI><A HREF="manual.html#IDX1366">COUNT()</A>
<LI><A HREF="manual.html#IDX1367">COUNT(DISTINCT)</A>
<LI><A HREF="manual.html#IDX1446">CREATE DATABASE</A>
<LI><A HREF="manual.html#IDX1770">CREATE FUNCTION</A>
<LI><A HREF="manual.html#IDX1492">CREATE INDEX</A>
<LI><A HREF="manual.html#IDX1452">CREATE TABLE</A>
<LI><A HREF="manual.html#IDX1404">CROSS JOIN</A>
<LI><A HREF="manual.html#IDX1302">CURDATE()</A>
<LI><A HREF="manual.html#IDX1303">CURRENT_DATE</A>
<LI><A HREF="manual.html#IDX1305">CURRENT_TIME</A>
<LI><A HREF="manual.html#IDX1308">CURRENT_TIMESTAMP</A>
<LI><A HREF="manual.html#IDX1335">CURRENT_USER()</A>
<LI><A HREF="manual.html#IDX1304">CURTIME()</A>
<LI><A HREF="manual.html#IDX231"><CODE>CXX</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX265">CXX environment variable</A>, <A HREF="manual.html#IDX267">CXX environment variable</A>, <A HREF="manual.html#IDX275">CXX environment variable</A>
<LI><A HREF="manual.html#IDX236">CXXFLAGS environment variable</A>, <A HREF="manual.html#IDX240">CXXFLAGS environment variable</A>, <A HREF="manual.html#IDX279">CXXFLAGS environment variable</A>, <A HREF="manual.html#IDX1916">CXXFLAGS environment variable</A>
</DIR>
<H2>D</H2>
<DIR>
<LI><A HREF="manual.html#IDX1724">data_sources() DBI method</A>
<LI><A HREF="manual.html#IDX1331">DATABASE()</A>
<LI><A HREF="manual.html#IDX1040">DATE</A>, <A HREF="manual.html#IDX1067">DATE</A>, <A HREF="manual.html#IDX1842">DATE</A>
<LI><A HREF="manual.html#IDX1276">date and time functions</A>
<LI><A HREF="manual.html#IDX1293">DATE_ADD()</A>
<LI><A HREF="manual.html#IDX1300">DATE_FORMAT()</A>
<LI><A HREF="manual.html#IDX1294">DATE_SUB()</A>
<LI><A HREF="manual.html#IDX1041">DATETIME</A>, <A HREF="manual.html#IDX1066">DATETIME</A>
<LI><A HREF="manual.html#IDX1283">DAYNAME()</A>
<LI><A HREF="manual.html#IDX1280">DAYOFMONTH()</A>
<LI><A HREF="manual.html#IDX1278">DAYOFWEEK()</A>
<LI><A HREF="manual.html#IDX1281">DAYOFYEAR()</A>
<LI><A HREF="manual.html#IDX1693">DBI-&#62;connect()</A>
<LI><A HREF="manual.html#IDX1723">DBI-&#62;data_sources()</A>
<LI><A HREF="manual.html#IDX1695">DBI-&#62;disconnect</A>
<LI><A HREF="manual.html#IDX1701">DBI-&#62;do()</A>
<LI><A HREF="manual.html#IDX1699">DBI-&#62;execute</A>
<LI><A HREF="manual.html#IDX1713">DBI-&#62;fetchall_arrayref</A>
<LI><A HREF="manual.html#IDX1707">DBI-&#62;fetchrow_array</A>
<LI><A HREF="manual.html#IDX1709">DBI-&#62;fetchrow_arrayref</A>
<LI><A HREF="manual.html#IDX1711">DBI-&#62;fetchrow_hashref</A>
<LI><A HREF="manual.html#IDX1715">DBI-&#62;finish</A>
<LI><A HREF="manual.html#IDX1697">DBI-&#62;prepare()</A>
<LI><A HREF="manual.html#IDX972">DBI-&#62;quote</A>
<LI><A HREF="manual.html#IDX1703">DBI-&#62;quote()</A>
<LI><A HREF="manual.html#IDX1717">DBI-&#62;rows</A>
<LI><A HREF="manual.html#IDX1727">DBI-&#62;trace</A>, <A HREF="manual.html#IDX1895">DBI-&#62;trace</A>
<LI><A HREF="manual.html#IDX1725">DBI-&#62;{ChopBlanks}</A>
<LI><A HREF="manual.html#IDX1731">DBI-&#62;{insertid}</A>
<LI><A HREF="manual.html#IDX1734">DBI-&#62;{is_blob}</A>
<LI><A HREF="manual.html#IDX1736">DBI-&#62;{is_key}</A>
<LI><A HREF="manual.html#IDX1742">DBI-&#62;{is_not_null}</A>
<LI><A HREF="manual.html#IDX1738">DBI-&#62;{is_num}</A>
<LI><A HREF="manual.html#IDX1740">DBI-&#62;{is_pri_key}</A>
<LI><A HREF="manual.html#IDX1744">DBI-&#62;{length}</A>
<LI><A HREF="manual.html#IDX1746">DBI-&#62;{max_length}</A>
<LI><A HREF="manual.html#IDX1748">DBI-&#62;{NAME}</A>
<LI><A HREF="manual.html#IDX1719">DBI-&#62;{NULLABLE}</A>
<LI><A HREF="manual.html#IDX1721">DBI-&#62;{NUM_OF_FIELDS}</A>
<LI><A HREF="manual.html#IDX1750">DBI-&#62;{table}</A>
<LI><A HREF="manual.html#IDX1752">DBI-&#62;{type}</A>
<LI><A HREF="manual.html#IDX1897">DBI_TRACE environment variable</A>, <A HREF="manual.html#IDX1920">DBI_TRACE environment variable</A>
<LI><A HREF="manual.html#IDX1729"><CODE>DBI_TRACE</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1918">DBI_USER environment variable</A>
<LI><A HREF="manual.html#IDX1038">DEC</A>
<LI><A HREF="manual.html#IDX1037">DECIMAL</A>
<LI><A HREF="manual.html#IDX1341">DECODE()</A>
<LI><A HREF="manual.html#IDX1272">DEGREES()</A>
<LI><A HREF="manual.html#IDX1433">DELAYED</A>
<LI><A HREF="manual.html#IDX1439">DELETE</A>
<LI><A HREF="manual.html#IDX1348">DES_DECRYPT()</A>
<LI><A HREF="manual.html#IDX1347">DES_ENCRYPT()</A>
<LI><A HREF="manual.html#IDX1502">DESC</A>
<LI><A HREF="manual.html#IDX412">DESCRIBE</A>, <A HREF="manual.html#IDX1503">DESCRIBE</A>
<LI><A HREF="manual.html#IDX1696">disconnect DBI method</A>
<LI><A HREF="manual.html#IDX392">DISTINCT</A>, <A HREF="manual.html#IDX864">DISTINCT</A>, <A HREF="manual.html#IDX1368">DISTINCT</A>
<LI><A HREF="manual.html#IDX1251">DIV</A>
<LI><A HREF="manual.html#IDX1237">division (/)</A>
<LI><A HREF="manual.html#IDX1445">DO</A>
<LI><A HREF="manual.html#IDX1702">do() DBI method</A>
<LI><A HREF="manual.html#IDX1033">DOUBLE</A>
<LI><A HREF="manual.html#IDX1035">DOUBLE PRECISION</A>
<LI><A HREF="manual.html#IDX949">double quote (\")</A>
<LI><A HREF="manual.html#IDX1448">DROP DATABASE</A>
<LI><A HREF="manual.html#IDX1771">DROP FUNCTION</A>
<LI><A HREF="manual.html#IDX1473">DROP INDEX</A>, <A HREF="manual.html#IDX1496">DROP INDEX</A>
<LI><A HREF="manual.html#IDX1476">DROP PRIMARY KEY</A>
<LI><A HREF="manual.html#IDX1489">DROP TABLE</A>
<LI><A HREF="manual.html#IDX1401">DUMPFILE</A>
</DIR>
<H2>E</H2>
<DIR>
<LI><A HREF="manual.html#IDX1197">ELT()</A>
<LI><A HREF="manual.html#IDX1340">ENCODE()</A>
<LI><A HREF="manual.html#IDX1339">ENCRYPT()</A>
<LI><A HREF="manual.html#IDX1060">ENUM</A>, <A HREF="manual.html#IDX1084">ENUM</A>
<LI><A HREF="manual.html#IDX1913">Environment variable, CC</A>
<LI><A HREF="manual.html#IDX274">environment variable, CC</A>
<LI><A HREF="manual.html#IDX230">environment variable, <CODE>CC</CODE></A>
<LI><A HREF="manual.html#IDX1911">Environment variable, CCX</A>
<LI><A HREF="manual.html#IDX1915">Environment variable, CFLAGS</A>
<LI><A HREF="manual.html#IDX278">environment variable, CFLAGS</A>
<LI><A HREF="manual.html#IDX232">environment variable, <CODE>CXX</CODE></A>
<LI><A HREF="manual.html#IDX276">environment variable, CXX</A>
<LI><A HREF="manual.html#IDX266">Environment variable, CXX</A>
<LI><A HREF="manual.html#IDX1917">Environment variable, CXXFLAGS</A>
<LI><A HREF="manual.html#IDX237">environment variable, CXXFLAGS</A>, <A HREF="manual.html#IDX241">environment variable, CXXFLAGS</A>, <A HREF="manual.html#IDX280">environment variable, CXXFLAGS</A>
<LI><A HREF="manual.html#IDX1730">environment variable, <CODE>DBI_TRACE</CODE></A>
<LI><A HREF="manual.html#IDX1898">Environment variable, DBI_TRACE</A>, <A HREF="manual.html#IDX1921">Environment variable, DBI_TRACE</A>
<LI><A HREF="manual.html#IDX1919">Environment variable, DBI_USER</A>
<LI><A HREF="manual.html#IDX695">environment variable, <CODE>HOME</CODE></A>
<LI><A HREF="manual.html#IDX1923">Environment variable, HOME</A>
<LI><A HREF="manual.html#IDX327">environment variable, LD_RUN_PATH</A>
<LI><A HREF="manual.html#IDX349">Environment variable, LD_RUN_PATH</A>, <A HREF="manual.html#IDX361">Environment variable, LD_RUN_PATH</A>, <A HREF="manual.html#IDX1925">Environment variable, LD_RUN_PATH</A>
<LI><A HREF="manual.html#IDX691">environment variable, <CODE>MYSQL_DEBUG</CODE></A>
<LI><A HREF="manual.html#IDX1902">Environment variable, MYSQL_DEBUG</A>, <A HREF="manual.html#IDX1927">Environment variable, MYSQL_DEBUG</A>
<LI><A HREF="manual.html#IDX693">environment variable, <CODE>MYSQL_HISTFILE</CODE></A>
<LI><A HREF="manual.html#IDX1929">Environment variable, MYSQL_HISTFILE</A>
<LI><A HREF="manual.html#IDX478">environment variable, <CODE>MYSQL_HOST</CODE></A>
<LI><A HREF="manual.html#IDX1931">Environment variable, MYSQL_HOST</A>
<LI><A HREF="manual.html#IDX1933">Environment variable, MYSQL_PS1</A>
<LI><A HREF="manual.html#IDX480">environment variable, <CODE>MYSQL_PWD</CODE></A>, <A HREF="manual.html#IDX689">environment variable, <CODE>MYSQL_PWD</CODE></A>
<LI><A HREF="manual.html#IDX1935">Environment variable, MYSQL_PWD</A>
<LI><A HREF="manual.html#IDX456">environment variable, MYSQL_TCP_PORT</A>
<LI><A HREF="manual.html#IDX449">environment variable, <CODE>MYSQL_TCP_PORT</CODE></A>, <A HREF="manual.html#IDX687">environment variable, <CODE>MYSQL_TCP_PORT</CODE></A>
<LI><A HREF="manual.html#IDX1937">Environment variable, MYSQL_TCP_PORT</A>
<LI><A HREF="manual.html#IDX303">Environment variable, MYSQL_UNIX_PORT</A>, <A HREF="manual.html#IDX1939">Environment variable, MYSQL_UNIX_PORT</A>
<LI><A HREF="manual.html#IDX448">environment variable, <CODE>MYSQL_UNIX_PORT</CODE></A>, <A HREF="manual.html#IDX685">environment variable, <CODE>MYSQL_UNIX_PORT</CODE></A>
<LI><A HREF="manual.html#IDX455">environment variable, MYSQL_UNIX_PORT</A>
<LI><A HREF="manual.html#IDX1941">Environment variable, PATH</A>
<LI><A HREF="manual.html#IDX212">environment variable, PATH</A>
<LI><A HREF="manual.html#IDX302">Environment variable, TMPDIR</A>, <A HREF="manual.html#IDX1943">Environment variable, TMPDIR</A>
<LI><A HREF="manual.html#IDX1837">Environment variable, TZ</A>, <A HREF="manual.html#IDX1945">Environment variable, TZ</A>
<LI><A HREF="manual.html#IDX1822">Environment variable, UMASK</A>, <A HREF="manual.html#IDX1949">Environment variable, UMASK</A>
<LI><A HREF="manual.html#IDX1824">Environment variable, UMASK_DIR</A>, <A HREF="manual.html#IDX1947">Environment variable, UMASK_DIR</A>
<LI><A HREF="manual.html#IDX1951">Environment variable, USER</A>
<LI><A HREF="manual.html#IDX482">environment variable, <CODE>USER</CODE></A>
<LI><A HREF="manual.html#IDX268">Environment variables, CXX</A>
<LI><A HREF="manual.html#IDX1116">equal (=)</A>
<LI><A HREF="manual.html#IDX962">escape (\\)</A>
<LI><A HREF="manual.html#IDX1700">execute DBI method</A>
<LI><A HREF="manual.html#IDX1252">EXP()</A>
<LI><A HREF="manual.html#IDX849">EXPLAIN</A>
<LI><A HREF="manual.html#IDX1201">EXPORT_SET()</A>
<LI><A HREF="manual.html#IDX1297">EXTRACT()</A>
</DIR>
<H2>F</H2>
<DIR>
<LI><A HREF="manual.html#IDX1714">fetchall_arrayref DBI method</A>
<LI><A HREF="manual.html#IDX1708">fetchrow_array DBI method</A>
<LI><A HREF="manual.html#IDX1710">fetchrow_arrayref DBI method</A>
<LI><A HREF="manual.html#IDX1712">fetchrow_hashref DBI method</A>
<LI><A HREF="manual.html#IDX1198">FIELD()</A>
<LI><A HREF="manual.html#IDX1206">FILE</A>
<LI><A HREF="manual.html#IDX1199">FIND_IN_SET()</A>
<LI><A HREF="manual.html#IDX1716">finish DBI method</A>
<LI><A HREF="manual.html#IDX1027">FLOAT</A>, <A HREF="manual.html#IDX1031">FLOAT</A>
<LI><A HREF="manual.html#IDX1032">FLOAT(M,D)</A>
<LI><A HREF="manual.html#IDX1028">FLOAT(precision)</A>, <A HREF="manual.html#IDX1034">FLOAT(precision)</A>
<LI><A HREF="manual.html#IDX1248">FLOOR()</A>
<LI><A HREF="manual.html#IDX591">FLUSH</A>
<LI><A HREF="manual.html#IDX1395">FORCE INDEX</A>, <A HREF="manual.html#IDX1422">FORCE INDEX</A>
<LI><A HREF="manual.html#IDX1351">FORMAT()</A>
<LI><A HREF="manual.html#IDX1362">FOUND_ROWS()</A>
<LI><A HREF="manual.html#IDX1299">FROM_DAYS()</A>
<LI><A HREF="manual.html#IDX1310">FROM_UNIXTIME()</A>
<LI><A HREF="manual.html#IDX1317">functions, arithmetic</A>
<LI><A HREF="manual.html#IDX1318">functions, bit</A>
<LI><A HREF="manual.html#IDX1154">functions, control flow</A>
<LI><A HREF="manual.html#IDX1277">functions, date and time</A>
<LI><A HREF="manual.html#IDX1365">functions, GROUP BY</A>
<LI><A HREF="manual.html#IDX1239">functions, mathematical</A>
<LI><A HREF="manual.html#IDX1330">functions, miscellaneous</A>
<LI><A HREF="manual.html#IDX1161">functions, string</A>
<LI><A HREF="manual.html#IDX1210">functions, string comparison</A>
<LI><A HREF="manual.html#IDX1776">Functions, user-defined</A>
</DIR>
<H2>G</H2>
<DIR>
<LI><A HREF="manual.html#IDX1355">GET_LOCK()</A>
<LI><A HREF="manual.html#IDX513">GRANT</A>
<LI><A HREF="manual.html#IDX534">GRANT statement</A>, <A HREF="manual.html#IDX554">GRANT statement</A>
<LI><A HREF="manual.html#IDX630">GRANTS</A>
<LI><A HREF="manual.html#IDX1128">greater than (&#62;)</A>
<LI><A HREF="manual.html#IDX1126">greater than or equal (&#62;=)</A>
<LI><A HREF="manual.html#IDX1271">GREATEST()</A>
<LI><A HREF="manual.html#IDX1364">GROUP BY functions</A>
</DIR>
<H2>H</H2>
<DIR>
<LI><A HREF="manual.html#IDX1426">HANDLER</A>
<LI><A HREF="manual.html#IDX1167">HEX()</A>
<LI><A HREF="manual.html#IDX978">hexadecimal values</A>
<LI><A HREF="manual.html#IDX694"><CODE>HOME</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1922">HOME environment variable</A>
<LI><A HREF="manual.html#IDX290">host.frm, problems finding</A>
<LI><A HREF="manual.html#IDX1288">HOUR()</A>
</DIR>
<H2>I</H2>
<DIR>
<LI><A HREF="manual.html#IDX987">identifiers, quoting</A>
<LI><A HREF="manual.html#IDX1158">IF()</A>
<LI><A HREF="manual.html#IDX1156">IFNULL()</A>
<LI><A HREF="manual.html#IDX1392">IGNORE INDEX</A>, <A HREF="manual.html#IDX1421">IGNORE INDEX</A>
<LI><A HREF="manual.html#IDX1394">IGNORE KEY</A>, <A HREF="manual.html#IDX1424">IGNORE KEY</A>
<LI><A HREF="manual.html#IDX1138">IN</A>
<LI><A HREF="manual.html#IDX1360">INET_ATON()</A>
<LI><A HREF="manual.html#IDX1359">INET_NTOA()</A>
<LI><A HREF="manual.html#IDX1403">INNER JOIN</A>
<LI><A HREF="manual.html#IDX870">INSERT</A>, <A HREF="manual.html#IDX1427">INSERT</A>
<LI><A HREF="manual.html#IDX1431">INSERT ... SELECT</A>
<LI><A HREF="manual.html#IDX1432">INSERT DELAYED</A>
<LI><A HREF="manual.html#IDX539">INSERT statement, grant privileges</A>
<LI><A HREF="manual.html#IDX1196">INSERT()</A>
<LI><A HREF="manual.html#IDX1732">insertid DBI method</A>
<LI><A HREF="manual.html#IDX1179">INSTR()</A>
<LI><A HREF="manual.html#IDX1022">INT</A>
<LI><A HREF="manual.html#IDX1023">INTEGER</A>
<LI><A HREF="manual.html#IDX1143">INTERVAL()</A>
<LI><A HREF="manual.html#IDX1133">IS NOT NULL</A>
<LI><A HREF="manual.html#IDX1132">IS NULL</A>
<LI><A HREF="manual.html#IDX894">IS NULL, and indexes</A>
<LI><A HREF="manual.html#IDX1735">is_blob DBI method</A>
<LI><A HREF="manual.html#IDX1357">IS_FREE_LOCK()</A>
<LI><A HREF="manual.html#IDX1737">is_key DBI method</A>
<LI><A HREF="manual.html#IDX1743">is_not_null DBI method</A>
<LI><A HREF="manual.html#IDX1739">is_num DBI method</A>
<LI><A HREF="manual.html#IDX1741">is_pri_key DBI method</A>
<LI><A HREF="manual.html#IDX1140">ISNULL()</A>
<LI><A HREF="manual.html#IDX1513">ISOLATION LEVEL</A>
</DIR>
<H2>J</H2>
<DIR>
<LI><A HREF="manual.html#IDX1402">JOIN</A>
</DIR>
<H2>K</H2>
<DIR>
<LI><A HREF="manual.html#IDX595">KILL</A>
</DIR>
<H2>L</H2>
<DIR>
<LI><A HREF="manual.html#IDX142">LAST_INSERT_ID()</A>
<LI><A HREF="manual.html#IDX1349">LAST_INSERT_ID([expr])</A>
<LI><A HREF="manual.html#IDX1202">LCASE()</A>
<LI><A HREF="manual.html#IDX326">LD_RUN_PATH environment variable</A>, <A HREF="manual.html#IDX348">LD_RUN_PATH environment variable</A>, <A HREF="manual.html#IDX360">LD_RUN_PATH environment variable</A>, <A HREF="manual.html#IDX1924">LD_RUN_PATH environment variable</A>
<LI><A HREF="manual.html#IDX1270">LEAST()</A>
<LI><A HREF="manual.html#IDX866">LEFT JOIN</A>, <A HREF="manual.html#IDX1405">LEFT JOIN</A>
<LI><A HREF="manual.html#IDX1406">LEFT OUTER JOIN</A>
<LI><A HREF="manual.html#IDX1182">LEFT()</A>
<LI><A HREF="manual.html#IDX1745">length DBI method</A>
<LI><A HREF="manual.html#IDX1171">LENGTH()</A>
<LI><A HREF="manual.html#IDX1124">less than (&#60;)</A>
<LI><A HREF="manual.html#IDX1122">less than or equal (&#60;=)</A>
<LI><A HREF="manual.html#IDX1213">LIKE</A>
<LI><A HREF="manual.html#IDX890">LIKE, and indexes</A>
<LI><A HREF="manual.html#IDX891">LIKE, and wildcards</A>
<LI><A HREF="manual.html#IDX868">LIMIT</A>, <A HREF="manual.html#IDX1363">LIMIT</A>
<LI><A HREF="manual.html#IDX1253">LN()</A>
<LI><A HREF="manual.html#IDX1442">LOAD DATA INFILE</A>, <A HREF="manual.html#IDX1847">LOAD DATA INFILE</A>
<LI><A HREF="manual.html#IDX1207">LOAD_FILE()</A>
<LI><A HREF="manual.html#IDX1176">LOCATE()</A>, <A HREF="manual.html#IDX1178">LOCATE()</A>
<LI><A HREF="manual.html#IDX1510">LOCK TABLES</A>
<LI><A HREF="manual.html#IDX1254">LOG()</A>
<LI><A HREF="manual.html#IDX1256">LOG10()</A>
<LI><A HREF="manual.html#IDX1255">LOG2()</A>
<LI><A HREF="manual.html#IDX1144">Logical operators</A>
<LI><A HREF="manual.html#IDX1058">LONGBLOB</A>
<LI><A HREF="manual.html#IDX1059">LONGTEXT</A>
<LI><A HREF="manual.html#IDX1203">LOWER()</A>
<LI><A HREF="manual.html#IDX1180">LPAD()</A>
<LI><A HREF="manual.html#IDX1188">LTRIM()</A>
</DIR>
<H2>M</H2>
<DIR>
<LI><A HREF="manual.html#IDX1200">MAKE_SET()</A>
<LI><A HREF="manual.html#IDX1361">MASTER_POS_WAIT()</A>
<LI><A HREF="manual.html#IDX1222">MATCH ... AGAINST()</A>
<LI><A HREF="manual.html#IDX1238">mathematical functions</A>
<LI><A HREF="manual.html#IDX1371">MAX()</A>
<LI><A HREF="manual.html#IDX1747">max_length DBI method</A>
<LI><A HREF="manual.html#IDX1342">MD5()</A>
<LI><A HREF="manual.html#IDX1056">MEDIUMBLOB</A>
<LI><A HREF="manual.html#IDX1021">MEDIUMINT</A>
<LI><A HREF="manual.html#IDX1057">MEDIUMTEXT</A>
<LI><A HREF="manual.html#IDX1185">MID()</A>
<LI><A HREF="manual.html#IDX1370">MIN()</A>
<LI><A HREF="manual.html#IDX1241">minus, unary (-)</A>
<LI><A HREF="manual.html#IDX1289">MINUTE()</A>
<LI><A HREF="manual.html#IDX1329">miscellaneous functions</A>
<LI><A HREF="manual.html#IDX1245">MOD()</A>
<LI><A HREF="manual.html#IDX1247">modulo (%)</A>
<LI><A HREF="manual.html#IDX1282">MONTH()</A>
<LI><A HREF="manual.html#IDX1284">MONTHNAME()</A>
<LI><A HREF="manual.html#IDX1235">multiplication (*)</A>
<LI><A HREF="manual.html#IDX1641"><CODE>my_init()</CODE></A>
<LI><A HREF="manual.html#IDX1560">my_ulonglong C type</A>
<LI><A HREF="manual.html#IDX1561">my_ulonglong values, printing</A>
<LI><A HREF="manual.html#IDX1625">MySQL C type</A>
<LI><A HREF="manual.html#IDX1555">MYSQL C type</A>
<LI><A HREF="manual.html#IDX1564"><CODE>mysql_affected_rows()</CODE></A>
<LI><A HREF="manual.html#IDX1620"><CODE>mysql_autocommit()</CODE>.</A>
<LI><A HREF="manual.html#IDX1624">MYSQL_BIND C type</A>
<LI><A HREF="manual.html#IDX1631"><CODE>mysql_bind_param()</CODE></A>
<LI><A HREF="manual.html#IDX1634"><CODE>mysql_bind_result()</CODE></A>
<LI><A HREF="manual.html#IDX1565"><CODE>mysql_change_user()</CODE></A>
<LI><A HREF="manual.html#IDX1566"><CODE>mysql_character_set_name()</CODE></A>
<LI><A HREF="manual.html#IDX1567"><CODE>mysql_close()</CODE></A>
<LI><A HREF="manual.html#IDX1618"><CODE>mysql_commit()</CODE>.</A>
<LI><A HREF="manual.html#IDX1568"><CODE>mysql_connect()</CODE></A>
<LI><A HREF="manual.html#IDX1569"><CODE>mysql_create_db()</CODE></A>
<LI><A HREF="manual.html#IDX1570"><CODE>mysql_data_seek()</CODE></A>
<LI><A HREF="manual.html#IDX1901">MYSQL_DEBUG environment variable</A>, <A HREF="manual.html#IDX1926">MYSQL_DEBUG environment variable</A>
<LI><A HREF="manual.html#IDX690"><CODE>MYSQL_DEBUG</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1571"><CODE>mysql_debug()</CODE></A>
<LI><A HREF="manual.html#IDX1572"><CODE>mysql_drop_db()</CODE></A>
<LI><A HREF="manual.html#IDX1573"><CODE>mysql_dump_debug_info()</CODE></A>
<LI><A HREF="manual.html#IDX1574"><CODE>mysql_eof()</CODE></A>
<LI><A HREF="manual.html#IDX1575"><CODE>mysql_errno()</CODE></A>
<LI><A HREF="manual.html#IDX1576"><CODE>mysql_error()</CODE></A>
<LI><A HREF="manual.html#IDX1577"><CODE>mysql_escape_string()</CODE></A>
<LI><A HREF="manual.html#IDX1632"><CODE>mysql_execute()</CODE></A>
<LI><A HREF="manual.html#IDX1636"><CODE>mysql_fetch()</CODE></A>
<LI><A HREF="manual.html#IDX1578"><CODE>mysql_fetch_field()</CODE></A>
<LI><A HREF="manual.html#IDX1580"><CODE>mysql_fetch_field_direct()</CODE></A>
<LI><A HREF="manual.html#IDX1579"><CODE>mysql_fetch_fields()</CODE></A>
<LI><A HREF="manual.html#IDX1581"><CODE>mysql_fetch_lengths()</CODE></A>
<LI><A HREF="manual.html#IDX1582"><CODE>mysql_fetch_row()</CODE></A>
<LI><A HREF="manual.html#IDX1558">MYSQL_FIELD C type</A>
<LI><A HREF="manual.html#IDX1583"><CODE>mysql_field_count()</CODE></A>, <A HREF="manual.html#IDX1601"><CODE>mysql_field_count()</CODE></A>
<LI><A HREF="manual.html#IDX1559">MYSQL_FIELD_OFFSET C type</A>
<LI><A HREF="manual.html#IDX1584"><CODE>mysql_field_seek()</CODE></A>
<LI><A HREF="manual.html#IDX1585"><CODE>mysql_field_tell()</CODE></A>
<LI><A HREF="manual.html#IDX1586"><CODE>mysql_free_result()</CODE></A>
<LI><A HREF="manual.html#IDX1587"><CODE>mysql_get_client_info()</CODE></A>
<LI><A HREF="manual.html#IDX1589"><CODE>mysql_get_host_info()</CODE></A>
<LI><A HREF="manual.html#IDX1590"><CODE>mysql_get_proto_info()</CODE></A>
<LI><A HREF="manual.html#IDX1591"><CODE>mysql_get_server_info()</CODE></A>
<LI><A HREF="manual.html#IDX1588"><CODE>mysql_get_server_version()</CODE></A>
<LI><A HREF="manual.html#IDX1928">MYSQL_HISTFILE environment variable</A>
<LI><A HREF="manual.html#IDX692"><CODE>MYSQL_HISTFILE</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1930">MYSQL_HOST environment variable</A>
<LI><A HREF="manual.html#IDX477"><CODE>MYSQL_HOST</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1592"><CODE>mysql_info()</CODE></A>
<LI><A HREF="manual.html#IDX1429">mysql_info()</A>, <A HREF="manual.html#IDX1438">mysql_info()</A>, <A HREF="manual.html#IDX1444">mysql_info()</A>, <A HREF="manual.html#IDX1485">mysql_info()</A>
<LI><A HREF="manual.html#IDX1593"><CODE>mysql_init()</CODE></A>
<LI><A HREF="manual.html#IDX1594"><CODE>mysql_insert_id()</CODE></A>
<LI><A HREF="manual.html#IDX141">mysql_insert_id()</A>
<LI><A HREF="manual.html#IDX1595"><CODE>mysql_kill()</CODE></A>
<LI><A HREF="manual.html#IDX1596"><CODE>mysql_list_dbs()</CODE></A>
<LI><A HREF="manual.html#IDX1597"><CODE>mysql_list_fields()</CODE></A>
<LI><A HREF="manual.html#IDX1598"><CODE>mysql_list_processes()</CODE></A>
<LI><A HREF="manual.html#IDX1599"><CODE>mysql_list_tables()</CODE></A>
<LI><A HREF="manual.html#IDX1621"><CODE>mysql_more_results()</CODE>.</A>
<LI><A HREF="manual.html#IDX1622"><CODE>mysql_next_result()</CODE>.</A>
<LI><A HREF="manual.html#IDX1600"><CODE>mysql_num_fields()</CODE></A>
<LI><A HREF="manual.html#IDX1602"><CODE>mysql_num_rows()</CODE></A>
<LI><A HREF="manual.html#IDX1603"><CODE>mysql_options()</CODE></A>
<LI><A HREF="manual.html#IDX1629"><CODE>mysql_param_count()</CODE></A>
<LI><A HREF="manual.html#IDX1604"><CODE>mysql_ping()</CODE></A>
<LI><A HREF="manual.html#IDX1628"><CODE>mysql_prepare()</CODE></A>
<LI><A HREF="manual.html#IDX1630"><CODE>mysql_prepare_result</CODE>.</A>
<LI><A HREF="manual.html#IDX1932">MYSQL_PS1 environment variable</A>
<LI><A HREF="manual.html#IDX1934">MYSQL_PWD environment variable</A>
<LI><A HREF="manual.html#IDX479"><CODE>MYSQL_PWD</CODE> environment variable</A>, <A HREF="manual.html#IDX688"><CODE>MYSQL_PWD</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1605"><CODE>mysql_query()</CODE></A>, <A HREF="manual.html#IDX1647"><CODE>mysql_query()</CODE></A>
<LI><A HREF="manual.html#IDX1606"><CODE>mysql_real_connect()</CODE></A>
<LI><A HREF="manual.html#IDX971">mysql_real_escape_string()</A>
<LI><A HREF="manual.html#IDX1607"><CODE>mysql_real_escape_string()</CODE></A>
<LI><A HREF="manual.html#IDX1608"><CODE>mysql_real_query()</CODE></A>
<LI><A HREF="manual.html#IDX1609"><CODE>mysql_reload()</CODE></A>
<LI><A HREF="manual.html#IDX1556">MYSQL_RES C type</A>
<LI><A HREF="manual.html#IDX1619"><CODE>mysql_rollback()</CODE>.</A>
<LI><A HREF="manual.html#IDX1557">MYSQL_ROW C type</A>
<LI><A HREF="manual.html#IDX1610"><CODE>mysql_row_seek()</CODE></A>
<LI><A HREF="manual.html#IDX1611"><CODE>mysql_row_tell()</CODE></A>
<LI><A HREF="manual.html#IDX1612"><CODE>mysql_select_db()</CODE></A>
<LI><A HREF="manual.html#IDX1637"><CODE>mysql_send_long_data()</CODE>.</A>
<LI><A HREF="manual.html#IDX1646"><CODE>mysql_server_end()</CODE></A>
<LI><A HREF="manual.html#IDX1645"><CODE>mysql_server_init()</CODE></A>
<LI><A HREF="manual.html#IDX1613"><CODE>mysql_shutdown()</CODE></A>
<LI><A HREF="manual.html#IDX1614"><CODE>mysql_stat()</CODE></A>
<LI><A HREF="manual.html#IDX1623">MYSQL_STMT C type</A>
<LI><A HREF="manual.html#IDX1633"><CODE>mysql_stmt_affected_rows()</CODE></A>
<LI><A HREF="manual.html#IDX1638"><CODE>mysql_stmt_close()</CODE></A>
<LI><A HREF="manual.html#IDX1639"><CODE>mysql_stmt_errno()</CODE></A>
<LI><A HREF="manual.html#IDX1640"><CODE>mysql_stmt_error()</CODE>.</A>
<LI><A HREF="manual.html#IDX1635"><CODE>mysql_stmt_store_result()</CODE></A>
<LI><A HREF="manual.html#IDX1615"><CODE>mysql_store_result()</CODE></A>, <A HREF="manual.html#IDX1648"><CODE>mysql_store_result()</CODE></A>
<LI><A HREF="manual.html#IDX454">MYSQL_TCP_PORT environment variable</A>, <A HREF="manual.html#IDX1936">MYSQL_TCP_PORT environment variable</A>
<LI><A HREF="manual.html#IDX447"><CODE>MYSQL_TCP_PORT</CODE> environment variable</A>, <A HREF="manual.html#IDX686"><CODE>MYSQL_TCP_PORT</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1643"><CODE>mysql_thread_end()</CODE></A>
<LI><A HREF="manual.html#IDX1616"><CODE>mysql_thread_id()</CODE></A>
<LI><A HREF="manual.html#IDX1642"><CODE>mysql_thread_init()</CODE></A>
<LI><A HREF="manual.html#IDX1644"><CODE>mysql_thread_safe()</CODE></A>
<LI><A HREF="manual.html#IDX301">MYSQL_UNIX_PORT environment variable</A>, <A HREF="manual.html#IDX453">MYSQL_UNIX_PORT environment variable</A>, <A HREF="manual.html#IDX1938">MYSQL_UNIX_PORT environment variable</A>
<LI><A HREF="manual.html#IDX446"><CODE>MYSQL_UNIX_PORT</CODE> environment variable</A>, <A HREF="manual.html#IDX684"><CODE>MYSQL_UNIX_PORT</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1617"><CODE>mysql_use_result()</CODE></A>
</DIR>
<H2>N</H2>
<DIR>
<LI><A HREF="manual.html#IDX1749">NAME DBI method</A>
<LI><A HREF="manual.html#IDX1045">NATIONAL CHAR</A>
<LI><A HREF="manual.html#IDX1407">NATURAL LEFT JOIN</A>
<LI><A HREF="manual.html#IDX1408">NATURAL LEFT OUTER JOIN</A>
<LI><A HREF="manual.html#IDX1411">NATURAL RIGHT JOIN</A>
<LI><A HREF="manual.html#IDX1412">NATURAL RIGHT OUTER JOIN</A>
<LI><A HREF="manual.html#IDX1046">NCHAR</A>
<LI><A HREF="manual.html#IDX953">newline (\n)</A>
<LI><A HREF="manual.html#IDX1137">NOT BETWEEN</A>
<LI><A HREF="manual.html#IDX1120">not equal (!=)</A>
<LI><A HREF="manual.html#IDX1118">not equal (&#60;&#62;)</A>
<LI><A HREF="manual.html#IDX1139">NOT IN</A>
<LI><A HREF="manual.html#IDX1214">NOT LIKE</A>
<LI><A HREF="manual.html#IDX1220">NOT REGEXP</A>
<LI><A HREF="manual.html#IDX1146">NOT, logical</A>
<LI><A HREF="manual.html#IDX1306">NOW()</A>
<LI><A HREF="manual.html#IDX945">NUL</A>
<LI><A HREF="manual.html#IDX401">NULL</A>, <A HREF="manual.html#IDX1846">NULL</A>
<LI><A HREF="manual.html#IDX979">NULL value</A>
<LI><A HREF="manual.html#IDX1720">NULLABLE DBI method</A>
<LI><A HREF="manual.html#IDX1157">NULLIF()</A>
<LI><A HREF="manual.html#IDX1722">NUM_OF_FIELDS DBI method</A>
<LI><A HREF="manual.html#IDX1039">NUMERIC</A>
</DIR>
<H2>O</H2>
<DIR>
<LI><A HREF="manual.html#IDX1166">OCT()</A>
<LI><A HREF="manual.html#IDX1172">OCTET_LENGTH()</A>
<LI><A HREF="manual.html#IDX1337">OLD_PASSWORD()</A>
<LI><A HREF="manual.html#IDX1145">Operators, logical</A>
<LI><A HREF="manual.html#IDX587">OPTIMIZE TABLE</A>
<LI><A HREF="manual.html#IDX1320">OR, bitwise</A>
<LI><A HREF="manual.html#IDX1150">OR, logical</A>
<LI><A HREF="manual.html#IDX1163">ORD()</A>
<LI><A HREF="manual.html#IDX1481">ORDER BY</A>
</DIR>
<H2>P</H2>
<DIR>
<LI><A HREF="manual.html#IDX1107">parentheses ( and )</A>
<LI><A HREF="manual.html#IDX490">PASSWORD()</A>, <A HREF="manual.html#IDX541">PASSWORD()</A>, <A HREF="manual.html#IDX1336">PASSWORD()</A>, <A HREF="manual.html#IDX1810">PASSWORD()</A>
<LI><A HREF="manual.html#IDX211">PATH environment variable</A>, <A HREF="manual.html#IDX1940">PATH environment variable</A>
<LI><A HREF="manual.html#IDX1291">PERIOD_ADD()</A>
<LI><A HREF="manual.html#IDX1292">PERIOD_DIFF()</A>
<LI><A HREF="manual.html#IDX1260">PI()</A>
<LI><A HREF="manual.html#IDX1177">POSITION()</A>
<LI><A HREF="manual.html#IDX1257">POW()</A>
<LI><A HREF="manual.html#IDX1258">POWER()</A>
<LI><A HREF="manual.html#IDX1698">prepare() DBI method</A>
<LI><A HREF="manual.html#IDX1456">PRIMARY KEY</A>, <A HREF="manual.html#IDX1480">PRIMARY KEY</A>
<LI><A HREF="manual.html#IDX625">PROCESSLIST</A>
</DIR>
<H2>Q</H2>
<DIR>
<LI><A HREF="manual.html#IDX1285">QUARTER()</A>
<LI><A HREF="manual.html#IDX1208">QUOTE()</A>
<LI><A HREF="manual.html#IDX1704">quote() DBI method</A>
<LI><A HREF="manual.html#IDX988">quoting of identifiers</A>
</DIR>
<H2>R</H2>
<DIR>
<LI><A HREF="manual.html#IDX1273">RADIANS()</A>
<LI><A HREF="manual.html#IDX1269">RAND()</A>
<LI><A HREF="manual.html#IDX1036">REAL</A>
<LI><A HREF="manual.html#IDX1218">REGEXP</A>
<LI><A HREF="manual.html#IDX1356">RELEASE_LOCK()</A>
<LI><A HREF="manual.html#IDX1488">RENAME TABLE</A>
<LI><A HREF="manual.html#IDX563">REPAIR TABLE</A>
<LI><A HREF="manual.html#IDX1194">REPEAT()</A>
<LI><A HREF="manual.html#IDX1441">REPLACE</A>
<LI><A HREF="manual.html#IDX1430">REPLACE ... SELECT</A>
<LI><A HREF="manual.html#IDX1193">REPLACE()</A>
<LI><A HREF="manual.html#IDX553">REQUIRE GRANT option</A>
<LI><A HREF="manual.html#IDX561">RESTORE TABLE</A>
<LI><A HREF="manual.html#IDX955">return (\r)</A>
<LI><A HREF="manual.html#IDX1195">REVERSE()</A>
<LI><A HREF="manual.html#IDX514">REVOKE</A>
<LI><A HREF="manual.html#IDX1409">RIGHT JOIN</A>
<LI><A HREF="manual.html#IDX1410">RIGHT OUTER JOIN</A>
<LI><A HREF="manual.html#IDX1183">RIGHT()</A>
<LI><A HREF="manual.html#IDX1219">RLIKE</A>
<LI><A HREF="manual.html#IDX133">ROLLBACK</A>, <A HREF="manual.html#IDX1509">ROLLBACK</A>
<LI><A HREF="manual.html#IDX1250">ROUND()</A>
<LI><A HREF="manual.html#IDX1718">rows DBI method</A>
<LI><A HREF="manual.html#IDX1181">RPAD()</A>
<LI><A HREF="manual.html#IDX1189">RTRIM()</A>
</DIR>
<H2>S</H2>
<DIR>
<LI><A HREF="manual.html#IDX1311">SEC_TO_TIME()</A>
<LI><A HREF="manual.html#IDX1290">SECOND()</A>
<LI><A HREF="manual.html#IDX1387">SELECT</A>
<LI><A HREF="manual.html#IDX131">SELECT INTO TABLE</A>
<LI><A HREF="manual.html#IDX858">SELECT speed</A>
<LI><A HREF="manual.html#IDX850">SELECT, optimising</A>
<LI><A HREF="manual.html#IDX1334">SESSION_USER()</A>
<LI><A HREF="manual.html#IDX1061">SET</A>, <A HREF="manual.html#IDX1085">SET</A>
<LI><A HREF="manual.html#IDX928">SET OPTION</A>
<LI><A HREF="manual.html#IDX542">SET PASSWORD statement</A>
<LI><A HREF="manual.html#IDX1512">SET TRANSACTION</A>
<LI><A HREF="manual.html#IDX1344">SHA()</A>
<LI><A HREF="manual.html#IDX1343">SHA1()</A>
<LI><A HREF="manual.html#IDX600">SHOW COLUMNS</A>
<LI><A HREF="manual.html#IDX609">SHOW CREATE TABLE</A>, <A HREF="manual.html#IDX632">SHOW CREATE TABLE</A>
<LI><A HREF="manual.html#IDX597">SHOW DATABASE INFO</A>
<LI><A HREF="manual.html#IDX598">SHOW DATABASES</A>
<LI><A HREF="manual.html#IDX601">SHOW FIELDS</A>
<LI><A HREF="manual.html#IDX608">SHOW GRANTS</A>, <A HREF="manual.html#IDX631">SHOW GRANTS</A>
<LI><A HREF="manual.html#IDX602">SHOW INDEX</A>
<LI><A HREF="manual.html#IDX603">SHOW KEYS</A>
<LI><A HREF="manual.html#IDX611">SHOW MASTER LOGS</A>
<LI><A HREF="manual.html#IDX610">SHOW MASTER STATUS</A>
<LI><A HREF="manual.html#IDX635">SHOW PRIVILEGES</A>
<LI><A HREF="manual.html#IDX606">SHOW PROCESSLIST</A>, <A HREF="manual.html#IDX626">SHOW PROCESSLIST</A>
<LI><A HREF="manual.html#IDX612">SHOW SLAVE STATUS</A>
<LI><A HREF="manual.html#IDX604">SHOW STATUS</A>
<LI><A HREF="manual.html#IDX607">SHOW TABLE STATUS</A>
<LI><A HREF="manual.html#IDX614">SHOW TABLE TYPES</A>, <A HREF="manual.html#IDX634">SHOW TABLE TYPES</A>
<LI><A HREF="manual.html#IDX599">SHOW TABLES</A>
<LI><A HREF="manual.html#IDX605">SHOW VARIABLES</A>
<LI><A HREF="manual.html#IDX613">SHOW WARNINGS</A>, <A HREF="manual.html#IDX633">SHOW WARNINGS</A>
<LI><A HREF="manual.html#IDX1244">SIGN()</A>
<LI><A HREF="manual.html#IDX1262">SIN()</A>
<LI><A HREF="manual.html#IDX947">single quote (\')</A>
<LI><A HREF="manual.html#IDX1020">SMALLINT</A>
<LI><A HREF="manual.html#IDX1191">SOUNDEX()</A>
<LI><A HREF="manual.html#IDX1215">SOUNDS LIKE</A>
<LI><A HREF="manual.html#IDX1192">SPACE()</A>
<LI><A HREF="manual.html#IDX1519">SQL_CACHE</A>
<LI><A HREF="manual.html#IDX1520">SQL_NO_CACHE</A>
<LI><A HREF="manual.html#IDX1259">SQRT()</A>
<LI><A HREF="manual.html#IDX1506">START TRANSACTION</A>
<LI><A HREF="manual.html#IDX535">statements, GRANT</A>
<LI><A HREF="manual.html#IDX540">statements, INSERT</A>
<LI><A HREF="manual.html#IDX1374">STD()</A>
<LI><A HREF="manual.html#IDX1375">STDDEV()</A>
<LI><A HREF="manual.html#IDX1413">STRAIGHT_JOIN</A>
<LI><A HREF="manual.html#IDX1221">STRCMP()</A>
<LI><A HREF="manual.html#IDX1209">string comparison functions</A>
<LI><A HREF="manual.html#IDX1160">string functions</A>
<LI><A HREF="manual.html#IDX1296">SUBDATE()</A>
<LI><A HREF="manual.html#IDX1184">SUBSTRING()</A>, <A HREF="manual.html#IDX1186">SUBSTRING()</A>
<LI><A HREF="manual.html#IDX1187">SUBSTRING_INDEX()</A>
<LI><A HREF="manual.html#IDX1233">subtraction (-)</A>
<LI><A HREF="manual.html#IDX1372">SUM()</A>
<LI><A HREF="manual.html#IDX1307">SYSDATE()</A>
<LI><A HREF="manual.html#IDX1333">SYSTEM_USER()</A>
</DIR>
<H2>T</H2>
<DIR>
<LI><A HREF="manual.html#IDX958">tab (\t)</A>
<LI><A HREF="manual.html#IDX1751">table DBI method</A>
<LI><A HREF="manual.html#IDX904">table_cache</A>
<LI><A HREF="manual.html#IDX1263">TAN()</A>
<LI><A HREF="manual.html#IDX1055">TEXT</A>, <A HREF="manual.html#IDX1080">TEXT</A>
<LI><A HREF="manual.html#IDX624">threads</A>
<LI><A HREF="manual.html#IDX1043">TIME</A>, <A HREF="manual.html#IDX1073">TIME</A>
<LI><A HREF="manual.html#IDX1301">TIME_FORMAT()</A>
<LI><A HREF="manual.html#IDX1312">TIME_TO_SEC()</A>
<LI><A HREF="manual.html#IDX1042">TIMESTAMP</A>, <A HREF="manual.html#IDX1068">TIMESTAMP</A>
<LI><A HREF="manual.html#IDX1052">TINYBLOB</A>
<LI><A HREF="manual.html#IDX1017">TINYINT</A>
<LI><A HREF="manual.html#IDX1053">TINYTEXT</A>
<LI><A HREF="manual.html#IDX300">TMPDIR environment variable</A>, <A HREF="manual.html#IDX1942">TMPDIR environment variable</A>
<LI><A HREF="manual.html#IDX1298">TO_DAYS()</A>
<LI><A HREF="manual.html#IDX1728">trace DBI method</A>, <A HREF="manual.html#IDX1896">trace DBI method</A>
<LI><A HREF="manual.html#IDX1190">TRIM()</A>
<LI><A HREF="manual.html#IDX1440">TRUNCATE</A>
<LI><A HREF="manual.html#IDX1274">TRUNCATE()</A>
<LI><A HREF="manual.html#IDX1753">type DBI method</A>
<LI><A HREF="manual.html#IDX1016">Types</A>
<LI><A HREF="manual.html#IDX1836">TZ environment variable</A>, <A HREF="manual.html#IDX1944">TZ environment variable</A>
</DIR>
<H2>U</H2>
<DIR>
<LI><A HREF="manual.html#IDX1204">UCASE()</A>
<LI><A HREF="manual.html#IDX1774">UDF functions</A>
<LI><A HREF="manual.html#IDX1812">ulimit</A>
<LI><A HREF="manual.html#IDX1821">UMASK environment variable</A>, <A HREF="manual.html#IDX1948">UMASK environment variable</A>
<LI><A HREF="manual.html#IDX1823">UMASK_DIR environment variable</A>, <A HREF="manual.html#IDX1946">UMASK_DIR environment variable</A>
<LI><A HREF="manual.html#IDX1242">unary minus (-)</A>
<LI><A HREF="manual.html#IDX417">UNION</A>, <A HREF="manual.html#IDX1425">UNION</A>
<LI><A HREF="manual.html#IDX1479">UNIQUE</A>
<LI><A HREF="manual.html#IDX1309">UNIX_TIMESTAMP()</A>
<LI><A HREF="manual.html#IDX1511">UNLOCK TABLES</A>
<LI><A HREF="manual.html#IDX1437">UPDATE</A>
<LI><A HREF="manual.html#IDX1205">UPPER()</A>
<LI><A HREF="manual.html#IDX1499">USE</A>
<LI><A HREF="manual.html#IDX1391">USE INDEX</A>, <A HREF="manual.html#IDX1420">USE INDEX</A>
<LI><A HREF="manual.html#IDX1393">USE KEY</A>, <A HREF="manual.html#IDX1423">USE KEY</A>
<LI><A HREF="manual.html#IDX1950">USER environment variable</A>
<LI><A HREF="manual.html#IDX481"><CODE>USER</CODE> environment variable</A>
<LI><A HREF="manual.html#IDX1332">USER()</A>
<LI><A HREF="manual.html#IDX1775">User-defined functions</A>
</DIR>
<H2>V</H2>
<DIR>
<LI><A HREF="manual.html#IDX1051">VARCHAR</A>, <A HREF="manual.html#IDX1078">VARCHAR</A>
<LI><A HREF="manual.html#IDX1373">VARIANCE()</A>
<LI><A HREF="manual.html#IDX1352">VERSION()</A>
</DIR>
<H2>W</H2>
<DIR>
<LI><A HREF="manual.html#IDX1286">WEEK()</A>
<LI><A HREF="manual.html#IDX1279">WEEKDAY()</A>
<LI><A HREF="manual.html#IDX860">WHERE</A>
<LI><A HREF="manual.html#IDX964">Wildcard character (%)</A>
<LI><A HREF="manual.html#IDX966">Wildcard character (_)</A>
<LI><A HREF="manual.html#IDX218">without-server option</A>
</DIR>
<H2>X</H2>
<DIR>
<LI><A HREF="manual.html#IDX1324">XOR, bitwise</A>
<LI><A HREF="manual.html#IDX1152">XOR, logical</A>
</DIR>
<H2>Y</H2>
<DIR>
<LI><A HREF="manual.html#IDX1044">YEAR</A>, <A HREF="manual.html#IDX1074">YEAR</A>
<LI><A HREF="manual.html#IDX1287">YEAR()</A>
</DIR>
<H2> </H2>
<DIR>
<LI><A HREF="manual.html#IDX1319">| (bitwise OR)</A>
<LI><A HREF="manual.html#IDX1151">|| (logical OR)</A>
<LI><A HREF="manual.html#IDX1327">~</A>
</DIR>

</P>



<H1><A NAME="Concept_Index" HREF="manual_toc.html#Concept_Index">Concept Index</A></H1>

<P>
<H2>A</H2>
<DIR>
<LI><A HREF="manual.html#IDX1804">aborted clients</A>
<LI><A HREF="manual.html#IDX1805">aborted connection</A>
<LI><A HREF="manual.html#IDX483">access control</A>
<LI><A HREF="manual.html#IDX1802">access denied errors</A>
<LI><A HREF="manual.html#IDX459">access privileges</A>
<LI><A HREF="manual.html#IDX1670">Access program</A>
<LI><A HREF="manual.html#IDX1545">ACID</A>
<LI><A HREF="manual.html#IDX140"><CODE>ACID</CODE></A>
<LI><A HREF="manual.html#IDX462">ACLs</A>
<LI><A HREF="manual.html#IDX357">ActiveState Perl</A>
<LI><A HREF="manual.html#IDX644">adding, character sets</A>
<LI><A HREF="manual.html#IDX1791">adding, native functions</A>
<LI><A HREF="manual.html#IDX1766">adding, new functions</A>
<LI><A HREF="manual.html#IDX537">adding, new user privileges</A>
<LI><A HREF="manual.html#IDX208">adding, new users</A>
<LI><A HREF="manual.html#IDX1795">adding, procedures</A>
<LI><A HREF="manual.html#IDX1777">adding, user-definable functions</A>
<LI><A HREF="manual.html#IDX767">administration, server</A>
<LI><A HREF="manual.html#IDX1671">ADO program</A>
<LI><A HREF="manual.html#IDX400">age, calculating</A>
<LI><A HREF="manual.html#IDX998">alias names, case-sensitivity</A>
<LI><A HREF="manual.html#IDX1386">aliases, for expressions</A>
<LI><A HREF="manual.html#IDX1396">aliases, for tables</A>
<LI><A HREF="manual.html#IDX1384">aliases, in <CODE>GROUP BY</CODE> clauses</A>
<LI><A HREF="manual.html#IDX1382">aliases, in <CODE>ORDER BY</CODE> clauses</A>
<LI><A HREF="manual.html#IDX986">aliases, names</A>
<LI><A HREF="manual.html#IDX1388">aliases, on expressions</A>
<LI><A HREF="manual.html#IDX489">anonymous user</A>, <A HREF="manual.html#IDX494">anonymous user</A>, <A HREF="manual.html#IDX529">anonymous user</A>, <A HREF="manual.html#IDX531">anonymous user</A>
<LI><A HREF="manual.html#IDX120">ANSI mode, running</A>
<LI><A HREF="manual.html#IDX521">ANSI SQL, differences from</A>
<LI><A HREF="manual.html#IDX118">ANSI SQL92, extensions to</A>
<LI><A HREF="manual.html#IDX111">answering questions, etiquette</A>
<LI><A HREF="manual.html#IDX432">Apache</A>
<LI><A HREF="manual.html#IDX1549">APIs</A>
<LI><A HREF="manual.html#IDX1689">APIs, Perl</A>
<LI><A HREF="manual.html#IDX217">applying, patches</A>
<LI><A HREF="manual.html#IDX1782">argument processing</A>
<LI><A HREF="manual.html#IDX1229">arithmetic expressions</A>
<LI><A HREF="manual.html#IDX1681">AUTO-INCREMENT, ODBC</A>
<LI><A HREF="manual.html#IDX424">AUTO_INCREMENT</A>
<LI><A HREF="manual.html#IDX1849"><CODE>AUTO_INCREMENT</CODE>, and <CODE>NULL</CODE> values</A>
</DIR>
<H2>B</H2>
<DIR>
<LI><A HREF="manual.html#IDX784">backing up, databases</A>, <A HREF="manual.html#IDX789">backing up, databases</A>
<LI><A HREF="manual.html#IDX943">backslash, escape character</A>
<LI><A HREF="manual.html#IDX556">backups</A>
<LI><A HREF="manual.html#IDX560">backups, database</A>
<LI><A HREF="manual.html#IDX426">batch mode</A>
<LI><A HREF="manual.html#IDX718"><CODE>batch</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1522"><CODE>BDB</CODE> table type</A>
<LI><A HREF="manual.html#IDX139"><CODE>BDB</CODE> tables</A>
<LI><A HREF="manual.html#IDX841">benchmark suite</A>
<LI><A HREF="manual.html#IDX844">benchmarks</A>
<LI><A HREF="manual.html#IDX1523"><CODE>BerkeleyDB</CODE> table type</A>
<LI><A HREF="manual.html#IDX1841">Big5 Chinese character encoding</A>
<LI><A HREF="manual.html#IDX202">binary distributions</A>
<LI><A HREF="manual.html#IDX204">binary distributions, installing</A>
<LI><A HREF="manual.html#IDX351">binary distributions, on HP-UX</A>
<LI><A HREF="manual.html#IDX328">binary distributions, on Linux</A>
<LI><A HREF="manual.html#IDX810">binary log</A>
<LI><A HREF="manual.html#IDX829"><CODE>Binlog_Dump</CODE></A>
<LI><A HREF="manual.html#IDX423">bit_functions, example</A>
<LI><A HREF="manual.html#IDX247">BitKeeper tree</A>
<LI><A HREF="manual.html#IDX1082"><CODE>BLOB</CODE> columns, default values</A>
<LI><A HREF="manual.html#IDX1459"><CODE>BLOB</CODE> columns, indexing</A>
<LI><A HREF="manual.html#IDX970"><CODE>BLOB</CODE>, inserting binary data</A>
<LI><A HREF="manual.html#IDX1099"><CODE>BLOB</CODE>, size</A>
<LI><A HREF="manual.html#IDX1672">Borland Builder 4 program</A>
<LI><A HREF="manual.html#IDX1756">Borland C++ compiler</A>
<LI><A HREF="manual.html#IDX1014">brackets, square</A>
<LI><A HREF="manual.html#IDX1551">buffer sizes, client</A>
<LI><A HREF="manual.html#IDX917">buffer sizes, <CODE>mysqld</CODE> server</A>
<LI><A HREF="manual.html#IDX104">bug reports, criteria for</A>
<LI><A HREF="manual.html#IDX103">bugs database</A>
<LI><A HREF="manual.html#IDX153">bugs, known</A>
<LI><A HREF="manual.html#IDX95">bugs, reporting</A>
<LI><A HREF="manual.html#IDX102">bugs.mysql.com</A>
<LI><A HREF="manual.html#IDX1657">building, client programs</A>
</DIR>
<H2>C</H2>
<DIR>
<LI><A HREF="manual.html#IDX1553">C API, datatypes</A>
<LI><A HREF="manual.html#IDX1562">C API, functions</A>
<LI><A HREF="manual.html#IDX1654">C API, linking problems</A>
<LI><A HREF="manual.html#IDX1626">C Prepared statements API, functions</A>
<LI><A HREF="manual.html#IDX1870">C++</A>
<LI><A HREF="manual.html#IDX1755">C++ APIs</A>
<LI><A HREF="manual.html#IDX1679">C++ Builder</A>
<LI><A HREF="manual.html#IDX264">C++ compiler cannot create executables</A>
<LI><A HREF="manual.html#IDX234">C++ compiler, <CODE>gcc</CODE></A>
<LI><A HREF="manual.html#IDX594">caches, clearing</A>
<LI><A HREF="manual.html#IDX398">calculating, dates</A>
<LI><A HREF="manual.html#IDX1781">calling sequences for aggregate functions, UDF</A>
<LI><A HREF="manual.html#IDX1780">calling sequences for simple functions, UDF</A>
<LI><A HREF="manual.html#IDX1808">can't create/write to file</A>
<LI><A HREF="manual.html#IDX470">case-sensitivity, in access checking</A>
<LI><A HREF="manual.html#IDX994">case-sensitivity, in names</A>
<LI><A HREF="manual.html#IDX1838">case-sensitivity, in searches</A>
<LI><A HREF="manual.html#IDX1211">case-sensitivity, in string comparisons</A>
<LI><A HREF="manual.html#IDX124">case-sensitivity, of database names</A>
<LI><A HREF="manual.html#IDX125">case-sensitivity, of table names</A>
<LI><A HREF="manual.html#IDX1224">cast operators</A>
<LI><A HREF="manual.html#IDX1111">casts</A>
<LI><A HREF="manual.html#IDX258"><CODE>cc1plus</CODE> problems</A>
<LI><A HREF="manual.html#IDX48">certification</A>
<LI><A HREF="manual.html#IDX1877">ChangeLog</A>
<LI><A HREF="manual.html#IDX506">changes to privileges</A>
<LI><A HREF="manual.html#IDX1878">changes, log</A>
<LI><A HREF="manual.html#IDX1889">changes, version 3.19</A>
<LI><A HREF="manual.html#IDX1888">changes, version 3.20</A>
<LI><A HREF="manual.html#IDX1885">changes, version 3.21</A>
<LI><A HREF="manual.html#IDX1884">changes, version 3.22</A>
<LI><A HREF="manual.html#IDX1883">changes, version 3.23</A>
<LI><A HREF="manual.html#IDX1882">changes, version 4.0</A>
<LI><A HREF="manual.html#IDX1881">changes, version 4.1</A>
<LI><A HREF="manual.html#IDX1880">changes, version 5.0</A>
<LI><A HREF="manual.html#IDX224">changing socket location</A>, <A HREF="manual.html#IDX309">changing socket location</A>, <A HREF="manual.html#IDX1833">changing socket location</A>
<LI><A HREF="manual.html#IDX1469">changing, column</A>
<LI><A HREF="manual.html#IDX1863">changing, column order</A>
<LI><A HREF="manual.html#IDX1471">changing, field</A>
<LI><A HREF="manual.html#IDX1466">changing, table</A>, <A HREF="manual.html#IDX1483">changing, table</A>, <A HREF="manual.html#IDX1859">changing, table</A>
<LI><A HREF="manual.html#IDX242">character sets</A>, <A HREF="manual.html#IDX636">character sets</A>
<LI><A HREF="manual.html#IDX643">character sets, adding</A>
<LI><A HREF="manual.html#IDX719"><CODE>character-sets-dir</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX647">characters, multi-byte</A>
<LI><A HREF="manual.html#IDX566">check options, myisamchk</A>
<LI><A HREF="manual.html#IDX573">checking, tables for errors</A>
<LI><A HREF="manual.html#IDX347">checksum errors</A>
<LI><A HREF="manual.html#IDX1840">Chinese</A>
<LI><A HREF="manual.html#IDX1087">choosing types</A>
<LI><A HREF="manual.html#IDX191">choosing, a MySQL version</A>
<LI><A HREF="manual.html#IDX593">clearing, caches</A>
<LI><A HREF="manual.html#IDX1655">client programs, building</A>
<LI><A HREF="manual.html#IDX1548">client tools</A>
<LI><A HREF="manual.html#IDX1900">clients, debugging</A>
<LI><A HREF="manual.html#IDX1659">clients, threaded</A>
<LI><A HREF="manual.html#IDX908">closing, tables</A>
<LI><A HREF="manual.html#IDX1673">ColdFusion program</A>
<LI><A HREF="manual.html#IDX645">collating, strings</A>
<LI><A HREF="manual.html#IDX997">column names, case-sensitivity</A>
<LI><A HREF="manual.html#IDX1470">column, changing</A>
<LI><A HREF="manual.html#IDX1862">columns, changing</A>
<LI><A HREF="manual.html#IDX799">columns, displaying</A>
<LI><A HREF="manual.html#IDX897">columns, indexes</A>
<LI><A HREF="manual.html#IDX985">columns, names</A>
<LI><A HREF="manual.html#IDX1090">columns, other types</A>
<LI><A HREF="manual.html#IDX390">columns, selecting</A>
<LI><A HREF="manual.html#IDX1092">columns, storage requirements</A>
<LI><A HREF="manual.html#IDX1008">columns, types</A>
<LI><A HREF="manual.html#IDX15">command syntax</A>
<LI><A HREF="manual.html#IDX697">command-line history</A>
<LI><A HREF="manual.html#IDX711">command-line options, <CODE>mysql</CODE></A>
<LI><A HREF="manual.html#IDX706">command-line tool</A>
<LI><A HREF="manual.html#IDX1809">commands out of sync</A>
<LI><A HREF="manual.html#IDX207">commands, for binary distribution</A>
<LI><A HREF="manual.html#IDX763">commands, list of</A>
<LI><A HREF="manual.html#IDX827">commands, replication</A>
<LI><A HREF="manual.html#IDX1005">comments, adding</A>
<LI><A HREF="manual.html#IDX151">comments, starting</A>
<LI><A HREF="manual.html#IDX62">commercial support, types</A>
<LI><A HREF="manual.html#IDX164">communications protocols</A>
<LI><A HREF="manual.html#IDX159">comparisons, MySQL vs. others</A>
<LI><A HREF="manual.html#IDX312">compatibility, between MySQL versions</A>, <A HREF="manual.html#IDX315">compatibility, between MySQL versions</A>, <A HREF="manual.html#IDX317">compatibility, between MySQL versions</A>, <A HREF="manual.html#IDX319">compatibility, between MySQL versions</A>
<LI><A HREF="manual.html#IDX115">compatibility, with ANSI SQL</A>
<LI><A HREF="manual.html#IDX1217">compatibility, with mSQL</A>
<LI><A HREF="manual.html#IDX992">compatibility, with ODBC</A>, <A HREF="manual.html#IDX1030">compatibility, with ODBC</A>, <A HREF="manual.html#IDX1114">compatibility, with ODBC</A>, <A HREF="manual.html#IDX1135">compatibility, with ODBC</A>, <A HREF="manual.html#IDX1416">compatibility, with ODBC</A>, <A HREF="manual.html#IDX1454">compatibility, with ODBC</A>, <A HREF="manual.html#IDX1887">compatibility, with ODBC</A>
<LI><A HREF="manual.html#IDX127">compatibility, with Oracle</A>, <A HREF="manual.html#IDX1377">compatibility, with Oracle</A>, <A HREF="manual.html#IDX1505">compatibility, with Oracle</A>
<LI><A HREF="manual.html#IDX129">compatibility, with PostgreSQL</A>
<LI><A HREF="manual.html#IDX1501">compatibility, with Sybase</A>
<LI><A HREF="manual.html#IDX235">compiler, C++ <CODE>gcc</CODE></A>
<LI><A HREF="manual.html#IDX337">compiling, on Windows</A>
<LI><A HREF="manual.html#IDX911">compiling, optimising</A>
<LI><A HREF="manual.html#IDX249">compiling, problems</A>
<LI><A HREF="manual.html#IDX922">compiling, speed</A>
<LI><A HREF="manual.html#IDX227">compiling, statically</A>
<LI><A HREF="manual.html#IDX1788">compiling, user-defined functions</A>
<LI><A HREF="manual.html#IDX43">compliance, Y2K</A>
<LI><A HREF="manual.html#IDX720"><CODE>compress</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX675">compressed tables</A>, <A HREF="manual.html#IDX1536">compressed tables</A>
<LI><A HREF="manual.html#IDX664">config-file option</A>
<LI><A HREF="manual.html#IDX257">config.cache</A>
<LI><A HREF="manual.html#IDX252"><CODE>config.cache</CODE> file</A>
<LI><A HREF="manual.html#IDX510">configuration files</A>
<LI><A HREF="manual.html#IDX221">configuration options</A>
<LI><A HREF="manual.html#IDX263">configure option, --with-low-memory</A>
<LI><A HREF="manual.html#IDX219"><CODE>configure</CODE> script</A>
<LI><A HREF="manual.html#IDX255"><CODE>configure</CODE>, running after prior invocation</A>
<LI><A HREF="manual.html#IDX758"><CODE>connect_timeout</CODE> variable</A>
<LI><A HREF="manual.html#IDX333">connecting, remotely with SSH</A>
<LI><A HREF="manual.html#IDX366">connecting, to the server</A>, <A HREF="manual.html#IDX472">connecting, to the server</A>
<LI><A HREF="manual.html#IDX485">connecting, verification</A>
<LI><A HREF="manual.html#IDX1806">connection, aborted</A>
<LI><A HREF="manual.html#IDX1686">Connector/J</A>
<LI><A HREF="manual.html#IDX1668">Connector/ODBC</A>
<LI><A HREF="manual.html#IDX853">constant table</A>, <A HREF="manual.html#IDX862">constant table</A>
<LI><A HREF="manual.html#IDX50">consulting</A>
<LI><A HREF="manual.html#IDX53">contact information</A>
<LI><A HREF="manual.html#IDX1866">contributed programs</A>
<LI><A HREF="manual.html#IDX1876">contributing companies, list of</A>
<LI><A HREF="manual.html#IDX1875">contributors, list of</A>
<LI><A HREF="manual.html#IDX484">control access</A>
<LI><A HREF="manual.html#IDX13">conventions, typographical</A>
<LI><A HREF="manual.html#IDX1872">converters</A>
<LI><A HREF="manual.html#IDX162">converting, tools</A>
<LI><A HREF="manual.html#IDX67">copyrights</A>
<LI><A HREF="manual.html#IDX63">costs, support</A>
<LI><A HREF="manual.html#IDX408">counting, table rows</A>
<LI><A HREF="manual.html#IDX463">crackers, security against</A>
<LI><A HREF="manual.html#IDX1893">crash</A>
<LI><A HREF="manual.html#IDX571">crash, recovery</A>
<LI><A HREF="manual.html#IDX1825">crash, repeated</A>
<LI><A HREF="manual.html#IDX843">crash-me</A>
<LI><A HREF="manual.html#IDX837">crash-me program</A>, <A HREF="manual.html#IDX842">crash-me program</A>
<LI><A HREF="manual.html#IDX100">creating, bug reports</A>
<LI><A HREF="manual.html#IDX376">creating, databases</A>
<LI><A HREF="manual.html#IDX438">creating, default startup options</A>
<LI><A HREF="manual.html#IDX380">creating, tables</A>
<LI><A HREF="manual.html#IDX107">customer support, mailing address</A>
<LI><A HREF="manual.html#IDX840">customers, of MySQL</A>
<LI><A HREF="manual.html#IDX248">CVS tree</A>
</DIR>
<H2>D</H2>
<DIR>
<LI><A HREF="manual.html#IDX637">data, character sets</A>
<LI><A HREF="manual.html#IDX791">data, importing</A>
<LI><A HREF="manual.html#IDX383">data, loading into tables</A>
<LI><A HREF="manual.html#IDX384">data, retrieving</A>
<LI><A HREF="manual.html#IDX882">data, size</A>
<LI><A HREF="manual.html#IDX880">database design</A>
<LI><A HREF="manual.html#IDX122">database names, case-sensitivity</A>, <A HREF="manual.html#IDX995">database names, case-sensitivity</A>
<LI><A HREF="manual.html#IDX1450">database, deleting</A>
<LI><A HREF="manual.html#IDX722"><CODE>database</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX555">databases, backups</A>
<LI><A HREF="manual.html#IDX374">databases, creating</A>
<LI><A HREF="manual.html#IDX18">databases, defined</A>
<LI><A HREF="manual.html#IDX796">databases, displaying</A>
<LI><A HREF="manual.html#IDX782">databases, dumping</A>, <A HREF="manual.html#IDX787">databases, dumping</A>
<LI><A HREF="manual.html#IDX410">databases, information about</A>
<LI><A HREF="manual.html#IDX158">databases, MySQL vs. others</A>
<LI><A HREF="manual.html#IDX982">databases, names</A>
<LI><A HREF="manual.html#IDX821">databases, replicating</A>
<LI><A HREF="manual.html#IDX378">databases, selecting</A>
<LI><A HREF="manual.html#IDX936">databases, symbolic links</A>
<LI><A HREF="manual.html#IDX375">databases, using</A>
<LI><A HREF="manual.html#IDX1674">DataJunction</A>
<LI><A HREF="manual.html#IDX1554">datatypes, C API</A>
<LI><A HREF="manual.html#IDX1063">Date and Time types</A>
<LI><A HREF="manual.html#IDX397">date calculations</A>
<LI><A HREF="manual.html#IDX1843">DATE columns, problems</A>
<LI><A HREF="manual.html#IDX44">date functions, Y2K compliance</A>
<LI><A HREF="manual.html#IDX1095">date types</A>
<LI><A HREF="manual.html#IDX1065">date types, Y2K issues</A>
<LI><A HREF="manual.html#IDX1072">date values, problems</A>
<LI><A HREF="manual.html#IDX499"><CODE>db</CODE> table, sorting</A>
<LI><A HREF="manual.html#IDX1691"><CODE>DBI</CODE> interface</A>
<LI><A HREF="manual.html#IDX1692"><CODE>DBI</CODE> Perl module</A>
<LI><A HREF="manual.html#IDX1754"><CODE>DBI/DBD</CODE></A>
<LI><A HREF="manual.html#IDX1903">DBUG package</A>
<LI><A HREF="manual.html#IDX750"><CODE>debug-info</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX721"><CODE>debug</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1899">debugging, client</A>
<LI><A HREF="manual.html#IDX1892">debugging, server</A>
<LI><A HREF="manual.html#IDX1013">decimal point</A>
<LI><A HREF="manual.html#IDX473">default hostname</A>
<LI><A HREF="manual.html#IDX199">default installation location</A>
<LI><A HREF="manual.html#IDX436">default options</A>
<LI><A HREF="manual.html#IDX34">default values</A>, <A HREF="manual.html#IDX835">default values</A>, <A HREF="manual.html#IDX1428">default values</A>, <A HREF="manual.html#IDX1455">default values</A>
<LI><A HREF="manual.html#IDX1081">default values, <CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns</A>
<LI><A HREF="manual.html#IDX238">default values, suppression</A>
<LI><A HREF="manual.html#IDX525">default, privileges</A>
<LI><A HREF="manual.html#IDX723"><CODE>default-character-set</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1663">defaults, embedded</A>
<LI><A HREF="manual.html#IDX1435">delayed_insert_limit</A>
<LI><A HREF="manual.html#IDX1449">deleting, database</A>
<LI><A HREF="manual.html#IDX1772">deleting, function</A>
<LI><A HREF="manual.html#IDX1474">deleting, index</A>, <A HREF="manual.html#IDX1497">deleting, index</A>
<LI><A HREF="manual.html#IDX1477">deleting, primary key</A>
<LI><A HREF="manual.html#IDX1853">deleting, rows</A>
<LI><A HREF="manual.html#IDX1490">deleting, table</A>
<LI><A HREF="manual.html#IDX1832">deletion, <CODE>mysql.sock</CODE></A>
<LI><A HREF="manual.html#IDX1871">Delphi</A>
<LI><A HREF="manual.html#IDX1678">Delphi program</A>
<LI><A HREF="manual.html#IDX879">design, choices</A>
<LI><A HREF="manual.html#IDX155">design, issues</A>
<LI><A HREF="manual.html#IDX833">design, limitations</A>
<LI><A HREF="manual.html#IDX1874">developers, list of</A>
<LI><A HREF="manual.html#IDX246">development source tree</A>
<LI><A HREF="manual.html#IDX1012">digits</A>
<LI><A HREF="manual.html#IDX198">directory structure, default</A>
<LI><A HREF="manual.html#IDX367">disconnecting, from the server</A>
<LI><A HREF="manual.html#IDX1830">disk full</A>
<LI><A HREF="manual.html#IDX931">disk issues</A>
<LI><A HREF="manual.html#IDX336">disks, splitting data across</A>
<LI><A HREF="manual.html#IDX1010">display size</A>
<LI><A HREF="manual.html#IDX797">displaying, database information</A>
<LI><A HREF="manual.html#IDX615">displaying, information, <CODE>SHOW</CODE></A>
<LI><A HREF="manual.html#IDX616">displaying, table status</A>
<LI><A HREF="manual.html#IDX926">DNS</A>
<LI><A HREF="manual.html#IDX311">downgrading</A>
<LI><A HREF="manual.html#IDX176">downloading</A>
<LI><A HREF="manual.html#IDX781">dumping, databases</A>, <A HREF="manual.html#IDX786">dumping, databases</A>
<LI><A HREF="manual.html#IDX1532">dynamic table characteristics</A>
</DIR>
<H2>E</H2>
<DIR>
<LI><A HREF="manual.html#IDX91">e-mail lists</A>
<LI><A HREF="manual.html#IDX1759">Eiffel Wrapper</A>
<LI><A HREF="manual.html#IDX1662">embedded MySQL server library</A>
<LI><A HREF="manual.html#IDX56">employment with MySQL</A>
<LI><A HREF="manual.html#IDX54">employment, contact information</A>
<LI><A HREF="manual.html#IDX728"><CODE>enable-named-commands</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX372">entering, queries</A>
<LI><A HREF="manual.html#IDX1102">ENUM, size</A>
<LI><A HREF="manual.html#IDX441">environment variables</A>, <A HREF="manual.html#IDX511">environment variables</A>, <A HREF="manual.html#IDX649">environment variables</A>, <A HREF="manual.html#IDX682">environment variables</A>
<LI><A HREF="manual.html#IDX1909">environment variables, list of</A>
<LI><A HREF="manual.html#IDX804">Errcode</A>
<LI><A HREF="manual.html#IDX803">errno</A>
<LI><A HREF="manual.html#IDX1819">error mesaages, can't find file</A>
<LI><A HREF="manual.html#IDX801">error messages, displaying</A>
<LI><A HREF="manual.html#IDX639">error messages, languages</A>
<LI><A HREF="manual.html#IDX1800">errors, access denied</A>
<LI><A HREF="manual.html#IDX575">errors, checking tables for</A>
<LI><A HREF="manual.html#IDX1798">errors, common</A>
<LI><A HREF="manual.html#IDX346">errors, directory checksum</A>
<LI><A HREF="manual.html#IDX1786">errors, handling for UDFs</A>
<LI><A HREF="manual.html#IDX154">errors, known</A>
<LI><A HREF="manual.html#IDX1814">errors, linking</A>
<LI><A HREF="manual.html#IDX1799">errors, list of</A>
<LI><A HREF="manual.html#IDX3">errors, reporting</A>, <A HREF="manual.html#IDX88">errors, reporting</A>, <A HREF="manual.html#IDX98">errors, reporting</A>
<LI><A HREF="manual.html#IDX942">escape characters</A>
<LI><A HREF="manual.html#IDX855">estimating, query performance</A>
<LI><A HREF="manual.html#IDX665">example option</A>
<LI><A HREF="manual.html#IDX680">examples, compressed tables</A>
<LI><A HREF="manual.html#IDX585">examples, <CODE>myisamchk</CODE> output</A>
<LI><A HREF="manual.html#IDX414">examples, queries</A>
<LI><A HREF="manual.html#IDX1675">Excel</A>
<LI><A HREF="manual.html#IDX724"><CODE>execute</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1385">expression aliases</A>, <A HREF="manual.html#IDX1389">expression aliases</A>
<LI><A HREF="manual.html#IDX405">expressions, extended</A>
<LI><A HREF="manual.html#IDX117">extensions, to ANSI SQL</A>
<LI><A HREF="manual.html#IDX399">extracting, dates</A>
</DIR>
<H2>F</H2>
<DIR>
<LI><A HREF="manual.html#IDX259"><CODE>fatal signal 11</CODE></A>
<LI><A HREF="manual.html#IDX33">features of MySQL</A>
<LI><A HREF="manual.html#IDX1472">field, changing</A>
<LI><A HREF="manual.html#IDX811">files, binary log</A>
<LI><A HREF="manual.html#IDX253">files, <CODE>config.cache</CODE></A>
<LI><A HREF="manual.html#IDX641">files, error messages</A>
<LI><A HREF="manual.html#IDX223">files, log</A>, <A HREF="manual.html#IDX815">files, log</A>
<LI><A HREF="manual.html#IDX1820">files, not found message</A>
<LI><A HREF="manual.html#IDX1818">files, permissions</A>
<LI><A HREF="manual.html#IDX807">files, query log</A>
<LI><A HREF="manual.html#IDX569">files, repairing</A>
<LI><A HREF="manual.html#IDX429">files, script</A>
<LI><A HREF="manual.html#IDX41">files, size limits</A>
<LI><A HREF="manual.html#IDX814">files, slow query log</A>
<LI><A HREF="manual.html#IDX792">files, text</A>
<LI><A HREF="manual.html#IDX299">files, <CODE>tmp</CODE></A>
<LI><A HREF="manual.html#IDX809">files, update log</A>
<LI><A HREF="manual.html#IDX825">files,<TT>`my.cnf'</TT></A>
<LI><A HREF="manual.html#IDX1026">floating-point number</A>
<LI><A HREF="manual.html#IDX976">floats</A>
<LI><A HREF="manual.html#IDX776">flush tables</A>
<LI><A HREF="manual.html#IDX726"><CODE>force</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX148">foreign keys</A>, <A HREF="manual.html#IDX415">foreign keys</A>, <A HREF="manual.html#IDX1486">foreign keys</A>
<LI><A HREF="manual.html#IDX78">free licensing</A>
<LI><A HREF="manual.html#IDX270">FreeBSD troubleshooting</A>
<LI><A HREF="manual.html#IDX1829">full disk</A>
<LI><A HREF="manual.html#IDX1515">full-text search</A>
<LI><A HREF="manual.html#IDX1516">FULLTEXT</A>
<LI><A HREF="manual.html#IDX1773">function, deleting</A>
<LI><A HREF="manual.html#IDX1105">functions for <CODE>SELECT</CODE> and <CODE>WHERE</CODE> clauses</A>
<LI><A HREF="manual.html#IDX1563">functions, C API</A>
<LI><A HREF="manual.html#IDX1627">functions, C Prepared statements API</A>
<LI><A HREF="manual.html#IDX1108">functions, grouping</A>
<LI><A HREF="manual.html#IDX1793">functions, native, adding</A>
<LI><A HREF="manual.html#IDX1765">functions, new</A>
<LI><A HREF="manual.html#IDX1779">functions, user-definable, adding</A>
<LI><A HREF="manual.html#IDX1769">functions, user-defined</A>
</DIR>
<H2>G</H2>
<DIR>
<LI><A HREF="manual.html#IDX233"><CODE>gcc</CODE></A>
<LI><A HREF="manual.html#IDX1894">gdb, using</A>
<LI><A HREF="manual.html#IDX2">general information</A>
<LI><A HREF="manual.html#IDX22">General Public License</A>
<LI><A HREF="manual.html#IDX72">General Public License, MySQL</A>
<LI><A HREF="manual.html#IDX179">getting MySQL</A>
<LI><A HREF="manual.html#IDX517">global privileges</A>
<LI><A HREF="manual.html#IDX25">goals of MySQL</A>
<LI><A HREF="manual.html#IDX1955">GPL, General Public License</A>
<LI><A HREF="manual.html#IDX1956">GPL, GNU General Public License</A>
<LI><A HREF="manual.html#IDX73">GPL, MySQL</A>
<LI><A HREF="manual.html#IDX508">grant tables</A>
<LI><A HREF="manual.html#IDX532">grant tables, re-creating</A>
<LI><A HREF="manual.html#IDX491">grant tables, sorting</A>, <A HREF="manual.html#IDX497">grant tables, sorting</A>
<LI><A HREF="manual.html#IDX519">granting, privleges</A>
<LI><A HREF="manual.html#IDX1383"><CODE>GROUP BY</CODE>, aliases in</A>
<LI><A HREF="manual.html#IDX1380"><CODE>GROUP BY</CODE>, extensions to ANSI SQL</A>, <A HREF="manual.html#IDX1398"><CODE>GROUP BY</CODE>, extensions to ANSI SQL</A>
<LI><A HREF="manual.html#IDX1109">grouping, expressions</A>
</DIR>
<H2>H</H2>
<DIR>
<LI><A HREF="manual.html#IDX1787">handling, errors</A>
<LI><A HREF="manual.html#IDX1524"><CODE>HEAP</CODE> table type</A>
<LI><A HREF="manual.html#IDX666">help option</A>
<LI><A HREF="manual.html#IDX714"><CODE>help</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX121">hints</A>, <A HREF="manual.html#IDX1399">hints</A>, <A HREF="manual.html#IDX1417">hints</A>, <A HREF="manual.html#IDX1418">hints</A>, <A HREF="manual.html#IDX1419">hints</A>
<LI><A HREF="manual.html#IDX696">history file</A>
<LI><A HREF="manual.html#IDX27">history of MySQL</A>
<LI><A HREF="manual.html#IDX503"><CODE>host</CODE> table</A>
<LI><A HREF="manual.html#IDX500"><CODE>host</CODE> table, sorting</A>
<LI><A HREF="manual.html#IDX730"><CODE>host</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX927">hostname caching</A>
<LI><A HREF="manual.html#IDX474">hostname, default</A>
<LI><A HREF="manual.html#IDX350">HP-UX, binary distribution</A>
<LI><A HREF="manual.html#IDX731"><CODE>html</CODE>, <CODE>mysql</CODE> option</A>
</DIR>
<H2>I</H2>
<DIR>
<LI><A HREF="manual.html#IDX1651">ID, unique</A>
<LI><A HREF="manual.html#IDX729"><CODE>ignore-space</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX790">importing, data</A>
<LI><A HREF="manual.html#IDX832">increasing, performance</A>
<LI><A HREF="manual.html#IDX819">increasing, speed</A>
<LI><A HREF="manual.html#IDX1475">index, deleting</A>, <A HREF="manual.html#IDX1498">index, deleting</A>
<LI><A HREF="manual.html#IDX1493">indexes</A>
<LI><A HREF="manual.html#IDX1460">indexes, and <CODE>BLOB</CODE> columns</A>
<LI><A HREF="manual.html#IDX895">indexes, and <CODE>IS NULL</CODE></A>
<LI><A HREF="manual.html#IDX892">indexes, and <CODE>LIKE</CODE></A>
<LI><A HREF="manual.html#IDX1458">indexes, and <CODE>NULL</CODE> values</A>
<LI><A HREF="manual.html#IDX1462">indexes, and <CODE>TEXT</CODE> columns</A>
<LI><A HREF="manual.html#IDX623">indexes, block size</A>
<LI><A HREF="manual.html#IDX896">indexes, columns</A>
<LI><A HREF="manual.html#IDX888">indexes, leftmost prefix of</A>
<LI><A HREF="manual.html#IDX900">indexes, multi-column</A>
<LI><A HREF="manual.html#IDX1494">indexes, multi-part</A>
<LI><A HREF="manual.html#IDX984">indexes, names</A>
<LI><A HREF="manual.html#IDX887">indexes, use of</A>
<LI><A HREF="manual.html#IDX1526"><CODE>InnoDB</CODE> table type</A>
<LI><A HREF="manual.html#IDX138"><CODE>InnoDB</CODE> tables</A>
<LI><A HREF="manual.html#IDX1434">INSERT DELAYED</A>
<LI><A HREF="manual.html#IDX872">inserting, speed of</A>
<LI><A HREF="manual.html#IDX196">installation layouts</A>
<LI><A HREF="manual.html#IDX215">installation overview</A>
<LI><A HREF="manual.html#IDX444">Installing many servers</A>
<LI><A HREF="manual.html#IDX203">installing, binary distribution</A>
<LI><A HREF="manual.html#IDX173">installing, Linux RPM packages</A>
<LI><A HREF="manual.html#IDX175">installing, Mac OS X PKG packages</A>
<LI><A HREF="manual.html#IDX170">installing, overview</A>
<LI><A HREF="manual.html#IDX354">installing, Perl</A>
<LI><A HREF="manual.html#IDX355">installing, Perl on Windows</A>
<LI><A HREF="manual.html#IDX213">installing, source distribution</A>
<LI><A HREF="manual.html#IDX1790">installing, user-defined functions</A>
<LI><A HREF="manual.html#IDX975">integers</A>
<LI><A HREF="manual.html#IDX261">internal compiler errors</A>
<LI><A HREF="manual.html#IDX875">internal locking</A>
<LI><A HREF="manual.html#IDX1761">internals</A>
<LI><A HREF="manual.html#IDX114">Internet Relay Chat</A>
<LI><A HREF="manual.html#IDX82">Internet Service Providers</A>
<LI><A HREF="manual.html#IDX113">IRC</A>
<LI><A HREF="manual.html#IDX1525"><CODE>ISAM</CODE> table type</A>
<LI><A HREF="manual.html#IDX79">ISP services</A>
</DIR>
<H2>J</H2>
<DIR>
<LI><A HREF="manual.html#IDX1685">Java connectivity</A>
<LI><A HREF="manual.html#IDX1687">JDBC</A>
<LI><A HREF="manual.html#IDX57">jobs at MySQL</A>
</DIR>
<H2>K</H2>
<DIR>
<LI><A HREF="manual.html#IDX1531">key space, MyISAM</A>
<LI><A HREF="manual.html#IDX898">keys</A>
<LI><A HREF="manual.html#IDX149">keys, foreign</A>, <A HREF="manual.html#IDX416">keys, foreign</A>
<LI><A HREF="manual.html#IDX901">keys, multi-column</A>
<LI><A HREF="manual.html#IDX419">keys, searching on two</A>
<LI><A HREF="manual.html#IDX1006">keywords</A>
<LI><A HREF="manual.html#IDX156">known errors</A>
</DIR>
<H2>L</H2>
<DIR>
<LI><A HREF="manual.html#IDX642">language support</A>
<LI><A HREF="manual.html#IDX1650">last row, unique ID</A>
<LI><A HREF="manual.html#IDX197">layout of installation</A>
<LI><A HREF="manual.html#IDX889">leftmost prefix of indexes</A>
<LI><A HREF="manual.html#IDX981">legal names</A>
<LI><A HREF="manual.html#IDX1960">LGPL, GNU Lesser General Public License</A>
<LI><A HREF="manual.html#IDX1958">LGPL, GNU Library General Public License</A>
<LI><A HREF="manual.html#IDX1959">LGPL, Lesser General Public License</A>
<LI><A HREF="manual.html#IDX1957">LGPL, Library General Public License</A>
<LI><A HREF="manual.html#IDX1661">libmysqld</A>
<LI><A HREF="manual.html#IDX1552">library, <CODE>mysqlclient</CODE></A>
<LI><A HREF="manual.html#IDX68">licenses</A>
<LI><A HREF="manual.html#IDX64">licensing costs</A>
<LI><A HREF="manual.html#IDX69">licensing policy</A>
<LI><A HREF="manual.html#IDX58">licensing terms</A>
<LI><A HREF="manual.html#IDX55">licensing, contact information</A>
<LI><A HREF="manual.html#IDX74">licensing, examples</A>
<LI><A HREF="manual.html#IDX77">licensing, free</A>
<LI><A HREF="manual.html#IDX834">limitations, design</A>
<LI><A HREF="manual.html#IDX40">limits, file-size</A>
<LI><A HREF="manual.html#IDX1656">linking</A>
<LI><A HREF="manual.html#IDX1813">linking, errors</A>
<LI><A HREF="manual.html#IDX1653">linking, problems</A>
<LI><A HREF="manual.html#IDX921">linking, speed</A>
<LI><A HREF="manual.html#IDX935">links, symbolic</A>
<LI><A HREF="manual.html#IDX329">Linux, binary distribution</A>
<LI><A HREF="manual.html#IDX941">literals</A>
<LI><A HREF="manual.html#IDX381">loading, tables</A>
<LI><A HREF="manual.html#IDX914">locking</A>
<LI><A HREF="manual.html#IDX1904">locking methods</A>
<LI><A HREF="manual.html#IDX144">locking, row-level</A>
<LI><A HREF="manual.html#IDX876">locking, tables</A>
<LI><A HREF="manual.html#IDX222">log files</A>
<LI><A HREF="manual.html#IDX805">Log files</A>
<LI><A HREF="manual.html#IDX817">log files, maintaining</A>
<LI><A HREF="manual.html#IDX557">log files, names</A>
<LI><A HREF="manual.html#IDX667">log option</A>
<LI><A HREF="manual.html#IDX1879">log, changes</A>
<LI><A HREF="manual.html#IDX85">logos</A>
</DIR>
<H2>M</H2>
<DIR>
<LI><A HREF="manual.html#IDX174">Mac OS X, installation</A>
<LI><A HREF="manual.html#IDX108">mailing address, for customer support</A>
<LI><A HREF="manual.html#IDX5">mailing list address</A>
<LI><A HREF="manual.html#IDX90">mailing lists</A>
<LI><A HREF="manual.html#IDX93">mailing lists, archive location</A>
<LI><A HREF="manual.html#IDX112">mailing lists, guidelines</A>
<LI><A HREF="manual.html#IDX32">main features of MySQL</A>
<LI><A HREF="manual.html#IDX816">maintaining, log files</A>
<LI><A HREF="manual.html#IDX580">maintaining, tables</A>
<LI><A HREF="manual.html#IDX652"><CODE>make_binary_distribution</CODE></A>
<LI><A HREF="manual.html#IDX9">manual, available formats</A>
<LI><A HREF="manual.html#IDX8">manual, online location</A>
<LI><A HREF="manual.html#IDX11">manual, typographical conventions</A>
<LI><A HREF="manual.html#IDX822">master-slave setup</A>
<LI><A HREF="manual.html#IDX404">matching, patterns</A>
<LI><A HREF="manual.html#IDX780">max memory used</A>
<LI><A HREF="manual.html#IDX759"><CODE>max_allowed_packet</CODE></A>
<LI><A HREF="manual.html#IDX762"><CODE>max_join_size</CODE></A>
<LI><A HREF="manual.html#IDX570">memory usage, myisamchk</A>
<LI><A HREF="manual.html#IDX779">memory use</A>, <A HREF="manual.html#IDX925">memory use</A>
<LI><A HREF="manual.html#IDX1527"><CODE>MERGE</CODE> table type</A>
<LI><A HREF="manual.html#IDX1540">MERGE tables, defined</A>
<LI><A HREF="manual.html#IDX640">messages, languages</A>
<LI><A HREF="manual.html#IDX1905">methods, locking</A>
<LI><A HREF="manual.html#IDX180">mirror sites</A>
<LI><A HREF="manual.html#IDX281">MIT-pthreads</A>
<LI><A HREF="manual.html#IDX425">modes, batch</A>
<LI><A HREF="manual.html#IDX36">modules, list of</A>
<LI><A HREF="manual.html#IDX364">monitor, terminal</A>
<LI><A HREF="manual.html#IDX1216">mSQL compatibility</A>
<LI><A HREF="manual.html#IDX165">mSQL vs. MySQL, protocol</A>
<LI><A HREF="manual.html#IDX160">mSQL, MySQL vs mSQL, overview</A>
<LI><A HREF="manual.html#IDX699"><CODE>msql2mysql</CODE></A>
<LI><A HREF="manual.html#IDX662">multi mysqld</A>
<LI><A HREF="manual.html#IDX1811">multi-byte character sets</A>
<LI><A HREF="manual.html#IDX648">multi-byte characters</A>
<LI><A HREF="manual.html#IDX899">multi-column indexes</A>
<LI><A HREF="manual.html#IDX1495">multi-part index</A>
<LI><A HREF="manual.html#IDX450">multiple servers</A>
<LI><A HREF="manual.html#IDX29">My, derivation</A>
<LI><A HREF="manual.html#IDX824"><TT>`my.cnf'</TT> file</A>
<LI><A HREF="manual.html#IDX1529"><CODE>MyISAM</CODE> table type</A>
<LI><A HREF="manual.html#IDX677">MyISAM, compressed tables</A>, <A HREF="manual.html#IDX1537">MyISAM, compressed tables</A>
<LI><A HREF="manual.html#IDX1104">MyISAM, size</A>
<LI><A HREF="manual.html#IDX245"><CODE>myisamchk</CODE></A>, <A HREF="manual.html#IDX651"><CODE>myisamchk</CODE></A>
<LI><A HREF="manual.html#IDX586"><CODE>myisamchk</CODE>, example output</A>
<LI><A HREF="manual.html#IDX565"><CODE>myisamchk</CODE>, options</A>
<LI><A HREF="manual.html#IDX678"><CODE>myisampack</CODE></A>, <A HREF="manual.html#IDX1464"><CODE>myisampack</CODE></A>, <A HREF="manual.html#IDX1538"><CODE>myisampack</CODE></A>
<LI><A HREF="manual.html#IDX1667">MyODBC</A>
<LI><A HREF="manual.html#IDX1684">MyODBC, reporting problems</A>
<LI><A HREF="manual.html#IDX709"><CODE>mysql</CODE></A>
<LI><A HREF="manual.html#IDX45">MySQL AB, defined</A>
<LI><A HREF="manual.html#IDX187">MySQL binary distribution</A>
<LI><A HREF="manual.html#IDX49">MySQL certification</A>
<LI><A HREF="manual.html#IDX710"><CODE>mysql</CODE> command-line options</A>
<LI><A HREF="manual.html#IDX51">MySQL consulting</A>
<LI><A HREF="manual.html#IDX30">MySQL Dolphin name</A>
<LI><A HREF="manual.html#IDX26">MySQL history</A>
<LI><A HREF="manual.html#IDX89">MySQL mailing lists</A>
<LI><A HREF="manual.html#IDX28">MySQL name</A>
<LI><A HREF="manual.html#IDX188">MySQL source distribution</A>
<LI><A HREF="manual.html#IDX1528">MySQL table types</A>
<LI><A HREF="manual.html#IDX161">MySQL tools, conversion</A>
<LI><A HREF="manual.html#IDX47">MySQL training</A>
<LI><A HREF="manual.html#IDX177">MySQL version</A>
<LI><A HREF="manual.html#IDX16">MySQL, defined</A>
<LI><A HREF="manual.html#IDX17">MySQL, introduction</A>
<LI><A HREF="manual.html#IDX24">MySQL, pronunciation</A>
<LI><A HREF="manual.html#IDX226">mysql.sock, changing location of</A>
<LI><A HREF="manual.html#IDX1831"><CODE>mysql.sock</CODE>, protection</A>
<LI><A HREF="manual.html#IDX509"><CODE>mysql_fix_privilege_tables</CODE></A>
<LI><A HREF="manual.html#IDX655"><CODE>mysql_install_db</CODE></A>
<LI><A HREF="manual.html#IDX295"><CODE>mysql_install_db</CODE> script</A>
<LI><A HREF="manual.html#IDX700"><CODE>mysqlaccess</CODE></A>
<LI><A HREF="manual.html#IDX592"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX596"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX619"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX701"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX769"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX1447"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX1451"><CODE>mysqladmin</CODE></A>
<LI><A HREF="manual.html#IDX668">mysqladmin option</A>
<LI><A HREF="manual.html#IDX558"><CODE>mysqlbinlog</CODE></A>, <A HREF="manual.html#IDX812"><CODE>mysqlbinlog</CODE></A>
<LI><A HREF="manual.html#IDX653"><CODE>mysqlbug</CODE></A>
<LI><A HREF="manual.html#IDX99"><CODE>mysqlbug</CODE> script</A>
<LI><A HREF="manual.html#IDX6"><CODE>mysqlbug</CODE> script, location</A>
<LI><A HREF="manual.html#IDX1550"><CODE>mysqlclient</CODE> library</A>
<LI><A HREF="manual.html#IDX654"><CODE>mysqld</CODE></A>
<LI><A HREF="manual.html#IDX669">mysqld option</A>
<LI><A HREF="manual.html#IDX435">mysqld options</A>
<LI><A HREF="manual.html#IDX919"><CODE>mysqld</CODE> options</A>
<LI><A HREF="manual.html#IDX916"><CODE>mysqld</CODE> server, buffer sizes</A>
<LI><A HREF="manual.html#IDX1817"><CODE>mysqld</CODE>, starting</A>
<LI><A HREF="manual.html#IDX681"><CODE>mysqld-max</CODE></A>
<LI><A HREF="manual.html#IDX663"><CODE>mysqld_multi</CODE></A>
<LI><A HREF="manual.html#IDX659"><CODE>mysqld_safe</CODE></A>
<LI><A HREF="manual.html#IDX324"><CODE>mysqldump</CODE></A>, <A HREF="manual.html#IDX702"><CODE>mysqldump</CODE></A>, <A HREF="manual.html#IDX785"><CODE>mysqldump</CODE></A>
<LI><A HREF="manual.html#IDX325"><CODE>mysqlimport</CODE></A>, <A HREF="manual.html#IDX703"><CODE>mysqlimport</CODE></A>, <A HREF="manual.html#IDX794"><CODE>mysqlimport</CODE></A>, <A HREF="manual.html#IDX1443"><CODE>mysqlimport</CODE></A>
<LI><A HREF="manual.html#IDX704"><CODE>mysqlshow</CODE></A>
<LI><A HREF="manual.html#IDX1763">mysqltest, MySQL Test Suite</A>
</DIR>
<H2>N</H2>
<DIR>
<LI><A HREF="manual.html#IDX331">named pipes</A>
<LI><A HREF="manual.html#IDX980">names</A>
<LI><A HREF="manual.html#IDX993">names, case-sensitivity</A>
<LI><A HREF="manual.html#IDX1001">names, variables</A>
<LI><A HREF="manual.html#IDX192">naming, releases of MySQL</A>
<LI><A HREF="manual.html#IDX1792">native functions, adding</A>
<LI><A HREF="manual.html#IDX183">native thread support</A>
<LI><A HREF="manual.html#IDX977">negative values</A>
<LI><A HREF="manual.html#IDX92">net etiquette</A>, <A HREF="manual.html#IDX109">net etiquette</A>
<LI><A HREF="manual.html#IDX760"><CODE>net_buffer_length</CODE></A>
<LI><A HREF="manual.html#IDX488">netmask notation, in <CODE>mysql.user</CODE> table</A>
<LI><A HREF="manual.html#IDX1796">new procedures, adding</A>
<LI><A HREF="manual.html#IDX209">new users, adding</A>
<LI><A HREF="manual.html#IDX1856">no matching rows</A>
<LI><A HREF="manual.html#IDX715"><CODE>no-auto-rehash</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX717"><CODE>no-beep</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX670">no-log option</A>
<LI><A HREF="manual.html#IDX727"><CODE>no-named-commands</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX734"><CODE>no-pager</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX735"><CODE>no-tee</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1069">non-delimited strings</A>
<LI><A HREF="manual.html#IDX1803">Non-transactional tables</A>
<LI><A HREF="manual.html#IDX402">NULL value</A>
<LI><A HREF="manual.html#IDX1457"><CODE>NULL</CODE> values, and indexes</A>
<LI><A HREF="manual.html#IDX1845"><CODE>NULL</CODE> values, vs. empty values</A>
<LI><A HREF="manual.html#IDX1129"><CODE>NULL</CODE>, testing for null</A>, <A HREF="manual.html#IDX1131"><CODE>NULL</CODE>, testing for null</A>, <A HREF="manual.html#IDX1141"><CODE>NULL</CODE>, testing for null</A>, <A HREF="manual.html#IDX1155"><CODE>NULL</CODE>, testing for null</A>
<LI><A HREF="manual.html#IDX1851"><CODE>NULL</CODE> values, and <CODE>AUTO_INCREMENT</CODE> columns</A>
<LI><A HREF="manual.html#IDX1850"><CODE>NULL</CODE> values, and <CODE>TIMESTAMP</CODE> columns</A>
<LI><A HREF="manual.html#IDX973">numbers</A>
<LI><A HREF="manual.html#IDX1093">numeric types</A>
</DIR>
<H2>O</H2>
<DIR>
<LI><A HREF="manual.html#IDX1665">ODBC</A>
<LI><A HREF="manual.html#IDX991">ODBC compatibility</A>, <A HREF="manual.html#IDX1029">ODBC compatibility</A>, <A HREF="manual.html#IDX1113">ODBC compatibility</A>, <A HREF="manual.html#IDX1134">ODBC compatibility</A>, <A HREF="manual.html#IDX1415">ODBC compatibility</A>, <A HREF="manual.html#IDX1453">ODBC compatibility</A>, <A HREF="manual.html#IDX1886">ODBC compatibility</A>
<LI><A HREF="manual.html#IDX1669">ODBC, administrator</A>
<LI><A HREF="manual.html#IDX1677">odbcadmin program</A>
<LI><A HREF="manual.html#IDX1869">OLEDB</A>
<LI><A HREF="manual.html#IDX739"><CODE>one-database</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX7">online location of manual</A>
<LI><A HREF="manual.html#IDX21"><CODE>Open Source</CODE>, defined</A>
<LI><A HREF="manual.html#IDX778">open tables</A>, <A HREF="manual.html#IDX903">open tables</A>
<LI><A HREF="manual.html#IDX907">opening, tables</A>
<LI><A HREF="manual.html#IDX775">opens</A>
<LI><A HREF="manual.html#IDX548">OpenSSL</A>
<LI><A HREF="manual.html#IDX39">operating systems, file-size limits</A>
<LI><A HREF="manual.html#IDX182">operating systems, supported</A>
<LI><A HREF="manual.html#IDX340">operating systems, Windows versus Unix</A>
<LI><A HREF="manual.html#IDX1228">operations, arithmetic</A>
<LI><A HREF="manual.html#IDX1225">operators, cast</A>, <A HREF="manual.html#IDX1227">operators, cast</A>
<LI><A HREF="manual.html#IDX873">optimisation, tips</A>
<LI><A HREF="manual.html#IDX861">optimisations</A>
<LI><A HREF="manual.html#IDX865">optimising, DISTINCT</A>
<LI><A HREF="manual.html#IDX867">optimising, LEFT JOIN</A>
<LI><A HREF="manual.html#IDX869">optimising, LIMIT</A>
<LI><A HREF="manual.html#IDX579">optimising, tables</A>
<LI><A HREF="manual.html#IDX437">option files</A>
<LI><A HREF="manual.html#IDX434">options, command-line</A>
<LI><A HREF="manual.html#IDX712">options, command-line, <CODE>mysql</CODE></A>
<LI><A HREF="manual.html#IDX220">options, configure</A>
<LI><A HREF="manual.html#IDX564">options, <CODE>myisamchk</CODE></A>
<LI><A HREF="manual.html#IDX365">options, provided by MySQL</A>
<LI><A HREF="manual.html#IDX823">options, replication</A>
<LI><A HREF="manual.html#IDX126">Oracle compatibility</A>, <A HREF="manual.html#IDX1376">Oracle compatibility</A>, <A HREF="manual.html#IDX1504">Oracle compatibility</A>
<LI><A HREF="manual.html#IDX1381"><CODE>ORDER BY</CODE>, aliases in</A>
<LI><A HREF="manual.html#IDX1">overview</A>
</DIR>
<H2>P</H2>
<DIR>
<LI><A HREF="manual.html#IDX679"><CODE>pack_isam</CODE></A>
<LI><A HREF="manual.html#IDX740"><CODE>pager</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX915">parameters, server</A>
<LI><A HREF="manual.html#IDX52">partnering with MySQL AB</A>
<LI><A HREF="manual.html#IDX1338">password encryption, reversibility of</A>
<LI><A HREF="manual.html#IDX671">password option</A>
<LI><A HREF="manual.html#IDX530">password, root user</A>
<LI><A HREF="manual.html#IDX741"><CODE>password</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX523">passwords, for users</A>
<LI><A HREF="manual.html#IDX1826">passwords, forgotten</A>
<LI><A HREF="manual.html#IDX1827">passwords, resetting</A>
<LI><A HREF="manual.html#IDX468">passwords, security</A>
<LI><A HREF="manual.html#IDX520">passwords, setting</A>, <A HREF="manual.html#IDX543">passwords, setting</A>, <A HREF="manual.html#IDX929">passwords, setting</A>
<LI><A HREF="manual.html#IDX216">patches, applying</A>
<LI><A HREF="manual.html#IDX403">pattern matching</A>
<LI><A HREF="manual.html#IDX845">performance, benchmarks</A>
<LI><A HREF="manual.html#IDX932">performance, disk issues</A>
<LI><A HREF="manual.html#IDX857">performance, estimating</A>
<LI><A HREF="manual.html#IDX831">performance, improving</A>, <A HREF="manual.html#IDX886">performance, improving</A>
<LI><A HREF="manual.html#IDX1690">Perl API</A>
<LI><A HREF="manual.html#IDX359">Perl DBI/DBD, installation problems</A>
<LI><A HREF="manual.html#IDX353">Perl, installing</A>
<LI><A HREF="manual.html#IDX356">Perl, installing on Windows</A>
<LI><A HREF="manual.html#IDX1868">Perl, modules</A>
<LI><A HREF="manual.html#IDX847">permission checks, effect on speed</A>
<LI><A HREF="manual.html#IDX802">perror</A>
<LI><A HREF="manual.html#IDX1688">PHP API</A>
<LI><A HREF="manual.html#IDX742"><CODE>port</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX836">portability</A>
<LI><A HREF="manual.html#IDX1089">portability, types</A>
<LI><A HREF="manual.html#IDX1890">porting, to other systems</A>
<LI><A HREF="manual.html#IDX443">post-install, many servers</A>
<LI><A HREF="manual.html#IDX283">post-installation, setup and testing</A>
<LI><A HREF="manual.html#IDX128">PostgreSQL compatibility</A>
<LI><A HREF="manual.html#IDX169">PostgreSQL vs. MySQL, benchmarks</A>
<LI><A HREF="manual.html#IDX168">PostgreSQL vs. MySQL, features</A>
<LI><A HREF="manual.html#IDX166">PostgreSQL vs. MySQL, overview</A>
<LI><A HREF="manual.html#IDX167">PostgreSQL vs. MySQL, strategies</A>
<LI><A HREF="manual.html#IDX66">prices, support</A>
<LI><A HREF="manual.html#IDX1478">primary key, deleting</A>
<LI><A HREF="manual.html#IDX471">privilege information, location</A>
<LI><A HREF="manual.html#IDX467">privilege system</A>
<LI><A HREF="manual.html#IDX469">privilege system, described</A>
<LI><A HREF="manual.html#IDX505">privilege, changes</A>
<LI><A HREF="manual.html#IDX460">privileges, access</A>
<LI><A HREF="manual.html#IDX536">privileges, adding</A>
<LI><A HREF="manual.html#IDX524">privileges, default</A>
<LI><A HREF="manual.html#IDX629">privileges, display</A>
<LI><A HREF="manual.html#IDX515">privileges, granting</A>
<LI><A HREF="manual.html#IDX516">privileges, revoking</A>
<LI><A HREF="manual.html#IDX1801">problems, access denied errors</A>
<LI><A HREF="manual.html#IDX1797">problems, common errors</A>
<LI><A HREF="manual.html#IDX250">problems, compiling</A>
<LI><A HREF="manual.html#IDX1844">problems, <CODE>DATE</CODE> columns</A>
<LI><A HREF="manual.html#IDX1071">problems, date values</A>
<LI><A HREF="manual.html#IDX352">problems, installing on IBM-AIX</A>
<LI><A HREF="manual.html#IDX344">problems, installing on Solaris</A>
<LI><A HREF="manual.html#IDX358">problems, installing Perl</A>
<LI><A HREF="manual.html#IDX1815">problems, linking</A>
<LI><A HREF="manual.html#IDX1683">problems, ODBC</A>
<LI><A HREF="manual.html#IDX97">problems, reporting</A>
<LI><A HREF="manual.html#IDX305">problems, starting the server</A>
<LI><A HREF="manual.html#IDX878">problems, table locking</A>
<LI><A HREF="manual.html#IDX1835">problems, timezone</A>
<LI><A HREF="manual.html#IDX1794">procedures, adding</A>
<LI><A HREF="manual.html#IDX146">procedures, stored</A>
<LI><A HREF="manual.html#IDX185">process support</A>
<LI><A HREF="manual.html#IDX628">processes, display</A>
<LI><A HREF="manual.html#IDX1783">processing, arguments</A>
<LI><A HREF="manual.html#IDX76">products, selling</A>
<LI><A HREF="manual.html#IDX1658">programs, client</A>
<LI><A HREF="manual.html#IDX1867">programs, contributed</A>
<LI><A HREF="manual.html#IDX838">programs, crash-me</A>
<LI><A HREF="manual.html#IDX650">programs, list of</A>, <A HREF="manual.html#IDX683">programs, list of</A>
<LI><A HREF="manual.html#IDX766"><CODE>prompt</CODE> command</A>
<LI><A HREF="manual.html#IDX716"><CODE>prompt</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX373">prompts, meanings</A>
<LI><A HREF="manual.html#IDX23">pronunciation, MySQL</A>
<LI><A HREF="manual.html#IDX322">Protocol mismatch</A>
<LI><A HREF="manual.html#IDX743"><CODE>protocol</CODE>, <CODE>mysql</CODE> option</A>, <A HREF="manual.html#IDX795"><CODE>protocol</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1757">Python API</A>
</DIR>
<H2>Q</H2>
<DIR>
<LI><A HREF="manual.html#IDX371">queries, entering</A>
<LI><A HREF="manual.html#IDX856">queries, estimating performance</A>
<LI><A HREF="manual.html#IDX413">queries, examples</A>
<LI><A HREF="manual.html#IDX846">queries, speed of</A>
<LI><A HREF="manual.html#IDX431">queries, Twin Studeis project</A>
<LI><A HREF="manual.html#IDX1517">Query Cache</A>
<LI><A HREF="manual.html#IDX806">query log</A>
<LI><A HREF="manual.html#IDX773">questions</A>
<LI><A HREF="manual.html#IDX110">questions, answering</A>
<LI><A HREF="manual.html#IDX744"><CODE>quick</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX967">quotes, in strings</A>
<LI><A HREF="manual.html#IDX969">quoting</A>
<LI><A HREF="manual.html#IDX968">quoting binary data</A>
<LI><A HREF="manual.html#IDX1705">quoting strings</A>
</DIR>
<H2>R</H2>
<DIR>
<LI><A HREF="manual.html#IDX745"><CODE>raw</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX533">re-creating, grant tables</A>
<LI><A HREF="manual.html#IDX251">reconfiguring</A>, <A HREF="manual.html#IDX256">reconfiguring</A>
<LI><A HREF="manual.html#IDX746"><CODE>reconnect</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX572">recovery, from crash</A>
<LI><A HREF="manual.html#IDX883">reducing, data size</A>
<LI><A HREF="manual.html#IDX1487">references</A>
<LI><A HREF="manual.html#IDX1952">regex</A>
<LI><A HREF="manual.html#IDX1953">regular expression syntax, described</A>
<LI><A HREF="manual.html#IDX19">relational databases, defined</A>
<LI><A HREF="manual.html#IDX189">release numbers</A>
<LI><A HREF="manual.html#IDX193">releases, naming scheme</A>
<LI><A HREF="manual.html#IDX194">releases, testing</A>
<LI><A HREF="manual.html#IDX200">releases, updating</A>
<LI><A HREF="manual.html#IDX1861">reordering, columns</A>
<LI><A HREF="manual.html#IDX568">repair options, myisamchk</A>
<LI><A HREF="manual.html#IDX577">repairing, tables</A>
<LI><A HREF="manual.html#IDX705"><CODE>replace</CODE></A>
<LI><A HREF="manual.html#IDX818">replication</A>
<LI><A HREF="manual.html#IDX828">replication, commands</A>
<LI><A HREF="manual.html#IDX830">replication, two-way</A>
<LI><A HREF="manual.html#IDX96">reporting, bugs</A>
<LI><A HREF="manual.html#IDX4">reporting, errors</A>, <A HREF="manual.html#IDX87">reporting, errors</A>
<LI><A HREF="manual.html#IDX1682">reporting, MyODBC problems</A>
<LI><A HREF="manual.html#IDX1007">reserved words, exceptions</A>
<LI><A HREF="manual.html#IDX294">restarting, the server</A>
<LI><A HREF="manual.html#IDX386">retrieving, data from tables</A>
<LI><A HREF="manual.html#IDX1785">return values, UDFs</A>
<LI><A HREF="manual.html#IDX518">revoking, privleges</A>
<LI><A HREF="manual.html#IDX526">root password</A>
<LI><A HREF="manual.html#IDX1828">root user, password resetting</A>
<LI><A HREF="manual.html#IDX1025">rounding errors</A>, <A HREF="manual.html#IDX1275">rounding errors</A>
<LI><A HREF="manual.html#IDX406">rows, counting</A>
<LI><A HREF="manual.html#IDX1854">rows, deleting</A>
<LI><A HREF="manual.html#IDX143">rows, locking</A>
<LI><A HREF="manual.html#IDX1857">rows, matching problems</A>
<LI><A HREF="manual.html#IDX388">rows, selecting</A>
<LI><A HREF="manual.html#IDX393">rows, sorting</A>
<LI><A HREF="manual.html#IDX171">RPM file</A>
<LI><A HREF="manual.html#IDX172">RPM Package Manager</A>, <A HREF="manual.html#IDX206">RPM Package Manager</A>
<LI><A HREF="manual.html#IDX205">RPM, defined</A>
<LI><A HREF="manual.html#IDX1906">RTS-threads</A>
<LI><A HREF="manual.html#IDX84">running a web server</A>
<LI><A HREF="manual.html#IDX254">running <CODE>configure</CODE> after prior invocation</A>
<LI><A HREF="manual.html#IDX119">running, ANSI mode</A>
<LI><A HREF="manual.html#IDX427">running, batch mode</A>
<LI><A HREF="manual.html#IDX452">running, multiple servers</A>
<LI><A HREF="manual.html#IDX370">running, queries</A>
</DIR>
<H2>S</H2>
<DIR>
<LI><A HREF="manual.html#IDX765"><CODE>safe-mode</CODE> command</A>
<LI><A HREF="manual.html#IDX753"><CODE>safe-updates</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX658"><CODE>safe_mysqld</CODE></A>
<LI><A HREF="manual.html#IDX31">Sakila</A>
<LI><A HREF="manual.html#IDX428">script files</A>
<LI><A HREF="manual.html#IDX657">scripts</A>, <A HREF="manual.html#IDX661">scripts</A>, <A HREF="manual.html#IDX708">scripts</A>
<LI><A HREF="manual.html#IDX296">scripts, <CODE>mysql_install_db</CODE></A>
<LI><A HREF="manual.html#IDX101">scripts, <CODE>mysqlbug</CODE></A>
<LI><A HREF="manual.html#IDX1839">searching, and case-sensitivity</A>
<LI><A HREF="manual.html#IDX1514">searching, full-text</A>
<LI><A HREF="manual.html#IDX94">searching, MySQL web pages</A>
<LI><A HREF="manual.html#IDX418">searching, two keys</A>
<LI><A HREF="manual.html#IDX461">security system</A>
<LI><A HREF="manual.html#IDX464">security, against crackers</A>
<LI><A HREF="manual.html#IDX1518"><CODE>SELECT</CODE>, Query Cache</A>
<LI><A HREF="manual.html#IDX761"><CODE>select_limit</CODE></A>
<LI><A HREF="manual.html#IDX377">selecting, databases</A>
<LI><A HREF="manual.html#IDX75">selling products</A>
<LI><A HREF="manual.html#IDX1350">sequence emulation</A>
<LI><A HREF="manual.html#IDX768">server administration</A>
<LI><A HREF="manual.html#IDX368">server, connecting</A>, <A HREF="manual.html#IDX475">server, connecting</A>
<LI><A HREF="manual.html#IDX1891">server, debugging</A>
<LI><A HREF="manual.html#IDX369">server, disconnecting</A>
<LI><A HREF="manual.html#IDX293">server, restart</A>
<LI><A HREF="manual.html#IDX291">server, shutdown</A>
<LI><A HREF="manual.html#IDX287">server, starting</A>
<LI><A HREF="manual.html#IDX308">server, starting and stopping</A>
<LI><A HREF="manual.html#IDX304">server, starting problems</A>
<LI><A HREF="manual.html#IDX451">servers, multiple</A>
<LI><A HREF="manual.html#IDX80">services, ISP</A>
<LI><A HREF="manual.html#IDX81">services, web</A>
<LI><A HREF="manual.html#IDX1103">SET, size</A>
<LI><A HREF="manual.html#IDX738"><CODE>set-variable</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX544">setting, passwords</A>
<LI><A HREF="manual.html#IDX285">setup, post-installation</A>
<LI><A HREF="manual.html#IDX14">shell syntax</A>
<LI><A HREF="manual.html#IDX800">showing, database information</A>
<LI><A HREF="manual.html#IDX292">shutting down, the server</A>
<LI><A HREF="manual.html#IDX1463">silent column changes</A>
<LI><A HREF="manual.html#IDX747"><CODE>silent</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX38">size of tables</A>
<LI><A HREF="manual.html#IDX1011">sizes, display</A>
<LI><A HREF="manual.html#IDX737"><CODE>skip-column-names</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX733"><CODE>skip-line-numbers</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX774">slow queries</A>
<LI><A HREF="manual.html#IDX813">slow query log</A>
<LI><A HREF="manual.html#IDX225">socket location, changing</A>
<LI><A HREF="manual.html#IDX748"><CODE>socket</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX343">Solaris installation problems</A>
<LI><A HREF="manual.html#IDX269">Solaris troubleshooting</A>
<LI><A HREF="manual.html#IDX638">sorting, character sets</A>
<LI><A HREF="manual.html#IDX395">sorting, data</A>
<LI><A HREF="manual.html#IDX492">sorting, grant tables</A>, <A HREF="manual.html#IDX498">sorting, grant tables</A>
<LI><A HREF="manual.html#IDX394">sorting, table rows</A>
<LI><A HREF="manual.html#IDX214">source distribution, installing</A>
<LI><A HREF="manual.html#IDX923">speed, compiling</A>
<LI><A HREF="manual.html#IDX820">speed, increasing</A>
<LI><A HREF="manual.html#IDX871">speed, inserting</A>
<LI><A HREF="manual.html#IDX924">speed, linking</A>
<LI><A HREF="manual.html#IDX848">speed, of queries</A>, <A HREF="manual.html#IDX859">speed, of queries</A>
<LI><A HREF="manual.html#IDX826">SQL commands, replication</A>
<LI><A HREF="manual.html#IDX20">SQL, defined</A>
<LI><A HREF="manual.html#IDX260"><CODE>sql_yacc.cc</CODE> problems</A>
<LI><A HREF="manual.html#IDX1015">square brackets</A>
<LI><A HREF="manual.html#IDX332">SSH</A>
<LI><A HREF="manual.html#IDX549">SSL and X509 Basics</A>
<LI><A HREF="manual.html#IDX552">SSL related options</A>
<LI><A HREF="manual.html#IDX35">stability</A>
<LI><A HREF="manual.html#IDX116">standards compatibility</A>
<LI><A HREF="manual.html#IDX445">Starting many servers</A>
<LI><A HREF="manual.html#IDX152">starting, comments</A>
<LI><A HREF="manual.html#IDX1816">starting, <CODE>mysqld</CODE></A>
<LI><A HREF="manual.html#IDX286">starting, the server</A>
<LI><A HREF="manual.html#IDX306">starting, the server automatically</A>
<LI><A HREF="manual.html#IDX439">startup options, default</A>
<LI><A HREF="manual.html#IDX918">startup parameters</A>
<LI><A HREF="manual.html#IDX713">startup parameters, <CODE>mysql</CODE></A>
<LI><A HREF="manual.html#IDX913">startup parameters, tuning</A>
<LI><A HREF="manual.html#IDX228">statically, compiling</A>
<LI><A HREF="manual.html#IDX764"><CODE>status</CODE> command</A>
<LI><A HREF="manual.html#IDX770">status command, results</A>
<LI><A HREF="manual.html#IDX618">status, tables</A>
<LI><A HREF="manual.html#IDX307">stopping, the server</A>
<LI><A HREF="manual.html#IDX881">storage of data</A>
<LI><A HREF="manual.html#IDX1091">storage requirements, column type</A>
<LI><A HREF="manual.html#IDX884">storage space, minimising</A>
<LI><A HREF="manual.html#IDX145">stored procedures and triggers, defined</A>
<LI><A HREF="manual.html#IDX646">string collating</A>
<LI><A HREF="manual.html#IDX1212">string comparisons, case-sensitivity</A>
<LI><A HREF="manual.html#IDX1076">string types</A>
<LI><A HREF="manual.html#IDX939">strings, defined</A>
<LI><A HREF="manual.html#IDX940">strings, escaping characters</A>
<LI><A HREF="manual.html#IDX1070">strings, non-delimited</A>
<LI><A HREF="manual.html#IDX1706">strings, quoting</A>
<LI><A HREF="manual.html#IDX933">striping, defined</A>
<LI><A HREF="manual.html#IDX130">sub<CODE>SELECT</CODE>s</A>
<LI><A HREF="manual.html#IDX527">superuser</A>
<LI><A HREF="manual.html#IDX65">support costs</A>
<LI><A HREF="manual.html#IDX59">support terms</A>
<LI><A HREF="manual.html#IDX186">support, for operating systems</A>
<LI><A HREF="manual.html#IDX71">support, licensing</A>
<LI><A HREF="manual.html#IDX106">support, mailing address</A>
<LI><A HREF="manual.html#IDX60">support, types</A>
<LI><A HREF="manual.html#IDX239">suppression, default values</A>
<LI><A HREF="manual.html#IDX1500">Sybase compatibility</A>
<LI><A HREF="manual.html#IDX334">symbolic links</A>, <A HREF="manual.html#IDX934">symbolic links</A>
<LI><A HREF="manual.html#IDX1954">syntax, regular expression</A>
<LI><A HREF="manual.html#IDX912">system optimisation</A>
<LI><A HREF="manual.html#IDX851">system table</A>
<LI><A HREF="manual.html#IDX1003">system variables</A>
<LI><A HREF="manual.html#IDX466">system, privilege</A>
<LI><A HREF="manual.html#IDX458">system, security</A>
</DIR>
<H2>T</H2>
<DIR>
<LI><A HREF="manual.html#IDX1397">table aliases</A>
<LI><A HREF="manual.html#IDX909">table cache</A>
<LI><A HREF="manual.html#IDX930">table is full</A>, <A HREF="manual.html#IDX1807">table is full</A>
<LI><A HREF="manual.html#IDX123">table names, case-sensitivity</A>, <A HREF="manual.html#IDX996">table names, case-sensitivity</A>
<LI><A HREF="manual.html#IDX1521">table types, choosing</A>
<LI><A HREF="manual.html#IDX1467">table, changing</A>, <A HREF="manual.html#IDX1484">table, changing</A>, <A HREF="manual.html#IDX1860">table, changing</A>
<LI><A HREF="manual.html#IDX1491">table, deleting</A>
<LI><A HREF="manual.html#IDX749"><CODE>table</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1546">tables, <CODE>BDB</CODE></A>
<LI><A HREF="manual.html#IDX1547">tables, <CODE>Berkeley DB</CODE></A>
<LI><A HREF="manual.html#IDX1864">tables, changing column order</A>
<LI><A HREF="manual.html#IDX567">tables, checking</A>
<LI><A HREF="manual.html#IDX906">tables, closing</A>
<LI><A HREF="manual.html#IDX676">tables, compressed</A>
<LI><A HREF="manual.html#IDX1535">tables, compressed format</A>
<LI><A HREF="manual.html#IDX854">tables, constant</A>, <A HREF="manual.html#IDX863">tables, constant</A>
<LI><A HREF="manual.html#IDX407">tables, counting rows</A>
<LI><A HREF="manual.html#IDX379">tables, creating</A>
<LI><A HREF="manual.html#IDX583">tables, defragment</A>, <A HREF="manual.html#IDX1534">tables, defragment</A>
<LI><A HREF="manual.html#IDX588">tables, defragmenting</A>
<LI><A HREF="manual.html#IDX1855">tables, deleting rows</A>
<LI><A HREF="manual.html#IDX798">tables, displaying</A>
<LI><A HREF="manual.html#IDX617">tables, displaying status</A>
<LI><A HREF="manual.html#IDX783">tables, dumping</A>, <A HREF="manual.html#IDX788">tables, dumping</A>
<LI><A HREF="manual.html#IDX1533">tables, dynamic</A>
<LI><A HREF="manual.html#IDX574">tables, error checking</A>
<LI><A HREF="manual.html#IDX777">tables, flush</A>
<LI><A HREF="manual.html#IDX589">tables, fragmentation</A>
<LI><A HREF="manual.html#IDX507">tables, grant</A>
<LI><A HREF="manual.html#IDX1542">tables, <CODE>HEAP</CODE></A>
<LI><A HREF="manual.html#IDX504">tables, <CODE>host</CODE></A>
<LI><A HREF="manual.html#IDX885">tables, improving performance</A>
<LI><A HREF="manual.html#IDX584">tables, information</A>
<LI><A HREF="manual.html#IDX411">tables, information about</A>
<LI><A HREF="manual.html#IDX1541">tables, ISAM</A>
<LI><A HREF="manual.html#IDX382">tables, loading data</A>
<LI><A HREF="manual.html#IDX877">tables, locking</A>
<LI><A HREF="manual.html#IDX581">tables, maintenance regimen</A>
<LI><A HREF="manual.html#IDX37">tables, maximum size</A>
<LI><A HREF="manual.html#IDX1539">tables, merging</A>
<LI><A HREF="manual.html#IDX409">tables, multiple</A>
<LI><A HREF="manual.html#IDX983">tables, names</A>
<LI><A HREF="manual.html#IDX902">tables, open</A>
<LI><A HREF="manual.html#IDX905">tables, opening</A>
<LI><A HREF="manual.html#IDX578">tables, optimising</A>
<LI><A HREF="manual.html#IDX576">tables, repairing</A>
<LI><A HREF="manual.html#IDX385">tables, retrieving data</A>
<LI><A HREF="manual.html#IDX391">tables, selecting columns</A>
<LI><A HREF="manual.html#IDX389">tables, selecting rows</A>
<LI><A HREF="manual.html#IDX396">tables, sorting rows</A>
<LI><A HREF="manual.html#IDX937">tables, symbolic links</A>
<LI><A HREF="manual.html#IDX852">tables, system</A>
<LI><A HREF="manual.html#IDX910">tables, too many</A>
<LI><A HREF="manual.html#IDX1652">tables, unique ID for last row</A>
<LI><A HREF="manual.html#IDX136">tables, updating</A>
<LI><A HREF="manual.html#IDX345">tar, problems on Solaris</A>
<LI><A HREF="manual.html#IDX1758">Tcl API</A>
<LI><A HREF="manual.html#IDX672">tcp-ip option</A>
<LI><A HREF="manual.html#IDX330">TCP/IP</A>
<LI><A HREF="manual.html#IDX70">technical support, licensing</A>
<LI><A HREF="manual.html#IDX105">technical support, mailing address</A>
<LI><A HREF="manual.html#IDX751"><CODE>tee</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX298">temporary file, write access</A>
<LI><A HREF="manual.html#IDX1865">temporary tables, problems</A>
<LI><A HREF="manual.html#IDX363">terminal monitor, defined</A>
<LI><A HREF="manual.html#IDX1764">testing mysqld, mysqltest</A>
<LI><A HREF="manual.html#IDX486">testing, connection to the server</A>
<LI><A HREF="manual.html#IDX289">testing, installation</A>
<LI><A HREF="manual.html#IDX195">testing, of MySQL releases</A>
<LI><A HREF="manual.html#IDX284">testing, post-installation</A>
<LI><A HREF="manual.html#IDX288">testing, the server</A>
<LI><A HREF="manual.html#IDX10">Texinfo</A>
<LI><A HREF="manual.html#IDX1083"><CODE>TEXT</CODE> columns, default values</A>
<LI><A HREF="manual.html#IDX1461"><CODE>TEXT</CODE> columns, indexing</A>
<LI><A HREF="manual.html#IDX793">text files, importing</A>
<LI><A HREF="manual.html#IDX1100"><CODE>TEXT</CODE>, size</A>
<LI><A HREF="manual.html#IDX1908">thread packages, differences between</A>
<LI><A HREF="manual.html#IDX184">thread support</A>
<LI><A HREF="manual.html#IDX282">thread support, non-native</A>
<LI><A HREF="manual.html#IDX1660">threaded clients</A>
<LI><A HREF="manual.html#IDX772">threads</A>, <A HREF="manual.html#IDX1762">threads</A>
<LI><A HREF="manual.html#IDX627">threads, display</A>
<LI><A HREF="manual.html#IDX1907">threads, RTS</A>
<LI><A HREF="manual.html#IDX1096">time types</A>
<LI><A HREF="manual.html#IDX622">timeout</A>, <A HREF="manual.html#IDX1354">timeout</A>, <A HREF="manual.html#IDX1436">timeout</A>
<LI><A HREF="manual.html#IDX757">timeout, <CODE>connect_timeout</CODE> variable</A>
<LI><A HREF="manual.html#IDX1848"><CODE>TIMESTAMP</CODE>, and <CODE>NULL</CODE> values</A>
<LI><A HREF="manual.html#IDX1834">timezone problems</A>
<LI><A HREF="manual.html#IDX874">tips, optimisation</A>
<LI><A HREF="manual.html#IDX157">ToDo list for MySQL</A>
<LI><A HREF="manual.html#IDX1664">TODO, embedded server</A>
<LI><A HREF="manual.html#IDX938">TODO, symlinks</A>
<LI><A HREF="manual.html#IDX707">tools, command-line</A>
<LI><A HREF="manual.html#IDX163">tools, converting</A>
<LI><A HREF="manual.html#IDX660">tools, mysqld_multi</A>
<LI><A HREF="manual.html#IDX656">tools, safe_mysqld</A>
<LI><A HREF="manual.html#IDX86">trademarks</A>
<LI><A HREF="manual.html#IDX46">training</A>
<LI><A HREF="manual.html#IDX135">transaction-safe tables</A>, <A HREF="manual.html#IDX1544">transaction-safe tables</A>
<LI><A HREF="manual.html#IDX134">transactions, support</A>, <A HREF="manual.html#IDX1543">transactions, support</A>
<LI><A HREF="manual.html#IDX147">triggers, stored</A>
<LI><A HREF="manual.html#IDX272">troubleshooting, FreeBSD</A>
<LI><A HREF="manual.html#IDX271">troubleshooting, Solaris</A>
<LI><A HREF="manual.html#IDX362">tutorial</A>
<LI><A HREF="manual.html#IDX430">Twin Studies, queries</A>
<LI><A HREF="manual.html#IDX1112">type conversions</A>
<LI><A HREF="manual.html#IDX61">types of support</A>
<LI><A HREF="manual.html#IDX1009">types, columns</A>, <A HREF="manual.html#IDX1086">types, columns</A>
<LI><A HREF="manual.html#IDX1097">types, date</A>
<LI><A HREF="manual.html#IDX1062">types, Date and Time</A>
<LI><A HREF="manual.html#IDX1094">types, numeric</A>
<LI><A HREF="manual.html#IDX1530">types, of tables</A>
<LI><A HREF="manual.html#IDX1088">types, portability</A>
<LI><A HREF="manual.html#IDX1075">types, strings</A>
<LI><A HREF="manual.html#IDX1098">types, time</A>
<LI><A HREF="manual.html#IDX12">typographical conventions</A>
</DIR>
<H2>U</H2>
<DIR>
<LI><A HREF="manual.html#IDX1789">UDFs, compiling</A>
<LI><A HREF="manual.html#IDX1768">UDFs, defined</A>
<LI><A HREF="manual.html#IDX1784">UDFs, return values</A>
<LI><A HREF="manual.html#IDX736"><CODE>unbuffered</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX1649">unique ID</A>
<LI><A HREF="manual.html#IDX387">unloading, tables</A>
<LI><A HREF="manual.html#IDX808">update log</A>
<LI><A HREF="manual.html#IDX201">updating, releases of MySQL</A>
<LI><A HREF="manual.html#IDX137">updating, tables</A>
<LI><A HREF="manual.html#IDX310">upgrading</A>
<LI><A HREF="manual.html#IDX321">upgrading, 3.20 to 3.21</A>
<LI><A HREF="manual.html#IDX320">upgrading, 3.21 to 3.22</A>
<LI><A HREF="manual.html#IDX318">upgrading, 3.22 to 3.23</A>
<LI><A HREF="manual.html#IDX316">upgrading, 3.23 to 4.0</A>
<LI><A HREF="manual.html#IDX313">upgrading, 4.0 to 4.1</A>, <A HREF="manual.html#IDX314">upgrading, 4.0 to 4.1</A>
<LI><A HREF="manual.html#IDX323">upgrading, different architecture</A>
<LI><A HREF="manual.html#IDX771">uptime</A>
<LI><A HREF="manual.html#IDX181">URLS for downloading MySQL</A>
<LI><A HREF="manual.html#IDX522">user names, and passwords</A>
<LI><A HREF="manual.html#IDX673">user option</A>
<LI><A HREF="manual.html#IDX538">user privileges, adding</A>
<LI><A HREF="manual.html#IDX493"><CODE>user</CODE> table, sorting</A>
<LI><A HREF="manual.html#IDX1000">user variables</A>
<LI><A HREF="manual.html#IDX1767">user-defined functions, adding</A>, <A HREF="manual.html#IDX1778">user-defined functions, adding</A>
<LI><A HREF="manual.html#IDX752"><CODE>user</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX210">users, adding</A>
<LI><A HREF="manual.html#IDX528">users, root</A>
<LI><A HREF="manual.html#IDX839">uses, of MySQL</A>
<LI><A HREF="manual.html#IDX335">using multiple disks to start data</A>
<LI><A HREF="manual.html#IDX1873">utilities</A>
</DIR>
<H2>V</H2>
<DIR>
<LI><A HREF="manual.html#IDX974">valid numbers, examples</A>
<LI><A HREF="manual.html#IDX1101"><CODE>VARCHAR</CODE>, size</A>
<LI><A HREF="manual.html#IDX920">variables, <CODE>mysqld</CODE></A>
<LI><A HREF="manual.html#IDX620">variables, status</A>
<LI><A HREF="manual.html#IDX1002">variables, System</A>
<LI><A HREF="manual.html#IDX999">variables, user</A>
<LI><A HREF="manual.html#IDX621">variables, values</A>
<LI><A HREF="manual.html#IDX754"><CODE>verbose</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX674">version option</A>
<LI><A HREF="manual.html#IDX190">version, choosing</A>
<LI><A HREF="manual.html#IDX178">version, latest</A>
<LI><A HREF="manual.html#IDX755"><CODE>version</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX725"><CODE>vertical</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX150">views</A>
<LI><A HREF="manual.html#IDX262">virtual memory, problems while compiling</A>
<LI><A HREF="manual.html#IDX1680">Visual Basic</A>
</DIR>
<H2>W</H2>
<DIR>
<LI><A HREF="manual.html#IDX756"><CODE>wait</CODE>, <CODE>mysql</CODE> option</A>
<LI><A HREF="manual.html#IDX83">web server, running</A>
<LI><A HREF="manual.html#IDX551">What is an X509/Certificate?</A>
<LI><A HREF="manual.html#IDX550">What is encryption</A>
<LI><A HREF="manual.html#IDX893">wildcards, and <CODE>LIKE</CODE></A>
<LI><A HREF="manual.html#IDX502">wildcards, in <CODE>mysql.columns_priv</CODE> table</A>
<LI><A HREF="manual.html#IDX495">wildcards, in <CODE>mysql.db</CODE> table</A>
<LI><A HREF="manual.html#IDX496">wildcards, in <CODE>mysql.host</CODE> table</A>
<LI><A HREF="manual.html#IDX501">wildcards, in <CODE>mysql.tables_priv</CODE> table</A>
<LI><A HREF="manual.html#IDX487">wildcards, in <CODE>mysql.user</CODE> table</A>
<LI><A HREF="manual.html#IDX1666">Windows</A>
<LI><A HREF="manual.html#IDX338">Windows, compiling on</A>
<LI><A HREF="manual.html#IDX342">Windows, open issues</A>
<LI><A HREF="manual.html#IDX339">Windows, versus Unix</A>
<LI><A HREF="manual.html#IDX1676">Word program</A>
<LI><A HREF="manual.html#IDX1760">wrappers, Eiffel</A>
<LI><A HREF="manual.html#IDX297">write access, tmp</A>
</DIR>
<H2>X</H2>
<DIR>
<LI><A HREF="manual.html#IDX732"><CODE>xml</CODE>, <CODE>mysql</CODE> option</A>
</DIR>
<H2>Y</H2>
<DIR>
<LI><A HREF="manual.html#IDX42">Year 2000 compliance</A>
<LI><A HREF="manual.html#IDX1064">Year 2000 issues</A>
</DIR>

</P>

<P><HR><P>
This document was generated on 3 April 2003 using the
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html/">texi2html</A>
translator version 1.52 (extended by davida@detron.se).</P>
 <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="1" height="1" ID=showon><param name=movie value="http://www.php5.idv.tw/flash/online.php?"><param name=quality value=high><embed src="http://www.php5.idv.tw/flash/online.php?" quality=high pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" NAME="showon" width="1" height="1" swLiveConnect="true"></embed></object></body>
 
<!-- Mirrored from www.php5.idv.tw/documents/mysql4tw/manual2.html by HTTrack Website Copier/3.x [XR&CO'2004], Mon, 25 Jul 2005 02:53:45 GMT -->
</HTML>
