<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0045)http://www.21andy.com/blog/20100911/1943.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>SCP 命令详解 | Andy's Blog</title>
<link rel="stylesheet" href="./SCP 命令详解_files/all.css" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.21andy.com/blog/feed">
<link rel="alternate" type="text/xml" title="RSS .92" href="http://www.21andy.com/blog/feed/rss">
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://www.21andy.com/blog/feed/atom">
<link rel="pingback" href="http://www.21andy.com/blog/xmlrpc.php">

<script type="text/javascript" src="./SCP 命令详解_files/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="./SCP 命令详解_files/jquery.lightbox-0.5.min.js"></script>
<script type="text/javascript">
$(function() {
	$('.lightbox').lightBox();
});
/* coolcode */
function linenumber(o){if(o.className=="hl-main ln-hide"){o.title="Double click to hide line number.";o.className="hl-main ln-show";}else{o.title="Double click to show line number.";o.className="hl-main ln-hide";}}
</script>

<link rel="alternate" type="application/rss+xml" title="Andy&#39;s Blog &raquo; SCP 命令详解 Comments Feed" href="http://www.21andy.com/blog/20100911/1943.html/feed">
<link rel="stylesheet" id="wp_dlmp_styles-css" href="./SCP 命令详解_files/styles.css" type="text/css" media="all">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.21andy.com/blog/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.21andy.com/blog/wp-includes/wlwmanifest.xml"> 
<link rel="index" title="Andy&#39;s Blog" href="http://www.21andy.com/blog">
<link rel="start" title="终于有Blog了" href="http://www.21andy.com/blog/20050820/2.html">
<link rel="prev" title="Oem7F7 通用完美激活v7.0绿色版 永久激活Windows7/2008" href="http://www.21andy.com/blog/20100906/1942.html">
<link rel="next" title="精彩 PuTTY 中文教程" href="http://www.21andy.com/blog/20100911/1944.html">
<meta name="generator" content="WordPress 3.0.1">
<link rel="shortlink" href="http://www.21andy.com/blog/?p=1943">

<!-- All in One SEO Pack 1.6.12.1 by Michael Torbert of Semper Fi Web Design[277,328] -->
<meta name="description" content="SCP 命令跟 CP">
<meta name="keywords" content="scp,ssh,命令,备份,详解,技术">
<link rel="canonical" href="./SCP 命令详解_files/SCP 命令详解.htm">
<!-- /all in one seo pack -->

<!-- Start Of Script Generated By WP-PostViews 1.50 -->
<script type="text/javascript">
/* <![CDATA[ */
jQuery.ajax({type:'GET',url:'http://www.21andy.com/blog/wp-content/plugins/wp-postviews/wp-postviews.php',data:'postviews_id=1943',cache:false});/* ]]> */
</script>
<!-- End Of Script Generated By WP-PostViews 1.50 -->

<!-- Protected by WP-SpamFree v2.1.1.2 :: JS BEGIN -->
<script type="text/javascript" src="./SCP 命令详解_files/wpsf-js.php"></script> 
<!-- Protected by WP-SpamFree v2.1.1.2 :: JS END -->

<!-- wp thread comment 1.4.9.4.002 -->
<style type="text/css" media="screen">
.editComment, .editableComment, .textComment{ display: inline;}
.comment-childs{border:none;margin: 5px 10px 10px 25px;padding: 10px;background: #EEF3FB;}
.thdrpy {padding: 2px 0;}
.thdrpy a {font-family: Tahoma; font-size: 10px; color: #FFF; background: #78AAFA; padding: 1px 5px;}
#commentform #comment {width: 95%;}
</style>

<style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}</style></head>
<body>

<div id="page">

<div id="header">
	<h1 id="logo"><a href="http://www.21andy.com/blog">Andy's Blog</a></h1>
	<div id="googletj" style="position:absolute;right:20px;top:5px;">
	</div>
</div>

<hr>

<div id="nowplace">
<!-- Breadcrumb, generated by Breadcrumb NavXT 1.10.1 - http://mtekk.weblogs.us/code -->
<a href="http://www.21andy.com/blog" title="Blog">Blog</a>&nbsp;»&nbsp;<a href="http://www.21andy.com/blog/category/technology" title="View all posts in 技术" rel="category tag">技术</a>&nbsp;»&nbsp;SCP 命令详解
</div>
<div id="wrapper" class="fix">
	<div id="main">

  
		<div class="post" id="post-1943">
			<h1><a href="./SCP 命令详解_files/SCP 命令详解.htm" rel="bookmark" title="SCP 命令详解">SCP 命令详解</a></h1>

				<p class="postmeta">
						时间：2010-09-11 16:28:07&nbsp;&nbsp;
						类别：<a href="http://www.21andy.com/blog/category/technology" title="View all posts in 技术" rel="category tag">技术</a>&nbsp;&nbsp;
						访问：46 views&nbsp;&nbsp;
						<a href="http://www.21andy.com/blog/20100911/1943.html/feed">RSS 2.0</a>&nbsp;&nbsp;

													<a href="http://www.21andy.com/blog/20100911/1943.html#respond">评论</a>&nbsp;&nbsp;

										</p>
			<div class="entrytext">
				<p>SCP 命令跟 CP 命令类似，只不过CP命令是在同一台机器上用的，SCP是在2台机器上复制的命令。</p>
<p>举例说明：<br>
复制远程服务器的文件到本地</p>
<div class="hl-surround"><div class="hl-main">scp -P 999 root@21andy.com:/home/test.zip /home/</div></div>
<p>复制本地的目录到远程服务器</p>
<div class="hl-surround"><div class="hl-main">scp -P 999 -r /home/andy/ root@21andy.com:/home/</div></div>
<p><strong>SCP 命令语法</strong><br>
scp [-1245BCpqrv] [-c cipher] [F ssh_config] [-I identity_file] [-l limit] [-o ssh_option] [-P port] [-S program] [[user@]host1:] file1 […] [[suer@]host2:]file2</p>
<p><strong>SCP 命令说明</strong><br>
Scp在主机间复制文件。他使用 ssh(1)作为数据传输。而且用同样认证和安全性。 scp将在认证中请求输入密码所有的文件可能需要服务器和用户的特别描述来指明文件将被复制到/从某台服务器。两个远程登录的服务器间的文件复制是允许的。</p>
<p><strong>SCP 命令选项</strong><br>
-1 强制scp 用协议1<br>
-2 强制scp 用协议2<br>
-4 强制scp用IPV4的网址<br>
-6 强制scp用IPV6的网址<br>
-B 选择批处理模式（防止输入密码）<br>
-C 允许压缩。 标注-C到ssh(1)来允许压缩<br>
-c cipher<br>
       选择cipher来加密数据传输。这个选项直接传递到ssh(1)<br>
-F ssh_config<br>
       设定一个可变动的用户配置给ssh.这个选项直接会被传递到ssh(1)<br>
-i identity_file<br>
       选择被RSA认证读取私有密码的文件。这个选项可以直接被传递到ssh(1)<br>
-l limit<br>
       限制传输带宽，也就是速度 用Kbit/s的速度<br>
-o ssh_option<br>
       可以把ssh_config中的配置格式传到ssh中。这种模式对于说明没有独立的scp文件中断符的scp很有帮助。关于选项的如下。而他们的值请参看ssh_config(5)<br>
-P port<br>
      指定连接远程连接端口。注意这个选项需要写成大写的模式。因为-p已经早保留了次数和模式<br>
-S program<br>
      指定一个加密程序。这个程序必须可读所有ssh(1)的选项。<br>
-p 指定修改次数，连接次数，还有对于原文件的模式<br>
-q 把进度参数关掉<br>
-r 递归的复制整个文件夹<br>
-S program<br>
      指定一个加密程序。这个程序必须可读所有ssh(1)的选项。<br>
-V 冗余模式。 让 scp 和 ssh(1) 打印他们的排错信息， 这个在排错连接，认证，和配置中非常有用。</p>
<p><strong>SCP 命令诊断</strong><br>
scp 返回0 成功时，不成功时返回值大于0</p>
<p><strong>SCP 命令不需要输入用户密码的使用方法</strong></p>
<p>在两台机器的两个用户之间<strong>建立安全的信任关系</strong>后，可实现执行scp命令时不需要输入用户密码。</p>
<p>1. 在机器A上root用户执行 <strong>ssh-keygen</strong> 命令，生成建立安全信任关系的证书。</p>
<div class="hl-surround"><div class="hl-main">[root@A root]# ssh-keygen -b 1024 -t rsa<br>Generating public/private rsa key pair.<br>Enter file in which to save the key (/root/.ssh/id_rsa): &lt;– 直接输入回车<br>Enter passphrase (empty for no passphrase): &lt;– 直接输入回车<br>Enter same passphrase again: &lt;– 直接输入回车<br>Your identification has been saved in /root/.ssh/id_rsa.<br>Your public key has been saved in /root/.ssh/id_rsa.pub.<br>The key fingerprint is: ……</div></div>
<p>注意：在程序提示输入 passphrase 时直接输入回车，表示无证书密码。<br>
上述命令将生成私钥证书 <strong>id_rsa </strong>和公钥证书 <strong>id_rsa.pub</strong>，存放在用户目录的 <strong>.ssh</strong> 子目录中。</p>
<p>2. 将公钥证书 <strong>id_rsa.pub </strong>复制到机器B的root目录的.ssh子目录中，同时将文件名更换为<strong>authorized_keys</strong>。</p>
<div class="hl-surround"><div class="hl-main">[root@A root]# scp -p .ssh/id_rsa.pub root@机器B的IP:/root/.ssh/authorized_keys<br>root@192.168.3.206’s password: &lt;– 输入机器B的root用户密码</div></div>
<p>在执行上述命令时，两台机器的root用户之间还未建立安全信任关系，所以还需要输入机器B的root用户密码。<br>
经过以上2步，就在机器A的root和机器B的root之间建立安全信任关系。下面我们看看效果：</p>
<div class="hl-surround"><div class="hl-main">[root@A root]# scp -p test root@机器B的IP地址:/root</div></div>
<p>成功了！真的不再需要输入密码了。</p>
				<p></p>
<p><strong>Tags: </strong><a href="http://www.21andy.com/blog/tag/scp" rel="tag">SCP</a>, <a href="http://www.21andy.com/blog/tag/ssh" rel="tag">SSH</a>, <a href="http://www.21andy.com/blog/tag/%e5%91%bd%e4%bb%a4" rel="tag">命令</a>, <a href="http://www.21andy.com/blog/tag/%e5%a4%87%e4%bb%bd" rel="tag">备份</a>, <a href="http://www.21andy.com/blog/tag/%e8%af%a6%e8%a7%a3" rel="tag">详解</a></p>								<p>本文地址: <a href="./SCP 命令详解_files/SCP 命令详解.htm" title="SCP 命令详解">http://www.21andy.com/blog/20100911/1943.html</a></p>


			</div>
		</div>

		<div class="navigation">
			<div class="alignleft">» 上一篇：<a href="http://www.21andy.com/blog/20100906/1942.html" rel="prev">Oem7F7 通用完美激活v7.0绿色版 永久激活Windows7/2008</a></div>
			<div class="alignright">» 下一篇：<a href="http://www.21andy.com/blog/20100911/1944.html" rel="next">精彩 PuTTY 中文教程</a></div>
		</div>


	
<!-- You can start editing here. -->


  		<!-- If comments are open, but there are no comments. -->

	 


<div id="commentarea" class="box">

<h3>发表评论</h3>
<div class="con">

<form action="http://www.21andy.com/blog/wp-comments-post.php" method="post" id="commentform">

<p>
<input type="text" name="author" id="author" value="" size="12" tabindex="1">
<label for="author">名字 <strong>*</strong></label>&nbsp;&nbsp;

<input type="text" name="email" id="email" value="" size="22" tabindex="2">
<label for="email">邮箱 <strong>*</strong></label>&nbsp;&nbsp;
<!--
<input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url">网站</label>
-->
</p>


<p><textarea name="comment" id="comment" cols="69" rows="5" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="发表评论">
<input type="hidden" name="comment_post_ID" value="1943">
</p>
	<script type="text/javascript">
	<!--
	refJS = escape( document[ 'referrer' ] );
	document.write("<input type='hidden' name='refJS' value='"+refJS+"'>");
	// -->
	</script><input type="hidden" name="refJS" value="http%3A//www.21andy.com/blog/">
	<noscript></noscript>
<p><input type="hidden" id="comment_reply_ID" name="comment_reply_ID" value="0"><input type="hidden" id="comment_reply_dp" name="comment_reply_dp" value="0"></p><div id="cancel_reply" style="display:none;"><a href="javascript:void(0)" onclick="movecfm(null,0,1,null);" style="color:red;">Cancel</a></div><script type="text/javascript">
/* <![CDATA[ */
var commentformid = "commentform";
var USERINFO = false;
var atreply = "none";
/* ]]> */
</script>
<script type="text/javascript" src="./SCP 命令详解_files/wp-thread-comment.js.php"></script>

</form></div></div>




	
	</div>

</div>

	<!-- begin left side -->
	<div id="side">
	<ul>

		<li id="feeds" class="box">
        <h2><a href="http://feed.21andy.com/" target="_blank">订阅</a></h2>
        <div class="con">
        <ul>
			<li><a href="http://www.google.com/reader/view/feed/http://feeds2.feedburner.com/21andycom" target="_blank"><img border="0" src="./SCP 命令详解_files/icon_subshot01_google.gif" alt="订阅到Google Reader" style="margin-bottom:5px"></a></li>
			<li><a href="http://www.xianguo.com/subscribe.php?url=http://feeds2.feedburner.com/21andycom" target="_blank"><img border="0" src="./SCP 命令详解_files/icon_subshot01_xianguo.gif" alt="订阅到鲜果" style="margin-bottom:5px"></a></li>
			<li><a href="http://www.zhuaxia.com/add_channel.php?url=http://feeds2.feedburner.com/21andycom" target="_blank"><img border="0" src="./SCP 命令详解_files/icon_subshot01_zhuaxia.gif" alt="订阅到抓虾" style="margin-bottom:5px"></a></li>
			<li><a href="http://www.bloglines.com/sub/http://feeds2.feedburner.com/21andycom" target="_blank"><img border="0" src="./SCP 命令详解_files/icon_subshot01_bloglines.gif" alt="订阅到bloglines" style="margin-bottom:5px"></a></li>
			<li><a href="http://add.my.yahoo.com/rss?url=http://feeds2.feedburner.com/21andycom" target="_blank"><img border="0" src="./SCP 命令详解_files/icon_subshot01_yahoo.gif" alt="订阅到my yahoo" style="margin-bottom:5px"></a></li>
			<li><a href="http://www.netvibes.com/subscribe.php?url=http://feeds2.feedburner.com/21andycom" target="_blank"><img border="0" src="./SCP 命令详解_files/icon_subshot01_netvibes.gif" alt="订阅到netvibes" style="margin-bottom:5px"></a></li>
			<li><a href="http://feedburner.google.com/fb/a/mailverify?uri=21andycom&loc=en_US" target="_blank"><img border="0" src="./SCP 命令详解_files/icon_subshot01_email.gif" alt="订阅到Email" style="margin-bottom:5px"></a></li>
                        <li><a href="http://feeds.feedburner.com/21andycom"><img src="./SCP 命令详解_files/21andycom" height="26" width="88" style="border:0" alt=""></a></li>
        </ul>
        </div>
        </li>

		<li id="cats" class="box">
			<h2>分类</h2>
			<div class="con">
				<ul>
											<li class="cat-item cat-item-21"><a href="http://www.21andy.com/blog/category/seo" title="View all posts filed under SEO">SEO</a>
</li>
	<li class="cat-item cat-item-464"><a href="http://www.21andy.com/blog/category/wordpress" title="View all posts filed under wordpress">wordpress</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://www.21andy.com/blog/category/technology" title="View all posts filed under 技术">技术</a>
<ul class="children">
	<li class="cat-item cat-item-22"><a href="http://www.21andy.com/blog/category/technology/php" title="View all posts filed under PHP">PHP</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://www.21andy.com/blog/category/technology/web-standard" title="View all posts filed under WEB标准">WEB标准</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://www.21andy.com/blog/category/technology/other" title="View all posts filed under 其他">其他</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://www.21andy.com/blog/category/technology/domain-hosting" title="View all posts filed under 域名空间">域名空间</a>
</li>
	<li class="cat-item cat-item-2"><a href="http://www.21andy.com/blog/category/technology/shopping-cart" title="View all posts filed under 购物系统">购物系统</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-15"><a href="http://www.21andy.com/blog/category/collection" title="View all posts filed under 收藏">收藏</a>
<ul class="children">
	<li class="cat-item cat-item-11"><a href="http://www.21andy.com/blog/category/collection/sound-code" title="View all posts filed under 源码收藏">源码收藏</a>
</li>
	<li class="cat-item cat-item-16"><a href="http://www.21andy.com/blog/category/collection/website" title="View all posts filed under 网站收藏">网站收藏</a>
</li>
	<li class="cat-item cat-item-18"><a href="http://www.21andy.com/blog/category/collection/script" title="View all posts filed under 脚本收藏">脚本收藏</a>
</li>
	<li class="cat-item cat-item-17"><a href="http://www.21andy.com/blog/category/collection/software" title="View all posts filed under 软件收藏">软件收藏</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-3"><a href="http://www.21andy.com/blog/category/life" title="View all posts filed under 生活">生活</a>
<ul class="children">
	<li class="cat-item cat-item-8"><a href="http://www.21andy.com/blog/category/life/tabloid" title="View all posts filed under 文摘">文摘</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://www.21andy.com/blog/category/life/tikuanyin" title="福建安溪铁观音">铁观音</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://www.21andy.com/blog/category/life/essay" title="View all posts filed under 随笔">随笔</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://www.21andy.com/blog/category/life/media" title="View all posts filed under 音乐电影">音乐电影</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-20"><a href="http://www.21andy.com/blog/category/make-money" title="View all posts filed under 网赚">网赚</a>
</li>
									</ul>
			</div>
		</li>

		<li id="pages" class="box">
			<h2>页面</h2>
			<div class="con">
				<ul>
					<li class="page_item page-item-1636"><a href="http://www.21andy.com/blog/google-custom-search" title="Google Custom Search">Google Custom Search</a></li>
<li class="page_item page-item-606"><a href="http://www.21andy.com/blog/wordpress-download" title="WordPress下载">WordPress下载</a></li>
<li class="page_item page-item-778"><a href="http://www.21andy.com/blog/tag" title="标签云">标签云</a></li>
<li class="page_item page-item-315"><a href="http://www.21andy.com/blog/guestbook" title="留言本">留言本</a></li>
<li class="page_item page-item-313"><a href="http://www.21andy.com/blog/sitemap" title="网站地图">网站地图</a></li>
<li class="page_item page-item-764"><a href="http://www.21andy.com/blog/downloads" title="资源下载">资源下载</a></li>
<li class="page_item page-item-16"><a href="http://www.21andy.com/blog/about-me" title="我是谁">我是谁</a></li>
<li class="page_item page-item-15"><a href="http://www.21andy.com/blog/yantai-yangmadao" title="烟台&middot;养马岛">烟台·养马岛</a></li>
				</ul>
			</div>
		</li>


	</ul>
	</div>
	<!-- end left side -->



	<hr>
	<div id="footer" class="fix">
		<p>
			© 2000-2010 <a href="http://www.21andy.com/">21Andy.com</a> All Rights Reserved. <a href="http://www.21andy.com/blog/feed">Entry RSS</a>&nbsp;&nbsp;<a href="http://www.21andy.com/blog/comments/feed">Comment RSS</a>
			<br>powered by <a rel="nofollow" href="http://wordpress.org/">WordPress</a> 33 queries. 0.116 seconds.
			&nbsp;&nbsp;<a href="http://www.21andy.com/blog/feed/" target="_blank">Subscribe RSS</a>&nbsp;&nbsp;
			<script type="text/javascript" src="./SCP 命令详解_files/count.js"></script><script src="./SCP 命令详解_files/stat.php" language="JavaScript" charset="gb2312"></script><a href="http://www.cnzz.com/stat/website.php?web_id=644492" target="_blank" title="站长统计"><img border="0" hspace="0" vspace="0" src="./SCP 命令详解_files/pic.gif"></a><img src="./SCP 命令详解_files/stat.htm" border="0" width="0" height="0">

		</p>

	</div>

</div>




<!-- Dynamic page generated in 0.116 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2010-09-14 16:28:48 -->
<!-- super cache --></body></html>